!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0d925203-941b-4171-bdb4-aad0c2d22df9",e._sentryDebugIdIdentifier="sentry-dbid-0d925203-941b-4171-bdb4-aad0c2d22df9")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"b5bd925e"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2911],{10571:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(81073),i=n(7868),o=n(19316),l=n(27023),a=n(4616),u=n(85389),c=n(52351);function s(e){var t=e.count,n=e.children,i=e.tooltip,s=e.small,f=(0,o.$)(t);return(0,r.FD)(u.S,{"aria-label":i,"data-microtip-position":"left",role:"tooltip",css:[l.wp.color.foregroundDimmer,{userSelect:"none",lineHeight:1}],row:!0,gap:4,align:"center",children:[(0,r.Y)(c.Z_,{size:s?12:void 0,children:n}),(0,r.Y)(a.EY,{variant:s?"small":void 0,color:"dimmer",multiline:!1,children:f})]})}var f=n(55352),d=n(13028);function p(e){var t=e.repl;return(0,r.FD)(u.S,{row:!0,gap:16,align:"center",children:[(0,r.Y)(s,{small:!0,count:t.publicForkCount,tooltip:(0,i.A)("remix",t.publicForkCount),children:(0,r.Y)(d.A,{})}),(0,r.Y)(s,{small:!0,count:t.likeCount,tooltip:(0,i.A)("like",t.likeCount),children:(0,r.Y)(f.A,{})})]})}},11536:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(17844),i=n(93629),o=n(81073),l=n(52351);function a(e){return(0,o.Y)(l.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{d:"M20.76 4.47a19.848 19.848 0 0 0-4.951-1.524c-.234.419-.446.85-.634 1.29a18.439 18.439 0 0 0-5.495 0c-.19-.44-.4-.871-.635-1.29A19.99 19.99 0 0 0 4.09 4.474C.957 9.11.107 13.63.532 18.087a19.96 19.96 0 0 0 6.073 3.05c.491-.662.926-1.364 1.3-2.098a12.916 12.916 0 0 1-2.048-.978c.172-.125.34-.253.502-.377a14.266 14.266 0 0 0 12.142 0 7.1 7.1 0 0 0 .502.377c-.654.386-1.34.714-2.052.98.373.734.808 1.435 1.3 2.095a19.868 19.868 0 0 0 6.077-3.047c.498-5.168-.851-9.647-3.568-13.62ZM8.443 15.347c-1.183 0-2.161-1.074-2.161-2.396 0-1.321.944-2.405 2.157-2.405 1.214 0 2.184 1.084 2.164 2.405-.021 1.322-.954 2.396-2.16 2.396Zm7.974 0c-1.186 0-2.16-1.074-2.16-2.396 0-1.321.944-2.405 2.16-2.405 1.215 0 2.178 1.084 2.157 2.405-.02 1.322-.951 2.396-2.157 2.396Z"})}))}},12546:(e,t,n)=>{"use strict";n.d(t,{Df:()=>g,xS:()=>p});var r=n(17844),i=n(12584),o=n(41114),l=n(86997),a=n(78638),u=n(27641);function c(){var e=(0,i._)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n      editFileContents {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return s=function(){return e},e}function f(){var e=(0,i._)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var d={},p=(0,o.J1)(c(),a.c,u.E),h=(0,o.J1)(s(),a.N),v=(0,o.J1)(f(),h);function g(e){var t=(0,r._)({},d,e);return l.I(v,t)}},14596:(e,t,n)=>{"use strict";n.d(t,{DO:()=>r,sV:()=>o,uZ:()=>i});var r=function(e){return e.NotFound="NOT_FOUND",e.ParseError="PARSE_ERROR",e.Disconnected="DISCONNECTED",e.Unknown="UNKOWN_ERROR",e}({}),i=function(e){return e.ChannelClosed="CHANNEL_CLOSED",e.JSONParseError="JSON_PARSE_ERROR",e.NotFound="NOT_FOUND",e.TOMLParseError="TOML_PARSE_ERROR",e.OpType="OP_TYPE",e.CouldNotWrite="COULD_NOT_WRITE",e.ReadLine="COULD_NOT_READ_LINE",e.Unknown="UNKNOWN_ERROR",e}({}),o=function(e){return e.CHANGE="CHANGE",e.CHANNEL_OPENED="CHANNEL_OPENED",e}({})},19202:(e,t,n)=>{"use strict";n.d(t,{e:()=>d});var r=n(81073),i=n(42793),o=n(36937),l=n(27023),a=n(4616),u=(0,i.AH)([l.wp.flex.shrink(1),l.wp.fontSize("inherit"),{lineHeight:"inherit"}]),c=(0,i.AH)([u,l.wp.truncate]),s=(0,i.AH)([u]),f={normal:{matched:o.LU.foregroundDefault,unmatched:o.LU.foregroundDimmer},dimmed:{matched:o.LU.foregroundDimmer,unmatched:o.LU.foregroundDimmest}};function d(e){var t,n,i,l,u=null==(l=e.highlight)?void 0:l.filter(function(e){return e.to>0}),d=e.dimmed?f.dimmed:f.normal;return(null==u?void 0:u.length)?(0,r.Y)(a.EY,{className:e.className,css:e.multiline?s:c,children:(t=e.text,n=0,i=[],u.forEach(function(e){var r=e.from,o=e.to,l=t.slice(n,r);l&&i.push({text:l,match:!1});var a=t.slice(r,o);a&&i.push({text:a,match:!0}),n=o}),n<t.length&&i.push({text:t.slice(n),match:!1}),i).map(function(e,t){return(0,r.Y)("span",{style:{fontWeight:e.match?o.LU.fontWeightBold:o.LU.fontWeightRegular,color:e.match?d.matched:d.unmatched},children:e.text},e.text+t)})}):(0,r.Y)(a.EY,{className:e.className,style:{color:d.matched},css:e.multiline?s:c,children:e.text})}},22089:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(81073),i=n(41358),o=n(66246),l=n.n(o);function a(e){var t=e.className,n=e.children;return(0,r.Y)(i.ui,{elevated:!0,tag:"span",px:4,clsx:[l().surface,t],children:n})}},22115:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,l:()=>r});var r="https://twitter.com/intent/tweet";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,n=e.url,i=e.hashtags,o=e.via,l=new URLSearchParams;t&&l.append("text",t),n&&l.append("url",n),i&&l.append("hashtags",i.join(",")),o&&l.append("via",o);var a=l.toString();return a.length>0?"".concat(r,"?").concat(a):r}},25588:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(17844),i=n(93629),o=n(81073),l=n(52351);function a(e){return(0,o.Y)(l.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M11.47 4.47a.75.75 0 0 1 1.06 0l7 7a.75.75 0 1 1-1.06 1.06l-5.72-5.72V19a.75.75 0 0 1-1.5 0V6.81l-5.72 5.72a.75.75 0 0 1-1.06-1.06l7-7Z",clipRule:"evenodd"})}))}},27641:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(12584);function i(){var e=(0,r._)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,n(41114).J1)(i())},35479:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i,v:()=>o});var r=n(41467),i=function(e){return e.Media="Media",e.Binary="Binary",e.Code="Code",e.Markdown="Markdown",e.Draw="Draw",e.Pedit="Pedit",e}({});function o(e){return(0,r.e$)(e)?"Markdown":(0,r.P1)(e)?"Draw":(0,r.rb)(e)?"Pedit":(0,r.FN)(e)?"Media":(0,r.Go)(e)?"Binary":"Code"}},39229:(e,t,n)=>{"use strict";n.d(t,{J:()=>c});var r=n(21462),i=n(95707),o=n(3171),l=n(86139),a=n(71424),u=n(50301),c=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,a.A)().dotReplit,n=(0,l.$)(t),c=(0,u.xi)();return(0,r.useCallback)(function(t){return!!(0,o.yU)(t)||!!e&&!c&&((0,o.rp)(t)||(0,i.RZ)(t)||(0,i._L)(t)||(0,o.Mo)(t,n))},[c,n,e])}},40604:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var r=n(81073),i=n(70871),o=n(43303),l=n(18509),a=n(27023),u=n(11769),c=n(86733),s=n(83070),f=n(22089),d=n(4616),p=n(78626),h=n(85389),v=n(1035),g=n(41526),m=n(17844),y=n(93629),w=n(52351),b=function(e){return(0,r.Y)(w.Ay,(0,y._)((0,m._)({viewBox:"0 0 800.5 907.77"},e),{children:(0,r.Y)("path",{d:"M303.36,238.61c31.36-21.37,71.76-12.97,65-6.53c-12.89,12.28,4.26,8.65,6.11,31.31 c1.36,16.69-4.09,25.88-8.78,31.11c-9.79,1.28-21.69,3.67-36.02,8.33c-8.48,2.76-15.85,5.82-22.31,8.9 c-1.7-1.11-3.55-2.47-5.74-4.36C279.5,288.19,280.24,254.37,303.36,238.61 M490.68,370.72c5.69-4.41,31.55-12.72,55.49-15.55 c12.57-1.48,30.49-2.34,34.31-0.2c7.59,4.19,7.59,17.16,2.39,29.14c-7.57,17.4-18.27,36.63-30.39,38.21 c-19.77,2.61-38.46-8.09-59.8-24.03C485.06,392.56,480.38,378.68,490.68,370.72 M526.75,201.27c29.19,13.58,25.37,39.42,26.18,54.6 c0.22,4.36,0.15,7.3-0.22,9.32c-4.04-2.19-10.43-3.8-20.56-3.35c-2.96,0.12-5.84,0.47-8.63,0.91c-10.77-5.77-17.21-17.06-23.1-29.06 c-0.54-1.11-0.96-2.1-1.36-3.06c-0.17-0.44-0.35-0.91-0.52-1.31c-0.07-0.22-0.12-0.39-0.2-0.59c-3.23-10.25-1.06-12.3,0.3-15.46 c1.41-3.23,6.68-5.89-1.11-8.58c-0.67-0.25-1.5-0.39-2.44-0.57C500.25,197.72,515.7,196.17,526.75,201.27 M367.62,510.22 c-31.45-20.19-63.99-49.15-78.22-65.18c-2.39-1.8-2-9.79-2-9.79c12.84,9.98,66.11,48.04,122.44,65.42 c19.87,6.14,50.36,8.46,76.81-6.53c20.21-11.46,44.54-31.43,59.06-52.01l2.66,4.61c-0.1,3.06-6.78,17.97-10.18,23.96 c6.14,3.53,10.72,4.49,17.55,6.36l46.64-7.27c16.74-27.04,28.74-70.65,15.95-112.16c-7.3-23.81-45.36-71.22-48.09-73.83 c-9.56-9.19,1.6-44.69-17.35-83.42C532.86,159.41,480.67,116.69,458,98.1c6.68,4.88,47.82,21.47,67,44.62 c1.8-2.39,2.54-14.82,4.19-17.97c-16.47-21.57-17.75-59.95-17.75-70.21c0-18.81-9.56-40.13-9.56-40.13s16.47,13.04,20.73,35.5 c5.03,26.6,15.75,47.55,29.93,65.28c26.84,33.43,51.08,50.58,63.33,38.23C630.53,138.58,601,72.2,563.28,35.15 C519.25-8.09,507.74-2.52,481.91,6.7c-20.61,7.35-31.75,65.87-85.47,64.71c-9.1-1.06-32.54-1.63-44.13-1.53 c6.04-8.43,11.22-14.94,11.22-14.94s-18.02,7.25-33.38,16.44l-1.18-1.77c5.18-10.92,10.75-17.82,10.75-17.82s-14.4,8.65-27.54,19.01 c2.39-13.02,11.44-21.27,11.44-21.27s-18.19,3.28-41.36,28.77c-26.33,7.2-32.66,11.93-53.64,21.22 c-34.12-7.44-50.21-19.45-65.55-41.56c-11.68-16.89-32.47-19.45-53.71-10.72c-30.97,12.8-70.14,30.33-70.14,30.33 s12.77-0.52,26.08,0.05c-18.22,6.9-35.72,16.39-35.72,16.39s8.53-0.3,19.06-0.12c-7.27,6.04-11.29,8.92-18.22,13.51 c-16.66,12.1-30.17,26.08-30.17,26.08s11.31-5.15,21.47-8.04c-7.1,16.27-21.18,28.25-18.59,48.17 c2.49,18.19,24.82,55.66,53.64,78.66c2.49,2,41.86,38.43,71.56,23.47c29.68-14.94,41.39-28.25,46.27-48.66 c5.74-23.44,2.47-41.17-9.79-92.05c-4.04-16.79-14.57-51.37-19.65-67.91l1.13-0.81c9.71,20.49,34.56,74.5,44.57,110.78 c15.63,56.57,10.75,85.27,3.6,95.79c-21.57,31.73-76.84,35.92-101.98,18.34c-3.85,60.91,9.76,87.73,14.37,101.24 c-2.29,15.53,7.77,44.37,7.77,44.37s1.13-13.11,5.74-20.02c1.23,15.41,9,33.72,9,33.72s-0.47-11.31,3.06-21.08 c4.98,8.43,8.63,10.43,13.34,16.76c4.71,16.47,14.15,28.5,14.15,28.5s-1.53-8.83-0.69-18.02c23.05,22.14,27.02,54.45,29.31,79.28 c6.46,68.26-107.63,122.54-129.74,165.24c-16.76,25.29-26.8,65.3,1.58,88.89c68.6,56.97,42.25,72.65,76.59,97.69 c47.11,34.34,106.05,18.96,126.11-8.97c27.93-38.92,20.76-75.63,10.38-109.97c-8.11-26.85-30.15-71.46-57.41-88.72 c-27.86-17.65-54.95-20.95-77.9-18.59l2.12-2.44c33.01-6.56,67.52-2.96,92.49,13.14c28.35,18.22,54.28,49.47,67.84,97.37 c15.38-2.19,17.55-3.18,31.63-5.18l-31.7-246.76L367.62,510.22z M385.94,819.52l-3.65-34.22l71.29-108.74l80.93,23.64l69.59-116.23 L687.52,639l63.38-132.92l22.53,242.07L385.94,819.52z M774.27,456.51l-254.72,46.17c-6.31,8.13-21.91,22.41-29.41,26.13 c-32.17,16.2-53.91,11.51-72.7,6.63c-12.08-3.06-19.08-4.78-29.11-9.29l-62.17,8.53l37.74,314.87l436.35-78.66L774.27,456.51z"})}))},x=n(99998),D=(0,l.x)({styles0:[{alignItems:"center"}],styles1:[a.wp.align.center]});function S(e){var t=e.replId,n=e.showFlag,l=e.buttonsOnly,a=(0,o.D)().isDarkColorScheme;return(0,r.FD)(r.FK,{children:[(0,r.Y)(c.v,{href:"https://us5.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(t)}).toString(),iconLeft:(0,r.Y)(b,{color:a?"#FFFFFF":"#632CA6"}),iconRight:(0,r.Y)(v.A,{}),target:"_blank",text:"View Datadog Logs by Repl ID"}),(0,r.Y)(c.v,{href:"https://us5.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(t),agg_q:"@containerid",agg_q_source:"base",cols:"host,service",messageDisplay:"inline",stream_sort:"desc",top_n:"30",top_o:"top",viz:"transaction",x_missing:"true",live:"true"}).toString(),iconLeft:(0,r.Y)(b,{color:a?"#FFFFFF":"#632CA6"}),iconRight:(0,r.Y)(v.A,{}),target:"_blank",text:"View Datadog Logs by Container ID"}),void 0!==l&&l?(0,r.Y)(p.m_,{maxWidth:300,tooltip:(0,r.Y)(d.EY,{multiline:!1,children:t}),children:(0,r.Y)(u.$n,{iconLeft:(0,r.Y)(g.A,{}),text:"Copy Repl ID",onClick:function(){return(0,i.default)(t)}})}):(0,r.FD)(h.S,{css:D.styles0,row:!0,gap:2,children:[void 0!==n&&n?(0,r.FD)(p.m_,{tooltip:"You are seeing this functionality because you have special permissions.",children:[(0,r.Y)(x.A,{})," "]}):null,(0,r.FD)(d.EY,{css:D.styles1,multiline:!1,children:["Repl ID: ",(0,r.Y)(f.R,{children:t})]}),(0,r.Y)(s.K0,{alt:"Copy to clipboard",onClick:function(){return(0,i.default)(t)},children:(0,r.Y)(g.A,{})})]})]})}},45287:(e,t,n)=>{"use strict";n.d(t,{PX:()=>i});var r=n(684),i=function(e){return e.UNTRACKED="UNTRACKED",e.UNMODIFIED="UNMODIFIED",e.MODIFIED="MODIFIED",e.TYPE_CHANGED="TYPE_CHANGED",e.ADDED="ADDED",e.DELETED="DELETED",e.RENAMED="RENAMED",e.COPIED="COPIED",e.UNMERGED="UNMERGED",e}({}),o=r.ZU.Enum(i),l=r.ZU.Object({type:r.ZU.Object({index:o,worktree:o}),path:r.ZU.String(),staged:r.ZU.Boolean(),unmerged:r.ZU.Boolean(),source:r.ZU.Optional(r.ZU.Object({type:r.ZU.Union([r.ZU.Literal("RENAMED"),r.ZU.Literal("COPIED")]),score:r.ZU.Number(),path:r.ZU.String()}))});r.ZU.Object({commit:r.ZU.Union([r.ZU.String(),r.ZU.Null()]),branch:r.ZU.Union([r.ZU.String(),r.ZU.Null()]),upstream:r.ZU.Union([r.ZU.Null(),r.ZU.Object({branch:r.ZU.String(),ahead:r.ZU.Number(),behind:r.ZU.Number()})]),stashes:r.ZU.Number(),changes:r.ZU.Array(l)})},45330:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(21462).createContext)(null)},46023:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r={brand:{darkBlue:"#0D101E",lightBlue:"#68CDEE",gray:"#6D7D84"},main:{green:{dark:"#0A6640",default:"#0F9960",light:"#3DCC91",25:"rgba(15,153,96,0.25)",15:"rgba(15,153,96,0.15)"},red:{dark:"#A82A2A",default:"#DB3737",light:"#FF7373",25:"rgba(219, 55, 55, 0.25)",15:"rgba(219, 55, 55, 0.15)"},blue:{dark:"#0068AD",default:"#0097FB",light:"#73C4FA",25:"rgba(0, 151, 251, 0.25)",15:"rgba(0, 151, 251, 0.15)"},orange:{dark:"#A14809",default:"#E16D1A",light:"#FC9C58",25:"rgba(225, 109, 26, 0.25)",15:"rgba(225, 109, 26, 0.15)"},purple:{dark:"#6213B1",default:"#9D43F7",light:"#BF80FF",25:"rgba(98, 19, 177, 0.25)",15:"rgba(98, 19, 177, 0.15)"},gold:{dark:"#A67908",default:"#D99E0B",light:"#FFC940",25:"rgba(217, 158, 11, 0.25)",15:"rgba(217, 158, 11, 0.15)"}},neutrals:{black:"#21242C",white:"#FFFFFF",offWhite:"#F7F8FA",black64:"rgba(33, 36, 44, 0.64)",black50:"rgba(33, 36, 44, 0.50)",black16:"rgba(33, 36, 44, 0.16)",black8:"rgba(33, 36, 44, 0.08)",white64:"rgba(255, 255, 255, 0.64)",white50:"rgba(255, 255, 255, 0.50)",white16:"rgba(255, 255, 255, 0.16)",white8:"rgba(255, 255, 255, 0.08)"},multiplayer:{green:"#1BC47D",red:"#EF5533",blue:"#18A0FB",purple:"#907CFF",teal:"#00B5CE",pink:"#EE46D3"},languages:{java:"#b07219",scheme:"#1e4aec",clojure:"#db5855",haskell:"#5e5086",lua:"#000080",ruby:"#701516",python:"#3572A5",go:"#00ADD8",cpp:"#f34b7d",c:"#555555","c#":"#178600","f#":"#b845fc",rust:"#dea584",swift:"#ffac45",r:"#198CE7",bash:"#000000",crystal:"#000100",julia:"#a270ba",elixir:"#6e4a7e",nim:"#37775b",dart:"#00B4AB",erlang:"#B83998",typescript:"#2b7489",elisp:"#c065db",sql:"#e34c26",php:"#4F5D95",html:"#e34c26",css:"#563d7c",javascript:"#f1e05a"},brands:{github:"#181717",twitter:"#00A8FF",discord:"#7289DA",facebook:"#3B5998",linkedin:"#0077B5"}}},47877:(e,t,n)=>{"use strict";n.d(t,{o:()=>s});var r=n(29935),i=n(12694),o=n(82643),l=n(41467),a=n(7769),u=n(38674),c=n(33090);function s(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,s,f,d,p,h,v,g;function m(){return(m=(0,r._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:if("function"==typeof t)return[2,t()];return[4,t.getConfig()];case 1:return[2,null==(e=n.sent().config)?void 0:e.entrypoint]}})})).apply(this,arguments)}function y(){return(y=(0,r._)(function(){var e,t;return(0,o.YH)(this,function(r){switch(r.label){case 0:if(!(e=d))return[2,null];if(!(0,l._6)(e))return[2,v.includes(e)?e:null];return[4,n.stat(e)];case 1:return[2,(t=r.sent()).exists&&t.type===c.pt.File?e:null]}})})).apply(this,arguments)}return(0,o.YH)(this,function(r){switch(r.label){case 0:return t=e.dotReplit,[4,Promise.all([(n=e.fs).readDir(u.Dl),function(){return m.apply(this,arguments)}()])];case 1:if(f=(s=i._.apply(void 0,[r.sent(),2]))[0],d=s[1],!f||f.error)throw Error("Could not read files");return h=(p=f.children).find(function(e){return e.type===c.pt.File&&e.filename.toLowerCase().endsWith("readme.md")}),v=p.filter(function(e){return e.type===c.pt.File}).map(function(e){return e.filename}),[4,function(){return y.apply(this,arguments)}()];case 2:if(g=r.sent())return[2,{entrypoint:g,readmeFile:null==h?void 0:h.filename}];return[2,{entrypoint:function(e){var t=e.find(function(e){return e.toLowerCase().endsWith("readme.md")});if(t)return t;if(e.includes("Makefile"))return"Makefile";var n=e.find(l.e$);return n||e.find(function(e){return![".replit","replit.nix"].includes(e)&&!(0,a.RZ)(e)&&!(0,a._L)(e)})}(v),readmeFile:null==h?void 0:h.filename}]}})})).apply(this,arguments)}},48238:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(17844),i=n(93629),o=n(81073),l=n(52351);function a(e){return(0,o.Y)(l.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M2.25 4.5A2.25 2.25 0 0 1 4.5 2.25h15a2.25 2.25 0 0 1 2.25 2.25v3c0 .576-.217 1.102-.573 1.5.356.398.573.924.573 1.5v3c0 .576-.217 1.102-.573 1.5.356.398.573.924.573 1.5v3a2.25 2.25 0 0 1-2.25 2.25h-11a2.25 2.25 0 0 1-2.25-2.25v-3c0-.576.217-1.102.573-1.5a2.242 2.242 0 0 1-.573-1.5v-3c0-.263.045-.515.128-.75H4.5A2.25 2.25 0 0 1 2.25 7.5v-3ZM19.5 8.25a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-15a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h15Zm-11 1.5a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h11a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-11Zm11 6h-11a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h11a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75Z",clipRule:"evenodd"})}))}},50301:(e,t,n)=>{"use strict";n.d(t,{CP:()=>b,J0:()=>d.J0,Q4:()=>w.Q4,xi:()=>a.xi,Ne:()=>a.Ne,rM:()=>d.rM,gp:()=>a.gp,vO:()=>d.vO,u6:()=>a.u6,eg:()=>a.eg,F9:()=>y,W9:()=>s,xu:()=>a.xu,Qd:()=>a.Qd,RF:()=>m,gi:()=>f,Av:()=>a.Av});var r=n(81073),i=n(12694),o=n(21462),l=n(76957),a=n(67057),u=n(63492),c=(0,l.eU)(null);function s(){return(0,u.h)(c)}function f(){return(0,u.ob)(c)}var d=n(64237),p=n(35992),h=n(27741),v=(0,l.eU)(new Map),g=(0,l.eU)(null,function(e,t,n){t(v,function(e){return(0,p.jM)(e,function(e){n.indicatorType?e.set(n.paneType,n.indicatorType):e.delete(n.paneType)})})});function m(){return(0,u.ob)(g)}function y(e){var t=e.paneType;return(0,u.h)((0,h.A)(function(){return(0,l.eU)(function(e){return t?e(v).get(t):void 0})},[t]))}var w=n(72457);function b(e){var t,n=(t=e.isAgentOnboarding,(0,i._)((0,o.useState)(function(){var e=(0,l.y$)();return t&&e.set(a.QQ,!0),e}),1)[0]);return(0,r.Y)(u.IC.Provider,{value:n,children:e.children})}},52629:(e,t,n)=>{"use strict";function r(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(t.width=e.width,t.height=e.height,!n)throw Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map(function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return n.putImageData(i,0,0),t.toDataURL()})}}function i(e){return new Promise(function(t,n){var r=new window.Image;r.src=e,r.onload=function(){t(r)},r.onerror=n})}function o(e){return new Promise(function(t,n){Promise.all(e.frames.map(i)).then(function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(!o)return void n(Error("failed to get canvas ctx"));t({frames:r.map(function(t){return o.drawImage(t,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}),preview:e.frames[0],width:e.width,height:e.height})}).catch(n)})}n.d(t,{L:()=>r,t:()=>o})},54781:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(17844),i=n(93629),o=n(81073),l=n(52351);function a(e){return(0,o.FD)(l.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fill:"url(#paint0_linear_7101_264)",fillRule:"evenodd",d:"M24 3.429a3.429 3.429 0 1 0-6.857 0 3.429 3.429 0 0 0 6.857 0ZM6.857 12A3.429 3.429 0 1 0 0 12a3.429 3.429 0 0 0 6.857 0ZM3.43 0a3.429 3.429 0 0 1 3.428 3.429v.027a5.143 5.143 0 0 0 5.14 5.115H12a3.429 3.429 0 1 1 0 6.858h-.007a5.143 5.143 0 0 0-5.136 5.116v.026a3.429 3.429 0 1 1-3.428-3.428h.004a5.143 5.143 0 0 0-.005-10.286 3.429 3.429 0 0 1 0-6.857Zm12 3.429a3.429 3.429 0 1 0-3.43 3.428 5.143 5.143 0 0 1 .005 10.286H12a3.429 3.429 0 1 0 3.429 3.428v-.027a5.143 5.143 0 0 1 5.135-5.115h.007a3.429 3.429 0 1 0 0-6.858h-.003a5.143 5.143 0 0 1-5.14-5.106V3.43Zm5.142 13.714a3.429 3.429 0 1 1 0 6.857 3.429 3.429 0 0 1 0-6.857Z",clipRule:"evenodd"}),(0,o.Y)("defs",{children:(0,o.FD)("linearGradient",{id:"paint0_linear_7101_264",x1:"0",x2:"24",y1:"0",y2:"24",gradientUnits:"userSpaceOnUse",children:[(0,o.Y)("stop",{stopColor:"#A694FF"}),(0,o.Y)("stop",{offset:"1",stopColor:"#795EFF"})]})})]}))}},55100:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(21462),i=n(45330);function o(){var e=(0,r.useContext)(i.A);if(!e)throw Error("Expected Repl info to be in context");return e.id}},55352:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(17844),i=n(93629),o=n(81073),l=n(52351);function a(e){return(0,o.Y)(l.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M14.558 2.724A6.25 6.25 0 0 1 23.202 8.5a6.249 6.249 0 0 1-1.832 4.42l-8.84 8.84a.75.75 0 0 1-1.06 0l-8.84-8.84a6.251 6.251 0 1 1 8.84-8.84l.53.53.53-.53a6.25 6.25 0 0 1 2.028-1.356ZM20.31 5.14a4.75 4.75 0 0 0-6.72 0L12.53 6.2a.75.75 0 0 1-1.06 0l-1.06-1.06a4.751 4.751 0 0 0-6.72 6.72L12 20.17l8.31-8.31a4.752 4.752 0 0 0 0-6.72Z",clipRule:"evenodd"})}))}},62252:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(17844),i=n(93629),o=n(81073),l=n(52351);function a(e){return(0,o.Y)(l.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M4 21.75A2.75 2.75 0 0 1 1.25 19V5A2.75 2.75 0 0 1 4 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H20A2.75 2.75 0 0 1 22.75 8v1.213c.835.559 1.34 1.56 1.2 2.643l-.98 7.5a2.75 2.75 0 0 1-2.726 2.394H4ZM3.116 4.116A1.25 1.25 0 0 1 4 3.75h4.599l1.777 2.666A.75.75 0 0 0 11 6.75h9A1.25 1.25 0 0 1 21.25 8v.75H5.256a2.75 2.75 0 0 0-2.506 1.617V5c0-.332.132-.65.366-.884ZM4.278 20.25h15.966a1.25 1.25 0 0 0 1.24-1.088l.978-7.5a1.25 1.25 0 0 0-1.24-1.412H5.256a1.25 1.25 0 0 0-1.24 1.088l-.978 7.5a1.25 1.25 0 0 0 1.24 1.412Z",clipRule:"evenodd"})}))}},63166:(e,t,n)=>{"use strict";n.d(t,{A:()=>y});var r=n(83846),i=n(17844),o=n(93629),l=n(81073),a=n(18509),u=n(15311),c=n(27023),s=n(22422),f=n(78626),d=n(85389),p=(0,u.v)(["size","fontSize","listGap","iconTextGap","avatarOverlap","tooltipFontSize"]),h=p.styleTokens,v=p.cssVars,g=(0,a.x)({avatarsRow:[{"& > *":{marginLeft:"calc(-0.4 * ".concat(h.size,")")},"& > *:first-child":{marginLeft:0}}],countCirlce:[c.wp.center,c.wp.overflow("hidden"),c.wp.backgroundColor.backgroundDefault,c.wp.color.foregroundDimmer,c.wp.px(2),{borderRadius:"50%",minWidth:h.size,height:h.size,fontSize:h.fontSize}],tooltop:[{gap:h.listGap,gridTemplateColumns:"repeat(auto-fill, 200px)"}],tooltipText:[c.wp.truncate,c.wp.color.foregroundDimmer,{paddingLeft:h.iconTextGap,fontSize:h.tooltipFontSize}],stackItem:[]}),m={12:{fontSize:8,listGap:2,iconTextGap:2,tooltipAvatarSize:12,tooltipFontSize:8},16:{fontSize:10,listGap:2,iconTextGap:2,tooltipAvatarSize:16,tooltipFontSize:10},24:{fontSize:12,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:12},32:{fontSize:14,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:14},40:{fontSize:16,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14},48:{fontSize:24,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14}};function y(e){var t,n,a,u,c,p,h,y,w,b=e.activeUsers,x=e.visibleNumOfUsers,D=void 0===x?3:x,S=e.size,_=void 0===S?24:S,U=b.length,A=(w={},(0,r._)(w,v.size,_+"px"),(0,r._)(w,v.fontSize,(null!=(c=null==(t=m[_])?void 0:t.fontSize)?c:_)+"px"),(0,r._)(w,v.listGap,(null!=(p=null==(n=m[_])?void 0:n.listGap)?p:8)+"px"),(0,r._)(w,v.iconTextGap,(null!=(h=null==(a=m[_])?void 0:a.iconTextGap)?h:8)+"px"),(0,r._)(w,v.tooltipFontSize,(null!=(y=null==(u=m[_])?void 0:u.tooltipFontSize)?y:14)+"px"),w),E=U>D,C=b.slice(0,E?D-1:D);return(0,l.Y)(f.m_,{tooltip:(0,l.Y)(d.S,{css:g.tooltop,style:A,children:b.map(function(e){var t;return(0,l.FD)(d.S,{row:!0,gap:2,align:"center",children:[(0,l.Y)(s.e,{size:(null==(t=m[_])?void 0:t.tooltipAvatarSize)||_,src:e.image||null,ringColor:e.color,username:e.username},e.id),(0,l.Y)(d.S,{css:g.tooltipText,grow:!0,shrink:!0,children:e.username})]},e.username)})}),children:function(e,t){return(0,l.FD)(d.S,(0,o._)((0,i._)({},e),{tag:"ul",innerRef:t,css:g.avatarsRow,row:!0,style:A,children:[C.map(function(e,t){return(0,l.Y)(d.S,{tag:"li",style:{zIndex:t+1},css:g.stackItem,children:(0,l.Y)(s.e,{size:_,src:e.image||null,ringColor:e.color,username:e.username})},e.id)}),E?(0,l.Y)(d.S,{tag:"li",css:g.stackItem,style:{zIndex:C.length},children:(0,l.Y)(d.S,{css:g.countCirlce,children:(0,l.FD)(d.S,{children:["+",U-D+1]})})}):null]}))}})}},63816:(e,t,n)=>{"use strict";n.d(t,{D:()=>M});var r=n(83846),i=n(12694),o=n(81073),l=n(21462),a=n(41467),u=n(38674),c=n(33090),s=n(32331),f=n(71424),d=n(75267),p=n(39229),h=n(42793),v=n(36937),g=n(18509),m=n(85051),y=n(15311),w=n(27023),b=n(43813),x=n(36075),D=n(41358),S=n(85389),_=n(54613),U=n(2188);function A(e){var t=e.node;return t.type===c.pt.Directory?(0,o.Y)(U.A,{size:12}):(0,o.Y)(b.A,{size:12,path:t.path})}var E=(0,y.v)(["menuY","menuX"]),C=E.cssVars,P=E.styleTokens,R=(0,g.x)({root:[w.wp.maxHeight(400),w.wp.position.absolute,w.wp.borderRadius(8),w.wp.shadow(3),{border:"1px solid",borderColor:v.LU.outlineDefault,top:P.menuY,left:P.menuX,"& > div":[w.wp.maxHeight(400)]}]}),Y=(0,h.AH)([m.b.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),F={button:(0,h.AH)([w.wp.reset.button,w.wp.p(2),w.wp.rowWithGap(4),w.wp.align.center,Y]),text:(0,h.AH)({fontSize:v.LU.fontSizeSmall})},k={opacity:1};function I(e){var t,n=e.node,c=e.openFile,f=e.expandable,d=void 0===f||f,p=(0,i._)((0,l.useState)(!1),2),h=p[0],v=p[1],g=(0,l.useRef)(null),m=(0,s.A)(function(e){var t;h&&(e.target instanceof HTMLElement&&(null==(t=g.current)?void 0:t.contains(e.target))||v(!1))},[h]),y=(0,l.useId)(),w=(0,l.useId)(),b=(0,a._6)(n.path)||u.Dl,_=(0,a.WP)(n.path);function U(){var e,t=null==(e=g.current)?void 0:e.getBoundingClientRect();t&&d&&v({x:t.x+"px",y:t.y+t.height+4+"px"})}return(0,o.FD)(o.FK,{children:[(0,o.FD)(S.S,{innerRef:g,tag:"button",id:y,style:h?k:void 0,"aria-haspopup":"true","aria-expanded":!!h,"aria-controls":w,css:F.button,onClick:function(){d&&(h?v(!1):U())},onKeyDown:function(e){switch(e.key){case" ":case"Enter":case"ArrowDown":if(!d)return;U()}},children:[(0,o.Y)(A,{node:n}),(0,o.Y)(S.S,{css:F.text,children:_})]}),h&&d?(0,o.Y)(x.Z,{children:(0,o.Y)(D.ui,{id:w,css:R.root,innerRef:m,style:(t={},(0,r._)(t,C.menuX,h.x),(0,r._)(t,C.menuY,h.y),t),onKeyDown:function(e){if("Escape"===e.key){var t;v(!1),null==(t=g.current)||t.focus()}},children:(0,o.Y)(T,{openFile:c,parentPath:b,currentPath:n.path,readOnly:e.readOnly})})}):null]})}function T(e){var t=(0,f.A)().fs,n=(0,p.J)(!0),r=(0,l.useCallback)(function(e){return!n(e.filename)},[n]),i=(0,d.u)({fs:t,filter:r,focusedPath:e.currentPath,fontSize:13,root:e.parentPath,manageWidth:!0,onFileSelect:function(t){var n=t.path;e.openFile(n)},alwaysShowCreateRow:!0,readOnly:e.readOnly});return(0,o.Y)(d.J,{store:i.store})}var z=(0,h.AH)([w.wp.flex.row,w.wp.align.center,w.wp.height("100%"),w.wp.px(2)]),M=(0,l.memo)(function(e){var t,n,r=e.path,i=e.onFileClick,a=e.expandable,u=void 0===a||a,s=e.readOnly,f=e.children,d=(n=(t=r.split("/")).length,t.map(function(e,r){return{type:r===n-1?c.pt.File:c.pt.Directory,path:t.slice(0,r+1).join("/")}}));return(0,o.FD)(S.S,{css:z,children:[d.map(function(e){return(0,o.FD)(l.Fragment,{children:[(0,o.Y)(I,{node:e,openFile:i,expandable:u,readOnly:s}),e.type===c.pt.Directory?(0,o.Y)(_.A,{size:12}):null]},CSS.escape(e.path))}),f||null]})})},64237:(e,t,n)=>{"use strict";n.d(t,{Af:()=>f,EZ:()=>u,J0:()=>o,rM:()=>c,vO:()=>s});var r=n(76957),i=n(63492),o=(0,r.eU)(null),l=(0,r.eU)(function(e){var t=e(o);return(null==t?void 0:t.isVisible)?t.path:null}),a=(0,r.eU)(null,function(e,t,n,r){switch(r.type){case"focus":return void t(o,{hasFocus:!0,isVisible:!0,position:r.position,path:n});case"update":return void t(o,{hasFocus:r.hasFocus,isVisible:!0,position:r.position,path:n});case"blur":return void t(o,function(e){var t;return{hasFocus:!1,isVisible:!!(null==e?void 0:e.isVisible),position:null!=(t=null==e?void 0:e.position)?t:{line:1,column:1,offset:0},path:n}});case"unmount":return void t(o,null);case"hidden":return void t(o,function(e){var t;return{hasFocus:!1,isVisible:!1,position:null!=(t=null==e?void 0:e.position)?t:{line:1,column:1,offset:0},path:n}});case"unhidden":return void t(o,function(e){var t;return{hasFocus:!!(null==e?void 0:e.hasFocus),isVisible:!0,position:null!=(t=null==e?void 0:e.position)?t:{line:1,column:1,offset:0},path:n}})}});function u(){return(0,i.ob)(a)}function c(){return(0,i.h)(l)}function s(){return(0,i.Ou)(o)}function f(){return(0,i.AI)(o)}},66246:e=>{e.exports={surface:"InlineCode_surface__XllZg"}},67057:(e,t,n)=>{"use strict";n.d(t,{Av:()=>b,Cv:()=>P,Ne:()=>E,QQ:()=>x,Qd:()=>y,eg:()=>D,gp:()=>S,nb:()=>A,rN:()=>U,u6:()=>m,xi:()=>h,xu:()=>v});var r=n(12694),i=n(86105),o=n(21462),l=n(76957),a=n(69737),u=n(26072),c=n(55100),s=n(30908),f=n(63492),d=(0,a.KU)(function(){return{getItem:function(e){return s.A.get(e,"string")},setItem:function(e,t){return s.A.set(e,t)},removeItem:function(e){return s.A.remove(e)}}}),p=(0,a.tG)("areHiddenFilesVisible",!1,d);function h(){return(0,f.h)(p)}function v(){return(0,f.ob)(p)}var g=(0,l.eU)(null);function m(){return(0,f.Ou)(g)}function y(){return(0,f.ob)(g)}var w=(0,l.eU)((0,u.F)(!1));function b(){return(0,f.h)(w)}var x=(0,l.eU)(!1);function D(){return(0,f.h)(x)}function S(){var e=(0,f.ob)(x);return(0,o.useCallback)(function(){return e(!1)},[e])}var _=(0,l.eU)(!1);function U(){return(0,f.h)(_)}function A(){return(0,f.ob)(_)}function E(){var e=(0,c.A)(),t=e?"".concat("auth-blueprint-approved",":").concat(e):null;return[!!t&&"true"===s.A.get(t,"string"),(0,o.useCallback)(function(e){t&&s.A.set(t,e?"true":"false")},[t])]}var C=(0,l.eU)([]);function P(e){var t=(0,c.A)(),n=(0,f.h)(C),l=(0,f.ob)(C),a="ws-tool-added-to-dock:".concat(e,":").concat(t),u=(0,r._)((0,o.useState)(function(){return s.A.get(a,"string")}),2),d=u[0],p=u[1],h=(0,o.useCallback)(function(t){s.A.set(a,t),p(t),"was-added-by-agent"!==t||n.includes(e)||l((0,i._)(n).concat([e]))},[a,n,l,e]),v=(0,o.useCallback)(function(){h("callout-dismissed"),l(n.filter(function(t){return t!==e}))},[n,e,l,h]);return{toolState:d,setToolState:h,dismissCallout:v,showCallout:"was-added-by-agent"===d&&n.length>0&&n[0]===e}}},67382:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(17844),i=n(93629),o=n(81073),l=n(52351);function a(e){return(0,o.Y)(l.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M20.593 10.91a1.25 1.25 0 0 1 0 2.18l-14.48 8.145a1.25 1.25 0 0 1-1.863-1.09V3.855a1.25 1.25 0 0 1 1.863-1.09l14.48 8.146Z",clipRule:"evenodd"})}))}},67843:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(17844),i=n(93629),o=n(81073),l=n(52351);function a(e){return(0,o.Y)(l.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M12 4.25a.75.75 0 0 1 .75.75v12.19l5.72-5.72a.75.75 0 1 1 1.06 1.06l-7 7a.75.75 0 0 1-1.06 0l-7-7a.75.75 0 1 1 1.06-1.06l5.72 5.72V5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},68373:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n(95707),i=n(38674);function o(e){var t=e.siblingNames,n=e.fileName,o=e.initialValue,l=e.parentPath;if(n.includes("/"))return"File names cannot include forward slashes";if("."===n||".."===n)return'File names cannot be "'.concat(n,'"');if(n.match(/^\s/)||n.match(/\s$/))return"File names cannot start or end with whitespace";if(o!==n&&t.includes(n))return"A file or folder with that name already exists";if(n.length>100)return"File names cannot be longer than 100 characters";var a=l===i.Dl?n:l+"/"+n;return(0,r.RZ)(a)?'"'.concat(a,'" is reserved'):null}},70633:(e,t,n)=>{"use strict";function r(e){return Math.log(e)*Math.LOG10E+1|0}function i(e,t,n){return Math.floor(Math.min(t,Math.max(e,n)))}n.d(t,{E:()=>i,V:()=>r})},72457:(e,t,n)=>{"use strict";n.d(t,{Q4:()=>P,DJ:()=>U,q6:()=>I});var r=n(29935),i=n(12694),o=n(86105),l=n(82643),a=n(21462),u=n(23099),c=n.n(u),s=n(35992),f=n(76957),d=n(69737),p=n(96907),h=n.n(p),v=n(12584);function g(){var e=(0,v._)(["\n  query WorkspaceSessionPresence($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return g=function(){return e},e}var m=(0,n(41114).J1)(g()),y=n(78502),w=n(27741),b=n(81869),x=n(77562),D=n(63492),S=(0,f.eU)(new Map),_=(0,f.eU)(null,function(e,t,n){return t(S,function(e){return(0,s.jM)(e,function(e){e.set(n.userId,n.color)})})});function U(){var e=(0,D.Ou)(E),t=(0,D.ob)(_);return(0,a.useCallback)(function(n){var r,i=e(),o=null==(r=i.get(n.userId))?void 0:r.color;return o||t({color:o=(0,x.a4)(Object.values(i)),userId:n.userId}),o},[e,t])}function A(e,t,n,r){var i=r||{timestamp:Math.floor(Date.now()/1e3),activeFile:null},l=e.get(t.id);if(l)return void l.sessions.set(t.session,i);e.set(t.id,{id:t.id,username:t.name,color:null!=n?n:(0,x.a4)((0,o._)(e.values())),roles:t.roles,sessions:new Map([[t.session,i]])})}var E=(0,f.eU)(new Map),C=((0,d.mg)(E,function(e){var t=new Map,n=!0,r=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var u=(0,i._)(l.value,2)[1],c=null,s=!0,f=!1,d=void 0;try{for(var p,h=u.sessions[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){var v=(0,i._)(p.value,2)[1];v.activeFile&&(c&&c.timestamp>v.timestamp||(c=v))}}catch(e){f=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(f)throw d}}if(null==c?void 0:c.activeFile){var g=t.get(c.activeFile),m={id:u.id,username:u.username,image:u.image,color:u.color,roles:u.roles};g?g.push(m):t.set(c.activeFile,[m])}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t},c()),(0,d.mg)(E,function(e){return(0,o._)(e.values()).map(function(e){return{id:e.id,username:e.username,color:e.color,image:e.image,roles:e.roles}})},c()));function P(){return(0,D.h)(C)}function R(e){var t=e.id,n=e.name,r=e.session,i=e.roles;return t&&n&&r&&i?{id:t,name:n,session:r,roles:i}:null}function Y(e){var t=e.seconds,n=e.nanos;return"number"!=typeof t||"number"!=typeof n?null:(0,x.iY)({seconds:t,nanos:n})}var F=(0,f.eU)(null,function(e,t,n,r){t(E,function(t){return(0,s.jM)(t,function(t){var o;if(null==(o=n.roster)?void 0:o.user){var l=!0,a=!1,u=void 0;try{for(var c,s=n.roster.user[Symbol.iterator]();!(l=(c=s.next()).done);l=!0){var f=c.value,d=R(f);if(null!==d&&(null==d?void 0:d.id)!==r){var p=function(e,t){if(!e.files)return null;var n=e.files.find(function(e){return e.userId===t.id&&e.session===t.session});if(!n)return null;var r=n.timestamp?Y(n.timestamp):null;return r?{activeFile:n.file||null,timestamp:r}:null}(n.roster,d),h=e(S).get(d.id);A(t,d,h,p)}}}catch(e){a=!0,u=e}finally{try{l||null==s.return||s.return()}finally{if(a)throw u}}return}if(n.join){var v=R(n.join);if(!v||v.id===r)return;var g=e(S).get(v.id);A(t,v,g);return}if(n.part){var m,y,w=n.part,b=w.id,x=w.session;if(!b||!x)return;m={id:b,session:x},(y=t.get(m.id))&&(1===y.sessions.size?t.delete(m.id):y.sessions.delete(m.session));return}if(n.fileOpened){var D=n.fileOpened,_=D.session,U=D.userId,E=D.file,C=n.fileOpened.timestamp?Y(n.fileOpened.timestamp):null;if(!C||!_||!U||!E)return;var P={timestamp:C,session:_,userId:U,file:E},F=t.get(P.userId);if(F){var k=F.sessions.get(P.session);k?(k.timestamp=P.timestamp,k.activeFile=P.file):F.sessions.set(P.session,{timestamp:P.timestamp,activeFile:P.file})}return}if(n.sessionTimestampUpdated){var I=n.sessionTimestampUpdated.session,T=n.sessionTimestampUpdated.timestamp?Y(n.sessionTimestampUpdated.timestamp):null;if(!T||!I)return;!function(e,t){var n=t.session,r=t.timestamp,o=!0,l=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=(0,i._)(u.value,2)[1].sessions.get(n);if(s){s.timestamp=r;break}}}catch(e){l=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(l)throw a}}}(t,{timestamp:T,session:I});return}})})}),k=(0,f.eU)(null,function(){var e=(0,r._)(function(e,t){var n,r,o,a,u,c,f,d,p,h,v;return(0,l.YH)(this,function(l){switch(l.label){case 0:n=[],r=e(E),o=!0,a=!1,u=void 0;try{for(c=r[Symbol.iterator]();!(o=(f=c.next()).done);o=!0)p=(d=(0,i._)(f.value,2))[0],d[1].image||n.push(p)}catch(e){a=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}if(!n.length)return[2];return[4,null===b.V||void 0===b.V?void 0:b.V.query({query:m,variables:{userIds:n}})];case 1:if(!(v=null==(h=l.sent())?void 0:h.data.usersByIds))return[2];return t(E,function(e){return(0,s.jM)(e,function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=v[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var l=i.value,a=e.get(l.id);a&&(a.image=l.image)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}})}),[2]}})});return function(t,n){return e.apply(this,arguments)}}());function I(){var e=(0,y.T)(),t=(0,D.ob)(k),n=(0,D.ob)(F),r=(0,D.AI)(E);return(0,a.useEffect)(function(){t();var e=h()(t,2e3);return r.subscribe(function(){return e()})},[t,r]),(0,w.A)(function(){return function(t){e&&n(t,e)}},[n,e])}},75267:(e,t,n)=>{"use strict";n.d(t,{J:()=>ro,u:()=>ri});var r,i,o,l,a,u=n(83846),c=n(86105),s=n(81073),f=n(21462),d=n(33090),p=n(7814),h=n(81986),v=n(29935),g=n(12694),m=n(82643),y=n(76957),w=n(41467),b=n(35992),x=n(69737),D=n(95707),S=n(38674),_=n(5855),U=n(3171),A=n(88645),E="No files",C="Loading...";function P(e,t){var n=t.fromIndex;if("next"===t.dir){for(var r=n+1;r<e.length;r++){var i=e[r];if(i&&("dir"===i.type||"file"===i.type))return i}return null}for(var o=n-1;o>=0;o--){var l=e[o];if(l&&("dir"===l.type||"file"===l.type))return l}return null}function R(e,t,n){if(n){var r=D.ap.includes(t.filename),i=D.ap.includes(e.filename);if(r&&!i)return -1;if(!r&&i)return 1;var o=D.UC.includes(t.filename),l=D.UC.includes(e.filename);if(o&&!l)return -1;if(!o&&l)return 1}return t.type===d.pt.Directory&&e.type!==d.pt.Directory?1:e.type===d.pt.Directory&&t.type!==d.pt.Directory?-1:(0,w.yh)(e.filename,t.filename)}function Y(e){var t=e.row,n=e.baseDepth;return"dir"===t.type||"file"===t.type||"uploadFile"===t.type?t.path===S.Dl?0:(0,w.jP)(t.path)-1-n:t.dir===S.Dl?0:(0,w.jP)(t.dir)-n}var F=function(e,t){return e===S.Dl?t:e+"/"+t},k=function(e,t){return e===S.Dl&&1===(0,w.jP)(t)||(0,_.GG)(e,t)},I=(0,y.eU)(new Map),T=(0,y.eU)({width:0,height:0}),z=(0,y.eU)(0),M=(0,y.eU)(null),L=(0,y.eU)(new Map),O=(0,y.eU)(function(e){var t;return null!=(t=e(V).root)?t:S.Dl}),N=(0,y.eU)(null),Z=(0,y.eU)(void 0),H=(0,y.eU)(null),W=(0,y.eU)(null,function(e,t,n){e(q)||t(H,n)}),j=(0,y.eU)(function(e){var t=e(V).root,n=void 0===t?S.Dl:t;return n===S.Dl?0:(0,w.jP)(n)}),B=(0,y.eU)(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0,i=!0,o=!1,l=void 0;try{for(var a,u=(0,c._)(e.values()).sort(function(e,t){return e.index-t.index})[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var s=a.value,f={height:s.height,y:s.y,cols:[]};if(n.push(f),0!==s.depth){var d=s.depth+t;d>r&&(r=d);for(var p="divider"===s.row.type||"error"===s.row.type||"create"===s.row.type||"emptyDir"===s.row.type?s.row.dir:(0,w._6)(s.row.path),h=p.split("/"),v=0;v<(0,w.jP)(p);v++){var m=h.slice(0,Number(v+1)).join("/");f.cols.push(m)}}}}catch(e){o=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}for(var y=new Map,b=t;b<r;b++){var x=[];y.set(b,x);var D=!0,S=!1,_=void 0;try{for(var U,A=n[Symbol.iterator]();!(D=(U=A.next()).done);D=!0){var E=U.value,C=E.cols[b],P=E.y;if(C){var R=x[x.length-1];R&&R.y+R.height===P?R.height+=E.height:x.push({y:P,height:E.height,dir:C,depth:b-t})}}}catch(e){S=!0,_=e}finally{try{D||null==A.return||A.return()}finally{if(S)throw _}}}var Y=[],F=!0,k=!1,I=void 0;try{for(var T,z=y[Symbol.iterator]();!(F=(T=z.next()).done);F=!0){var M=(0,g._)(T.value,2),L=(M[0],M[1]);Y.push.apply(Y,(0,c._)(L))}}catch(e){k=!0,I=e}finally{try{F||null==z.return||z.return()}finally{if(k)throw I}}return Y}(e(L),e(j))}),G=(0,y.eU)(!1),K=(0,y.eU)(null,function(e,t,n){var r=new Map,i=e(ev),o=e(j),l=!0,a=!1,u=void 0;try{for(var c,s=n.rows[Symbol.iterator]();!(l=(c=s.next()).done);l=!0){var f=c.value,d=f.key.toString(),p=i[f.index];if(p){var h=Math.max(0,Y({row:p,baseDepth:o}));r.set(f.index,{y:f.start+8,height:f.size,index:f.index,key:d,depth:h,row:p})}}}catch(e){a=!0,u=e}finally{try{l||null==s.return||s.return()}finally{if(a)throw u}}t(L,r),t(z,n.scrollHeight+16)}),V=(0,y.eU)({}),X=(0,x.mg)(V,function(e){var t;return null!=(t=e.onContextMenu)?t:null}),q=(0,y.eU)(function(e){return!!e(V).readOnly||!e(G)}),J=(0,y.eU)(function(e){var t;return null!=(t=e(V).fontSize)?t:14}),Q=function(e,t){if("divider"===t)switch(e){case 10:return 28;case 12:case 13:case 14:return 38;case 18:return 44;default:return 48}switch(e){case 10:return 18;case 12:case 13:return 24;case 14:return 32;case 18:return 38;default:return 40}},$=(0,y.eU)(function(e){return Q(e(J),"file")}),ee=function(e){switch(e){case 10:case 12:return 12;case 13:case 14:return 16;case 18:return 20;default:return 24}},et=(0,y.eU)(function(e){return ee(e(J))}),en=(0,y.eU)(function(e){return 14>e(J)?4:8}),er=(0,y.eU)(function(e){return 14>=e(J)?4:8}),ei=(0,y.eU)(function(e){return 13===e(J)?6:16>e(J)?4:8}),eo=function(e){switch(e){case 10:return 10;case 12:case 13:case 14:return 12;case 18:return 14;default:return 18}},el=function(e){switch(e){case 10:return 12;case 12:case 13:return 16;case 14:return 24;case 18:return 32;default:return 40}},ea=(0,y.eU)(function(e){return el(e(J))}),eu=(0,y.eU)(function(e){return eo(e(J))}),ec=function(e){switch(e){case 10:case 12:case 13:return 10;case 14:case 18:return 16;default:return 20}},es=(0,y.eU)(function(e){return ec(e(J))}),ef=(0,y.eU)(new Map);function ed(e){var t=e.filename;return D.ap.includes(t)?"Config files":D.UC.includes(t)?"Packager files":null}var ep=(0,y.eU)([]),eh=(0,y.eU)([]),ev=(0,y.eU)(function(e){var t,n,r=e(V),i=r.filter,o=r.alwaysShowCreateRow,l=r.root,a=void 0===l?S.Dl:l,u=r.sort,s=r.readOnly;return function(e){var t=e.root,n=void 0===t?S.Dl:t,r=e.dirInfo,i=e.filter,o=e.sort,l=e.getSection,a=e.readOnly,u=e.pendingUploads,s=e.pendingMoves,f=e.pathBeingRenamed,p=e.alwaysShowCreateRow,h=[],v=(null==u?void 0:u.length)?function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var a=o.value,u=(0,w._6)(a.targetPath)||S.Dl,c=t.get(u),s={filename:(0,w.WP)(a.targetPath),progress:a.progress};c?c.push(s):t.set(u,[s])}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return t}(u):null,m=new Map,y=new Map;if(null==s?void 0:s.length){var b=!0,x=!1,D=void 0;try{for(var _,E=s[Symbol.iterator]();!(b=(_=E.next()).done);b=!0){var C=_.value,P=C.from,R=C.to;m.set(P.path,P.type),y.set(R,P.type)}}catch(e){x=!0,D=e}finally{try{b||null==E.return||E.return()}finally{if(x)throw D}}}return!function e(t){var u=r.get(t);if(!(!u||m.has(t))&&u.expanded){if(t===n&&u.loading&&!u.children)return void h.push({type:"dir",path:t});if(u.error)return void h.push({type:"error",message:u.error.message,dir:t});var s=u.children?(0,c._)(u.children):void 0;(s=null==s?void 0:s.filter(function(e){return!(0,U.yU)(e.filename)}))&&m.size>0&&(s=s.filter(function(e){return!m.has(F(t,e.filename))}));var b=!0,x=!1,D=void 0;try{for(var _,E=y[Symbol.iterator]();!(b=(_=E.next()).done);b=!0)!function(){var e=(0,g._)(_.value,2),n=e[0],r=e[1];if(!k(t,n))return;var i=(0,w.WP)(n);if(null==s?!void 0:!s.some(function(e){return e.filename===i}))s||(s=[]),s.push({filename:i,type:r})}()}catch(e){x=!0,D=e}finally{try{b||null==E.return||E.return()}finally{if(x)throw D}}var C=null==v?void 0:v.get(t);if(C){s||(s=[]);var P=!0,R=!1,Y=void 0;try{for(var I,T=C[Symbol.iterator]();!(P=(I=T.next()).done);P=!0){var z=I.value,M=z.filename,L=z.progress;s.push({filename:M,type:d.pt.File,progress:L})}}catch(e){R=!0,Y=e}finally{try{P||null==T.return||T.return()}finally{if(R)throw Y}}}if(s){if(!u.create&&!C&&s&&0===s.length)return void h.push({type:a?"emptyDir":"create",dir:t});var O=function(e,t){var n=t.getSection,r=[],i=new Map,o=!0,l=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,f=n(s),p=s.progress?{type:"upload",progress:s.progress,filename:s.filename}:{type:s.type===d.pt.File?"file":"dir",filename:s.filename};if(!f){r.push(p);continue}var h=i.get(f);if(h){h.push(p);continue}i.set(f,[p])}}catch(e){l=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(l)throw a}}var v=!0,m=!1,y=void 0;try{for(var w,b=i[Symbol.iterator]();!(v=(w=b.next()).done);v=!0){var x=(0,g._)(w.value,2),D=x[0],S=x[1];r.push({type:"divider",label:D}),(0,A.Yv)(r,S)}}catch(e){m=!0,y=e}finally{try{v||null==b.return||b.return()}finally{if(m)throw y}}return r}(s.filter(i).sort(function(e,r){return o(e,r,t===n)}),{getSection:t===S.Dl?l:function(){return null}}),N=-1,Z=!0,H=!1,W=void 0;try{for(var j,B=O[Symbol.iterator]();!(Z=(j=B.next()).done);Z=!0)!function(){var n=j.value;if("error"===n.type||"emptyDir"===n.type)throw Error("Expected dir, file, or divider row");if("divider"===n.type)return -1===N&&(N=h.length),h.push({type:"divider",dir:t,label:n.label});var i=F(t,n.filename);if("dir"===n.type){var o={type:"dir",path:i};f===i&&(o.rename=!0),y.has(i)&&(o.pending=!0);var l=null==v?void 0:v.get(i);if(l&&(o.uploadProgress=l.map(function(e){return e.progress})),h.push(o),!r.get(i))return;e(i)}else if("upload"===n.type)h.push({type:"uploadFile",path:i,progress:n.progress});else if(!C||!C.some(function(e){return e.filename===n.filename})){var a={type:"file",path:i};f===i&&(a.rename=!0),y.has(i)&&(a.pending=!0),h.push(a)}}()}catch(e){H=!0,W=e}finally{try{Z||null==B.return||B.return()}finally{if(H)throw W}}if(u.create||p){var G={type:"create",dir:t,fileType:u.create?u.create:void 0};-1===N?h.push(G):h.splice(N,0,G)}}}}(n),h}({root:a,dirInfo:e(ef),filter:i,sort:void 0===u?R:u,readOnly:void 0!==s&&s,getSection:ed,pendingUploads:e(ep),pathBeingRenamed:null!=(t=e(H))?t:void 0,pendingMoves:null!=(n=e(eh))?n:void 0,alwaysShowCreateRow:o})}),eg=(0,y.eU)(function(e){var t=e(M);if(!t)return null;var n=e(ev).findIndex(function(e){return("file"===e.type||"dir"===e.type)&&e.path===t});return -1!==n?n:null}),em=(0,y.eU)(null,function(e,t,n){var r,i=e(eg),o=e(M);if((null==(r=document.activeElement)?void 0:r.tagName)!=="INPUT"&&null!==i&&null!==o){var l=e(ev);switch(n.key){case"ArrowDown":n.preventDefault();var a=P(l,{dir:"next",fromIndex:i});((null==a?void 0:a.type)==="dir"||(null==a?void 0:a.type)==="file")&&t(M,a.path);return;case"ArrowUp":n.preventDefault();var u=P(l,{dir:"previous",fromIndex:i});((null==u?void 0:u.type)==="dir"||(null==u?void 0:u.type)==="file")&&t(M,u.path);return;case"ArrowLeft":case"ArrowRight":n.preventDefault();var c=e(ef).get(o);if(!c)return;"ArrowLeft"===n.key&&c.expanded?t(eb,o):"ArrowRight"!==n.key||c.expanded||t(eD,o);return;case"Enter":case" ":if("Enter"===n.key&&!e(q))return;if(e(ef).has(o))return void t(eS,o);e(V).onFileSelect({event:n,path:o,type:"keydown"});return}}}),ey=(0,y.eU)(null,function(e,t,n){var r;n.path===(null!=(r=e(V).root)?r:S.Dl)&&t(G,!0),t(ef,function(e){return(0,b.jM)(e,function(e){var t=n.path===S.Dl?null:n.path+"/",r=!0,i=!1,o=void 0;try{for(var l,a=n.children[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u,c=l.value,s=t?t+c.filename:c.filename,f=e.get(s);if(c.type!==d.pt.Directory){f&&(null==(u=f.disposeWatcher)||u.call(f),e.delete(s));continue}f||e.set(s,{expanded:!1})}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}var p=e.get(n.path);p&&(p.children=n.children,p.loading=!1,p.error=void 0)})})}),ew=(0,y.eU)(null,function(e,t,n){var r;n.path===(null!=(r=e(V).root)?r:S.Dl)&&t(G,!0),t(ef,function(e){return(0,b.jM)(e,function(e){var t,r=e.get(n.path);r&&(r.loading=!1,r.error=n.error,null==(t=r.disposeWatcher)||t.call(r),r.disposeWatcher=null)})})}),eb=(0,y.eU)(null,function(e,t,n){var r=Array.isArray(n)?n:[n];t(ef,function(e){return(0,b.jM)(e,function(e){var t=!0,n=!1,i=void 0;try{for(var o,l=r[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var a=o.value,u=e.get(a);u&&(u.expanded=!1,u.loading=!1,u.disposeWatcher&&(u.disposeWatcher(),u.disposeWatcher=null))}}catch(e){n=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw i}}})})}),ex=(0,y.eU)(null,function(e,t,n){t(ef,function(e){return(0,b.jM)(e,function(e){var t,r=e.get(n);r&&(null==(t=r.disposeWatcher)||t.call(r),e.delete(n))})})}),eD=(0,y.eU)(null,function(e,t,n){var r=Array.isArray(n)?n:[n],i=e(V).fs;t(ef,function(e){return(0,b.jM)(e,function(e){var n=!0,o=!1,l=void 0;try{for(var a,u=r[Symbol.iterator]();!(n=(a=u.next()).done);n=!0)!function(){var n,r=a.value,o=null!=(n=e.get(r))?n:{expanded:!0};e.has(r)?o.expanded=!0:e.set(r,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(r,{onError:function(e){return t(ew,{path:r,error:e})},onChange:function(e){return t(ey,{path:r,children:e})},onMoveOrDelete:function(){return t(ex,r)}})}()}catch(e){o=!0,l=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw l}}})})}),eS=(0,y.eU)(null,function(e,t,n){var r=e(ef).get(n);if(!r){t(ef,function(e){return(0,b.jM)(e,function(e){e.set(n,{expanded:!1})})}),t(eD,n);return}t(r.expanded?eb:eD,n)}),e_=(0,y.eU)(function(e){return e(V).manageWidth?e(G)?function(e){var t=e.rows,n=e.baseDepth,r=[],i=new Map,o=!0,l=!1,a=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,f=function(e){var t=e.row,n=Y({row:t,baseDepth:e.baseDepth});switch(t.type){case"file":case"dir":case"uploadFile":return{text:(0,w.WP)(t.path),depth:n};case"error":return{text:t.message,depth:n};case"divider":return{text:t.label,depth:n};case"create":case"emptyDir":return{text:E,depth:n}}}({row:s,baseDepth:n}),d=f.depth,p=f.text,h=i.get(d);if(!h){i.set(d,new Map([[s.type,p]]));continue}var v=h.get(s.type);v&&(null==v?void 0:v.length)>p.length||h.set(s.type,p)}}catch(e){l=!0,a=e}finally{try{o||null==c.return||c.return()}finally{if(l)throw a}}var m=!0,y=!1,b=void 0;try{for(var x,D=i[Symbol.iterator]();!(m=(x=D.next()).done);m=!0){var S=(0,g._)(x.value,2),_=S[0],U=S[1],A=!0,C=!1,P=void 0;try{for(var R,F=U[Symbol.iterator]();!(A=(R=F.next()).done);A=!0){var k=(0,g._)(R.value,2),I=k[0],T=k[1];r.push({depth:_,type:I,text:T})}}catch(e){C=!0,P=e}finally{try{A||null==F.return||F.return()}finally{if(C)throw P}}}}catch(e){y=!0,b=e}finally{try{m||null==D.return||D.return()}finally{if(y)throw b}}return r}({rows:e(ev),baseDepth:e(j)}):[{type:"dir",text:C,depth:1}]:null}),eU=(0,y.eU)(null,function(e,t,n){var r=e(V).onCreateStart;if(r)return void r({parentPath:n.parentPath,fileType:n.fileType});t(eD,n.parentPath),t(ef,function(e){return(0,b.jM)(e,function(e){var t=e.get(n.parentPath);t&&(t.create=n.fileType)})}),t(M,null)}),eA=(0,y.eU)(null,function(e,t,n){t(ef,function(e){return(0,b.jM)(e,function(e){var t=e.get(n);t&&(t.create=void 0)})})}),eE=(0,y.eU)(null,function(e,t,n){var r={path:n.path,type:n.fileType};t(M,r.path),t(eF,{node:r}),t(ef,function(e){return(0,b.jM)(e,function(e){var t=e.get(n.parentPath);t&&(t.create=void 0)})}),r.type===d.pt.Directory&&t(eD,r.path)}),eC=(0,y.eU)(new Map),eP=(0,y.eU)(null),eR=(0,y.eU)(function(e){var t,n;return null!=(n=null==(t=e(eP))?void 0:t.path)?n:null}),eY=(0,y.eU)(!0),eF=(0,y.eU)(null,function(e,t,n){var r=n.node,i=n.mode,o=e(ev),l=e(eP);t(eY,!i),t(eC,function(e){return(0,b.jM)(e,function(e){!function(e,t){var n=t.node,r=t.rows,i=t.mode,o=t.anchor;if(!i){e.clear(),e.set(n.path,n.type);return}if("multi"===i&&e.has(n.path))return e.delete(n.path);if("multi"===i)return e.set(n.path,n.type);var l=n.type===d.pt.Directory?"dir":"file",a=r.findIndex(function(e){return e.type===l&&e.path===n.path});if(-1!==a){var u=(null==o?void 0:o.type)===d.pt.Directory?"dir":"file",c=o?r.findIndex(function(e){return e.type===u&&e.path===o.path}):-1;if(-1!==c){var s=c<a?r.slice(c,a+1):r.slice(a,c+1),f=!0,p=!1,h=void 0;try{for(var v,g=r[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value;("file"===m.type||"dir"===m.type)&&(s.includes(m)?e.set(m.path,"file"===m.type?d.pt.File:d.pt.Directory):e.delete(m.path))}}catch(e){p=!0,h=e}finally{try{f||null==g.return||g.return()}finally{if(p)throw h}}}}}(e,{node:r,rows:o,mode:i,anchor:l})})});var a=e(eC);if(!(a.size>1)){var u=!0,c=!1,s=void 0;try{for(var f,p=a[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=(0,g._)(f.value,2),v=h[0],m=h[1];t(eP,{path:v,type:m})}}catch(e){c=!0,s=e}finally{try{u||null==p.return||p.return()}finally{if(c)throw s}}}}),ek=(0,y.eU)(null,function(e,t){t(eC,new Map),t(eY,!0),t(eP,null)}),eI=(0,y.eU)(null,function(){var e=(0,v._)(function(e,t,n){var r,i,o;return(0,m.YH)(this,function(l){switch(l.label){case 0:var a;return r=e(V).fs,[4,Promise.all(n.map((a=(0,v._)(function(e){var t;return(0,m.YH)(this,function(n){switch(n.label){case 0:return[4,r.readDir(e)];case 1:return[2,(t=n.sent()).error?t:{path:e,children:t.children,error:null}]}})}),function(e){return a.apply(this,arguments)})))];case 1:if((o=(i=l.sent()).filter(function(e){return null!==e.error})).length)return[2,{errors:o}];return t(ef,function(e){return(0,b.jM)(e,function(e){var t=!0,n=!1,r=void 0;try{for(var o,l=i[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var a=o.value;if(a.error)throw Error("Unexpected error");var u=e.get(a.path);if(!u){e.set(a.path,{loading:!1,expanded:!0,children:a.children,error:void 0});continue}u.loading=!1,u.expanded=!0,u.children=a.children,u.error=void 0}}catch(e){n=!0,r=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}})}),[2,{errors:null}]}})});return function(t,n,r){return e.apply(this,arguments)}}()),eT=(0,y.eU)(null,function(){var e=(0,v._)(function(e,t,n){var r,i,o,l,a,u,s,f,d;return(0,m.YH)(this,function(p){switch(p.label){case 0:r=e(ef),i=[],o=!0,l=!1,a=void 0;try{var h;for(u=((h=n.path.split("/")).pop(),[S.Dl].concat((0,c._)(h.map(function(e,t){return h.slice(0,t+1).join("/")}))))[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)f=s.value,null!=(d=r.get(f))&&d.expanded||i.push(f)}catch(e){l=!0,a=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw a}}if(!i.length)return[3,2];return[4,t(eI,i)];case 1:p.sent(),p.label=2;case 2:return t(eF,{node:n}),[2]}})});return function(t,n,r){return e.apply(this,arguments)}}()),ez=(0,y.eU)(null),eM=(0,y.eU)(null,function(e,t,n){var r=e(ez);if(r)for(var i=e(ev),o=0;o<i.length;o++){var l=i[o];if(("file"===l.type||"dir"===l.type)&&l.path===n&&!(o>r.options.count-1)){r.scrollToIndex(o);break}}}),eL=n(79203),eO=n(26325),eN=n(94680),eZ=(0,f.createContext)(null);function eH(e){return(0,s.Y)(eZ.Provider,{value:e.store,children:e.children})}function eW(){var e=(0,f.useContext)(eZ);if(!e)throw Error("Expected store in context");return e}function ej(e){return(0,eL.md)(e,{store:eW()})}function eB(e){return(0,eN.k)(e,eW())}var eG=function(e){return(0,eL.Xr)(e,{store:eW()})};function eK(e){return(0,eO.yF)((0,f.useCallback)(function(t){return t(e)},[e]),{store:eW()})}var eV=(0,y.eU)(null),eX=(0,y.eU)(null,function(e,t,n){var r=[n];if(!e(eY)){var i=!0,o=!1,l=void 0;try{for(var a,u=e(eC)[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=(0,g._)(a.value,2),s=c[0],f=c[1];n.path!==s&&r.push({path:s,type:f})}}catch(e){o=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}}t(eV,(0,w.Ag)(r))});function eq(){return(eq=(0,v._)(function(e,t){return(0,m.YH)(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(t){return t.type===d.pt.Directory?e.deleteDir(t.path):e.deleteFile(t.path)}))];case 1:return[2,{error:n.sent().filter(function(e){return e.error}).length?"Something went wrong deleting files":null}]}})})).apply(this,arguments)}var eJ=n(64287),eQ=n(13539),e$=n(89852),e0=n(98444),e1=n(47993),e2=n(684),e5=n(45843),e4=n(69945),e3=n.n(e4),e7=n(72562),e6=n(1982),e8=n(7357),e9=n(35141),te=n.n(e9),tt=n(70633),tn=n(81497),tr=n(4880),ti=n(93707),to=n(23099),tl=n.n(to),ta=n(53522),tu=n(27741),tc=n(66485),ts=n(68373);function tf(e){var t=e.fileName,n=e.parentPath,r=n===S.Dl?"":n+"/",i=r+t,o=i.split("/");return{pathPrefix:r,newFilePath:i,segments:o}}function td(e){return tp.apply(this,arguments)}function tp(){return(tp=(0,v._)(function(e){var t,n,r,i,o,l,a,u,c,s,f,d,p,h,v,y,b,x,D;return(0,m.YH)(this,function(m){switch(m.label){case 0:if(t=e.fileName,n=e.parentPath,r=e.fs,t.startsWith("/"))return[2,"File names cannot include forward slashes"];o=(i=tf({fileName:t,parentPath:n})).pathPrefix,l=i.newFilePath,a=i.segments,u=!0,c=!1,s=void 0,m.label=1;case 1:m.trys.push([1,7,8,9]),f=Object.entries(a)[Symbol.iterator](),m.label=2;case 2:if(u=(d=f.next()).done)return[3,6];if(h=(p=(0,g._)(d.value,2))[0],v=p[1],y=Number(h),b=[],y!==a.length-1)return[3,4];return[4,r.stat(l)];case 3:m.sent().exists&&b.push((0,w.WP)(l)),m.label=4;case 4:if(!(x=(0,ts.U)({fileName:v,siblingNames:b,parentPath:o+a.slice(0,y).join("/")})))return[3,5];return[2,x];case 5:return u=!0,[3,2];case 6:return[3,9];case 7:return D=m.sent(),c=!0,s=D,[3,9];case 8:try{u||null==f.return||f.return()}finally{if(c)throw s}return[7];case 9:return[2,null]}})})).apply(this,arguments)}function th(e){var t=tf({fileName:e.fileName,parentPath:e.parentPath}),n=t.pathPrefix,r=t.segments,i=!0,o=!1,l=void 0;try{for(var a,u=Object.entries(r)[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=(0,g._)(a.value,2),s=c[0],f=c[1],d=Number(s),p=(0,ts.U)({fileName:f,siblingNames:[],parentPath:n+r.slice(0,d).join("/")});if(p)return p}}catch(e){o=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return null}var tv=n(15311),tg=n(27023),tm=(0,tv.v)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","dropPreviewOpacity","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY","contextMenuButtonDisplay","hasUnsavedChangesDisplay"]),ty=tm.cssVars,tw=tm.styleTokens,tb={paddingLeft:tw.horizontalPadding,paddingRight:tw.horizontalPadding},tx={"&& svg":{minWidth:tw.iconSize+" !important",minHeight:tw.iconSize+" !important",width:tw.iconSize+" !important",height:tw.iconSize+" !important"}},tD=[tg.wp.truncate,{fontSize:tw.fontSize}];function tS(e,t){return e.shiftKey?"bulk":"altKey"===t&&e.altKey||"cmdOrCtrlKey"===t&&(0,tc.T$)(e)?"multi":void 0}var t_=(0,y.eU)(null,function(e,t,n){var r=n.event,i=n.path;t(M,i);var o=e(V).multiselectModifierKey;t(eF,{node:{path:i,type:d.pt.Directory},mode:o?tS(r,o):void 0}),t(M,i),r.shiftKey||r.altKey||(0,tc.T$)(r)||t(eS,i)});function tU(){return{fontSize:eB(J),fontSizeSmall:eB(eu),iconSize:eB(et),scrollHeight:eB(z),horizontalPadding:eB(en),borderRadius:eB(er),gutterWidth:eB(es),minHeight:eB($),iconTextGap:eB(ei)}}function tA(e){return ej((0,tu.A)(function(){return(0,x.mg)(M,function(t){return t===e?0:-1})},[e]))}function tE(e){return ej((0,tu.A)(function(){return(0,x.mg)(L,function(t){var n,r=t.get(e);return r?{style:(n={},(0,u._)(n,ty.rowHeight,r.height+"px"),(0,u._)(n,ty.rowY,r.y+"px"),(0,u._)(n,ty.rowLeftIndent,"calc(".concat(r.depth," * ").concat(tw.gutterWidth,")")),n),depth:r.depth}:void 0},tl())},[e]))}function tC(e){var t=e.index,n=e.path,r=(0,f.useRef)(null),i=eB(M);return(0,f.useEffect)(function(){var e=function(e){var t;null==(t=r.current)||t.setAttribute("tabIndex",e.toString())},o=function(r){if(!r)return void e(0===t?0:-1);e(r===n?0:-1)};return o(i.current),i.subscribe(o)},[i,n,t]),(0,f.useEffect)(function(){var e=function(e){null!==t&&clearTimeout(t),e===n&&document.activeElement!==r.current&&(t=setTimeout(function(){var e;null==(e=r.current)||e.focus()},50))},t=null;e(i.current);var o=i.subscribe(e);return function(){null!==t&&clearTimeout(t),o()}},[i,n]),[r,eG(M)]}function tP(e,t){if(t===e.path)return!1;var n=t+"/"+(0,w.WP)(e.path);return!(n===e.path||(0,_.hL)(e.path,t)||(0,_.hL)(n,e.path))}var tR=(0,y.eU)(null,function(){var e=(0,v._)(function(e,t,n){var r,i,o,l,a,u,c,s,f,p;return(0,m.YH)(this,function(h){var g,y,b,x,D,U,A,E;switch(h.label){case 0:if(i=null==(r=e(ef).get(n.to))?void 0:r.children)return[3,2];return[4,e(V).fs.readDir(n.to)];case 1:if((o=h.sent()).error)return[2];i=o.children,h.label=2;case 2:if(!i)throw Error("Expected children");if(g=n.nodes,y=n.to,b=i,l=g.reduce(function(e,t){var n=(0,w.WP)(t.path),r=(0,w._6)(t.path),i=null==b?void 0:b.find(function(e){return e.filename===n});return i&&(""===r?S.Dl:r)!==y&&e.push({type:i.type,path:y===S.Dl?i.filename:y+"/"+i.filename}),e},[]),x=n.nodes,D=n.to,!(a=(U=(0,w.Ag)(x)).every(function(e){return tP(e,D)})?U.map(function(e){var t=(0,w.WP)(e.path);return{from:e,to:D===S.Dl?t:D+"/"+t}}):null)||(c=(u=e(V)).readOnly,s=u.fs,c))return[2];if(!l.length)return[3,4];if(l.some(function(e){return a.some(function(t){var n=t.from;return(0,_.hL)(e.path,n.path)})}))return[2];if(!n.overwrite)return null==(f=e(V).onConflicts)||f({type:"move",nodes:n.nodes,to:n.to,conflicts:l}),[2];return[4,Promise.all(l.map((A=(0,v._)(function(e){var t;return(0,m.YH)(this,function(n){switch(n.label){case 0:return[4,e.type===d.pt.Directory?s.deleteDir(e.path):s.deleteFile(e.path)];case 1:return[2,(t=n.sent()).error?{error:t.error,node:e}:null]}})}),function(e){return A.apply(this,arguments)})))];case 3:if(h.sent().filter(Boolean).length)return[2];h.label=4;case 4:return t(eh,a),[4,Promise.all(a.map((E=(0,v._)(function(e){var t,n,r;return(0,m.YH)(this,function(i){switch(i.label){case 0:return t=e.from,n=e.to,[4,t.type===d.pt.Directory?s.moveDir(t.path,n):s.moveFile(t.path,n)];case 1:return[2,(r=i.sent()).error?{error:r.error,from:t,to:n}:null]}})}),function(e){return E.apply(this,arguments)})))];case 5:if(p=h.sent(),t(eh,[]),p.filter(Boolean).length)return[2];return t(eC,new Map(a.map(function(e){return[e.to,e.from.type]}))),[2]}})});return function(t,n,r){return e.apply(this,arguments)}}()),tY=n(37872),tF=(0,y.eU)(null,function(){var e=(0,v._)(function(e,t,n){var r,i,o,l,a,u,s,f,p,h,g;return(0,m.YH)(this,function(y){switch(y.label){case 0:if(i=(r=e(V)).readOnly,o=r.fs,i)return[2];if(l=n.parentPath||S.Dl,u=null==(a=e(ef).get(l))?void 0:a.children,n.files.length>tn.Qq)return n.onError("Trying to upload too many files at once. Please try again with fewer files."),[2];if(n.files.reduce(function(e,t){return t.size+e},0)>tn.wr)return n.onError("Total file upload size exceeds maximum limit. Please try again with smaller files."),[2];if(u)return[3,2];return[4,o.readDir(l)];case 1:if((s=y.sent()).error)return[2];u=s.children,y.label=2;case 2:var w;if(!u)throw Error("Expected children");if(f=(0,c._)(new Set(n.files.map(function(e){return e.dirPath?e.dirPath.split("/")[0]:e.name}))),(h=(p=u.filter(function(e){return f.some(function(t){return t===e.filename})})).length?p.map(function(e){return{path:l===S.Dl?e.filename:l+"/"+e.filename,type:e.type}}):null)&&!n.overwrite)return null==(g=e(V).onConflicts)||g({type:"upload",files:n.files,to:l,conflicts:p.map(function(e){return{path:l===S.Dl?e.filename:l+"/"+e.filename,type:e.type}})}),[2];if(!h)return[3,4];return[4,Promise.all(h.map((w=(0,v._)(function(e){var t;return(0,m.YH)(this,function(n){switch(n.label){case 0:return[4,e.type===d.pt.Directory?o.deleteDir(e.path):o.deleteFile(e.path)];case 1:return[2,(t=n.sent()).error?{error:t.error,node:e}:null]}})}),function(e){return w.apply(this,arguments)})))];case 3:if(y.sent().filter(Boolean).length)return[2];y.label=4;case 4:return(0,tn.Zn)({parentPath:n.parentPath,files:n.files,fs:o,onStart:function(e){t(ep,function(t){return(0,b.jM)(t,function(t){var n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var a=o.value;t.push(a)}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}})})},onUpload:function(e){t(ep,function(t){return(0,b.jM)(t,function(t){var n=t.findIndex(function(t){return t.targetPath===e.path});-1!==n&&t.splice(n,1)})})},onError:function(e){e.error===tn.lj.FileRead&&n.onError("Error reading file. Try uploading again."),t(ep,function(t){return(0,b.jM)(t,function(t){var n=t.findIndex(function(t){return t.targetPath===e.path});-1!==n&&t.splice(n,1)})})},onDone:function(e){var t=e.errors,n=e.parentPath;if(!t.length)return void tY.vF.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:n})}}),[2]}})});return function(t,n,r){return e.apply(this,arguments)}}()),tk=n(36937),tI=n(18509),tT=n(43813),tz=n(85389),tM=n(2188),tL=(0,y.eU)(0),tO=(0,y.eU)(null),tN=(0,y.eU)(function(e){var t=e(tO);if(null===t)return null;var n=e(L),r=-1!==t?n.get(t):null;return r&&r.depth>0||(null==r?void 0:r.row.type)==="dir"?function(e,t){var n=e.get(t);if(!n)return null;var r=0,i=n.height,o="dir"===n.row.type?n.depth+1:n.depth;if("dir"===n.row.type)o=n.depth+1,r=n.y;else{o=n.depth;for(var l=t-1;l>=0;l--){var a=e.get(l);if(!a)break;if("dir"===a.row.type&&("file"===n.row.type||"uploadFile"===n.row.type?k(a.row.path,n.row.path):a.row.path===n.row.dir)){i+=a.height,r=a.y;break}a.depth>=n.depth&&(i+=a.height)}}for(var u=t+1;u<e.size;u++){var c=e.get(u);if(!c||c.depth<=("dir"===n.row.type?n.depth:n.depth-1))break;i+=c.height}return{y:r,height:i,depth:o}}(n,t):{y:e(tL),depth:1,height:e(T).height-8}}),tZ="(".concat(tw.dropPreviewDepth," - 1) * ").concat(tw.gutterWidth),tH=(0,tI.x)({root:[tg.wp.position.absolute,tg.wp.top(0),tg.wp.left(0),tg.wp.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(tZ,"), ").concat(tw.dropPreviewY,")"),width:"calc(100% - ".concat(tZ,")"),height:tw.dropPreviewHeight,opacity:tw.dropPreviewOpacity,outline:"1px dashed ".concat(tw.statusColor),outlineOffset:-1}]}),tW=(0,f.memo)(function(){var e=eB(tN),t=eB(tQ),n=eB(tJ),r=(0,f.useRef)(null);(0,h.d)(r,e,function(e){var t,n,r,i;return i={},(0,u._)(i,ty.dropPreviewY,(null!=(t=null==e?void 0:e.y)?t:0)+"px"),(0,u._)(i,ty.dropPreviewHeight,(null!=(n=null==e?void 0:e.height)?n:0)+"px"),(0,u._)(i,ty.dropPreviewDepth,null!=(r=null==e?void 0:e.depth.toString())?r:"0"),i}),(0,h.d)(r,n,function(e){return(0,u._)({},ty.dropPreviewOpacity,e?"1":"0")}),(0,h.d)(r,t,function(e){return(0,u._)({},ty.statusColor,e?tk.LU.accentPrimaryDefault:tk.LU.accentNegativeDefault)});var i=(0,e8.j)();return(0,s.Y)(tz.S,{style:{transition:i?void 0:"transform 140ms, width 140ms, height 140ms, opacity 140ms ease-out 60ms"},innerRef:r,css:tH.root})}),tj=(0,y.eU)(null,function(e,t,n){if(null!==n){var r=!0,i=!1,o=void 0;try{for(var l,a=e(L)[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=(0,g._)(l.value,2),c=u[0],s=u[1];if(!(n.y<s.y)&&!(n.y>s.y+s.height))return t(tO,c),s}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}t(tO,-1)}}),tB=e2.ZU.Object({type:e2.ZU.Literal("nodes"),width:e2.ZU.Number(),height:e2.ZU.Number(),nodes:e2.ZU.Array(e2.ZU.Object({path:e2.ZU.String(),type:e2.ZU.Enum(d.pt)}))}),tG=(0,y.eU)(null,function(e,t,n){t(eC,function(e){return(0,b.jM)(e,function(e){e.set(n.path,n.type)})});var r=[n];if(e(eY))return r;var i=!0,o=!1,l=void 0;try{for(var a,u=e(eC)[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=(0,g._)(a.value,2),s=c[0],f=c[1];s!==n.path&&r.push({path:s,type:f})}}catch(e){o=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw l}}return r});function tK(e){var t=eG(tO),n=eG(tG),r=ej(q),i=(0,f.useRef)(null),o=(0,g._)((0,eQ.i)({type:e.type,item:function(){var t,r,o=n(e),l=null!=(r=null==(t=i.current)?void 0:t.getBoundingClientRect())?r:{width:160,height:32};return{nodes:o,type:"nodes",width:l.width,height:l.height}},collect:function(t){var n=t.getItem();return{isDragging:!!((null==n?void 0:n.type)==="nodes"&&n.nodes.some(function(t){return t.path===e.path}))}},end:function(){t(null)}}),3),l=o[0],a=o[1],u=o[2],c=l.isDragging;return(0,f.useEffect)(function(){u((0,e7.n)(),{captureDraggingState:!0})},[u]),{isDragging:c,dragRef:r?void 0:a,sizeRef:i}}var tV=(0,tI.x)({root:[tg.wp.position.absolute,{left:0,top:0,transform:"translate(".concat(tw.dragPreviewX,", ").concat(tw.dragPreviewY,")"),pointerEvents:"none"}],item:[tg.wp.backgroundColor.backgroundHighest,tg.wp.flex.row,tg.wp.align.center,tg.wp.shadow(3),tb,{height:tw.rowHeight,borderRadius:tw.borderRadius}],icon:[tx,{marginRight:tw.iconTextGap}],text:[tD,tg.wp.flex.growAndShrink(1),{color:tw.statusColor}],count:[tD,tg.wp.backgroundColor.accentPrimaryDimmest,tg.wp.color.accentPrimaryStrongest,tg.wp.fontWeight.medium,tg.wp.position.absolute,tg.wp.left("calc(50% - 4px)"),tg.wp.top("calc(100% - 4px)"),tg.wp.borderRadius("full"),tg.wp.px(4),tg.wp.center,{fontSize:tw.fontSizeSmall}]}),tX=(0,f.memo)(function(e){var t=(0,f.useRef)(null),n=tU(),r=eB(tq);return(0,h.d)(t,r,function(e){var t;return t={},(0,u._)(t,ty.dragPreviewX,(e?e.x:0)+"px"),(0,u._)(t,ty.dragPreviewY,(e?e.y:0)+"px"),t}),(0,h.d)(t,n.horizontalPadding,function(e){return(0,u._)({},ty.horizontalPadding,e+"px")}),(0,h.d)(t,n.fontSize,function(e){return(0,u._)({},ty.fontSize,e+"px")}),(0,h.d)(t,n.fontSizeSmall,function(e){return(0,u._)({},ty.fontSizeSmall,e+"px")}),(0,h.d)(t,n.iconSize,function(e){return(0,u._)({},ty.iconSize,e+"px")}),(0,h.d)(t,n.iconTextGap,function(e){return(0,u._)({},ty.iconTextGap,e+"px")}),(0,h.d)(t,n.borderRadius,function(e){return(0,u._)({},ty.borderRadius,e+"px")}),(0,h.d)(t,n.gutterWidth,function(e){return(0,u._)({},ty.gutterWidth,e+"px")}),(0,s.Y)(tz.S,{innerRef:t,css:tV.root,children:(0,s.FD)(tz.S,{css:tV.item,style:{width:e.width,height:e.height},children:[(0,s.Y)(tz.S,{css:tV.icon,children:e.type===d.pt.File?(0,s.Y)(tT.A,{path:e.path}):(0,s.Y)(tM.A,{})}),(0,s.Y)(tz.S,{css:tV.text,children:(0,w.WP)(e.path)}),e.count>1?(0,s.Y)(tz.S,{css:tV.count,children:e.count}):null]})})}),tq=(0,y.eU)(null);(0,y.eU)(function(e){return null!==e(tq)});var tJ=(0,y.eU)(!1),tQ=(0,y.eU)(!1);function t$(){var e=(0,e$.V)(function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}}),t=e.isDragging,n=e.item,r=e.currentOffset,i=eG(tq);if((0,f.useEffect)(function(){i(r?{x:r.x,y:r.y}:null)},[i,r]),!t||!e5.J(tB,n))return null;var o=n.nodes,l=n.width,a=n.height,u=(0,g._)(o,1)[0];return u?(0,e1.createPortal)((0,s.Y)(tX,{type:u.type,path:u.path,count:o.length,width:l,height:a}),document.body):null}var t0=n(96907),t1=n.n(t0),t2=n(30908),t5=e2.ZU.Enum(d.pt),t4=e2.ZU.Object({filename:e2.ZU.String({minLength:1}),type:t5}),t3=e2.ZU.Object({scrollOffset:e2.ZU.Number({minimum:0}),dirInfo:e2.ZU.Record(e2.ZU.String(),e2.ZU.Object({expanded:e2.ZU.Boolean(),children:e2.ZU.Array(t4)}))});function t7(e){return"repl:workspace:filetree:"+e}var t6=e2.ZU.Array(e2.ZU.String()),t8="repl:workspace:filetree:savedKeys",t9=(0,x.mg)(V,function(e){return e.localCacheKey?t7(e.localCacheKey):null}),ne=(0,y.eU)(null,function(e){var t=e(V),n=t.localCacheKey,r=t.filter;if(n){var i=null!=(f=null==(s=e(ez))?void 0:s.scrollOffset)?f:0,o=e(ef),l=!1,a=!0,u=!1,c=void 0;try{for(var s,f,d,p=o[Symbol.iterator]();!(a=(d=p.next()).done);a=!0){var h=(0,g._)(d.value,2)[1].children;if(l=!!(null==h?void 0:h.length))break}}catch(e){u=!0,c=e}finally{try{a||null==p.return||p.return()}finally{if(u)throw c}}if(l){var v,m,y=function(e,t){var n={dirInfo:Object.create(null),scrollOffset:e.scrollOffset},r=!0,i=!1,o=void 0;try{for(var l,a=e.dirInfo[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=(0,g._)(l.value,2),c=u[0],s=u[1],f=s.expanded,d=s.children;if(d){var p=d.filter(t);p.length&&(n.dirInfo[c]={expanded:f,children:p})}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}({dirInfo:o,scrollOffset:i},r),w=t7(n),b=(A=t2.A.get(t8),e5.J(t6,A)?A:null);if(b){var x=b.filter(function(e){return e!==w});x.unshift(w);var D=x.splice(20),S=!0,_=!1,U=void 0;try{for(var A,E,C=D[Symbol.iterator]();!(S=(E=C.next()).done);S=!0){var P=E.value;t2.A.remove(P)}}catch(e){_=!0,U=e}finally{try{S||null==C.return||C.return()}finally{if(_)throw U}}t2.A.set(t8,x)}else t2.A.set(t8,[w]);return v=n,m=y,t2.A.set(t7(v),m)}}}),nt=n(17844),nn=n(93629),nr=n(90329),ni=n(32331),no=n(80954),nl={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;t.styles.popper.width="".concat(t.rects.reference.width,"px")},effect:function(e){var t=e.state;t.elements.reference instanceof HTMLElement&&(t.elements.popper.style.width="".concat(t.elements.reference.offsetWidth,"px"))}},na=n(98679),nu=n(85051),nc=n(19202),ns=(0,x.mg)(V,function(e){return e.autocomplete}),nf=(0,tI.x)({icon:[tx,{marginRight:tw.iconTextGap}],item:[tb,tg.wp.flex.row,tg.wp.align.center,nu.b.listItem,{height:tw.rowHeight}],text:[tD,tg.wp.flex.growAndShrink(1)]});function nd(e){var t=e.id,n=e.items,r=e.activeIndex,i=e.onSuggestion,o=e.fileType,l=e.innerRef;return(0,s.Y)(tz.S,{tag:"ul",id:t,"aria-label":"Suggestions",innerRef:l,children:n.map(function(e,t){var n=t===r;return(0,s.FD)(tz.S,{id:e.value,tag:"li",role:"option","aria-selected":n,style:{backgroundColor:n?tk.LU.interactiveBackground:void 0,color:n?tk.LU.foregroundDefault:tk.LU.foregroundDimmer},onClick:function(){return i(e.value)},css:nf.item,children:[(0,s.Y)(tz.S,{css:nf.icon,children:o===d.pt.Directory?(0,s.Y)(tM.A,{}):(0,s.Y)(tT.A,{path:e.value})}),(0,s.Y)(nc.e,{css:nf.text,text:e.value,highlight:e.highlight,dimmed:!n})]},e.value)})})}var np=n(24602),nh=n(36075),nv=n(41358),ng=n(71872),nm=[tw.horizontalPadding,tw.iconSize,tw.iconTextGap].join(" + "),ny=[nu.b.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(nm,")"),paddingRight:tw.horizontalPadding,fontSize:tw.fontSize}],nw=(0,tI.x)({root:[tb,{padding:tw.horizontalPadding}],icon:[tx,tg.wp.color.accentNegativeDefault,{marginRight:tw.iconTextGap}],text:[{fontSize:tw.fontSize},tg.wp.color.foregroundDimmer,tg.wp.flex.growAndShrink(1)]});function nb(e){return(0,s.FD)(tz.S,{css:nw.root,row:!0,children:[(0,s.Y)(tz.S,{css:nw.icon,children:(0,s.Y)(ng.A,{})}),(0,s.Y)(tz.S,{css:nw.text,children:e.message})]})}var nx=(0,tI.x)({root:[tg.wp.position.relative,tg.wp.flex.growAndShrink(1),{height:"100%"}],icon:[tx,tg.wp.position.absolute,tg.wp.left(tw.horizontalPadding),tg.wp.top("50%"),{transform:"translateY(-50%)"}],input:ny,inputLoading:[ny,np.S.backgroundPulse()],menu:[tg.wp.overflow("hidden"),{borderRadius:tw.borderRadius,border:"1px solid",borderColor:tk.LU.outlineDefault}],label:[tg.wp.visuallyHidden]});function nD(e){var t,n,r,i,o,l,a,c,v,m,y,w=(0,f.useId)(),x=(0,f.useId)(),D=(t=(0,f.useRef)(null),n=tU(),(0,h.d)(t,n.fontSize,function(e){return(0,u._)({},ty.fontSize,e+"px")}),(0,h.d)(t,n.iconTextGap,function(e){return(0,u._)({},ty.iconTextGap,e+"px")}),(0,h.d)(t,n.borderRadius,function(e){return(0,u._)({},ty.borderRadius,e+"px")}),(0,h.d)(t,n.horizontalPadding,function(e){return(0,u._)({},ty.horizontalPadding,e+"px")}),(0,h.d)(t,n.iconSize,function(e){return(0,u._)({},ty.iconSize,e+"px")}),(0,h.d)(t,n.fontSize,function(e){return(0,u._)({},ty.rowHeight,Q(e,"file")+"px")}),(0,h.d)(t,n.iconTextGap,function(e){return(0,u._)({},ty.iconTextGap,e+"px")}),i=(r=(0,g._)((0,f.useState)(null),2))[0],o=r[1],a=(l=(0,g._)((0,f.useState)(null),2))[0],c=l[1],m=(v=(0,nr.E)(i,a,{modifiers:[{name:"offset",options:{offset:[0,4]}},nl],placement:"bottom-start"})).styles,y=v.attributes,{menuRef:(0,p.S)([t,c],{breadcrumb:"client/workspace/components/Filetree/FileNodeInput.tsx:100"}),menuAnchorRef:o,styles:m.popper,attributes:y.popper}),S=function(e){var t=e.onSuggestion,n=e.siblings,r=e.value,i=ej(ns),o=(0,g._)((0,f.useState)({items:[],activeIndex:null}),2),l=o[0],a=o[1],u=(0,na.A)(n),c=(0,na.A)(r),s=(0,g._)((0,f.useTransition)(),2)[1],d=i?function(e){s(function(){var t=i(e);a(function(e){return(0,b.jM)(e,function(e){e.items=t.filter(function(e){return e.value!==c.current&&!u.current.some(function(t){return t.filename===e.value})})})})})}:null;function p(){a({items:[],activeIndex:null})}return{items:l.items.length?l.items:null,activeIndex:l.activeIndex,query:d,onKeyDown:function(e){if("Enter"===e.key){var n=null!==l.activeIndex?l.items[l.activeIndex]:null;if(!n)return;return e.preventDefault(),t(n.value),p(),!0}return"ArrowDown"===e.key?(e.preventDefault(),a(function(e){return(0,b.jM)(e,function(e){if(null===e.activeIndex||e.activeIndex>e.items.length-1){e.activeIndex=0;return}e.activeIndex++})}),!0):"ArrowUp"===e.key?(e.preventDefault(),a(function(e){return(0,b.jM)(e,function(e){if(null===e.activeIndex){e.activeIndex=e.items.length-1;return}if(0===e.activeIndex){e.activeIndex=null;return}e.activeIndex--})}),!0):void 0},clear:p}}({onSuggestion:e.onSuggestion,siblings:e.siblings,value:e.value}),_=eK(ez),U=(0,g._)((0,f.useState)(!0),2),A=U[0],E=U[1],C=(0,f.useRef)(null);(0,f.useEffect)(function(){if(C.current){var e,t=null==(e=_())?void 0:e.scrollElement;if(t)return(0,no.l)(C.current,function(){return E(!0),function(){return E(!1)}},{root:t})}},[_]);var P=A&&!!(e.error||S.items),R=S.items&&S.activeIndex?S.items[S.activeIndex]:void 0,Y=!e.error&&S.items?S.items:null,F=(0,f.useRef)(null),k=S.clear,I=(0,ni.A)(function(e){var t;null!=(t=F.current)&&t.contains(e.target)||k()},[k]),T=(0,ni.A)(function(t){var n,r,i=e.inputRef.current;i&&((null==(n=F.current)?void 0:n.contains(t.target))||(null==(r=I.current)?void 0:r.contains(t.target))||e.onClickOutside({inputValue:i.value}))},[]),z=D.menuAnchorRef,M=(0,p.S)([F,z],{breadcrumb:"client/workspace/components/Filetree/FileNodeInput.tsx:250"});return(0,s.FD)(s.FK,{children:[(0,s.Y)("label",{css:nx.label,htmlFor:w,children:"file name"}),(0,s.FD)(tz.S,{css:nx.root,innerRef:M,children:[(0,s.Y)(tz.S,{css:nx.icon,children:e.fileType===d.pt.Directory?(0,s.Y)(tM.A,{}):(0,s.Y)(tT.A,{path:e.value})}),(0,s.Y)("input",{spellCheck:!1,"aria-controls":S.query?x:void 0,"aria-expanded":S.items?"true":"false","aria-activedescendant":null==R?void 0:R.value,role:S.query?"combobox":void 0,id:w,ref:(0,p.S)([e.inputRef,C,T],{breadcrumb:"client/workspace/components/Filetree/FileNodeInput.tsx:274"}),css:e.loading?nx.inputLoading:nx.input,value:e.value,onChange:e.loading?void 0:function(t){var n;e.onChange(t),null==(n=S.query)||n.call(S,{input:t.currentTarget.value,fileType:e.fileType,type:e.type,siblings:e.siblings})},onKeyDown:function(t){S.onKeyDown(t)||e.onKeyDown(t)}})]}),(0,s.Y)(nh.Z,{children:(0,s.FD)(nv.ui,(0,nn._)((0,nt._)({css:nx.menu,elevated:!0,innerRef:D.menuRef,style:(0,nn._)((0,nt._)({},D.styles),{display:P?"block":"none"})},D.attributes),{children:[e.error?(0,s.Y)(nb,{message:e.error}):null,Y?(0,s.Y)(nd,{id:x,innerRef:I,items:Y,activeIndex:S.activeIndex,onSuggestion:function(t){e.onSuggestion(t),k()},fileType:e.fileType}):null]}))})]})}var nS=(0,tI.x)({createFilePicker:[{fontSize:tw.fontSize,paddingRight:tw.horizontalPadding,paddingLeft:tw.horizontalPadding}],button:[tg.wp.reset.button,tg.wp.p(2),nu.b.filled,tg.wp.color.foregroundDimmer,{fontSize:"inherit"}],text:[tD,tg.wp.color.foregroundDimmest]});function n_(e){var t,n,r,i,o,l,a,u,c,p,h,y,w,b,D,_,U,A,E,C,P,R,Y=(t=e.dir,r=eG(eU),i=eG(eA),o=eG(eE),a=(l=(0,g._)((0,f.useState)(""),2))[0],u=l[1],c=eK(V),h=(p=(0,g._)((0,f.useState)(!1),2))[0],y=p[1],b=(w=(0,g._)((0,f.useState)(null),2))[0],D=w[1],_=(0,tu.A)(function(){return(0,x.mg)(ef,function(e){return e.get(t)})},[t]),U=(0,tu.A)(function(){return(0,x.mg)(_,function(e){var t;return null!=(t=null==e?void 0:e.create)?t:null})},[_]),A=ej((0,tu.A)(function(){return(0,x.mg)(_,function(e){var t;return null!=(t=null==e?void 0:e.children)?t:null})},[_])),E=ej(U),C=(0,v._)(function(e){var n,r,i,l,a,s,f,p,h,v;return(0,m.YH)(this,function(g){switch(g.label){case 0:if(!E||(l=(i=c()).readOnly,a=i.fs,l))return[2];if(s=null,0!==e.length)return[3,1];return s="File names cannot be empty",[3,4];case 1:if(!e.includes("/"))return[3,3];return[4,td({fileName:e,parentPath:t,fs:a})];case 2:return s=g.sent(),[3,4];case 3:s=(0,ts.U)({fileName:e,siblingNames:null!=(f=null==A?void 0:A.map(function(e){return e.filename}))?f:[],parentPath:t}),g.label=4;case 4:if(s)return D(s),[2];if((h=(p=t===S.Dl?null:t+"/")?p+e:e).includes("//")&&(h=h.split("/").filter(function(e){return e.length>0}).join("/")),y(!0),E!==d.pt.Directory)return[3,6];return[4,a.createDir(h)];case 5:return v=g.sent(),[3,8];case 6:return[4,a.writeFile(h,new ta.A(""))];case 7:v=g.sent(),g.label=8;case 8:if(v.error)return D("Something went wrong"),[2];return y(!1),u(""),o({parentPath:t,path:h,fileType:E}),null==(n=(r=c()).onCreate)||n.call(r,{path:h,type:E}),[2]}})}),P=function(e){return C.apply(this,arguments)},!(R=b)&&a.includes("/")?R=th({fileName:a,parentPath:t}):R||(R=(0,ts.U)({fileName:a,siblingNames:null!=(n=null==A?void 0:A.map(function(e){return e.filename}))?n:[],parentPath:t})),{value:a,setValue:u,fileType:E,create:P,creating:h,error:R,clearError:function(){return D(null)},cancel:(0,tu.A)(function(){return function(){return i(t)}},[t,i]),start:(0,tu.A)(function(){return function(e){return r({parentPath:t,fileType:e})}},[t,r]),siblings:A}),F=(0,f.useRef)(null);return((0,f.useEffect)(function(){var e;Y.fileType&&(null==(e=F.current)||e.focus())},[Y.fileType]),Y.fileType)?(0,s.Y)(nD,{siblings:Y.siblings||[],type:"create",inputRef:F,loading:Y.creating,error:Y.error,value:Y.value,fileType:Y.fileType,onClickOutside:function(e){var t=e.inputValue;if(""===t)return void Y.cancel();Y.create(t)},onChange:function(e){Y.error&&Y.clearError(),Y.setValue(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key)return void Y.cancel();"Enter"===e.key&&Y.create(e.currentTarget.value)},onSuggestion:function(e){Y.setValue(e),Y.create(e)}}):(0,s.Y)(nU,{create:Y.start})}function nU(e){return(0,s.FD)(tz.S,{css:nS.createFilePicker,align:"center",row:!0,gap:4,children:[(0,s.Y)(tz.S,{css:nS.text,children:"Add a"}),(0,s.Y)(tz.S,{tag:"button",css:nS.button,onClick:function(){return e.create(d.pt.File)},children:"file"}),(0,s.Y)(tz.S,{css:nS.text,children:"or "}),(0,s.Y)(tz.S,{tag:"button",css:nS.button,onClick:function(){return e.create(d.pt.Directory)},children:"folder"})]})}var nA=(0,tI.x)({root:[{marginLeft:"auto",paddingLeft:tw.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-circle":{strokeDashoffset:tw.strokeDashoffset}}]});function nE(e){var t=ej(J)/2,n=t/2,r=2*n*Math.PI,i=(0,f.useRef)(null);return(0,h.d)(i,e.progress,function(e){return(0,u._)({},ty.strokeDashoffset,(r-e*r).toString())}),(0,s.Y)(tz.S,{innerRef:i,css:nA.root,children:(0,s.FD)("svg",{css:nA.svg,height:2*t,width:2*t,children:[(0,s.Y)("circle",{fill:tk.LU.backgroundHigher,r:t,cx:t,cy:t}),(0,s.Y)("circle",{className:"inner-circle",stroke:tk.LU.foregroundDimmest,fill:"transparent",strokeWidth:t,strokeDasharray:r+" "+r,r:n,cx:t,cy:t})]})})}var nC=function(e){return e.reduce(function(e,t){return e+t.current},0)/e.length};function nP(e){var t,n,r,i,o=ej(J)/2,l=o/2,a=2*l*Math.PI,c=(t=e.uploadProgress,r=(n=(0,g._)((0,f.useState)(nC(t)),2))[0],i=n[1],(0,f.useEffect)(function(){var e=[],n=!0,r=!1,o=void 0;try{for(var l,a=t[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var u=l.value;e.push(u.subscribe(function(){i(nC(t))}))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return function(){e.map(function(e){return e()})}},[t]),r),d=(0,f.useRef)(null);return(0,s.Y)(tz.S,{innerRef:d,css:nA.root,children:(0,s.FD)("svg",{css:nA.svg,height:2*o,width:2*o,children:[(0,s.Y)("circle",{fill:tk.LU.backgroundHigher,r:o,cx:o,cy:o}),(0,s.Y)("circle",{className:"inner-circle",style:(0,u._)({},ty.strokeDashoffset,(a-c*a).toString()),stroke:tk.LU.foregroundDimmest,fill:"transparent",strokeWidth:o,strokeDasharray:a+" "+a,r:l,cx:o,cy:o})]})})}function nR(e){var t,n,r,i,o,l,a,u,c,p,h,y,b,D,_,U,A,E,C,P,R,Y=(0,g._)((t={path:e.path,type:e.fileType},r=eK(V),o=(i=(0,g._)((0,f.useState)(null),2))[0],l=i[1],a=(0,w._6)(t.path)||S.Dl,u=(0,w.WP)(t.path),c=eG(H),p=eG(M),y=(h=(0,g._)((0,f.useState)(u),2))[0],b=h[1],_=(D=(0,g._)((0,f.useState)(!1),2))[0],U=D[1],A=(0,tu.A)(function(){return(0,x.mg)(ef,function(e){var t;return null==(t=e.get(a))?void 0:t.children})},[a]),E=y!==u,C=ej(A),P=null,E&&y.includes("/")?P=th({fileName:y,parentPath:a}):E&&(P=(0,ts.U)({fileName:y,siblingNames:null!=(n=null==C?void 0:C.map(function(e){return e.filename}))?n:[],parentPath:a})),R=(0,v._)(function(e){var n,i,o,s,f,h,v,g,y,b,x;return(0,m.YH)(this,function(m){switch(m.label){case 0:if(P||!e||e===u||(i=(n=r()).readOnly,o=n.fs,s=n.onFileRenameStart,f=n.onFileRenameEnd,i))return[2];if(h=null,!e.includes("/"))return[3,2];return[4,td({fileName:e,parentPath:a,fs:o})];case 1:return h=m.sent(),[3,3];case 2:h=(0,ts.U)({fileName:e,siblingNames:null!=(v=null==C?void 0:C.map(function(e){return e.filename}))?v:[],parentPath:a}),m.label=3;case 3:if(h)return l(h),[2];if(y=(g=a===S.Dl?null:a+"/")?g+e:e,b=(0,w._6)(y)||S.Dl,U(!0),null==s||s({from:t.path,to:y}),b===S.Dl)return[3,6];return[4,o.stat(b)];case 4:if(m.sent().exists)return[3,6];return[4,o.createDir(b)];case 5:m.sent(),m.label=6;case 6:if(t.type!==d.pt.Directory)return[3,8];return[4,o.moveDir(t.path,y)];case 7:return x=m.sent(),[3,10];case 8:return[4,o.moveFile(t.path,y)];case 9:x=m.sent(),m.label=10;case 10:if(x.error)return l("Something went wrong"),U(!1),null==f||f(),[2];return c(null),null==f||f(),p(y),[2]}})}),[{canRename:!!y&&E&&!P,value:y,renaming:_,error:o||P,siblings:C},{setValue:b,rename:function(e){return R.apply(this,arguments)},cancel:function(){var e=r().onFileRenameEnd;c(null),null==e||e(),p(t.path)}}]),2),F=Y[0],k=Y[1],I=k.setValue,T=k.rename,z=k.cancel,L=(0,f.useRef)(null),O=(0,f.useRef)(F.value);return(0,f.useEffect)(function(){if(L.current){var e=O.current;if(e){var t=e.lastIndexOf(".");t<=1&&(t=e.length);var n=+!!e.startsWith(".");L.current.focus(),L.current.setSelectionRange(n,t)}}},[]),(0,s.Y)(nD,{siblings:F.siblings?F.siblings.filter(function(t){return t.filename!==(0,w.WP)(e.path)}):[],type:"rename",inputRef:L,loading:F.renaming,error:F.error,value:F.value,fileType:e.fileType,onClickOutside:function(e){var t=e.inputValue;F.canRename?T(t):F.error||z()},onChange:function(e){I(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key)return void z();"Enter"===e.key&&(F.canRename?T(e.currentTarget.value):F.error||z())},onSuggestion:function(e){I(e),T(e)}})}var nY=n(45287),nF=(r={},(0,u._)(r,nY.PX.ADDED,"A"),(0,u._)(r,nY.PX.UNTRACKED,"A"),(0,u._)(r,nY.PX.MODIFIED,"M"),(0,u._)(r,nY.PX.DELETED,"D"),(0,u._)(r,nY.PX.RENAMED,"R"),(0,u._)(r,nY.PX.COPIED,"C"),r),nk=(i={},(0,u._)(i,nY.PX.ADDED,tk.LU.greenDimmest),(0,u._)(i,nY.PX.UNTRACKED,tk.LU.greenDimmest),(0,u._)(i,nY.PX.MODIFIED,tk.LU.yellowDimmest),(0,u._)(i,nY.PX.DELETED,tk.LU.redDimmest),(0,u._)(i,nY.PX.RENAMED,tk.LU.tealDimmest),(0,u._)(i,nY.PX.COPIED,tk.LU.limeDimmest),i),nI=(o={},(0,u._)(o,nY.PX.ADDED,tk.LU.greenStrongest),(0,u._)(o,nY.PX.UNTRACKED,tk.LU.greenStrongest),(0,u._)(o,nY.PX.MODIFIED,tk.LU.yellowStrongest),(0,u._)(o,nY.PX.DELETED,tk.LU.redStrongest),(0,u._)(o,nY.PX.RENAMED,tk.LU.tealStrongest),(0,u._)(o,nY.PX.COPIED,tk.LU.limeStrongest),o);function nT(e){return e===nY.PX.ADDED||e===nY.PX.UNTRACKED||e===nY.PX.MODIFIED||e===nY.PX.DELETED||e===nY.PX.RENAMED||e===nY.PX.COPIED}var nz={color:tw.statusColor,fontSize:tw.fontSizeSmall,minWidth:tw.dirStatusIconSize,height:tw.dirStatusIconSize},nM=(0,tI.x)({fileIcon:[tg.wp.fontWeight.bold,tg.wp.px(2),tg.wp.center,nz],directoryCountIcon:[tg.wp.fontWeight.medium,tg.wp.borderRadius(4),tg.wp.px(2),tg.wp.center,nz,{backgroundColor:tw.statusBackgroundColor}],directoryDraftBufferIndicator:[tg.wp.width(8),tg.wp.height(8),tg.wp.ml(8),tg.wp.border({color:tk.LU.foregroundDimmer,width:1}),{borderRadius:"50%"}],fileDraftBufferIndicator:[tg.wp.width(8),tg.wp.height(8),tg.wp.backgroundColor.foregroundDimmer,{borderRadius:"50%"}]});function nL(e){return(0,s.Y)(tz.S,{css:nM.fileIcon,children:(0,s.Y)(tz.S,{children:e.text})})}function nO(e){return(0,s.Y)(tz.S,{css:nM.directoryCountIcon,children:(0,s.Y)(tz.S,{children:e.count})})}var nN=n(63166),nZ=n(4616),nH=n(62252),nW=n(63456),nj=n(63837),nB=[tg.wp.position.absolute,tg.wp.top(0),tg.wp.left(0),{width:"calc(100% - ".concat(tw.rowLeftIndent,")"),height:tw.rowHeight,transform:"translateY(".concat(tw.rowY,")"),marginLeft:tw.rowLeftIndent}],nG=(0,tI.x)({divider:(0,c._)(nB).concat([tb,tg.wp.flex.growAndShrink(1),tg.wp.justify.center]),dividerInner:[{borderTop:"1px dashed",borderColor:tk.LU.outlineDimmest,height:"70%",justifyContent:"end"}],dividerText:[tg.wp.truncate,tg.wp.color.foregroundDimmer,{fontSize:tw.fontSizeSmall}],error:(0,c._)(nB).concat([tg.wp.rowWithGap(4),tg.wp.align.center,tb]),emptyDir:(0,c._)(nB).concat([tb,tg.wp.color.foregroundDimmest,tg.wp.justify.center,{paddingLeft:tw.iconSize,paddingRight:tw.horizontalPadding}]),row:(0,c._)(nB).concat([tg.wp.flex.growAndShrink(1),tg.wp.flex.row,tg.wp.align.center,nu.b.nofill,(a={backgroundColor:tw.nodeBackgroundColor,borderRadius:tw.borderRadius,cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px "+tk.LU.accentPrimaryDefault,zIndex:1}},(0,u._)(a,ty.hasUnsavedChangesDisplay,"flex"),(0,u._)(a,"@media (hover: hover)",(0,u._)({},ty.contextMenuButtonDisplay,"none")),(0,u._)(a,"&:hover, &:active, &:focus",(l={},(0,u._)(l,ty.contextMenuButtonDisplay,"flex"),(0,u._)(l,ty.hasUnsavedChangesDisplay,"none"),l)),(0,u._)(a,"transitionDuration","0ms"),a)]),rowContent:[tg.wp.flex.row,tg.wp.align.center,tg.wp.flex.growAndShrink(1),tb],uploadRow:(0,c._)(nB).concat([tg.wp.flex.growAndShrink(1),tg.wp.align.center,tg.wp.flex.row,tg.wp.align.center,tb,tg.wp.border({color:"transparent"}),(0,u._)({backgroundColor:tw.nodeBackgroundColor,borderRadius:tw.borderRadius},ty.statusColor,tk.LU.foregroundDimmer)]),createRow:(0,c._)(nB).concat([tg.wp.justify.center]),icon:[tx,{marginRight:tw.iconTextGap}],text:[tD,tg.wp.flex.growAndShrink(1),{color:tw.statusColor}],emptyDirText:[tD,tg.wp.display.flex,tg.wp.justify.center,tg.wp.flex.growAndShrink(1),{color:tw.statusColor}],contextMenuButton:[tg.wp.reset.button,tg.wp.height("100%"),tg.wp.center,tg.wp.cursor.pointer,nu.b.filled,tx,{display:tw.contextMenuButtonDisplay,borderRadius:"0 ".concat(tw.borderRadius," ").concat(tw.borderRadius," 0"),transitionDuration:"0ms",backgroundColor:"transparent"}],draftBufferContainer:[{display:tw.hasUnsavedChangesDisplay}]});function nK(e){var t,n=(t=e.path,ej((0,tu.A)(function(){return(0,y.eU)(function(e){var n;return null!=(n=e(I).get(t))?n:null})},[t]))),r=ej(ea);return(null==n?void 0:n.length)?(0,s.Y)(nN.A,{size:r,activeUsers:n}):null}function nV(e){var t,n=(t=e.path,ej((0,tu.A)(function(){return(0,y.eU)(function(e){var n=[],r=!0,i=!1,o=void 0;try{for(var l,a=e(I)[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=(0,g._)(l.value,2),s=u[0],f=u[1];if(!(0,_.hL)(t,s))return;n.push.apply(n,(0,c._)(f))}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n.length?n:null})},[t])));return(null==n?void 0:n.length)?(0,s.Y)(nN.A,{activeUsers:n}):null}function nX(e){return(0,s.Y)(tz.S,{title:"menu",tag:"button",css:nG.contextMenuButton,onClick:e.onClick,children:(0,s.Y)(nj.A,{})})}function nq(e,t){var n=eB((0,tu.A)(function(){return(0,x.mg)(eC,function(e){return e.has(t)})},[t]));(0,h.d)(e,n,function(e){return(0,u._)({},ty.nodeBackgroundColor,e?tk.LU.backgroundHigher:"transparent")}),(0,f.useEffect)(function(){var t=function(t){e.current&&e.current.setAttribute("aria-selected",t?"true":"false")};return t(n.current),n.subscribe(t)},[e,n,t])}var nJ=(0,f.memo)(function(e){var t,n,r,i,o,l,a,c,h,v,m,y=(0,f.useRef)(null),b=tE(e.index),D=ej((t=e.path,(0,tu.A)(function(){return(0,x.mg)(ef,function(e){var n;return!!(null==(n=e.get(t))?void 0:n.expanded)})},[t]))),S=ej((n=e.path,(0,tu.A)(function(){return(0,x.mg)(ef,function(e){var t;return!!(null==(t=e.get(n))?void 0:t.loading)})},[n]))),U=(i=(r=(0,g._)((0,f.useState)(S),2))[0],o=r[1],(0,f.useEffect)(function(){if(!S)return void o(!1);var e=setTimeout(function(){return o(!0)},500);return function(){clearTimeout(e)}},[S]),i),A=eG(W),E=ej(O),P=tA(e.path),R=(l=e.path,a=eG(t_),(0,tu.A)(function(){return function(e){a({event:e,path:l})}},[a,l])),Y=(0,g._)(tC({path:e.path,index:e.index}),2),F=Y[0],k=Y[1],I=e.path===E&&S,T=I?C:(0,w.WP)(e.path),z=tK({path:e.path,type:d.pt.Directory}),M=z.dragRef,L=z.sizeRef,Z=z.isDragging;nq(y,e.path);var H=(c=e.path,ej((0,tu.A)(function(){return(0,x.mg)(N,function(e){return e?function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=(0,g._)(l.value,2),c=u[0],s=u[1],f=s.index,d=s.worktree;(0,_.hL)(t,c)&&n.push({path:c,index:f,worktree:d})}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===n.length)return null;var p=n.every(function(e){return e.index===nY.PX.ADDED||e.worktree===nY.PX.UNTRACKED})?nY.PX.ADDED:nY.PX.MODIFIED;if(!nT(p))return null;var h=n.length;return{color:nI[p],backgroundColor:nk[p],count:h}}(e,c):null},tl())},[c]))),j=ej(X);return(0,s.FD)(tz.S,{style:(0,nn._)((0,nt._)({},null==b?void 0:b.style),(m={},(0,u._)(m,ty.statusColor,null!=(h=null==H?void 0:H.color)?h:tk.LU.foregroundDimmer),(0,u._)(m,ty.statusBackgroundColor,null==H?void 0:H.backgroundColor),(0,u._)(m,"opacity",Z?.1:void 0),m)),tabIndex:P,role:"treeitem","aria-label":T,"aria-expanded":D,"aria-level":(null!=(v=null==b?void 0:b.depth)?v:0)+1,css:nG.row,onFocus:function(){return k(e.path)},innerRef:(0,p.S)([y,F,L,e.pending?void 0:M],{breadcrumb:"client/workspace/components/Filetree/Row.tsx:345"}),onContextMenu:j?function(t){j(t,{path:e.path,type:d.pt.Directory})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&A(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&R(e)},children:[(0,s.FD)(tz.S,{title:e.path,css:nG.rowContent,onClick:e.pending?void 0:R,children:[(0,s.Y)(tz.S,{css:nG.icon,children:I||U&&!D?(0,s.Y)(nW.A,{}):(0,s.Y)(s.FK,{children:D?(0,s.Y)(nH.A,{color:tk.LU.foregroundDimmer}):(0,s.Y)(tM.A,{color:tk.LU.foregroundDimmer})})}),(0,s.Y)(tz.S,{css:nG.text,children:T}),e.uploadProgress?(0,s.Y)(nP,{uploadProgress:e.uploadProgress}):null,H?(0,s.Y)(nO,{count:H.count}):null,D?null:(0,s.Y)(nV,{path:e.path}),null]}),j?(0,s.Y)(nX,{onClick:function(t){j(t,{path:e.path,type:d.pt.Directory})}}):null]})}),nQ=(0,f.memo)(function(e){var t,n,r,i,o,l,a,c,h=(0,f.useRef)(null),v=tE(e.index),m=(t=e.path,n=eK(V),r=eG(eF),i=eG(M),(0,tu.A)(function(){return{onClick:function(e){var o=n(),l=o.onFileSelect,a=o.multiselectModifierKey,u=a?tS(e,a):void 0;r({node:{path:t,type:d.pt.File},mode:u}),i(t),u||null==l||l({path:t,event:e,type:"click"})},onDoubleClick:function(e){var r=n().onFileDoubleClick;null==r||r(e,t)}}},[t,n,i,r])),y=m.onClick,b=m.onDoubleClick,D=tA(e.path),S=eG(W),_=(0,g._)(tC({path:e.path,index:e.index}),2),U=_[0],A=_[1],E=(0,w.WP)(e.path),C=tK({path:e.path,type:d.pt.File}),P=C.dragRef,R=C.sizeRef,Y=C.isDragging;nq(h,e.path);var F=(o=e.path,ej((0,tu.A)(function(){return(0,x.mg)(N,function(e){return e?function(e,t){var n=null==e?void 0:e.get(t);if(!n)return null;var r=null;return n.worktree!==nY.PX.UNMODIFIED?r=n.worktree:n.index!==nY.PX.UNMODIFIED&&(r=n.index),r&&nT(r)?{color:nI[r],text:nF[r]}:null}(e,o):null},tl())},[o]))),k=ej(X);return(0,s.FD)(tz.S,{style:(0,nn._)((0,nt._)({},null==v?void 0:v.style),(c={},(0,u._)(c,ty.statusColor,null!=(l=null==F?void 0:F.color)?l:tk.LU.foregroundDimmer),(0,u._)(c,"opacity",Y?.1:void 0),c)),tabIndex:D,dataCy:"filetree-file",css:nG.row,onFocus:function(){return A(e.path)},innerRef:(0,p.S)([h,U,R,e.pending?void 0:P],{breadcrumb:"client/workspace/components/Filetree/Row.tsx:464"}),role:"treeitem","aria-label":E,"aria-level":(null!=(a=null==v?void 0:v.depth)?a:0)+1,onDoubleClick:e.pending?void 0:b,onContextMenu:k?function(t){k(t,{path:e.path,type:d.pt.File})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&S(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&y(e)},children:[(0,s.FD)(tz.S,{title:e.path,css:nG.rowContent,onClick:e.pending?void 0:y,children:[(0,s.Y)(tz.S,{css:nG.icon,children:(0,s.Y)(tT.A,{path:e.path})}),(0,s.Y)(tz.S,{css:nG.text,children:E}),F?(0,s.Y)(nL,{text:F.text}):null,(0,s.Y)(nK,{path:e.path}),null]}),k?(0,s.Y)(nX,{onClick:function(t){k(t,{path:e.path,type:d.pt.File})}}):null]})}),n$=(0,f.memo)(function(e){var t=tE(e.index);return(0,s.Y)(tz.S,{css:nG.divider,style:null==t?void 0:t.style,role:"treeitem",children:(0,s.Y)(tz.S,{css:nG.dividerInner,children:(0,s.Y)(tz.S,{css:nG.dividerText,children:e.label})})})}),n0=(0,f.memo)(function(e){var t=tE(e.index);return(0,s.FD)(tz.S,{css:nG.error,style:null==t?void 0:t.style,role:"treeitem",children:[(0,s.Y)(ng.A,{}),(0,s.Y)(nZ.EY,{multiline:!1,children:e.message})]})}),n1=(0,f.memo)(function(e){var t=tE(e.index);return(0,s.Y)(tz.S,{css:nG.emptyDir,style:null==t?void 0:t.style,role:"treeitem",children:(0,s.Y)(tz.S,{css:nG.emptyDirText,children:E})})}),n2=(0,f.memo)(function(e){var t=tE(e.index);return(0,s.Y)(tz.S,{css:nG.createRow,style:null==t?void 0:t.style,role:"treeitem",children:(0,s.Y)(n_,{dir:e.dir})})}),n5=(0,f.memo)(function(e){var t=tE(e.index),n=(0,w.WP)(e.path);return(0,s.Y)(tz.S,{style:null==t?void 0:t.style,css:nG.createRow,role:"treeitem","aria-label":n,children:(0,s.Y)(nR,{path:e.path,fileType:e.fileType})})}),n4=(0,f.memo)(function(e){var t=tE(e.index),n=(0,w.WP)(e.path);return(0,s.FD)(tz.S,{style:null==t?void 0:t.style,css:nG.uploadRow,role:"treeitem","aria-label":n,children:[(0,s.Y)(tz.S,{css:nG.icon,children:(0,s.Y)(tT.A,{path:e.path})}),(0,s.Y)(tz.S,{css:nG.text,children:n}),(0,s.Y)(nE,{progress:e.progress})]})}),n3=(0,f.memo)(function(e){var t,n=ej((t=e.index,(0,tu.A)(function(){return(0,y.eU)(function(e){var n,r;return null!=(r=null==(n=e(L).get(t))?void 0:n.row)?r:null})},[t])));return n?"error"===n.type?(0,s.Y)(n0,{index:e.index,message:n.message}):"divider"===n.type?(0,s.Y)(n$,{index:e.index,label:n.label}):"emptyDir"===n.type?(0,s.Y)(n1,{index:e.index}):"create"===n.type?(0,s.Y)(n2,{index:e.index,dir:n.dir}):"uploadFile"===n.type?(0,s.Y)(n4,{index:e.index,path:n.path,progress:n.progress}):n.rename?(0,s.Y)(n5,{index:e.index,path:n.path,fileType:"file"===n.type?d.pt.File:d.pt.Directory}):"file"===n.type?(0,s.Y)(nQ,{index:e.index,path:n.path,pending:!!n.pending}):(0,s.Y)(nJ,{index:e.index,path:n.path,pending:!!n.pending,uploadProgress:n.uploadProgress}):null}),n7=[tw.horizontalPadding,tw.rowLeftIndent,tw.iconSize,tw.iconTextGap].join(" + "),n6=(0,tI.x)({root:[tg.wp.overflow("hidden"),tg.wp.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(n7,")"),paddingRight:tw.horizontalPadding}]}),n8=(0,f.memo)(function(){var e=ej(e_);return e?(0,s.Y)(tz.S,{css:n6.root,children:e.map(function(e){var t=e.type,n=e.text,r=e.depth,i=(0,u._)({},ty.rowLeftIndent,"calc(".concat(r," * ").concat(tw.gutterWidth,")")),o=t+r;return"divider"===t?(0,s.Y)(tz.S,{style:i,css:nG.dividerInner,children:(0,s.Y)(nZ.EY,{css:nG.dividerInner,multiline:!1,children:n.toUpperCase()})},o):(0,s.Y)(tz.S,{css:n6.file,style:i,children:"create"===t?(0,s.Y)(nU,{create:function(){}}):(0,s.Y)(tz.S,{css:nG.text,children:n.toUpperCase()})},o)})}):null}),n9=n(68387),re=(0,tI.x)({content:[tg.wp.position.relative,{overflowY:"auto",height:"100%",minHeight:tw.minHeight}],scroll:[{position:"relative",height:tw.scrollHeight}],gutter:[tg.wp.position.absolute,tg.wp.top(0),tg.wp.left(0),tg.wp.reset.button,tg.wp.align.end,tg.wp.cursor.pointer,{width:tw.gutterWidth,"& > div":[tg.wp.height("100%"),tg.wp.width(1),{marginRight:"25%",opacity:.2,backgroundColor:tk.LU.foregroundDimmest}],"&:hover > div":{backgroundColor:tk.LU.accentPrimaryDefault,opacity:1}}]}),rt=(0,f.memo)(function(e){var t,n,r,i,o,l,a,v,m,y,b,x,D,_,U,A,E,C,P,R,Y,F,k,I=ej(L),z=tU();(0,h.d)(e.scrollRef,z.fontSize,function(e){var t;return t={},(0,u._)(t,ty.fontSize,e+"px"),(0,u._)(t,ty.dirStatusIconSize,e+"px"),t}),(0,h.d)(e.scrollRef,z.fontSizeSmall,function(e){return(0,u._)({},ty.fontSizeSmall,e+"px")}),(0,h.d)(e.scrollRef,z.iconSize,function(e){return(0,u._)({},ty.iconSize,e+"px")}),(0,h.d)(e.scrollRef,z.iconTextGap,function(e){return(0,u._)({},ty.iconTextGap,e+"px")}),(0,h.d)(e.scrollRef,z.horizontalPadding,function(e){return(0,u._)({},ty.horizontalPadding,e+"px")}),(0,h.d)(e.scrollRef,z.borderRadius,function(e){return(0,u._)({},ty.borderRadius,e+"px")}),(0,h.d)(e.scrollRef,z.scrollHeight,function(e){return(0,u._)({},ty.scrollHeight,e+"px")}),(0,h.d)(e.scrollRef,z.gutterWidth,function(e){return(0,u._)({},ty.gutterWidth,e+"px")}),(0,h.d)(e.scrollRef,z.minHeight,function(e){return(0,u._)({},ty.minHeight,e+"px")});var M=eG(em),N=(t=eG(tj),n=eG(tO),r=(0,f.useRef)(null),i=(0,f.useRef)(null),o=(0,f.useRef)(null),l=(0,e6.A)().showError,a=eK(tL),v=eG(tF),m=eG(tR),y=eG(tQ),b=(0,f.useRef)(null),x=eK(ef),D=eK(O),_=eG(T),U=eG(eD),A=ej(q),C=(E=(0,g._)((0,eJ.H)(function(){return{accept:[d.pt.File,d.pt.Directory,e0.FILE],canDrop:function(){return!0},hover:function(e,n){var l=o.current;if(l){i.current&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scrollZoneSize:{w:50,h:50},scrollVelocity:{x:50,y:50},scrollUpdateThrottle:100},r=n.scrollZoneSize,i=n.scrollVelocity,o=n.scrollUpdateThrottle,l=e3()(function(){var n=t.getClientOffset();if(!n)return[0,0];var o=n.x,l=n.y,a=e.getBoundingClientRect(),u=a.x,c=a.y,s=a.width,f=a.height,d=Math.min(s/2,r.w),p=Math.min(f/2,r.h),h=function(e,t){var n=(0,g._)(t,2),r=n[0],i=n[1];return te()(e,r[0],r[1])?(e-r[1])/(r[1]-r[0]):te()(e,i[0],i[1])?(e-i[0])/(i[1]-i[0]):0};return[h(o,[[u,u+d],[u+s-d,u+s]])*i.x,h(l,[[c,c+p],[c+f-p,c+f]])*i.y]},o,{trailing:!1})();if(l){var a=(0,g._)(l,2),u=a[0],c=a[1];if(0!==u||0!==c){var s=e.scrollLeft,f=e.scrollTop,d=e.scrollWidth,p=e.scrollHeight,h=e.clientWidth,v=e.clientHeight;requestAnimationFrame(function(){e.scrollTop=(0,tt.E)(0,d-h,s+u),e.scrollTop=(0,tt.E)(0,p-v,f+c)})}}}(i.current,n);var u=n.getClientOffset();if(u){var c=t({x:u.x-l.x,y:u.y-l.y+a()});c?"file"===c.row.type||"uploadFile"===c.row.type?r.current=(0,w._6)(c.row.path)||S.Dl:"dir"===c.row.type?r.current=c.row.path:r.current=c.row.dir:r.current=D();var s="nodes"!==e.type||(0,w.Ag)(e.nodes).every(function(e){var t;return tP(e,null!=(t=r.current)?t:D())});if(y(s),(null==c?void 0:c.row.type)!=="dir"){b.current&&(clearTimeout(b.current.timer),b.current=null);return}var f=c.row.path;if(b.current){if(b.current.dir===f)return;clearTimeout(b.current.timer),b.current=null}if(s){var d=setTimeout(function(){var e;null!=(e=x().get(f))&&e.expanded||U(f)},400);b.current={dir:f,timer:d}}}}},drop:function(e,t){var n,i=null!=(n=r.current)?n:D();if("nodes"===e.type){m({to:i,nodes:e.nodes}),r.current=null;return}e.dirContent.then(function(e){var t=e.reduce(function(e,t){return t.size+e},0);return e.length>tn.Qq?void l("Trying to upload too many files at once. Please try again with fewer files."):t>tn.wr?void l("Total file upload size exceeds maximum limit. Please try again with smaller files."):void v({parentPath:i===S.Dl?void 0:i,files:e.filter(Boolean),onError:l})}),r.current=null},collect:function(e){return{isOver:e.isOver()}}}},[]),2))[0].isOver,P=E[1],R=eG(tJ),(0,f.useEffect)(function(){if(R(C),C){var e,t=null==(e=i.current)?void 0:e.getBoundingClientRect();o.current=t?{x:t.x,y:t.y}:null,t&&_({width:t.width,height:t.height});return}b.current&&(clearTimeout(b.current.timer),b.current=null),r.current=null,n(null)},[R,C,n,_]),Y=eG(tL),(0,f.useEffect)(function(){var e=i.current;if(e){var t=e3()(function(){Y(e.scrollTop)},200);return e.addEventListener("scroll",t),function(){t.cancel(),e.removeEventListener("scroll",t)}}},[Y]),{dropRef:A?void 0:P,containerRef:i}),Z=N.dropRef,H=N.containerRef,W=eG(ek),j=ej(X),B=ej(O);F=eG(eM),k=eB(eR),(0,f.useEffect)(function(){var e=function(){k.current&&F(k.current)};return e(),k.subscribe(e)},[k,F]);var G=(0,p.S)([e.scrollRef,Z,H],{breadcrumb:"client/workspace/components/Filetree/index.tsx:163"});return(0,s.FD)(tz.S,{css:re.content,px:2,innerRef:G,onKeyDown:M,onContextMenu:j?function(e){e.target===e.currentTarget&&j(e,{type:d.pt.Directory,path:B})}:void 0,onClick:function(e){e.target===e.currentTarget&&W()},children:[(0,s.Y)(n8,{}),(0,s.FD)(tz.S,{css:re.scroll,role:"tree",children:[(0,c._)(I.values()).map(function(e){var t=e.key,n=e.index;return(0,s.Y)(n3,{index:n},t)}),(0,s.Y)(rr,{}),(0,s.Y)(tW,{}),(0,s.Y)(t$,{})]})]})}),rn=(0,f.memo)(function(){var e,t,n,r,i,o,l,a,u,d,p,h,v,g,m,y,w,b,x,D,S=(t=(0,f.useRef)(null),n=ej(ev),r=eK(ev),i=eK(J),o=(0,tu.A)(function(){return function(e){var t=r()[e];return t?Q(i(),t.type):0}},[r,i]),l=eK(V),a=eB(eg),u=(0,f.useRef)(ej(Z)),d=(0,tr.Te)({count:n.length,overscan:null!=(e=l().overscan)?e:100,getScrollElement:function(){return t.current},getItemKey:function(e){var t=n[e];return t?"error"===t.type?"error:"+t.dir+t.message:"divider"===t.type?"divider:"+t.dir+t.label:"emptyDir"===t.type?"emptyDir:"+t.dir:"create"===t.type?"create:"+t.dir:t.type+":"+t.path:""},estimateSize:o,rangeExtractor:function(e){var t=(0,ti.vp)(e);return null===a.current||t.includes(a.current)||void 0===n[a.current]?t:(0,c._)(t).concat([a.current])}}),(0,f.useEffect)(function(){u.current&&d.scrollToOffset(u.current)},[d,u]),p=eG(K),h=d.getVirtualItems(),v=d.getTotalSize(),(0,f.useEffect)(function(){p({rows:h,scrollHeight:v})},[p,h,v]),g=ej(G),(0,f.useEffect)(function(){if(g){var e=function(e){null!==e&&d.getVirtualItems()[e]&&d.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout(function(){return e(a.current)}),a.subscribe(e)}},[d,a,g]),m=eG(ez),(0,f.useEffect)(function(){m(d)},[m,d]),{scrollRef:t,virtualizer:d}).scrollRef;return y=eB(eV),w=eK(V),(0,f.useEffect)(function(){return y.subscribe(function(e){if(e){var t=w(),n=t.readOnly,r=t.onDeleteNodes,i=t.fs;!n&&r&&r({nodes:e,confirm:function(){return function(e,t){return eq.apply(this,arguments)}(i,e)}})}})},[w,y]),b=ej(t9),x=eB(ef),D=eG(ne),(0,f.useEffect)(function(){if(b){var e,t,n=null,r=null!=(e=window.requestIdleCallback)?e:window.requestAnimationFrame,i=null!=(t=window.cancelIdleCallback)?t:window.cancelAnimationFrame,o=t1()(function(){n&&i(n),n=r(D)},1e3),l=x.subscribe(o);return document.addEventListener("visibilitychange",D),document.addEventListener("beforeunload",D),function(){o.cancel(),n&&i(n),document.removeEventListener("visibilitychange",D),document.removeEventListener("beforeunload",D),l(),D()}}},[b,x,D]),(0,s.Y)(rt,{scrollRef:S})}),rr=(0,f.memo)(function(){var e=ej(B),t=eG(eb);return(0,s.Y)(s.FK,{children:e.map(function(e){return(0,s.Y)(tz.S,{tag:"button",onClick:function(){return t(e.dir)},css:re.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(tw.gutterWidth,"), ").concat(e.y,"px)")},children:(0,s.Y)(tz.S,{})},"gutter"+e.dir+e.depth+e.y)})})});function ri(e){var t,n,r;return t=(0,e6.A)().showError,n=(0,g._)((0,f.useState)(function(){var n,r,i,o,l=(0,y.y$)();l.set(V,e);var a=null!=(n=e.root)?n:S.Dl,u=e.localCacheKey?(i=e.localCacheKey,o=t2.A.get(t7(i)),e5.J(t3,o)?{dirInfo:new Map(Object.entries(o.dirInfo)),scrollOffset:o.scrollOffset}:null):null;u&&l.set(Z,u.scrollOffset);var c=null!=(r=null==u?void 0:u.dirInfo)?r:new Map;return c.has(a)||c.set(a,{expanded:!0}),l.set(ef,c),e.focusedPath&&l.set(M,e.focusedPath),{store:l,create:function(e,t){if(t)return void l.set(eU,{parentPath:t,fileType:e});var n=a,r=l.get(eP);(null==r?void 0:r.type)===d.pt.File?n=(0,w._6)(r.path)||S.Dl:(null==r?void 0:r.type)===d.pt.Directory&&(n=r.path),l.set(eU,{parentPath:n,fileType:e})},setPresenceState:function(e){l.set(I,e)},setFileStatus:function(e){l.set(N,e)},rename:function(e){l.set(W,e)},move:function(e){l.set(tR,e)},upload:function(e){l.set(tF,(0,nn._)((0,nt._)({},e),{onError:t}))},onLoad:function(t){var n=e.fs.watchDir(a,{onChange:function(){t({error:null}),n()},onError:function(e){t({error:e}),n()}});return n},select:function(e){return null===e?l.set(ek):l.set(eT,e)},scrollToPath:function(e){return l.set(eM,e)},hasLocalCache:!!u,getChildren:function(e){var t,n;return null!=(n=null==(t=l.get(ef).get(e))?void 0:t.children)?n:null},getSelectedNode:function(){return l.get(eP)},getSelectedNodes:function(){return l.get(eC)},deleteNodes:function(e){l.set(eX,e)},collapse:function(e){return l.set(eb,e)},getExpandedDirs:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S.Dl,n=new Set,r=!0,i=!1,o=void 0;try{for(var l,a=e[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){var u=(0,g._)(l.value,2),c=u[0],s=u[1];c!==t&&s.expanded&&(t===S.Dl||(0,_.hL)(t,c))&&n.add(c)}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return 0===n.size?null:n}(l.get(ef),e)},expandParentDirsToPath:function(e){var t=(0,n9.q)(e).slice(0,-1),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;l.set(eD,u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}}}),1)[0],(0,f.useEffect)(function(){n.store.set(V,e)},[n.store,e]),(0,f.useEffect)(function(){var e=!0,t=!1,r=void 0;try{for(var i,o=n.store.get(ef)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var l=(0,g._)(i.value,2),a=l[0];l[1].expanded&&n.store.set(eD,a)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}return function(){var e=!0,t=!1,r=void 0;try{for(var i,o=n.store.get(ef)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var l,a=(0,g._)(i.value,2),u=(a[0],a[1]);null==(l=u.disposeWatcher)||l.call(u)}}catch(e){t=!0,r=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw r}}}},[n.store]),r=(0,na.A)(e.onLoad),(0,f.useEffect)(function(){return n.onLoad(function(e){var t;return null==(t=r.current)?void 0:t.call(r,e)})},[n,r]),n}function ro(e){return(0,s.Y)(eH,{store:e.store,children:(0,s.Y)(rn,{})})}},77562:(e,t,n)=>{"use strict";n.d(t,{Ni:()=>o,a4:()=>i,fp:()=>l,iY:()=>a});var r=Object.values(n(46023).A.multiplayer);function i(e){var t={};return r.forEach(function(e){t[e]=0}),e.forEach(function(e){t[e.color]++}),Object.keys(t).sort(function(e,n){return t[e]-t[n]})[0]}function o(e){var t=e.sessions.sort(function(e,t){return e.timestamp-t.timestamp}),n=!0,r=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var a=o.value;if(a.activeFile)return a.activeFile}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return null}function l(e,t){var n=t.find(function(t){return t.sessions.some(function(t){return t.id===e})});if(!n)throw Error("Expected user with session ID ".concat(e));return n}function a(e){var t=e.seconds,n=e.nanos;return Number(t||0)+(n||0)/1e9}},77694:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(17844),i=n(81073),o=n(21462),l=n(46011),a=n(27741),u=n(20809),c=n(78835),s=n(25578),f=(0,o.memo)(s.Ay);function d(e){var t=e.source,n=e.sourcePos,o=e.fs,s=e.path,d=e.onCodeInsert,p=(0,u.l)(o,s),h=(0,l.A)(t,100),v=(0,a.A)(function(){return{img:p,a:function(e){return(0,i.Y)(c.A,(0,r._)({filePath:s},e))}}},[p,s]);return(0,i.Y)(f,{onCodeInsert:d,components:v,sourcePos:n,children:h})}},86139:(e,t,n)=>{"use strict";n.d(t,{$:()=>g,o:()=>v});var r=n(12694),i=n(21462),o=n(684),l=n(45843),a=n(79932),u=n(14596),c=n(55100),s=n(27741),f=n(30908),d=o.ZU.Array(o.ZU.String()),p=function(e){return"repl:hiddenFiles:"+e},h={get:function(e){var t=f.A.get(p(e));return l.J(d,t)?t:null},set:function(e,t){f.A.set(p(e),t)}},v=function(e){var t=(0,c.A)(),n=(0,r._)((0,i.useState)(function(){return h.get(t)}),2),o=n[0],l=n[1];return(0,i.useEffect)(function(){return e.watch(function(e){var n=function(e){h.set(t,e),l(e)};if(e.error){e.error===u.DO.NotFound&&n([]);return}if(!e.config.hidden)return void n([]);n(e.config.hidden)})},[e,t]),o},g=function(e){var t=v(e);return(0,s.A)(function(){return null===t?null:t.map(function(e){return(0,a.tL)(e)||e})},[t])}},88645:(e,t,n)=>{"use strict";n.d(t,{Qq:()=>l,Yv:()=>i,rX:()=>o});var r=n(86105);function i(e,t){for(var n=0;n<t.length;n+=1e4)e.push.apply(e,(0,r._)(t.slice(n,n+1e4)))}function o(e){return(0,r._)(Array(e))}function l(e,t){return Array.from(new Set(e.map(function(e){return e[t]}))).map(function(n){return e.find(function(e){return e[t]===n})}).filter(function(e){return!!e})}}}]);
//# sourceMappingURL=2911-c251071bbc9ac674.js.map