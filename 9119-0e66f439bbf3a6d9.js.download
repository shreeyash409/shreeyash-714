!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2f635b3e-3af7-40bd-b79f-7f5176c7cc71",e._sentryDebugIdIdentifier="sentry-dbid-2f635b3e-3af7-40bd-b79f-7f5176c7cc71")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"b5bd925e"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9119],{519:(e,t,n)=>{e=n.nmd(e);var r=n(74718),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,s=i&&i.exports===o&&r.process,a=function(){try{var e=i&&i.require&&i.require("util").types;if(e)return e;return s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a},755:(e,t,n)=>{"use strict";n(45511),t.stringify=n(13763)},867:e=>{e.exports=Array.isArray},1250:(e,t,n)=>{var r=n(46027),o=n(16450),i=n(867),s=n(14929),a=n(18298),c=n(38665);e.exports=function(e,t,n){t=r(t,e);for(var l=-1,u=t.length,h=!1;++l<u;){var d=c(t[l]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++l!=u?h:!!(u=null==e?0:e.length)&&a(u)&&s(d,u)&&(i(e)||o(e))}},2417:(e,t,n)=>{"use strict";var r;e=n.hmd(e),function(e){var t,n=e.Symbol;if("function"==typeof n)if(n.observable)t=n.observable;else{t="function"==typeof n.for?n.for("https://github.com/benlesh/symbol-observable"):n("https://github.com/benlesh/symbol-observable");try{n.observable=t}catch(e){}}else t="@@observable"}(r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:e)},3034:(e,t,n)=>{var r=n(82087),o=n(69246),i=n(867),s=n(31266),a=1/0,c=r?r.prototype:void 0,l=c?c.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(i(t))return o(t,e)+"";if(s(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-a?"-0":n}},3107:(e,t,n)=>{"use strict";function r(e){return Symbol.for(e)}n.d(t,{l:()=>o,n:()=>r});var o=new function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var o=new e(n._currentContext);return o._currentContext.set(t,r),o},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}}},3181:(e,t,n)=>{"use strict";var r;n.d(t,{v:()=>r}),function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(r||(r={}))},3938:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4409:(e,t,n)=>{var r=n(43397);e.exports=function(e){return r(this,e).get(e)}},4563:(e,t,n)=>{e.exports=n(28811)["__core-js_shared__"]},5446:(e,t,n)=>{var r=n(29643),o=n(46027),i=n(14929),s=n(54557),a=n(38665);e.exports=function(e,t,n,c){if(!s(e))return e;t=o(t,e);for(var l=-1,u=t.length,h=u-1,d=e;null!=d&&++l<u;){var f=a(t[l]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(l!=h){var g=d[f];void 0===(p=c?c(g,f,d):void 0)&&(p=s(g)?g:i(t[l+1])?[]:{})}r(d,f,p),d=d[f]}return e}},6639:(e,t,n)=>{"use strict";n.d(t,{_:()=>f});var r=n(3107),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},i=function(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},s=function(){function e(){}return e.prototype.active=function(){return r.l},e.prototype.with=function(e,t,n){for(var r=[],s=3;s<arguments.length;s++)r[s-3]=arguments[s];return t.call.apply(t,i([n],o(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),a=n(7079),c=n(17063),l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},u=function(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},h="context",d=new s,f=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return(0,a.$G)(h,e,c.K.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(r=this._getContextManager()).with.apply(r,u([e,t,n],l(o),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return(0,a.mS)(h)||d},e.prototype.disable=function(){this._getContextManager().disable(),(0,a.kv)(h,c.K.instance())},e}()},6841:(e,t,n)=>{var r=n(54557),o=n(20815),i=n(78047),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=o(e),n=[];for(var a in e)"constructor"==a&&(t||!s.call(e,a))||n.push(a);return n}},7002:(e,t,n)=>{var r=n(3034);e.exports=function(e){return null==e?"":r(e)}},7079:(e,t,n)=>{"use strict";n.d(t,{mS:()=>l,$G:()=>c,kv:()=>u});var r="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},o="1.9.0",i=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,s=function(e){var t=new Set([e]),n=new Set,r=e.match(i);if(!r)return function(){return!1};var o={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=o.prerelease)return function(t){return t===e};function s(e){return n.add(e),!1}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(i);if(!r)return s(e);var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(null!=a.prerelease||o.major!==a.major)return s(e);if(0===o.major)return o.minor===a.minor&&o.patch<=a.patch?(t.add(e),!0):s(e);return o.minor<=a.minor?(t.add(e),!0):s(e)}}(o),a=Symbol.for("opentelemetry.js.api."+o.split(".")[0]);function c(e,t,n,i){void 0===i&&(i=!1);var s,c=r[a]=null!=(s=r[a])?s:{version:o};if(!i&&c[e]){var l=Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(l.stack||l.message),!1}if(c.version!==o){var l=Error("@opentelemetry/api: Registration of version v"+c.version+" for "+e+" does not match previously registered API v"+o);return n.error(l.stack||l.message),!1}return c[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+o+"."),!0}function l(e){var t,n,o=null==(t=r[a])?void 0:t.version;if(o&&s(o))return null==(n=r[a])?void 0:n[e]}function u(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+o+".");var n=r[a];n&&delete n[e]}},8360:(e,t,n)=>{e.exports=n(11650)(n(28811),"Promise")},8407:(e,t,n)=>{"use strict";n.d(t,{I:()=>d});var r=n(41921),o=n(40359),i=n(57627),s=n(63650),a=n(45843),c=n(27115),l=class{budgetConsumed;intervalHandle;options;constructor(e){this.options=e,this.budgetConsumed=0}getBackoffMs(){if(0===this.getBudgetConsumed())return 0;let e=Math.max(0,this.getBudgetConsumed()-1),t=Math.floor(Math.random()*this.options.maxJitterMs);return Math.min(this.options.baseIntervalMs*2**e,this.options.maxBackoffMs)+t}get totalBudgetRestoreTime(){return this.options.budgetRestoreIntervalMs*this.options.attemptBudgetCapacity}consumeBudget(){this.stopLeak(),this.budgetConsumed=this.getBudgetConsumed()+1}getBudgetConsumed(){return this.budgetConsumed}hasBudget(){return this.getBudgetConsumed()<this.options.attemptBudgetCapacity}startRestoringBudget(){this.intervalHandle||(this.intervalHandle=setInterval(()=>{let e=this.budgetConsumed;if(!e)return void this.stopLeak();let t=e-1;0!==t&&(this.budgetConsumed=t)},this.options.budgetRestoreIntervalMs))}stopLeak(){this.intervalHandle&&(clearInterval(this.intervalHandle),this.intervalHandle=void 0)}close(){this.stopLeak()}},u=class extends r.oK{options;retryBudget;reconnectOnConnectionDrop=!0;handshakeExtensions;sessions;constructor(e,t){super(e,t),this.sessions=new Map,this.options={...o.I$,...t},this.retryBudget=new l(this.options)}extendHandshake(e){this.handshakeExtensions=e}tryReconnecting(e){let t=this.sessions.get(e);!this.options.enableTransparentSessionReconnects&&t&&this.deleteSession(t),this.reconnectOnConnectionDrop&&"open"===this.getStatus()&&this.connect(e)}send(e,t){if("closed"===this.getStatus()){let e="transport is closed, cant send";throw this.log?.error(e,{clientId:this.clientId,transportMessage:t,tags:["invariant-violation"]}),Error(e)}let n=this.sessions.get(e);return n||(n=this.createUnconnectedSession(e)),n.send(t)}createUnconnectedSession(e){let t=o.Dl.entrypoint(e,this.clientId,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}},this.options,this.log);return this.updateSession(t),t}onConnectingFailed(e){let t=super.onConnectingFailed(e);return this.tryReconnecting(t.to),t}onConnClosed(e){let t=super.onConnClosed(e);return this.tryReconnecting(t.to),t}onConnectionEstablished(e,t){let n=o.Dl.transition.ConnectingToHandshaking(e,t,{onConnectionErrored:e=>{let t=(0,i.xH)(e);this.log?.error(`connection to ${n.to} errored during handshake: ${t}`,n.loggingMetadata)},onConnectionClosed:()=>{this.log?.warn(`connection to ${n.to} closed during handshake`,n.loggingMetadata),this.onConnClosed(n)},onHandshake:e=>{this.onHandshakeResponse(n,e)},onInvalidHandshake:(t,o)=>{this.log?.error(`invalid handshake: ${t}`,n.loggingMetadata),this.deleteSession(e,{unhealthy:!0}),this.protocolError({type:r.bd.HandshakeFailed,code:o,message:t})},onHandshakeTimeout:()=>{this.log?.error(`connection to ${n.to} timed out during handshake`,n.loggingMetadata),this.onConnClosed(n)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(n)}});return this.updateSession(n),this.sendHandshake(n),n}rejectHandshakeResponse(e,t,n){e.conn.telemetry?.span.setStatus({code:s.s.ERROR,message:t}),this.log?.warn(t,n),this.deleteSession(e,{unhealthy:!0})}onHandshakeResponse(e,t){if(!a.J(i.O9,t.payload))return void this.rejectHandshakeResponse(e,"received invalid handshake response",{...e.loggingMetadata,transportMessage:t,validationErrors:[...c.I(i.O9,t.payload)]});if(!t.payload.status.ok){let n=a.J(i.Bi,t.payload.status.code),o=`handshake failed: ${t.payload.status.reason}`,s=e.to;this.rejectHandshakeResponse(e,o,{...e.loggingMetadata,transportMessage:t}),n?this.tryReconnecting(s):this.protocolError({type:r.bd.HandshakeFailed,code:t.payload.status.code,message:o});return}if(t.payload.status.sessionId!==e.id){let n=`session id mismatch: expected ${e.id}, got ${t.payload.status.sessionId}`;this.rejectHandshakeResponse(e,n,{...e.loggingMetadata,transportMessage:t});return}this.log?.info(`handshake from ${t.from} ok`,{...e.loggingMetadata,transportMessage:t});let n=o.Dl.transition.HandshakingToConnected(e,{onConnectionErrored:e=>{let t=(0,i.xH)(e);this.log?.warn(`connection to ${n.to} errored: ${t}`,n.loggingMetadata)},onConnectionClosed:()=>{this.log?.info(`connection to ${n.to} closed`,n.loggingMetadata),this.onConnClosed(n)},onMessage:e=>this.handleMsg(e),onInvalidMessage:e=>{this.deleteSession(n,{unhealthy:!0}),this.protocolError({type:r.bd.InvalidMessage,message:e})}});this.updateSession(n),this.retryBudget.startRestoringBudget()}connect(e){if("open"!==this.getStatus())return void this.log?.info(`transport state is no longer open, cancelling attempt to connect to ${e}`);let t=this.sessions.get(e);if("NoConnection"!==(t??=this.createUnconnectedSession(e)).state)return void this.log?.debug(`session to ${e} has state ${t.state}, skipping connect attempt`,t.loggingMetadata);if(!this.retryBudget.hasBudget()){let n=this.retryBudget.getBudgetConsumed(),o=`tried to connect to ${e} but retry budget exceeded (more than ${n} attempts in the last ${this.retryBudget.totalBudgetRestoreTime}ms)`;this.log?.error(o,t.loggingMetadata),this.protocolError({type:r.bd.RetriesExceeded,message:o});return}let n=this.retryBudget.getBackoffMs();this.log?.info(`attempting connection to ${e} (${n}ms backoff)`,t.loggingMetadata),this.retryBudget.consumeBudget();let i=o.Dl.transition.NoConnectionToBackingOff(t,n,{onBackoffFinished:()=>{this.onBackoffFinished(i)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(i)}});this.updateSession(i)}onBackoffFinished(e){let t=i.VL.startActiveSpan("connect",async t=>{try{return await this.createNewOutgoingConnection(e.to)}catch(n){let e=(0,i.xH)(n);throw t.recordException(e),t.setStatus({code:s.s.ERROR}),n}finally{t.end()}}),n=o.Dl.transition.BackingOffToConnecting(e,t,{onConnectionEstablished:e=>{this.log?.debug(`connection to ${n.to} established`,{...e.loggingMetadata,...n.loggingMetadata}),this.onConnectionEstablished(n,e)},onConnectionFailed:e=>{let t=(0,i.xH)(e);this.log?.error(`error connecting to ${n.to}: ${t}`,n.loggingMetadata),this.onConnectingFailed(n)},onConnectionTimeout:()=>{this.log?.error(`connection to ${n.to} timed out`,n.loggingMetadata),this.onConnectingFailed(n)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(n)}});this.updateSession(n)}async sendHandshake(e){let t;if(this.handshakeExtensions&&(t=await this.handshakeExtensions.construct()),e._isConsumed)return;let n=(0,i.sE)({from:this.clientId,to:e.to,sessionId:e.id,expectedSessionState:{nextExpectedSeq:e.ack,nextSentSeq:e.nextSeq()},metadata:t,tracing:(0,i.oG)(e.telemetry.ctx)});this.log?.debug(`sending handshake request to ${e.to}`,{...e.loggingMetadata,transportMessage:n}),e.sendHandshake(n)}close(){this.retryBudget.close(),super.close()}},h=class extends r.Ng{ws;extras;get loggingMetadata(){let e=super.loggingMetadata;return this.extras&&(e.extras=this.extras),e}constructor(e,t){super(),this.ws=e,this.extras=t,this.ws.binaryType="arraybuffer";let n=!1;this.ws.onerror=()=>{n=!0},this.ws.onclose=({code:e,reason:t})=>{if(n){let n=Error(`websocket closed with code and reason: ${e} - ${t}`);for(let e of this.errorListeners)e(n)}for(let e of this.closeListeners)e()},this.ws.onmessage=e=>{for(let t of this.dataListeners)t(e.data)}}send(e){return this.ws.readyState===this.ws.OPEN&&(this.ws.send(e),!0)}close(){this.ws.close(1e3)}},d=class extends u{wsGetter;constructor(e,t,n){super(t,n),this.wsGetter=e}async createNewOutgoingConnection(e){this.log?.info(`establishing a new websocket to ${e}`,{clientId:this.clientId,connectedTo:e});let t=await this.wsGetter(e);await new Promise((e,n)=>t.readyState===t.OPEN?void e():t.readyState===t.CLOSING||t.readyState===t.CLOSED?void n(Error("ws is closing or closed")):void(t.onopen=()=>{e()},t.onclose=e=>{n(Error(e.reason))},t.onerror=e=>{n(Error(e.message))}));let n=new h(t);return this.log?.info(`raw websocket to ${e} ok`,{clientId:this.clientId,connectedTo:e,...n.loggingMetadata}),n}}},8527:(e,t,n)=>{var r=n(94995),o=n(50482);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},9964:(e,t,n)=>{e.exports=n(96979)(Object.keys,Object)},11499:(e,t,n)=>{e.exports=n(11650)(n(28811),"WeakMap")},11650:(e,t,n)=>{var r=n(53473),o=n(58330);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},12096:(e,t,n)=>{var r=n(47225),o=n(68185);e.exports=function(e,t){return e&&r(t,o(t),e)}},13763:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,o){return(n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e)?Object.keys(e).map(function(o){var i=encodeURIComponent(t(o))+r;return Array.isArray(e[o])?e[o].map(function(e){return i+encodeURIComponent(t(e))}).join(n):i+encodeURIComponent(t(e[o]))}).join(n):o?encodeURIComponent(t(o))+r+encodeURIComponent(t(e)):""}},14225:(e,t,n)=>{var r=n(65439);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},14929:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?0x1fffffffffffff:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},15828:(e,t,n)=>{var r=n(66388);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},16450:(e,t,n)=>{var r=n(64162),o=n(50482),i=Object.prototype,s=i.hasOwnProperty,a=i.propertyIsEnumerable;e.exports=r(function(){return arguments}())?r:function(e){return o(e)&&s.call(e,"callee")&&!a.call(e,"callee")}},16875:(e,t,n)=>{"use strict";let r;n.d(t,{$C:()=>T,Bi:()=>R,EK:()=>et,O9:()=>H,UU:()=>ea,YD:()=>z,_I:()=>Y,bH:()=>F,f2:()=>ef,iH:()=>Q,mH:()=>j,o0:()=>W,oG:()=>J,rE:()=>ep,sE:()=>q,ug:()=>L,uq:()=>P,vL:()=>B,xH:()=>el,yU:()=>A});var o=n(684),i=n(17616),s=n(77392),a=n(57010),c=n(66218),l=n(3181),u=n(45843),h=n(27115),d="UNCAUGHT_ERROR",f="UNEXPECTED_DISCONNECT",p="INVALID_REQUEST",g="CANCEL",y=e=>o.ZU.Object({ok:o.ZU.Literal(!1),payload:e}),v=o.ZU.Object({path:o.ZU.String(),message:o.ZU.String()});function m(e){let t=[];for(let n of e)t.push({path:n.path,message:n.message});return t}o.ZU.Array(v);var b=o.ZU.Object({code:o.ZU.Literal(g),message:o.ZU.String()}),w=y(b),x=o.ZU.Union([o.ZU.Object({code:o.ZU.Literal(d),message:o.ZU.String()}),o.ZU.Object({code:o.ZU.Literal(f),message:o.ZU.String()}),o.ZU.Object({code:o.ZU.Literal(p),message:o.ZU.String(),extras:o.ZU.Optional(o.ZU.Object({firstValidationErrors:o.ZU.Array(v),totalErrors:o.ZU.Number()}))}),b]),E=y(x);function _(e){return"Union"===e[Kind]}function C(e){return JSON.parse(JSON.stringify(e))}var S=class e{initializeState;procedures;constructor(e,t){this.initializeState=e.initializeState,this.procedures=t}static scaffold(e){return new M(e)}static define(t,n){let r,o;if("initializeState"in t&&"function"==typeof t.initializeState){if(!n)throw Error("Expected procedures to be defined");r=t,o=n}else r={initializeState:()=>({})},o=t;return new e(r,o)}serialize(){return{procedures:Object.fromEntries(Object.entries(this.procedures).map(([e,t])=>[e,{init:C(t.requestInit),output:C(t.responseData),errors:k(t),..."description"in t?{description:t.description}:{},type:t.type,..."requestData"in t?{input:C(t.requestData)}:{}}]))}}serializeV1Compat(){return{procedures:Object.fromEntries(Object.entries(this.procedures).map(([e,t])=>"rpc"===t.type||"subscription"===t.type?[e,{input:C(t.requestInit),output:C(t.responseData),errors:k(t),..."description"in t?{description:t.description}:{},type:t.type}]:[e,{init:C(t.requestInit),output:C(t.responseData),errors:k(t),..."description"in t?{description:t.description}:{},type:t.type,input:C(t.requestData)}]))}}instantiate(e){let t=this.initializeState(e),n=async()=>{await t[Symbol.asyncDispose]?.(),t[Symbol.dispose]?.()};return Object.freeze({state:t,procedures:this.procedures,[Symbol.asyncDispose]:n})}};function k(e){return"responseError"in e&&"Never"!==e.responseError[Kind2]?C(function(e){if(!_(e))return e;let t=[];return!function e(n){if(_(n))for(let t of n.anyOf)e(t);else t.push(n)}(e),Type.Union(t)}(Type2.Union([e.responseError,x]))):C(x)}var M=class{config;constructor(e){this.config=e}procedures(e){return e}finalize(e){return S.define(this.config,e)}},O=(0,i.d_)("1234567890abcdefghijklmnopqrstuvxyzABCDEFGHIJKLMNOPQRSTUVXYZ"),T=()=>O(12),U=o.ZU.Object({type:o.ZU.Literal("ACK")}),I=o.ZU.Object({type:o.ZU.Literal("CLOSE")}),j="v2.0",B=["v1.1",j];function L(e){return B.includes(e)}var A=o.ZU.Object({type:o.ZU.Literal("HANDSHAKE_REQ"),protocolVersion:o.ZU.String(),sessionId:o.ZU.String(),expectedSessionState:o.ZU.Object({nextExpectedSeq:o.ZU.Integer(),nextSentSeq:o.ZU.Integer()}),metadata:o.ZU.Optional(o.ZU.Unknown())}),R=o.ZU.Union([o.ZU.Literal("SESSION_STATE_MISMATCH")]),P=o.ZU.Union([o.ZU.Literal("REJECTED_UNSUPPORTED_CLIENT"),o.ZU.Literal("REJECTED_BY_CUSTOM_HANDLER")]),$=o.ZU.Union([P,o.ZU.Literal("MALFORMED_HANDSHAKE_META"),o.ZU.Literal("MALFORMED_HANDSHAKE"),o.ZU.Literal("PROTOCOL_VERSION_MISMATCH")]),D=o.ZU.Union([R,$]),H=o.ZU.Object({type:o.ZU.Literal("HANDSHAKE_RESP"),status:o.ZU.Union([o.ZU.Object({ok:o.ZU.Literal(!0),sessionId:o.ZU.String()}),o.ZU.Object({ok:o.ZU.Literal(!1),reason:o.ZU.String(),code:D})])}),N=o.ZU.Union([I,U,A,H]),F=(r=o.ZU.Unknown(),o.ZU.Object({id:o.ZU.String(),from:o.ZU.String(),to:o.ZU.String(),seq:o.ZU.Integer(),ack:o.ZU.Integer(),serviceName:o.ZU.Optional(o.ZU.String()),procedureName:o.ZU.Optional(o.ZU.String()),streamId:o.ZU.String(),controlFlags:o.ZU.Integer(),tracing:o.ZU.Optional(o.ZU.Object({traceparent:o.ZU.String(),tracestate:o.ZU.String()})),payload:r}));function q({from:e,to:t,sessionId:n,expectedSessionState:r,metadata:o,tracing:i}){return{id:T(),from:e,to:t,seq:0,ack:0,streamId:T(),controlFlags:0,tracing:i,payload:{type:"HANDSHAKE_REQ",protocolVersion:j,sessionId:n,expectedSessionState:r,metadata:o}}}function z({from:e,to:t,status:n}){return{id:T(),from:e,to:t,seq:0,ack:0,streamId:T(),controlFlags:0,payload:{type:"HANDSHAKE_RESP",status:n}}}function Z(e){return{streamId:e,controlFlags:8,payload:{type:"CLOSE"}}}function V(e,t){return{streamId:e,controlFlags:4,payload:t}}function W(e){return(1&e)==1}var G=o.ZU.Union([o.ZU.Object({ok:o.ZU.Literal(!1),payload:o.ZU.Object({code:o.ZU.String(),message:o.ZU.String(),extras:o.ZU.Optional(o.ZU.Unknown())})}),o.ZU.Object({ok:o.ZU.Literal(!0),payload:o.ZU.Unknown()})]);function K(e){return{ok:!0,payload:e}}function X(e){return{ok:!1,payload:e}}function J(e){let t={traceparent:"",tracestate:""};return s.$.inject(e,t),t}function Q(e,t,n,r,o){let i=o?s.$.extract(a._.active(),o):a._.active(),l=e.startSpan("river.session",{attributes:{component:"river","river.session.id":t,"river.session.to":n,"river.session.from":r}},i),u=c.u.setSpan(i,l);return{span:l,ctx:u}}function Y(e,t,n){let r=e.startSpan("river.connection",{attributes:{component:"river","river.connection.id":t.id},links:[{context:n.span.spanContext()}]},n.ctx),o=c.u.setSpan(n.ctx,r);return{span:r,ctx:o}}function ee(e,t){e.setStatus({code:SpanStatusCode.ERROR,message:t.message}),e.setAttributes({"river.error_code":t.code,"river.error_message":t.message})}function et(){return c.u.getTracer("river",ep)}var en={code:"READABLE_BROKEN",message:"Readable was broken before it is fully consumed"},er=class{closed=!1;locked=!1;broken=!1;brokenWithValuesLeftToRead=!1;queue=[];next=null;[Symbol.asyncIterator](){if(this.locked)throw TypeError("Readable is already locked");this.locked=!0;let e=!1;return{next:async()=>{if(e)return{done:!0,value:void 0};for(;0===this.queue.length;){if(this.closed&&!this.brokenWithValuesLeftToRead)return{done:!0,value:void 0};if(this.broken)return e=!0,{done:!1,value:X(en)};this.next||(this.next=function(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}()),await this.next.promise,this.next=null}return{done:!1,value:this.queue.shift()}},return:()=>(this.break(),{done:!0,value:void 0})}}async collect(){let e=[];for await(let t of this)e.push(t);return e}break(){this.broken||(this.locked=!0,this.broken=!0,this.brokenWithValuesLeftToRead=this.queue.length>0,this.queue.length=0,this.next?.resolve())}isReadable(){return!this.locked&&!this.broken}_pushValue(e){if(!this.broken){if(this.closed)throw Error("Cannot push to closed Readable");this.queue.push(e),this.next?.resolve()}}_triggerClose(){if(this.closed)throw Error("Unexpected closing multiple times");this.closed=!0,this.next?.resolve()}_hasValuesInQueue(){return this.queue.length>0}isClosed(){return this.closed}},eo=class{writeCb;closeCb;closed=!1;constructor(e){this.writeCb=e.writeCb,this.closeCb=e.closeCb}write(e){if(this.closed)throw Error("Cannot write to closed Writable");this.writeCb(e)}isWritable(){return!this.closed}close(){this.closed||(this.closed=!0,this.writeCb=()=>void 0,this.closeCb(),this.closeCb=()=>void 0)}isClosed(){return this.closed}},ei=()=>{},es={connectOnInvoke:!0,eagerlyConnect:!0};function ea(e,t,n={}){n.handshakeOptions&&e.extendHandshake(n.handshakeOptions);let r={...es,...n};return r.eagerlyConnect&&e.connect(t),function e(t,n){return new Proxy(ei,{get(r,o){if("string"==typeof o)return e(t,[...n,o])},apply:(e,r,o)=>t({path:n,args:o})})}(n=>{let[o,i,s]=[...n.path];if(!(o&&i&&s))throw Error("invalid river call, ensure the service and procedure you are calling exists");let[d,p]=n.args;if(r.connectOnInvoke&&!e.sessions.has(t)&&e.connect(t),"rpc"!==s&&"subscribe"!==s&&"stream"!==s&&"upload"!==s)throw Error(`invalid river call, unknown procedure type ${s}`);return function(e,t,n,r,o,i,s){let d=t.sessions.get(n)??t.createUnconnectedSession(n),p=t.getSessionBoundSendFn(n,d.id),y="rpc"===e||"subscription"===e,v=T(),{span:m,ctx:b}=function(e,t,n,r,o,i){let s=a._.active(),u=e.startSpan(`river.client.${r}.${o}`,{attributes:{component:"river","river.method.kind":n,"river.method.service":r,"river.method.name":o,"river.streamId":i,"span.kind":"client"},links:[{context:t.telemetry.span.spanContext()}],kind:l.v.CLIENT},s),h=c.u.setSpan(s,u),d={...t.loggingMetadata,transportMessage:{procedureName:o,serviceName:r}};return u.isRecording()&&(d.telemetry={traceId:u.spanContext().traceId,spanId:u.spanContext().spanId}),t.log?.info(`invoked ${r}.${o}`,d),{span:u,ctx:h}}(t.tracer,d,e,o,i,v),w=!0,x=new eo({writeCb:e=>{p({streamId:v,payload:e,controlFlags:0})},closeCb:()=>{m.addEvent("reqWritable closed"),!y&&w&&p(Z(v)),_.isClosed()&&S()}}),_=new er,C=()=>{_._triggerClose(),m.addEvent("resReadable closed"),x.isClosed()&&S()};function S(){t.removeEventListener("message",M),t.removeEventListener("sessionStatus",O),s?.removeEventListener("abort",k),m.end()}function k(){_.isClosed()&&x.isClosed()||(m.addEvent("sending cancel"),w=!1,_.isClosed()||(_._pushValue(X({code:g,message:"cancelled by client"})),C()),x.close(),p(V(v,X({code:g,message:"cancelled by client"}))))}function M(e){if(e.streamId===v){if(e.to!==t.clientId)return void t.log?.error("got stream message from unexpected client",{clientId:t.clientId,transportMessage:e});if((4&e.controlFlags)==4){let n;w=!1,m.addEvent("received cancel"),u.J(E,e.payload)?n=e.payload:(n=X({code:g,message:"stream cancelled with invalid payload"}),t.log?.warn("got stream cancel without a valid protocol error",{clientId:t.clientId,transportMessage:e,validationErrors:[...h.I(E,e.payload)]})),_.isClosed()||(_._pushValue(n),C()),x.close();return}if(_.isClosed()){m.recordException("received message after response stream is closed"),t.log?.error("received message after response stream is closed",{clientId:t.clientId,transportMessage:e});return}u.J(I,e.payload)||(u.J(G,e.payload)?_._pushValue(e.payload):t.log?.error("Got non-control payload, but was not a valid result",{clientId:t.clientId,transportMessage:e,validationErrors:[...h.I(G,e.payload)]})),(8&e.controlFlags)==8&&(m.addEvent("received response close"),_.isClosed()?t.log?.error("received stream close but readable was already closed"):C())}}function O(e){"closing"===e.status&&e.session.to===n&&d.id===e.session.id&&(w=!1,_.isClosed()||(_._pushValue(X({code:f,message:`${n} unexpectedly disconnected`})),C()),x.close())}if(s?.addEventListener("abort",k),t.addEventListener("message",M),t.addEventListener("sessionStatus",O),p({streamId:v,serviceName:o,procedureName:i,tracing:J(b),payload:r,controlFlags:y?10:2}),y&&x.close(),"subscription"===e)return{resReadable:_};if("rpc"===e)return ec(_,t.log);if("upload"===e){let e=!1;return{reqWritable:x,finalize:()=>{if(e)throw Error("upload stream already finalized");return e=!0,x.isClosed()||x.close(),ec(_,t.log)}}}return{resReadable:_,reqWritable:x}}("subscribe"===s?"subscription":s,e,t,d,o,i,p?p.signal:void 0)},[])}async function ec(e,t){let n=await e.collect();return n.length>1&&t?.error("Expected single message from server, got multiple"),n[0]}function el(e){return e instanceof Error?e.message||"unknown reason":`[coerced to error] ${String(e)}`}var eu=class{items;maxItems;constructor(e){this.items=new Set,this.maxItems=e}add(e){if(this.items.has(e))this.items.delete(e);else if(this.items.size>=this.maxItems){let e=this.items.values().next();e.done||this.items.delete(e.value)}this.items.add(e)}has(e){return this.items.has(e)}};function eh(e,t){return"v1.1"===t?(4&e)==4:(8&e)==8}function ed(e){return"v1.1"===e?4:8}function ef(e,t){return{schema:e,construct:t}}var ep="0.208.3"},17051:(e,t,n)=>{"use strict";function r(e){for(var t=e.length,n=0,r=0;r<t;){var o=e.charCodeAt(r++);if((0xffffff80&o)==0){n++;continue}if((0xfffff800&o)==0)n+=2;else{if(o>=55296&&o<=56319&&r<t){var i=e.charCodeAt(r);(64512&i)==56320&&(++r,o=((1023&o)<<10)+(1023&i)+65536)}(0xffff0000&o)==0?n+=3:n+=4}}return n}n.d(t,{Zf:()=>s,_u:()=>c,dS:()=>r,yi:()=>i});var o=new TextEncoder;function i(e,t,n){if(e.length>50)o.encodeInto(e,t.subarray(n));else!function(e,t,n){for(var r=e.length,o=n,i=0;i<r;){var s=e.charCodeAt(i++);if((0xffffff80&s)==0){t[o++]=s;continue}if((0xfffff800&s)==0)t[o++]=s>>6&31|192;else{if(s>=55296&&s<=56319&&i<r){var a=e.charCodeAt(i);(64512&a)==56320&&(++i,s=((1023&s)<<10)+(1023&a)+65536)}(0xffff0000&s)==0?t[o++]=s>>12&15|224:(t[o++]=s>>18&7|240,t[o++]=s>>12&63|128),t[o++]=s>>6&63|128}t[o++]=63&s|128}}(e,t,n)}function s(e,t,n){for(var r=t,o=r+n,i=[],s="";r<o;){var a=e[r++];if((128&a)==0)i.push(a);else if((224&a)==192){var c=63&e[r++];i.push((31&a)<<6|c)}else if((240&a)==224){var c=63&e[r++],l=63&e[r++];i.push((31&a)<<12|c<<6|l)}else if((248&a)==240){var c=63&e[r++],l=63&e[r++],u=(7&a)<<18|c<<12|l<<6|63&e[r++];u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u)}else i.push(a);i.length>=4096&&(s+=String.fromCharCode.apply(String,i),i.length=0)}return i.length>0&&(s+=String.fromCharCode.apply(String,i)),s}var a=new TextDecoder;function c(e,t,n){var r;return n>200?(r=e.subarray(t,t+n),a.decode(r)):s(e,t,n)}},17063:(e,t,n)=>{"use strict";n.d(t,{K:()=>h});var r,o=n(7079),i=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},s=function(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},a=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c("verbose",this._namespace,e)},e}();function c(e,t,n){var r=(0,o.mS)("diag");if(r)return n.unshift(t),r[e].apply(r,s([],i(n),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(r||(r={}));var l=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},u=function(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},h=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(0,o.mS)("diag");if(r)return r[e].apply(r,u([],l(t),!1))}}var t=this;t.setLogger=function(e,n){if(void 0===n&&(n={logLevel:r.INFO}),e===t){var i,s,a,c=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!=(i=c.stack)?i:c.message),!1}"number"==typeof n&&(n={logLevel:n});var l=(0,o.mS)("diag"),u=function(e,t){function n(n,r){var o=t[n];return"function"==typeof o&&e>=r?o.bind(t):function(){}}return e<r.NONE?e=r.NONE:e>r.ALL&&(e=r.ALL),t=t||{},{error:n("error",r.ERROR),warn:n("warn",r.WARN),info:n("info",r.INFO),debug:n("debug",r.DEBUG),verbose:n("verbose",r.VERBOSE)}}(null!=(s=n.logLevel)?s:r.INFO,e);if(l&&!n.suppressOverrideMessage){var h=null!=(a=Error().stack)?a:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+h),u.warn("Current logger will overwrite one already registered from "+h)}return(0,o.$G)("diag",u,t,!0)},t.disable=function(){(0,o.kv)("diag",t)},t.createComponentLogger=function(e){return new a(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}()},17418:e=>{e.exports=function(e){return function(){return e}}},17500:e=>{e.exports=function(){this.__data__=[],this.size=0}},18298:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}},18319:(e,t,n)=>{"use strict";var r=n(2272),o=function(e){if(e=e||{},this.Promise=e.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=e.domainReentrant||!1,this.domainReentrant){if(void 0===r||void 0===r.domain)throw Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=e.timeout||o.DEFAULT_TIMEOUT,this.maxOccupationTime=e.maxOccupationTime||o.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=e.maxExecutionTime||o.DEFAULT_MAX_EXECUTION_TIME,e.maxPending===1/0||Number.isInteger(e.maxPending)&&e.maxPending>=0?this.maxPending=e.maxPending:this.maxPending=o.DEFAULT_MAX_PENDING};o.DEFAULT_TIMEOUT=0,o.DEFAULT_MAX_OCCUPATION_TIME=0,o.DEFAULT_MAX_EXECUTION_TIME=0,o.DEFAULT_MAX_PENDING=1e3,o.prototype.acquire=function(e,t,n,o){if(Array.isArray(e))return this._acquireBatch(e,t,n,o);if("function"!=typeof t)throw Error("You must pass a function to execute");var i=null,s=null,a=null;"function"!=typeof n&&(o=n,n=null,a=new this.Promise(function(e,t){i=e,s=t})),o=o||{};var c=!1,l=null,u=null,h=null,d=this,f=function(t,r,o){u&&(clearTimeout(u),u=null),h&&(clearTimeout(h),h=null),t&&(d.queues[e]&&0===d.queues[e].length&&delete d.queues[e],d.domainReentrant&&delete d.domains[e]),c||(a?r?s(r):i(o):"function"==typeof n&&n(r,o),c=!0),t&&d.queues[e]&&d.queues[e].length>0&&d.queues[e].shift()()},p=function(n){if(c)return f(n);l&&(clearTimeout(l),l=null),d.domainReentrant&&n&&(d.domains[e]=r.domain);var i=o.maxExecutionTime||d.maxExecutionTime;if(i&&(h=setTimeout(function(){d.queues[e]&&f(n,Error("Maximum execution time is exceeded "+e))},i)),1===t.length){var s=!1;try{t(function(e,t){s||(s=!0,f(n,e,t))})}catch(e){s||(s=!0,f(n,e))}}else d._promiseTry(function(){return t()}).then(function(e){f(n,void 0,e)},function(e){f(n,e)})};d.domainReentrant&&r.domain&&(p=r.domain.bind(p));var g=o.maxPending||d.maxPending;if(d.queues[e])if(d.domainReentrant&&r.domain&&r.domain===d.domains[e])p(!1);else if(d.queues[e].length>=g)f(!1,Error("Too many pending tasks in queue "+e));else{var y=function(){p(!0)};o.skipQueue?d.queues[e].unshift(y):d.queues[e].push(y);var v=o.timeout||d.timeout;v&&(l=setTimeout(function(){l=null,f(!1,Error("async-lock timed out in queue "+e))},v))}else d.queues[e]=[],p(!0);var m=o.maxOccupationTime||d.maxOccupationTime;if(m&&(u=setTimeout(function(){d.queues[e]&&f(!1,Error("Maximum occupation time is exceeded in queue "+e))},m)),a)return a},o.prototype._acquireBatch=function(e,t,n,r){"function"!=typeof n&&(r=n,n=null);var o=this,i=e.reduceRight(function(e,t){return function(n){o.acquire(t,e,n,r)}},t);if("function"!=typeof n)return new this.Promise(function(e,t){1===i.length?i(function(n,r){n?t(n):e(r)}):e(i())});i(n)},o.prototype.isBusy=function(e){return e?!!this.queues[e]:Object.keys(this.queues).length>0},o.prototype._promiseTry=function(e){try{return this.Promise.resolve(e())}catch(e){return this.Promise.reject(e)}},e.exports=o},19361:(e,t,n)=>{var r=n(90164),o=n(29569),i=n(55922),s=n(43279);e.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=o(e);return t}:s},19806:(e,t,n)=>{var r=n(32446),o=n(63213),i=n(519),s=i&&i.isSet;e.exports=s?o(s):r},20765:(e,t,n)=>{var r=n(43397);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=+(n.size!=o),this}},20815:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},21186:(e,t,n)=>{"use strict";n.d(t,{g:()=>a});var r=function(e,t){this.type=e,this.data=t},o=n(26350),i=n(58059),s={type:-1,encode:function(e){var t,n,r,o;return e instanceof Date?function(e){var t=e.sec,n=e.nsec;if(t>=0&&n>=0&&t<=0x3ffffffff)if(0===n&&t<=0xffffffff){var r=new Uint8Array(4),o=new DataView(r.buffer);return o.setUint32(0,t),r}else{var s=t/0x100000000,r=new Uint8Array(8),o=new DataView(r.buffer);return o.setUint32(0,n<<2|3&s),o.setUint32(4,0|t),r}var r=new Uint8Array(12),o=new DataView(r.buffer);return o.setUint32(0,n),(0,i._j)(o,4,t),r}((n=Math.floor((t=e.getTime())/1e3),o=Math.floor((r=(t-1e3*n)*1e6)/1e9),{sec:n+o,nsec:r-1e9*o})):null},decode:function(e){var t=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:var n=t.getUint32(0),r=0;return{sec:n,nsec:0};case 8:var s=t.getUint32(0),n=(3&s)*0x100000000+t.getUint32(4),r=s>>>2;return{sec:n,nsec:r};case 12:var n=(0,i.eN)(t,4),r=t.getUint32(0);return{sec:n,nsec:r};default:throw new o.X("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(e.length))}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}},a=function(){function e(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(s)}return e.prototype.register=function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var o=1+t;this.builtInEncoders[o]=n,this.builtInDecoders[o]=r}},e.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++){var o=this.builtInEncoders[n];if(null!=o){var i=o(e,t);if(null!=i){var s=-1-n;return new r(s,i)}}}for(var n=0;n<this.encoders.length;n++){var o=this.encoders[n];if(null!=o){var i=o(e,t);if(null!=i){var s=n;return new r(s,i)}}}return e instanceof r?e:null},e.prototype.decode=function(e,t,n){var o=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return o?o(e,t,n):new r(t,e)},e.defaultCodec=new e,e}()},21948:(e,t,n)=>{var r=n(45764);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},22102:(e,t,n)=>{"use strict";function r(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}function o(e){if(e instanceof ArrayBuffer)return new DataView(e);var t=r(e);return new DataView(t.buffer,t.byteOffset,t.byteLength)}n.d(t,{C:()=>r,o:()=>o})},22985:(e,t,n)=>{var r=n(45764),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},23104:(e,t,n)=>{var r=n(47225),o=n(19361);e.exports=function(e,t){return r(e,o(e),t)}},23307:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},23541:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},24839:(e,t,n)=>{var r=n(21948),o=n(38396),i=n(22985),s=n(30493),a=n(86701);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},25361:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},25547:(e,t,n)=>{var r=n(69246),o=n(59099),i=n(33455),s=n(46027),a=n(47225),c=n(92642),l=n(57766),u=n(69047);e.exports=l(function(e,t){var n={};if(null==e)return n;var l=!1;t=r(t,function(t){return t=s(t,e),l||(l=t.length>1),t}),a(e,u(e),n),l&&(n=o(n,7,c));for(var h=t.length;h--;)i(n,t[h]);return n})},25671:(e,t,n)=>{e.exports=n(11650)(n(28811),"Map")},25883:(e,t,n)=>{"use strict";function r(e){return"".concat(e<0?"-":"","0x").concat(Math.abs(e).toString(16).padStart(2,"0"))}n.d(t,{D4:()=>E});var o=n(21186),i=n(58059),s=n(17051),a=n(22102),c=function(){function e(e,t){void 0===e&&(e=16),void 0===t&&(t=16),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return e.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},e.prototype.find=function(e,t,n){var r=this.caches[n-1];e:for(var o=0;o<r.length;o++){for(var i=r[o],s=i.bytes,a=0;a<n;a++)if(s[a]!==e[t+a])continue e;return i.str}return null},e.prototype.store=function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},e.prototype.decode=function(e,t,n){var r=this.find(e,t,n);if(null!=r)return this.hit++,r;this.miss++;var o=(0,s.Zf)(e,t,n),i=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(i,o),o},e}(),l=n(26350),u=function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){var l=[a,c];if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){s=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){s.label=l[1];break}if(6===l[0]&&s.label<o[1]){s.label=o[1],o=l;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(l);break}o[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},h=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){var i,s,a;i=r,s=o,a=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){i({value:e,done:a})},s)})}}},d=function(e){return this instanceof d?(this.v=e,this):new d(e)},f=function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||a(e,t)})})}function a(e,t){try{var n;(n=o[e](t)).value instanceof d?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),i.shift(),i.length&&a(i[0][0],i[0][1])}},p="array",g="map_key",y=new DataView(new ArrayBuffer(0)),v=new Uint8Array(y.buffer);try{y.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var m=RangeError,b=new m("Insufficient data"),w=new c,x=function(){function e(e){var t,n,r,s,a,c,l;this.totalPos=0,this.pos=0,this.view=y,this.bytes=v,this.headByte=-1,this.stack=[],this.extensionCodec=null!=(t=null==e?void 0:e.extensionCodec)?t:o.g.defaultCodec,this.context=null==e?void 0:e.context,this.useBigInt64=null!=(n=null==e?void 0:e.useBigInt64)&&n,this.maxStrLength=null!=(r=null==e?void 0:e.maxStrLength)?r:i.f7,this.maxBinLength=null!=(s=null==e?void 0:e.maxBinLength)?s:i.f7,this.maxArrayLength=null!=(a=null==e?void 0:e.maxArrayLength)?a:i.f7,this.maxMapLength=null!=(c=null==e?void 0:e.maxMapLength)?c:i.f7,this.maxExtLength=null!=(l=null==e?void 0:e.maxExtLength)?l:i.f7,this.keyDecoder=(null==e?void 0:e.keyDecoder)!==void 0?e.keyDecoder:w}return e.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=-1,this.stack.length=0},e.prototype.setBuffer=function(e){this.bytes=(0,a.C)(e),this.view=(0,a.o)(this.bytes),this.pos=0},e.prototype.appendBuffer=function(e){if(-1!==this.headByte||this.hasRemaining(1)){var t=this.bytes.subarray(this.pos),n=(0,a.C)(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}else this.setBuffer(e)},e.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},e.prototype.createExtraByteError=function(e){var t=this.view,n=this.pos;return RangeError("Extra ".concat(t.byteLength-n," of ").concat(t.byteLength," byte(s) found at buffer[").concat(e,"]"))},e.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},e.prototype.decodeMulti=function(e){return u(this,function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:if(!this.hasRemaining(1))return[3,3];return[4,this.doDecodeSync()];case 2:return t.sent(),[3,1];case 3:return[2]}})},e.prototype.decodeAsync=function(e){var t,n,o,i,s,a,c,l,d,f,p;return l=this,d=void 0,f=void 0,p=function(){var l,d,f,p,g,y,v;return u(this,function(u){switch(u.label){case 0:l=!1,u.label=1;case 1:u.trys.push([1,6,7,12]),t=!0,n=h(e),u.label=2;case 2:return[4,n.next()];case 3:if(i=(o=u.sent()).done)return[3,5];c=o.value,t=!1;try{if(f=c,l)throw this.createExtraByteError(this.totalPos);this.appendBuffer(f);try{d=this.doDecodeSync(),l=!0}catch(e){if(!(e instanceof m))throw e}this.totalPos+=this.pos}finally{t=!0}u.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return s={error:u.sent()},[3,12];case 7:if(u.trys.push([7,,10,11]),!(!t&&!i&&(a=n.return)))return[3,9];return[4,a.call(n)];case 8:u.sent(),u.label=9;case 9:return[3,11];case 10:if(s)throw s.error;return[7];case 11:return[7];case 12:if(l){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,d]}throw p=this,g=p.headByte,y=p.pos,v=p.totalPos,RangeError("Insufficient data in parsing ".concat(r(g)," at ").concat(v," (").concat(y," in the current buffer)"))}})},new(f||(f=Promise))(function(e,t){function n(e){try{o(p.next(e))}catch(e){t(e)}}function r(e){try{o(p.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):((o=t.value)instanceof f?o:new f(function(e){e(o)})).then(n,r)}o((p=p.apply(l,d||[])).next())})},e.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},e.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},e.prototype.decodeMultiAsync=function(e,t){return f(this,arguments,function(){var n,r,o,i,s,a,c,l,f,p,g;return u(this,function(u){switch(u.label){case 0:n=t,r=-1,u.label=1;case 1:u.trys.push([1,15,16,21]),o=!0,i=h(e),u.label=2;case 2:return[4,d(i.next())];case 3:if(l=(s=u.sent()).done)return[3,14];g=s.value,o=!1,u.label=4;case 4:if(u.trys.push([4,,12,13]),a=g,t&&0===r)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),n&&(r=this.readArraySize(),n=!1,this.complete()),u.label=5;case 5:u.trys.push([5,10,,11]),u.label=6;case 6:return[4,d(this.doDecodeSync())];case 7:return[4,u.sent()];case 8:if(u.sent(),0==--r)return[3,9];return[3,6];case 9:return[3,11];case 10:if(!((c=u.sent())instanceof m))throw c;return[3,11];case 11:return this.totalPos+=this.pos,[3,13];case 12:return o=!0,[7];case 13:return[3,2];case 14:return[3,21];case 15:return f={error:u.sent()},[3,21];case 16:if(u.trys.push([16,,19,20]),!(!o&&!l&&(p=i.return)))return[3,18];return[4,d(p.call(i))];case 17:u.sent(),u.label=18;case 18:return[3,20];case 19:if(f)throw f.error;return[7];case 20:return[7];case 21:return[2]}})})},e.prototype.doDecodeSync=function(){t:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){var n=e-128;if(0!==n){this.pushMapState(n),this.complete();continue}t={}}else if(e<160){var n=e-144;if(0!==n){this.pushArrayState(n),this.complete();continue}t=[]}else{var o=e-160;t=this.decodeUtf8String(o,0)}else if(192===e)t=null;else if(194===e)t=!1;else if(195===e)t=!0;else if(202===e)t=this.readF32();else if(203===e)t=this.readF64();else if(204===e)t=this.readU8();else if(205===e)t=this.readU16();else if(206===e)t=this.readU32();else if(207===e)t=this.useBigInt64?this.readU64AsBigInt():this.readU64();else if(208===e)t=this.readI8();else if(209===e)t=this.readI16();else if(210===e)t=this.readI32();else if(211===e)t=this.useBigInt64?this.readI64AsBigInt():this.readI64();else if(217===e){var o=this.lookU8();t=this.decodeUtf8String(o,1)}else if(218===e){var o=this.lookU16();t=this.decodeUtf8String(o,2)}else if(219===e){var o=this.lookU32();t=this.decodeUtf8String(o,4)}else if(220===e){var n=this.readU16();if(0!==n){this.pushArrayState(n),this.complete();continue}t=[]}else if(221===e){var n=this.readU32();if(0!==n){this.pushArrayState(n),this.complete();continue}t=[]}else if(222===e){var n=this.readU16();if(0!==n){this.pushMapState(n),this.complete();continue}t={}}else if(223===e){var n=this.readU32();if(0!==n){this.pushMapState(n),this.complete();continue}t={}}else if(196===e){var n=this.lookU8();t=this.decodeBinary(n,1)}else if(197===e){var n=this.lookU16();t=this.decodeBinary(n,2)}else if(198===e){var n=this.lookU32();t=this.decodeBinary(n,4)}else if(212===e)t=this.decodeExtension(1,0);else if(213===e)t=this.decodeExtension(2,0);else if(214===e)t=this.decodeExtension(4,0);else if(215===e)t=this.decodeExtension(8,0);else if(216===e)t=this.decodeExtension(16,0);else if(199===e){var n=this.lookU8();t=this.decodeExtension(n,1)}else if(200===e){var n=this.lookU16();t=this.decodeExtension(n,2)}else if(201===e){var n=this.lookU32();t=this.decodeExtension(n,4)}else throw new l.X("Unrecognized type byte: ".concat(r(e)));this.complete();for(var i=this.stack;i.length>0;){var s,a=i[i.length-1];if(a.type===p)if(a.array[a.position]=t,a.position++,a.position===a.size)i.pop(),t=a.array;else continue t;else if(a.type===g){if("string"!=typeof(s=t)&&"number"!=typeof s)throw new l.X("The type of key must be string or number but "+typeof t);if("__proto__"===t)throw new l.X("The key __proto__ is not allowed");a.key=t,a.type="map_value";continue t}else if(a.map[a.key]=t,a.readCount++,a.readCount===a.size)i.pop(),t=a.map;else{a.key=null,a.type=g;continue t}}return t}},e.prototype.readHeadByte=function(){return -1===this.headByte&&(this.headByte=this.readU8()),this.headByte},e.prototype.complete=function(){this.headByte=-1},e.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:if(e<160)return e-144;throw new l.X("Unrecognized array type byte: ".concat(r(e)))}},e.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new l.X("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:g,size:e,key:null,readCount:0,map:{}})},e.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new l.X("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:p,size:e,array:Array(e),position:0})},e.prototype.decodeUtf8String=function(e,t){if(e>this.maxStrLength)throw new l.X("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw b;var n,r,o=this.pos+t;return r=this.stateIsMapKey()&&(null==(n=this.keyDecoder)?void 0:n.canBeCached(e))?this.keyDecoder.decode(this.bytes,o,e):(0,s._u)(this.bytes,o,e),this.pos+=t+e,r},e.prototype.stateIsMapKey=function(){return this.stack.length>0&&this.stack[this.stack.length-1].type===g},e.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new l.X("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw b;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r},e.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new l.X("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)},e.prototype.lookU8=function(){return this.view.getUint8(this.pos)},e.prototype.lookU16=function(){return this.view.getUint16(this.pos)},e.prototype.lookU32=function(){return this.view.getUint32(this.pos)},e.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},e.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},e.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},e.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},e.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},e.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},e.prototype.readU64=function(){var e=(0,i.Hn)(this.view,this.pos);return this.pos+=8,e},e.prototype.readI64=function(){var e=(0,i.eN)(this.view,this.pos);return this.pos+=8,e},e.prototype.readU64AsBigInt=function(){var e=this.view.getBigUint64(this.pos);return this.pos+=8,e},e.prototype.readI64AsBigInt=function(){var e=this.view.getBigInt64(this.pos);return this.pos+=8,e},e.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},e.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},e}();function E(e,t){return new x(t).decode(e)}},26051:(e,t,n)=>{"use strict";n.d(t,{I:()=>i});var r=n(84724),o=class extends r.Ng{ws;extras;get loggingMetadata(){let e=super.loggingMetadata;return this.extras&&(e.extras=this.extras),e}constructor(e,t){super(),this.ws=e,this.extras=t,this.ws.binaryType="arraybuffer";let n=!1;this.ws.onerror=()=>{n=!0},this.ws.onclose=({code:e,reason:t})=>{if(n){let n=Error(`websocket closed with code and reason: ${e} - ${t}`);this.onError(n)}this.onClose()},this.ws.onmessage=e=>{this.onData(e.data)}}send(e){try{return this.ws.send(e),!0}catch{return!1}}close(){this.ws.close(1e3)}},i=class extends r.xp{wsGetter;constructor(e,t,n){super(t,n),this.wsGetter=e}async createNewOutgoingConnection(e){this.log?.info(`establishing a new websocket to ${e}`,{clientId:this.clientId,connectedTo:e});let t=await this.wsGetter(e);await new Promise((e,n)=>t.readyState===t.OPEN?void e():t.readyState===t.CLOSING||t.readyState===t.CLOSED?void n(Error("ws is closing or closed")):void(t.onopen=()=>{e()},t.onclose=e=>{n(Error(e.reason))},t.onerror=e=>{n(Error(e.message))}));let n=new o(t);return this.log?.info(`raw websocket to ${e} ok`,{clientId:this.clientId,connectedTo:e,...n.loggingMetadata}),n}}},26325:(e,t,n)=>{"use strict";n.d(t,{yF:()=>s});var r=n(21462),o=n(79203),i=n(76957);function s(e,t){let n=(0,r.useMemo)(()=>(0,i.eU)(null,(t,n,...r)=>e(t,n,...r)),[e]);return(0,o.Xr)(n,t)}n(95570);let a=new WeakMap},26350:(e,t,n)=>{"use strict";n.d(t,{X:()=>o});var r=function(){var e=function(t,n){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,Object.create(t.prototype)),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:t.name}),r}return r(t,e),t}(Error)},28309:(e,t,n)=>{var r=n(23541),o=n(1250);e.exports=function(e,t){return null!=e&&o(e,t,r)}},29569:(e,t,n)=>{e.exports=n(96979)(Object.getPrototypeOf,Object)},29631:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},29643:(e,t,n)=>{var r=n(69804),o=n(55304),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];i.call(e,t)&&o(s,n)&&(void 0!==n||t in e)||r(e,t,n)}},30442:(e,t,n)=>{var r=n(54557),o=Object.create;e.exports=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}()},30493:(e,t,n)=>{var r=n(45764),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},31929:(e,t,n)=>{var r=n(65439),o=n(14225),i=n(95677),s=n(38264),a=n(33449);e.exports=function(e,t,n){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":case"[object Set]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return i(e);case"[object Symbol]":return s(e)}}},32446:(e,t,n)=>{var r=n(94995),o=n(50482);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},32650:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},33388:(e,t,n)=>{var r=n(43397);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=!!t,t}},33449:(e,t,n)=>{var r=n(65439);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},33455:(e,t,n)=>{var r=n(46027),o=n(95782),i=n(60563),s=n(38665);e.exports=function(e,t){return t=r(t,e),null==(e=i(e,t))||delete e[s(o(t))]}},33578:(e,t,n)=>{var r=n(867),o=n(31266),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||o(e))||s.test(e)||!i.test(e)||null!=t&&e in Object(t)}},36174:(e,t,n)=>{var r=n(4563),o=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!o&&o in e}},36317:(e,t,n)=>{var r=n(11650);e.exports=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},37299:(e,t,n)=>{"use strict";n.d(t,{T:()=>v});var r=n(61600),o=n(99646),i=n(42050),s=n(12202),a=n(99121),c=n(59963),l=n(45843),u=n(29955),h=n(34015);class d extends i.i{constructor(e,t,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=t,this.error=n}}class f extends i.i{constructor(e,t,n,r){super(r instanceof Error?r.message:"Unknown error"),this.schema=e,this.path=t,this.value=n,this.error=r}}function p(e,t,n){try{return(0,h.n_)(e)?e[o.H7].Decode(n):n}catch(r){throw new f(e,t,n,r)}}let g=new Set;var y=n(27115);function v(...e){let[t,n,i]=3===e.length?[e[0],e[1],e[2]]:[e[0],[],e[1]];if(!(0,l.J)(t,n,i))throw new d(t,i,(0,y.I)(t,n,i).First());return(g.clear(),function e(t,n){let r=(0,c.uN)(t,n);if(t.$id&&g.has(t.$id))return!1;switch(t.$id&&g.add(t.$id),t[o.b8]){case"Array":case"AsyncIterator":case"Iterator":return(0,h.n_)(t)||e(t.items,r);case"Constructor":return(0,h.n_)(t)||e(t.returns,r)||t.parameters.some(t=>e(t,r));case"Function":return(0,h.n_)(t)||e(t.returns,r)||t.parameters.some(t=>e(t,r));case"Import":let i=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((e,n)=>[...e,t.$defs[n]],[]),s=t.$defs[t.$ref];return(0,h.n_)(t)||e(s,[...i,...r]);case"Intersect":return(0,h.n_)(t)||(0,h.n_)(t.unevaluatedProperties)||t.allOf.some(t=>e(t,r));case"Not":return(0,h.n_)(t)||e(t.not,r);case"Object":return(0,h.n_)(t)||Object.values(t.properties).some(t=>e(t,r))||(0,h.Yi)(t.additionalProperties)&&e(t.additionalProperties,r);case"Promise":return(0,h.n_)(t)||e(t.item,r);case"Record":let a=Object.getOwnPropertyNames(t.patternProperties)[0],l=t.patternProperties[a];return(0,h.n_)(t)||e(l,r)||(0,h.Yi)(t.additionalProperties)&&(0,h.n_)(t.additionalProperties);case"Ref":case"This":return!!(0,h.n_)(t)||e((0,c.Lk)(t,r),r);case"Tuple":return(0,h.n_)(t)||!(0,u.R1)(t.items)&&t.items.some(t=>e(t,r));case"Union":return(0,h.n_)(t)||t.anyOf.some(t=>e(t,r));default:return(0,h.n_)(t)}}(t,n))?function e(t,n,i,d){let f=(0,c.uN)(t,n);switch(t[o.b8]){case"Array":return(0,u.QS)(d)?p(t,i,d.map((n,r)=>e(t.items,f,`${i}/${r}`,n))):p(t,i,d);case"Import":let g=globalThis.Object.values(t.$defs),y=e(t.$defs[t.$ref],[...f,...g],i,d);return p(t,i,y);case"Intersect":return function(t,n,r,o){if(!(0,u.av)(o)||(0,u.u$)(o))return p(t,r,o);let i=function(e){let t=(0,a.g)(e),n=(0,s.u$)(e,t);return t.map((e,r)=>[t[r],n[r]])}(t),c=i.map(e=>e[0]),l={...o};for(let[t,o]of i)t in l&&(l[t]=e(o,n,`${r}/${t}`,l[t]));if(!(0,h.n_)(t.unevaluatedProperties))return p(t,r,l);let d=Object.getOwnPropertyNames(l),f=t.unevaluatedProperties,g={...l};for(let e of d)c.includes(e)||(g[e]=p(f,`${r}/${e}`,g[e]));return p(t,r,g)}(t,f,i,d);case"Not":return p(t,i,e(t.not,f,i,d));case"Object":return function(t,n,o,i){if(!(0,u.av)(i))return p(t,o,i);let s=(0,a.g)(t),c={...i};for(let i of s)(0,u.LT)(c,i)&&((0,u.R1)(c[i])&&(!(0,h.R1)(t.properties[i])||r.Q.IsExactOptionalProperty(c,i))||(c[i]=e(t.properties[i],n,`${o}/${i}`,c[i])));if(!(0,h.Yi)(t.additionalProperties))return p(t,o,c);let l=Object.getOwnPropertyNames(c),d=t.additionalProperties,f={...c};for(let e of l)s.includes(e)||(f[e]=p(d,`${o}/${e}`,f[e]));return p(t,o,f)}(t,f,i,d);case"Record":return function(t,n,r,o){if(!(0,u.av)(o))return p(t,r,o);let i=Object.getOwnPropertyNames(t.patternProperties)[0],s=new RegExp(i),a={...o};for(let c of Object.getOwnPropertyNames(o))s.test(c)&&(a[c]=e(t.patternProperties[i],n,`${r}/${c}`,a[c]));if(!(0,h.Yi)(t.additionalProperties))return p(t,r,a);let c=Object.getOwnPropertyNames(a),l=t.additionalProperties,d={...a};for(let e of c)s.test(e)||(d[e]=p(l,`${r}/${e}`,d[e]));return p(t,r,d)}(t,f,i,d);case"Ref":let v=(0,c.Lk)(t,f);return p(t,i,e(v,f,i,d));case"Symbol":default:return p(t,i,d);case"This":let m=(0,c.Lk)(t,f);return p(t,i,e(m,f,i,d));case"Tuple":return(0,u.QS)(d)&&(0,u.QS)(t.items)?p(t,i,t.items.map((t,n)=>e(t,f,`${i}/${n}`,d[n]))):p(t,i,d);case"Union":for(let n of t.anyOf){if(!(0,l.J)(n,f,d))continue;let r=e(n,f,i,d);return p(t,i,r)}return p(t,i,d)}}(t,n,"",i):i}},37752:(e,t,n)=>{var r=n(89338);e.exports=function(e){var t=r(e,function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}},38264:(e,t,n)=>{var r=n(82087),o=r?r.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},38396:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}},38665:(e,t,n)=>{var r=n(31266),o=1/0;e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}},38688:(e,t,n)=>{e=n.nmd(e);var r=n(28811),o=n(48285),i=t&&!t.nodeType&&t,s=i&&e&&!e.nodeType&&e,a=s&&s.exports===i?r.Buffer:void 0,c=a?a.isBuffer:void 0;e.exports=c||o},40359:(e,t,n)=>{"use strict";n.d(t,{Dl:()=>O,CC:()=>k,I$:()=>h,jw:()=>u});var r=n(57627),o=new TextEncoder,i=new TextDecoder,s=n(45843),a=n(27115),c=n(63650),l=n(64254).hp,u={heartbeatIntervalMs:1e3,heartbeatsUntilDead:2,sessionDisconnectGraceMs:5e3,connectionTimeoutMs:2e3,handshakeTimeoutMs:1e3,enableTransparentSessionReconnects:!0,codec:{toBuffer:e=>o.encode(JSON.stringify(e,function(e){let t,n=this[e];if(!(n instanceof Uint8Array))return n;return{$t:(t="",n.forEach(e=>{t+=String.fromCharCode(e)}),btoa(t))}})),fromBuffer:e=>{try{let t=JSON.parse(i.decode(e),function(e,t){return t?.$t?function(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}(t.$t):t});if("object"==typeof t)return t;return null}catch{return null}}}},h={...u,baseIntervalMs:150,maxJitterMs:200,maxBackoffMs:32e3,attemptBudgetCapacity:5,budgetRestoreIntervalMs:200},d=(e=>(e.NoConnection="NoConnection",e.BackingOff="BackingOff",e.Connecting="Connecting",e.Handshaking="Handshaking",e.Connected="Connected",e.WaitingForHandshake="WaitingForHandshake",e))(d||{}),f="session state has been consumed and is no longer valid",p=class{_isConsumed;close(){this._handleClose()}constructor(){return this._isConsumed=!1,new Proxy(this,{get(e,t){if("_isConsumed"===t||"id"===t||"state"===t)return Reflect.get(e,t);if("_handleStateExit"===t)return()=>{e._isConsumed=!0,e._handleStateExit()};if("_handleClose"===t)return()=>{e._isConsumed=!0,e._handleStateExit(),e._handleClose()};if(e._isConsumed)throw Error(`${f}: getting ${t.toString()} on consumed state`);return Reflect.get(e,t)},set(e,t,n){if(e._isConsumed)throw Error(`${f}: setting ${t.toString()} on consumed state`);return Reflect.set(e,t,n)}})}},g=class extends p{from;options;log;constructor({from:e,options:t,log:n}){super(),this.from=e,this.options=t,this.log=n}parseMsg(e){let t=this.options.codec.fromBuffer(e);if(null===t){let t=new TextDecoder().decode(l.from(e));return this.log?.error(`received malformed msg: ${t}`,this.loggingMetadata),null}return s.J(r.bH,t)?t:(this.log?.error(`received invalid msg: ${JSON.stringify(t)}`,{...this.loggingMetadata,validationErrors:[...a.I(r.bH,t)]}),null)}},y=class extends g{id;telemetry;to;seq;ack;sendBuffer;constructor(e){let{id:t,to:n,seq:r,ack:o,sendBuffer:i,telemetry:s,log:a}=e;super(e),this.id=t,this.to=n,this.seq=r,this.ack=o,this.sendBuffer=i,this.telemetry=s,this.log=a}get loggingMetadata(){let e=this.telemetry.span.spanContext(),t={clientId:this.from,connectedTo:this.to,sessionId:this.id};return this.telemetry.span.isRecording()&&(t.telemetry={traceId:e.traceId,spanId:e.spanId}),t}constructMsg(e){let t={...e,id:(0,r.$C)(),to:this.to,from:this.from,seq:this.seq,ack:this.ack};return this.seq++,t}nextSeq(){return this.sendBuffer.length>0?this.sendBuffer[0].seq:this.seq}send(e){let t=this.constructMsg(e);return this.sendBuffer.push(t),t.id}_handleStateExit(){}_handleClose(){this.sendBuffer.length=0,this.telemetry.span.end()}},v=class extends y{graceExpiryTime;gracePeriodTimeout;listeners;constructor(e){super(e),this.listeners=e.listeners,this.graceExpiryTime=e.graceExpiryTime,this.gracePeriodTimeout=setTimeout(()=>{this.listeners.onSessionGracePeriodElapsed()},this.graceExpiryTime-Date.now())}_handleStateExit(){super._handleStateExit(),this.gracePeriodTimeout&&(clearTimeout(this.gracePeriodTimeout),this.gracePeriodTimeout=void 0)}_handleClose(){super._handleClose()}},m=class extends v{state="Connecting";connPromise;listeners;connectionTimeout;constructor(e){super(e),this.connPromise=e.connPromise,this.listeners=e.listeners,this.connPromise.then(e=>{this._isConsumed||this.listeners.onConnectionEstablished(e)},e=>{this._isConsumed||this.listeners.onConnectionFailed(e)}),this.connectionTimeout=setTimeout(()=>{this.listeners.onConnectionTimeout()},this.options.connectionTimeoutMs)}bestEffortClose(){let e=this.log,t=this.loggingMetadata;this.connPromise.then(n=>{n.close(),e?.info("connection eventually resolved but session has transitioned, closed connection",{...t,...n.loggingMetadata})}).catch(()=>{})}_handleStateExit(){super._handleStateExit(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0)}_handleClose(){this.bestEffortClose(),super._handleClose()}},b=class extends v{state="NoConnection";_handleClose(){super._handleClose()}_handleStateExit(){super._handleStateExit()}},w=class extends g{state="WaitingForHandshake";conn;listeners;handshakeTimeout;constructor(e){super(e),this.conn=e.conn,this.listeners=e.listeners,this.handshakeTimeout=setTimeout(()=>{this.listeners.onHandshakeTimeout()},this.options.handshakeTimeoutMs),this.conn.addDataListener(this.onHandshakeData),this.conn.addErrorListener(this.listeners.onConnectionErrored),this.conn.addCloseListener(this.listeners.onConnectionClosed)}get loggingMetadata(){return{clientId:this.from,connId:this.conn.id,...this.conn.loggingMetadata}}onHandshakeData=e=>{let t=this.parseMsg(e);if(null===t)return void this.listeners.onInvalidHandshake("could not parse message","MALFORMED_HANDSHAKE");this.listeners.onHandshake(t)};sendHandshake(e){return this.conn.send(this.options.codec.toBuffer(e))}_handleStateExit(){this.conn.removeDataListener(this.onHandshakeData),this.conn.removeErrorListener(this.listeners.onConnectionErrored),this.conn.removeCloseListener(this.listeners.onConnectionClosed),clearTimeout(this.handshakeTimeout),this.handshakeTimeout=void 0}_handleClose(){this.conn.close()}},x=class extends v{state="Handshaking";conn;listeners;handshakeTimeout;constructor(e){super(e),this.conn=e.conn,this.listeners=e.listeners,this.handshakeTimeout=setTimeout(()=>{this.listeners.onHandshakeTimeout()},this.options.handshakeTimeoutMs),this.conn.addDataListener(this.onHandshakeData),this.conn.addErrorListener(this.listeners.onConnectionErrored),this.conn.addCloseListener(this.listeners.onConnectionClosed)}get loggingMetadata(){return{...super.loggingMetadata,...this.conn.loggingMetadata}}onHandshakeData=e=>{let t=this.parseMsg(e);if(null===t)return void this.listeners.onInvalidHandshake("could not parse message","MALFORMED_HANDSHAKE");this.listeners.onHandshake(t)};sendHandshake(e){return this.conn.send(this.options.codec.toBuffer(e))}_handleStateExit(){super._handleStateExit(),this.conn.removeDataListener(this.onHandshakeData),this.conn.removeErrorListener(this.listeners.onConnectionErrored),this.conn.removeCloseListener(this.listeners.onConnectionClosed),this.handshakeTimeout&&(clearTimeout(this.handshakeTimeout),this.handshakeTimeout=void 0)}_handleClose(){super._handleClose(),this.conn.close()}},E=class extends y{state="Connected";conn;listeners;heartbeatHandle;heartbeatMisses=0;isActivelyHeartbeating;updateBookkeeping(e,t){this.sendBuffer=this.sendBuffer.filter(t=>t.seq>=e),this.ack=t+1,this.heartbeatMisses=0}send(e){let t=this.constructMsg(e);return this.sendBuffer.push(t),this.conn.send(this.options.codec.toBuffer(t)),t.id}constructor(e){if(super(e),this.conn=e.conn,this.listeners=e.listeners,this.conn.addDataListener(this.onMessageData),this.conn.addCloseListener(this.listeners.onConnectionClosed),this.conn.addErrorListener(this.listeners.onConnectionErrored),this.sendBuffer.length>0)for(let e of(this.log?.info(`sending ${this.sendBuffer.length} buffered messages, starting at seq ${this.nextSeq()}`,this.loggingMetadata),this.sendBuffer))this.conn.send(this.options.codec.toBuffer(e));this.isActivelyHeartbeating=!1,this.heartbeatHandle=setInterval(()=>{let e=this.heartbeatMisses,t=e*this.options.heartbeatIntervalMs;if(e>=this.options.heartbeatsUntilDead){this.log?.info(`closing connection to ${this.to} due to inactivity (missed ${e} heartbeats which is ${t}ms)`,this.loggingMetadata),this.telemetry.span.addEvent("closing connection due to inactivity"),this.conn.close(),clearInterval(this.heartbeatHandle),this.heartbeatHandle=void 0;return}this.isActivelyHeartbeating&&this.sendHeartbeat(),this.heartbeatMisses++},this.options.heartbeatIntervalMs)}get loggingMetadata(){return{...super.loggingMetadata,...this.conn.loggingMetadata}}startActiveHeartbeat(){this.isActivelyHeartbeating=!0}sendHeartbeat(){this.log?.debug("sending heartbeat",this.loggingMetadata),this.send({streamId:"heartbeat",controlFlags:1,payload:{type:"ACK"}})}closeConnection(){this.conn.removeDataListener(this.onMessageData),this.conn.removeCloseListener(this.listeners.onConnectionClosed),this.conn.removeErrorListener(this.listeners.onConnectionErrored),this.conn.close()}onMessageData=e=>{let t=this.parseMsg(e);if(null===t)return void this.listeners.onInvalidMessage("could not parse message");if(t.seq!==this.ack){if(t.seq<this.ack)this.log?.debug(`received duplicate msg (got seq: ${t.seq}, wanted seq: ${this.ack}), discarding`,{...this.loggingMetadata,transportMessage:t});else{let e=`received out-of-order msg, closing connection (got seq: ${t.seq}, wanted seq: ${this.ack})`;this.log?.warn(e,{...this.loggingMetadata,transportMessage:t,tags:["invariant-violation"]}),this.telemetry.span.setStatus({code:c.s.ERROR,message:e}),this.closeConnection()}return}if(this.log?.debug("received msg",{...this.loggingMetadata,transportMessage:t}),this.updateBookkeeping(t.ack,t.seq),!(0,r.o0)(t.controlFlags))return void this.listeners.onMessage(t);this.log?.debug("discarding msg (ack bit set)",{...this.loggingMetadata,transportMessage:t}),this.isActivelyHeartbeating||this.sendHeartbeat()};_handleStateExit(){super._handleStateExit(),this.conn.removeDataListener(this.onMessageData),this.conn.removeCloseListener(this.listeners.onConnectionClosed),this.conn.removeErrorListener(this.listeners.onConnectionErrored),this.heartbeatHandle&&(clearInterval(this.heartbeatHandle),this.heartbeatHandle=void 0)}_handleClose(){super._handleClose(),this.conn.close()}},_=class extends v{state="BackingOff";listeners;backoffTimeout;constructor(e){super(e),this.listeners=e.listeners,this.backoffTimeout=setTimeout(()=>{this.listeners.onBackoffFinished()},e.backoffMs)}_handleClose(){super._handleClose()}_handleStateExit(){super._handleStateExit(),this.backoffTimeout&&(clearTimeout(this.backoffTimeout),this.backoffTimeout=void 0)}};function C(e){return{id:e.id,from:e.from,to:e.to,seq:e.seq,ack:e.ack,sendBuffer:e.sendBuffer,telemetry:e.telemetry,options:e.options,log:e.log}}function S(e){return{...C(e),graceExpiryTime:e.graceExpiryTime}}var k={entrypoints:{NoConnection:(e,t,n,o,i)=>{let s=`session-${(0,r.$C)()}`,a=(0,r.iH)(s,e,t),c=new b({listeners:n,id:s,from:t,to:e,seq:0,ack:0,graceExpiryTime:Date.now()+o.sessionDisconnectGraceMs,sendBuffer:[],telemetry:a,options:o,log:i});return c.log?.info(`session ${c.id} created in NoConnection state`,{...c.loggingMetadata,tags:["state-transition"]}),c},WaitingForHandshake:(e,t,n,r,o)=>{let i=new w({conn:t,listeners:n,from:e,options:r,log:o});return i.log?.info("session created in WaitingForHandshake state",{...i.loggingMetadata,tags:["state-transition"]}),i}},transition:{NoConnectionToBackingOff:(e,t,n)=>{let r=S(e);e._handleStateExit();let o=new _({backoffMs:t,listeners:n,...r});return o.log?.info(`session ${o.id} transition from NoConnection to BackingOff`,{...o.loggingMetadata,tags:["state-transition"]}),o},BackingOffToConnecting:(e,t,n)=>{let r=S(e);e._handleStateExit();let o=new m({connPromise:t,listeners:n,...r});return o.log?.info(`session ${o.id} transition from BackingOff to Connecting`,{...o.loggingMetadata,tags:["state-transition"]}),o},ConnectingToHandshaking:(e,t,n)=>{let r=S(e);e._handleStateExit();let o=new x({conn:t,listeners:n,...r});return o.log?.info(`session ${o.id} transition from Connecting to Handshaking`,{...o.loggingMetadata,tags:["state-transition"]}),o},HandshakingToConnected:(e,t)=>{let n=C(e),r=e.conn;e._handleStateExit();let o=new E({conn:r,listeners:t,...n});return o.log?.info(`session ${o.id} transition from Handshaking to Connected`,{...o.loggingMetadata,tags:["state-transition"]}),o},WaitingForHandshakeToConnected:(e,t,n,o,i,s)=>{let a=e.conn,{from:c,options:l}=e,u=t?C(t):{id:n,from:c,to:o,seq:0,ack:0,sendBuffer:[],telemetry:(0,r.iH)(n,o,c,i),options:l,log:e.log};e._handleStateExit(),t?._handleStateExit();let h=new E({conn:a,listeners:s,...u});return h.log?.info(`session ${h.id} transition from WaitingForHandshake to Connected`,{...h.loggingMetadata,tags:["state-transition"]}),h},BackingOffToNoConnection:(e,t)=>{let n=S(e);e._handleStateExit();let r=new b({listeners:t,...n});return r.log?.info(`session ${r.id} transition from BackingOff to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},ConnectingToNoConnection:(e,t)=>{let n=S(e);e.bestEffortClose(),e._handleStateExit();let r=new b({listeners:t,...n});return r.log?.info(`session ${r.id} transition from Connecting to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},HandshakingToNoConnection:(e,t)=>{let n=S(e);e.conn.close(),e._handleStateExit();let r=new b({listeners:t,...n});return r.log?.info(`session ${r.id} transition from Handshaking to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},ConnectedToNoConnection:(e,t)=>{let n=C(e),r=Date.now()+e.options.sessionDisconnectGraceMs;e.conn.close(),e._handleStateExit();let o=new b({listeners:t,graceExpiryTime:r,...n});return o.log?.info(`session ${o.id} transition from Connected to NoConnection`,{...o.loggingMetadata,tags:["state-transition"]}),o}}},M=k.transition,O={entrypoint:k.entrypoints.NoConnection,transition:{NoConnectionToBackingOff:M.NoConnectionToBackingOff,BackingOffToConnecting:M.BackingOffToConnecting,ConnectingToHandshaking:M.ConnectingToHandshaking,HandshakingToConnected:M.HandshakingToConnected,BackingOffToNoConnection:M.BackingOffToNoConnection,ConnectingToNoConnection:M.ConnectingToNoConnection,HandshakingToNoConnection:M.HandshakingToNoConnection,ConnectedToNoConnection:M.ConnectedToNoConnection}};k.entrypoints.WaitingForHandshake,M.WaitingForHandshakeToConnected,M.ConnectedToNoConnection},41381:(e,t,n)=>{var r=n(88999),o=n(98958),i=n(32650),s=n(42815),a=n(80019),c=n(99211);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=o,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=a,l.prototype.set=c,e.exports=l},41705:(e,t,n)=>{var r=n(89367);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},41921:(e,t,n)=>{"use strict";n.d(t,{Ng:()=>d,bd:()=>l,oK:()=>h}),n(95570);var r={debug:-1,info:0,warn:1,error:2},o=e=>(t,n)=>{if(!n?.transportMessage)return void e(t,n);let{payload:r,...o}=n.transportMessage;n.transportMessage=o,e(t,n)},i=class{minLevel;output;constructor(e,t="info"){this.minLevel=t,this.output=e}debug(e,t){r[this.minLevel]<=r.debug&&this.output(e,t??{},"debug")}info(e,t){r[this.minLevel]<=r.info&&this.output(e,t??{},"info")}warn(e,t){r[this.minLevel]<=r.warn&&this.output(e,t??{},"warn")}error(e,t){r[this.minLevel]<=r.error&&this.output(e,t??{},"error")}},s=e=>({debug:o(e.debug.bind(e)),info:o(e.info.bind(e)),warn:o(e.warn.bind(e)),error:o(e.error.bind(e))}),a=n(40359),c=n(57627),l={RetriesExceeded:"conn_retry_exceeded",HandshakeFailed:"handshake_failed",MessageOrderingViolated:"message_ordering_violated",InvalidMessage:"invalid_message"},u=class{eventListeners={};removeAllListeners(){this.eventListeners={}}numberOfListeners(e){return this.eventListeners[e]?.size??0}addEventListener(e,t){this.eventListeners[e]||(this.eventListeners[e]=new Set),this.eventListeners[e]?.add(t)}removeEventListener(e,t){this.eventListeners[e]&&this.eventListeners[e]?.delete(t)}dispatchEvent(e,t){let n=this.eventListeners[e];if(n)for(let e of[...n])e(t)}},h=class{status;clientId;eventDispatcher;options;log;sessions;constructor(e,t){this.options={...a.jw,...t},this.eventDispatcher=new u,this.clientId=e,this.status="open",this.sessions=new Map}bindLogger(e,t){if("function"==typeof e){this.log=s(new i(e,t));return}this.log=s(e)}handleMsg(e){"open"===this.getStatus()&&this.eventDispatcher.dispatchEvent("message",e)}addEventListener(e,t){this.eventDispatcher.addEventListener(e,t)}removeEventListener(e,t){this.eventDispatcher.removeEventListener(e,t)}protocolError(e){this.eventDispatcher.dispatchEvent("protocolError",e)}close(){for(let e of(this.status="closed",this.sessions.values()))this.deleteSession(e);this.eventDispatcher.dispatchEvent("transportStatus",{status:this.status}),this.eventDispatcher.removeAllListeners(),this.log?.info("manually closed transport",{clientId:this.clientId})}getStatus(){return this.status}updateSession(e){let t=this.sessions.get(e.to);if(t&&t.id!==e.id)throw Error(`attempt to transition active session for ${e.to} but active session (${t.id}) is different from handle (${e.id})`);return this.sessions.set(e.to,e),t||this.eventDispatcher.dispatchEvent("sessionStatus",{status:"connect",session:e}),this.eventDispatcher.dispatchEvent("sessionTransition",{state:e.state,session:e}),e}deleteSession(e,t){if(e._isConsumed)return;let n=e.loggingMetadata;n.tags&&t?.unhealthy&&n.tags.push("unhealthy-session"),e.log?.info(`closing session ${e.id}`,n),this.eventDispatcher.dispatchEvent("sessionStatus",{status:"disconnect",session:e});let r=e.to;e.close(),this.sessions.delete(r)}onSessionGracePeriodElapsed(e){this.log?.warn(`session to ${e.to} grace period elapsed, closing`,e.loggingMetadata),this.deleteSession(e)}onConnectingFailed(e){let t=a.CC.transition.ConnectingToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}});return this.updateSession(t)}onConnClosed(e){let t;return t="Handshaking"===e.state?a.CC.transition.HandshakingToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}}):a.CC.transition.ConnectedToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}}),this.updateSession(t)}},d=class{id;telemetry;constructor(){this.id=`conn-${(0,c.$C)()}`}get loggingMetadata(){let e={connId:this.id},t=this.telemetry?.span.spanContext();return this.telemetry?.span.isRecording()&&t&&(e.telemetry={traceId:t.traceId,spanId:t.spanId}),e}_dataListeners=new Set;_closeListeners=new Set;_errorListeners=new Set;get dataListeners(){return[...this._dataListeners]}get closeListeners(){return[...this._closeListeners]}get errorListeners(){return[...this._errorListeners]}addDataListener(e){this._dataListeners.add(e)}removeDataListener(e){this._dataListeners.delete(e)}addCloseListener(e){this._closeListeners.add(e)}removeCloseListener(e){this._closeListeners.delete(e)}addErrorListener(e){this._errorListeners.add(e)}removeErrorListener(e){this._errorListeners.delete(e)}}},42815:e=>{e.exports=function(e){return this.__data__.get(e)}},43279:e=>{e.exports=function(){return[]}},43397:(e,t,n)=>{var r=n(3938);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},43822:(e,t,n)=>{var r=n(82274),o=n(5446),i=n(46027);e.exports=function(e,t,n){for(var s=-1,a=t.length,c={};++s<a;){var l=t[s],u=r(e,l);n(u,l)&&o(c,i(l,e),u)}return c}},45261:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});var r=n(94598),o=n(25883),i={toBuffer:e=>(0,r.l)(e,{ignoreUndefined:!0}),fromBuffer:e=>{try{let t=(0,o.D4)(e);if("object"!=typeof t)return null;return t}catch{return null}}}},45511:e=>{"use strict";e.exports=function(e,t,n,r){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var i=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var c=0;c<a;++c){var l,u,h,d,f=e[c].replace(i,"%20"),p=f.indexOf(n);(p>=0?(l=f.substr(0,p),u=f.substr(p+1)):(l=f,u=""),h=decodeURIComponent(l),d=decodeURIComponent(u),Object.prototype.hasOwnProperty.call(o,h))?Array.isArray(o[h])?o[h].push(d):o[h]=[o[h],d]:o[h]=d}return o}},45731:(e,t,n)=>{"use strict";n.d(t,{F6:()=>b,_3:()=>f});var r=/\s/,o=/[a-zA-Z_$][a-zA-Z0-9_$]*/,i=RegExp("^"+o.source+"$"),s=/^NaN|(?:[-+]?(?:(?:Infinity)|(?:0[xX][a-fA-F0-9]+)|(?:0[bB][01]+)|(?:0[oO][0-7]+)|(?:(?:(?:[1-9]\d*|0)?\.\d+|(?:[1-9]\d*|0)\.\d*|(?:[1-9]\d*|0))(?:[E|e][+|-]?\d+)?)))/;function a(e,t){return new d(e,t).value}function c(){}var l=function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);function n(){this.constructor=r}function r(t,n,r){var o=e.call(this,t)||this;return o.pos=n,o.loc=r,o}return r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n),r}(Error),u={b:"\b",n:"\n",f:"\f",r:"\r",t:"	",v:"\v",0:"\0"},h=/^[a-fA-F0-9]+$/,d=function(){function e(e,t){if(this.str=e,this.index=0,this.onComment=t&&t.onComment||c,this.onValue=t&&t.onValue||c,this.value=this.readValue(),this.allowWhitespaceOrComment(),this.index<this.str.length)throw Error("Unexpected character '"+this.peek()+"'")}return e.prototype.allowWhitespaceOrComment=function(){for(;this.index<this.str.length&&r.test(this.str[this.index]);)this.index++;var e=this.index;if(this.eat("/")){if(this.eat("/")){var t=this.readUntil(/(?:\r\n|\n|\r)/);this.onComment({start:e,end:this.index,type:"Comment",text:t,block:!1}),this.eat("\n")}else if(this.eat("*")){var t=this.readUntil(/\*\//);this.onComment({start:e,end:this.index,type:"Comment",text:t,block:!0}),this.eat("*/",!0)}this.allowWhitespaceOrComment()}},e.prototype.error=function(e,t){void 0===t&&(t=this.index);var n=function(e,t,n){var r,o,i,s,a,c,l;if("number"==typeof n)throw Error("locate takes a { startIndex, offsetLine, offsetColumn } object as the third argument");return(void 0===(r=n)&&(r={}),o=r.offsetLine||0,i=r.offsetColumn||0,s=e.split("\n"),a=0,c=s.map(function(e,t){var n=a+e.length+1,r={start:a,end:n,line:t};return a=n,r}),l=0,function(t,n){"string"==typeof t&&(t=e.indexOf(t,n||0));for(var r,s,a,u,h=c[l],d=t>=h.end?1:-1;h;){if(r=h,s=t,r.start<=s&&s<r.end)return a=h,u=t,{line:o+a.line,column:i+u-a.start,character:u};l+=d,h=c[l]}})(t,n&&n.startIndex)}(this.str,t,{offsetLine:1});throw new l(e,t,n)},e.prototype.eat=function(e,t){return this.str.slice(this.index,this.index+e.length)===e?(this.index+=e.length,e):(t&&this.error("Expected '"+e+"' instead of '"+this.str[this.index]+"'"),null)},e.prototype.peek=function(){return this.str[this.index]},e.prototype.read=function(e){var t=e.exec(this.str.slice(this.index));return t&&0===t.index?(this.index+=t[0].length,t[0]):null},e.prototype.readUntil=function(e){this.index>=this.str.length&&this.error("Unexpected end of input");var t=this.index,n=e.exec(this.str.slice(t));if(n){var r=this.index;return this.index=r+n.index,this.str.slice(r,this.index)}return this.index=this.str.length,this.str.slice(t)},e.prototype.readArray=function(){var e=this.index;if(!this.eat("["))return null;var t={start:e,end:null,type:"ArrayExpression",elements:[]};for(this.allowWhitespaceOrComment();"]"!==this.peek()&&(t.elements.push(this.readValue()),this.allowWhitespaceOrComment(),this.eat(","));)this.allowWhitespaceOrComment();return this.eat("]")||this.error("Expected ']' instead of '"+this.str[this.index]+"'"),t.end=this.index,t},e.prototype.readBoolean=function(){var e=this.index,t=this.read(/^(true|false)/);if(t)return{start:e,end:this.index,type:"Literal",raw:t,value:"true"===t}},e.prototype.readNull=function(){var e=this.index;if(this.eat("null"))return{start:e,end:this.index,type:"Literal",raw:"null",value:null}},e.prototype.readLiteral=function(){return this.readBoolean()||this.readNumber()||this.readString()||this.readNull()},e.prototype.readNumber=function(){var e=this.index,t=this.read(s);if(t){var n=t[0],r=+("-"===n||"+"===n?t.slice(1):t);return"-"===n&&(r=-r),{start:e,end:this.index,type:"Literal",raw:t,value:r}}},e.prototype.readObject=function(){var e=this.index;if(this.eat("{")){var t={start:e,end:null,type:"ObjectExpression",properties:[]};for(this.allowWhitespaceOrComment();"}"!==this.peek()&&(t.properties.push(this.readProperty()),this.allowWhitespaceOrComment(),this.eat(","));)this.allowWhitespaceOrComment();return this.eat("}",!0),t.end=this.index,t}},e.prototype.readProperty=function(){this.allowWhitespaceOrComment();var e={start:this.index,end:null,type:"Property",key:this.readPropertyKey(),value:this.readValue()};return e.end=this.index,e},e.prototype.readIdentifier=function(){var e=this.index,t=this.read(o);if(t)return{start:e,end:this.index,type:"Identifier",name:t}},e.prototype.readPropertyKey=function(){var e=this.readString()||this.readIdentifier();return e||this.error("Bad identifier as unquoted key"),"Literal"===e.type&&(e.name=String(e.value)),this.allowWhitespaceOrComment(),this.eat(":",!0),e},e.prototype.readString=function(){var e=this.index,t=this.eat("'")||this.eat('"');if(t){for(var n=!1,r="";this.index<this.str.length;){var o=this.str[this.index++];if(n){if(n=!1,"\n"===o)continue;if("\r"===o){"\n"===this.str[this.index]&&(this.index+=1);continue}if("x"===o||"u"===o){var i=this.index,s=this.index+="x"===o?2:4,a=this.str.slice(i,s);h.test(a)||this.error("Invalid "+("x"===o?"hexadecimal":"Unicode")+" escape sequence",i),r+=String.fromCharCode(parseInt(a,16))}else r+=u[o]||o}else if("\\"===o)n=!0;else if(o===t){var s=this.index;return{start:e,end:s,type:"Literal",raw:this.str.slice(e,s),value:r}}else"\n"===o&&this.error("Bad string",this.index-1),r+=o}this.error("Unexpected end of input")}},e.prototype.readValue=function(){this.allowWhitespaceOrComment();var e=this.readArray()||this.readObject()||this.readLiteral();if(e)return this.onValue(e),e;this.error("Unexpected EOF")},e}();function f(e){return function e(t){if("Literal"===t.type)return t.value;if("ArrayExpression"===t.type)return t.elements.map(e);if("ObjectExpression"===t.type){var n={};return t.properties.forEach(function(t){n[t.key.name]=e(t.value)}),n}}(a(e))}var p={"'":"'",'"':'"',"\\":"\\","\b":"b","\f":"f","\n":"n","\r":"r","	":"t","\v":"v","\0":"0","\u2028":"u2028","\u2029":"u2029"},g=/['"\\\b\f\n\r\t\v\0\u2028\u2029]/g;function y(e,t){var n='"'===t?"'":'"';return t+e.replace(g,function(e){return e===n?e:"\\"+p[e]})+t}function v(e,t,n,r,o,s){return(i.test(e)?e:y(e,n))+": "+m(t,n,r,o,s)}function m(e,t,n,r,o){var i=typeof e;if("string"===i)return y(e,t);if("number"===i||"boolean"===i||null===e)return String(e);if(Array.isArray(e)){var s=e.map(function(e){return m(e,t,n+r,r,!0)});return o?"[\n"+(n+r)+s.join(",\n"+(n+r))+"\n"+n+"]":"[ "+s.join(", ")+" ]"}if("object"===i){var a=Object.keys(e).map(function(i){return v(i,e[i],t,n+r,r,o)});return o?"{"+(n+r)+a.join(","+(n+r))+n+"}":"{ "+a.join(", ")+" }"}throw Error("Cannot stringify "+i)}function b(e,t){var n={};n["'"]=0,n['"']=0;var o=function(e){var t=e.split("\n"),n=0,r=0,o=8;if(t.forEach(function(e){var t=/^(?: +|\t+)/.exec(e);if(t){var i=t[0];i.length!==e.length&&("	"===i[0]?n+=1:(r+=1,i.length>1&&i.length<o&&(o=i.length)))}}),!(r>n))return"	";for(var i="";o--;)i+=" ";return i}(e),i=a(e,{onValue:function(e){"Literal"===e.type&&"string"==typeof e.value&&(n[e.raw[0]]+=1)}}),s=n["'"]>n['"']?"'":'"',c=/\n/.test(e.slice(i.start,i.end))||"ArrayExpression"===i.type&&0===i.elements.length||"ObjectExpression"===i.type&&0===i.properties.length;return e.slice(0,i.start)+function e(t,n,o,i,s,a,c){var l=typeof n;if("string"===l)return"Literal"===t.type&&"string"==typeof t.value?y(n,t.raw[0]):y(n,a);if("number"===l){var u=t.raw,h=n,d=/^([-+])?0([boxBOX])/.exec(u);if(d&&h%1==0)return("+"===d[1]&&h>=0?"+":h<0?"-":"")+"0"+d[2]+Math.abs(h).toString("b"===d[2]||"B"===d[2]?2:"o"===d[2]||"O"===d[2]?8:"x"===d[2]||"X"===d[2]?16:null);var f=/^([-+])?(\.)?/.exec(u);return f&&f[0].length>0?("+"===f[1]&&h>=0?"+":h<0?"-":"")+(f[2]?String(Math.abs(h)).replace(/^0/,""):String(Math.abs(h))):String(h)}if("boolean"===l||null===n)return String(n);if(Array.isArray(n))return"ArrayExpression"===t.type?function(t,n,r,o,i,s,a){if(0===n.length)return 0===t.elements.length?r.slice(t.start,t.end):"[]";var c=w(r,t.start),l=""===c||/\n/.test(c);if(0===t.elements.length)return m(n,s,o,i,l);for(var u=0,h=t.start,d="",f=r.slice(t.start,t.end).split("\n").length>1;u<n.length;u+=1){var p=t.elements[u];p?(d+=r.slice(h,p.start)+e(p,n[u],r,o,i,s,f),h=p.end):f?d+=",\n"+(o+i)+m(n[u],s,o,i,!0):d+=", "+m(n[u],s,o,i,!1)}return u<t.elements.length&&(h=t.elements[t.elements.length-1].end),d+=r.slice(h,t.end)}(t,n,o,i,s,a,0):m(n,a,i,s,c);if("object"===l)return"ObjectExpression"===t.type?function(t,n,o,i,s,a,c){var l=Object.keys(n);if(0===l.length)return 0===t.properties.length?o.slice(t.start,t.end):"{}";var u={};t.properties.forEach(function(e){u[e.key.name]=e});var h=w(o,t.start),d=""===h||/\n/.test(h);if(0===t.properties.length)return m(n,a,i,s,d);for(var f=0,p=t.start,g="",y=/\n/.test(o.slice(t.start,t.end)),b=!1,x=o.slice(t.start,t.properties[0].start);f<t.properties.length;f+=1){var E=t.properties[f],_=n[E.key.name];i=function(e,t){for(;t>0&&!r.test(e[t-1]);)t-=1;for(var n=t;t>0&&r.test(e[t-1]);)t-=1;return e.slice(t,n)}(o,E.start),void 0!==_&&(g+=b?o.slice(p,E.value.start):x+o.slice(E.key.start,E.value.start),g+=e(E.value,_,o,i,s,a,y),b=!0),p=E.end}return l.forEach(function(e){if(!(e in u)){var t=n[e];g+=(b?","+(y?i:" "):x)+v(e,t,a,i,s,y),b=!0}}),g+=o.slice(p,t.end)}(t,n,o,i,s,a,0):m(n,a,i,s,c);throw Error("Cannot stringify "+l+"s")}(i,t,e,"",o,s,c)+e.slice(i.end)}function w(e,t){for(var n=t;t>0&&r.test(e[t]);)t-=1;return e.slice(t,n)}},45764:(e,t,n)=>{e.exports=n(11650)(Object,"create")},46027:(e,t,n)=>{var r=n(867),o=n(33578),i=n(53120),s=n(7002);e.exports=function(e,t){return r(e)?e:o(e,t)?[e]:i(s(e))}},46308:(e,t,n)=>{"use strict";var r;n.d(t,{s:()=>r}),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(r||(r={}))},46434:(e,t,n)=>{"use strict";function r(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new o(t.call(e));n="@@asyncIterator",r="@@iterator"}throw TypeError("Object is not async iterable")}function o(e){function t(e){if(Object(e)!==e)return Promise.reject(TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(o=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new o(e)}n.d(t,{_:()=>r})},47225:(e,t,n)=>{var r=n(29643),o=n(69804);e.exports=function(e,t,n,i){var s=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var l=t[a],u=i?i(n[l],e[l],l,n,e):void 0;void 0===u&&(u=e[l]),s?o(n,l,u):r(n,l,u)}return n}},47477:(e,t,n)=>{"use strict";n.d(t,{eu:()=>s}),Error("timeout while waiting for mutex to become available"),Error("mutex already locked");let r=Error("request for lock canceled");class o{constructor(e,t=r){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);return new Promise((n,r)=>{let o={resolve:n,reject:r,weight:e,priority:t},s=i(this._queue,e=>t<=e.priority);-1===s&&e<=this._value?this._dispatchItem(o):this._queue.splice(s+1,0,o)})}runExclusive(e){var t,n,r,o;return t=this,n=arguments,r=void 0,o=function*(e,t=1,n=0){let[r,o]=yield this.acquire(t,n);try{return yield e(r)}finally{o()}},new(r||(r=Promise))(function(e,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):((n=t.value)instanceof r?n:new r(function(e){e(n)})).then(s,a)}c((o=o.apply(t,n||[])).next())})}waitForUnlock(e=1,t=0){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(n=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),function(e,t){let n=i(e,e=>t.priority<=e.priority);e.splice(n+1,0,t)}(this._weightedWaiters[e-1],{resolve:n,priority:t})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){let t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(0===this._queue.length)for(let e=this._value;e>0;e--){let t=this._weightedWaiters[e-1];t&&(t.forEach(e=>e.resolve()),this._weightedWaiters[e-1]=[])}else{let e=this._queue[0].priority;for(let t=this._value;t>0;t--){let n=this._weightedWaiters[t-1];if(!n)continue;let r=n.findIndex(t=>t.priority<=e);(-1===r?n:n.splice(0,r)).forEach(e=>e.resolve())}}}_couldLockImmediately(e,t){return(0===this._queue.length||this._queue[0].priority<t)&&e<=this._value}}function i(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return -1}class s{constructor(e){this._semaphore=new o(1,e)}acquire(){var e,t,n,r;return e=this,t=arguments,n=void 0,r=function*(e=0){let[,t]=yield this._semaphore.acquire(1,e);return t},new(n||(n=Promise))(function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((r=r.apply(e,t||[])).next())})}runExclusive(e,t=0){return this._semaphore.runExclusive(()=>e(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}},48285:e=>{e.exports=function(){return!1}},48842:(e,t,n)=>{var r=n(20815),o=n(9964),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},49181:(e,t,n)=>{var r=n(89367);e.exports=function(e){return r(this.__data__,e)>-1}},49657:(e,t,n)=>{var r=n(77882),o=n(29569),i=n(50482),s=Object.prototype,a=Function.prototype.toString,c=s.hasOwnProperty,l=a.call(Object);e.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&a.call(n)==l}},51175:(e,t,n)=>{"use strict";n.r(t),n.d(t,{_:()=>o});var r=n(86466);function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r._)(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n||e):i.value}})(e,t,n||e)}},51934:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var s=e[n];t(s,n,e)&&(i[o++]=s)}return i}},52719:(e,t,n)=>{var r=n(77882),o=n(18298),i=n(50482),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!s[r(e)]}},52783:(e,t,n)=>{var r=n(52719),o=n(63213),i=n(519),s=i&&i.isTypedArray;e.exports=s?o(s):r},52922:(e,t,n)=>{e=n.nmd(e);var r=n(28811),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,s=i&&i.exports===o?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}},53120:(e,t,n)=>{var r=n(37752),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g;e.exports=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,n,r,o){t.push(r?o.replace(i,"$1"):n||e)}),t})},53473:(e,t,n)=>{var r=n(96230),o=n(36174),i=n(54557),s=n(75895),a=/^\[object .+?Constructor\]$/,c=Object.prototype,l=Function.prototype.toString,u=c.hasOwnProperty,h=RegExp("^"+l.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?h:a).test(s(e))}},54016:e=>{e.exports=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}},54236:(e,t,n)=>{var r=n(8527),o=n(63213),i=n(519),s=i&&i.isMap;e.exports=s?o(s):r},54596:(e,t,n)=>{var r=n(98197),o=n(55922),i=n(89674);e.exports=function(e){return r(e,i,o)}},55301:(e,t,n)=>{var r="__lodash_hash_undefined__",o=1/0,i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,a=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,u=/^\[object .+?Constructor\]$/,h="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,f=h||d||Function("return this")(),p=Array.prototype,g=Function.prototype,y=Object.prototype,v=f["__core-js_shared__"],m=function(){var e=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),b=g.toString,w=y.hasOwnProperty,x=y.toString,E=RegExp("^"+b.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=f.Symbol,C=p.splice,S=L(f,"Map"),k=L(Object,"create"),M=_?_.prototype:void 0,O=M?M.toString:void 0;function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function U(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function j(e,t){for(var n,r,o=e.length;o--;){if(n=e[o][0],n===(r=t)||n!=n&&r!=r)return o}return -1}function B(e,t){var n,r,o=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function L(e,t){var n,r,o,i=null==e?void 0:e[t];return!(!$(i)||(n=i,m&&m in n))&&("[object Function]"==(o=$(r=i)?x.call(r):"")||"[object GeneratorFunction]"==o||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(i)?E:u).test(function(e){if(null!=e){try{return b.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(i))?i:void 0}T.prototype.clear=function(){this.__data__=k?k(null):{}},T.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},T.prototype.get=function(e){var t=this.__data__;if(k){var n=t[e];return n===r?void 0:n}return w.call(t,e)?t[e]:void 0},T.prototype.has=function(e){var t=this.__data__;return k?void 0!==t[e]:w.call(t,e)},T.prototype.set=function(e,t){return this.__data__[e]=k&&void 0===t?r:t,this},U.prototype.clear=function(){this.__data__=[]},U.prototype.delete=function(e){var t=this.__data__,n=j(t,e);return!(n<0)&&(n==t.length-1?t.pop():C.call(t,n,1),!0)},U.prototype.get=function(e){var t=this.__data__,n=j(t,e);return n<0?void 0:t[n][1]},U.prototype.has=function(e){return j(this.__data__,e)>-1},U.prototype.set=function(e,t){var n=this.__data__,r=j(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},I.prototype.clear=function(){this.__data__={hash:new T,map:new(S||U),string:new T}},I.prototype.delete=function(e){return B(this,e).delete(e)},I.prototype.get=function(e){return B(this,e).get(e)},I.prototype.has=function(e){return B(this,e).has(e)},I.prototype.set=function(e,t){return B(this,e).set(e,t),this};var A=R(function(e){e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(D(e))return O?O.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(t);var t,n=[];return a.test(e)&&n.push(""),e.replace(c,function(e,t,r,o){n.push(r?o.replace(l,"$1"):t||e)}),n});function R(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s),s};return n.cache=new(R.Cache||I),n}R.Cache=I;var P=Array.isArray;function $(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function D(e){return"symbol"==typeof e||!!e&&"object"==typeof e&&"[object Symbol]"==x.call(e)}e.exports=function(e,t,n){var r=null==e?void 0:function(e,t){var n;t=!function(e,t){if(P(e))return!1;var n=typeof e;return!!("number"==n||"symbol"==n||"boolean"==n||null==e||D(e))||s.test(e)||!i.test(e)||null!=t&&e in Object(t)}(t,e)?P(n=t)?n:A(n):[t];for(var r=0,a=t.length;null!=e&&r<a;)e=e[function(e){if("string"==typeof e||D(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}(t[r++])];return r&&r==a?e:void 0}(e,t);return void 0===r?n:r}},55304:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},55922:(e,t,n)=>{var r=n(51934),o=n(43279),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;e.exports=s?function(e){return null==e?[]:r(s(e=Object(e)),function(t){return i.call(e,t)})}:o},56359:(e,t,n)=>{var r=n(43822),o=n(28309);e.exports=function(e,t){return r(e,t,function(t,n){return o(e,n)})}},57010:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var r=n(6639)._.getInstance()},57766:(e,t,n)=>{var r=n(15828),o=n(59671),i=n(98757);e.exports=function(e){return i(o(e,void 0,r),e+"")}},58059:(e,t,n)=>{"use strict";n.d(t,{Hn:()=>a,X3:()=>o,_j:()=>i,eN:()=>s,f7:()=>r});var r=0xffffffff;function o(e,t,n){e.setUint32(t,n/0x100000000),e.setUint32(t+4,n)}function i(e,t,n){var r=Math.floor(n/0x100000000);e.setUint32(t,r),e.setUint32(t+4,n)}function s(e,t){return 0x100000000*e.getInt32(t)+e.getUint32(t+4)}function a(e,t){return 0x100000000*e.getUint32(t)+e.getUint32(t+4)}},58330:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},59099:(e,t,n)=>{var r=n(41381),o=n(64401),i=n(29643),s=n(68111),a=n(12096),c=n(52922),l=n(29631),u=n(97295),h=n(23104),d=n(54596),f=n(69047),p=n(94995),g=n(23307),y=n(31929),v=n(65509),m=n(867),b=n(38688),w=n(54236),x=n(54557),E=n(19806),_=n(89674),C=n(68185),S="[object Arguments]",k="[object Function]",M="[object Object]",O={};O[S]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[M]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[k]=O["[object WeakMap]"]=!1,e.exports=function e(t,n,T,U,I,j){var B,L=1&n,A=2&n,R=4&n;if(T&&(B=I?T(t,U,I,j):T(t)),void 0!==B)return B;if(!x(t))return t;var P=m(t);if(P){if(B=g(t),!L)return l(t,B)}else{var $=p(t),D=$==k||"[object GeneratorFunction]"==$;if(b(t))return c(t,L);if($==M||$==S||D&&!I){if(B=A||D?{}:v(t),!L)return A?h(t,a(B,t)):u(t,s(B,t))}else{if(!O[$])return I?t:{};B=y(t,$,L)}}j||(j=new r);var H=j.get(t);if(H)return H;j.set(t,B),E(t)?t.forEach(function(r){B.add(e(r,n,T,r,t,j))}):w(t)&&t.forEach(function(r,o){B.set(o,e(r,n,T,o,t,j))});var N=R?A?f:d:A?C:_,F=P?void 0:N(t);return o(F||t,function(r,o){F&&(r=t[o=r]),i(B,o,e(r,n,T,o,t,j))}),B}},59156:(e,t,n)=>{var r=n(96230),o=n(18298);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},59254:(e,t,n)=>{"use strict";n.d(t,{j:()=>i});var r=Object.prototype.hasOwnProperty;function o(e,t,n){for(n of e.keys())if(i(n,t))return n}function i(e,t){var n,s,a;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((s=e.length)===t.length)for(;s--&&i(e[s],t[s]););return -1===s}if(n===Set){if(e.size!==t.size)return!1;for(s of e)if((a=s)&&"object"==typeof a&&!(a=o(t,a))||!t.has(a))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(s of e)if((a=s[0])&&"object"==typeof a&&!(a=o(t,a))||!i(s[1],t.get(a)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((s=e.byteLength)===t.byteLength)for(;s--&&e.getInt8(s)===t.getInt8(s););return -1===s}if(ArrayBuffer.isView(e)){if((s=e.byteLength)===t.byteLength)for(;s--&&e[s]===t[s];);return -1===s}if(!n||"object"==typeof e){for(n in s=0,e)if(r.call(e,n)&&++s&&!r.call(t,n)||!(n in t)||!i(e[n],t[n]))return!1;return Object.keys(t).length===s}}return e!=e&&t!=t}},59671:(e,t,n)=>{var r=n(25361),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,a=o(i.length-t,0),c=Array(a);++s<a;)c[s]=i[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=i[s];return l[t]=n(c),r(e,this,l)}}},60563:(e,t,n)=>{var r=n(82274),o=n(54016);e.exports=function(e,t){return t.length<2?e:r(e,o(t,0,-1))}},63213:e=>{e.exports=function(e){return function(t){return e(t)}}},63420:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},63650:(e,t,n)=>{"use strict";var r;n.d(t,{s:()=>r}),function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(r||(r={}))},64162:(e,t,n)=>{var r=n(77882),o=n(50482);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},64401:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},65439:(e,t,n)=>{var r=n(73582);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},65509:(e,t,n)=>{var r=n(30442),o=n(29569),i=n(20815);e.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(o(e))}},65916:(e,t,n)=>{var r=n(89367),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},66218:(e,t,n)=>{"use strict";n.d(t,{u:()=>U});var r,o=n(7079),i=n(6639),s=n(3107);!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(r||(r={}));var a="0000000000000000",c="00000000000000000000000000000000",l={traceId:c,spanId:a,traceFlags:r.NONE},u=function(){function e(e){void 0===e&&(e=l),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),h=(0,s.n)("OpenTelemetry Context Key SPAN");function d(e){return e.getValue(h)||void 0}function f(){return d(i._.getInstance().active())}function p(e,t){return e.setValue(h,t)}function g(e){return e.deleteValue(h)}function y(e,t){return p(e,new u(t))}function v(e){var t;return null==(t=d(e))?void 0:t.spanContext()}var m=/^([0-9a-f]{32})$/i,b=/^[0-9a-f]{16}$/i;function w(e){var t,n;return t=e.traceId,m.test(t)&&t!==c&&(n=e.spanId,b.test(n)&&n!==a)}function x(e){return new u(e)}var E=i._.getInstance(),_=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=E.active()),null==t?void 0:t.root)return new u;var r,o=n&&v(n);return"object"==typeof(r=o)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&w(o)?new u(o):new u},e.prototype.startActiveSpan=function(e,t,n,r){if(!(arguments.length<2)){2==arguments.length?s=t:3==arguments.length?(o=t,s=n):(o=t,i=n,s=r);var o,i,s,a=null!=i?i:E.active(),c=this.startSpan(e,o,a),l=p(a,c);return E.with(l,s,void 0,c)}},e}(),C=new _,S=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):C},e}(),k=new(function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new _},e}()),M=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var r;return null!=(r=this.getDelegateTracer(e,t,n))?r:new S(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:k},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null==(r=this._delegate)?void 0:r.getTracer(e,t,n)},e}(),O=n(17063),T="trace",U=(function(){function e(){this._proxyTracerProvider=new M,this.wrapSpanContext=x,this.isSpanContextValid=w,this.deleteSpan=g,this.getSpan=d,this.getActiveSpan=f,this.getSpanContext=v,this.setSpan=p,this.setSpanContext=y}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=(0,o.$G)(T,this._proxyTracerProvider,O.K.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return(0,o.mS)(T)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){(0,o.kv)(T,O.K.instance()),this._proxyTracerProvider=new M},e})().getInstance()},66287:(e,t,n)=>{var r=n(82087),o=n(16450),i=n(867),s=r?r.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||o(e)||!!(s&&e&&e[s])}},66363:(e,t,n)=>{var r=n(63420),o=n(16450),i=n(867),s=n(38688),a=n(14929),c=n(52783),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),u=!n&&o(e),h=!n&&!u&&s(e),d=!n&&!u&&!h&&c(e),f=n||u||h||d,p=f?r(e.length,String):[],g=p.length;for(var y in e)(t||l.call(e,y))&&!(f&&("length"==y||h&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,g)))&&p.push(y);return p}},66388:(e,t,n)=>{var r=n(90164),o=n(66287);e.exports=function e(t,n,i,s,a){var c=-1,l=t.length;for(i||(i=o),a||(a=[]);++c<l;){var u=t[c];n>0&&i(u)?n>1?e(u,n-1,i,s,a):r(a,u):s||(a[a.length]=u)}return a}},67255:(e,t,n)=>{"use strict";let r;n.d(t,{A:()=>a});let o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},i=new Uint8Array(16),s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));let a=function(e,t,n){if(o.randomUUID&&!t&&!e)return o.randomUUID();let a=(e=e||{}).random??e.rng?.()??function(){if(!r){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(i)}();if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){if((n=n||0)<0||n+16>t.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=a[e];return t}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(a)}},68111:(e,t,n)=>{var r=n(47225),o=n(89674);e.exports=function(e,t){return e&&r(t,o(t),e)}},68185:(e,t,n)=>{var r=n(66363),o=n(6841),i=n(59156);e.exports=function(e){return i(e)?r(e,!0):o(e)}},69047:(e,t,n)=>{var r=n(98197),o=n(19361),i=n(68185);e.exports=function(e){return r(e,i,o)}},69246:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}},69804:(e,t,n)=>{var r=n(36317);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},73582:(e,t,n)=>{e.exports=n(28811).Uint8Array},75180:(e,t,n)=>{var r=n(24839),o=n(88999),i=n(25671);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},75895:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},77392:(e,t,n)=>{"use strict";n.d(t,{$:()=>w});var r=n(7079),o=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}(),i={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},s={set:function(e,t,n){null!=e&&(e[t]=n)}},a=n(6639),c=(0,n(3107).n)("OpenTelemetry Baggage Key");function l(e){return e.getValue(c)||void 0}function u(){return l(a._.getInstance().active())}function h(e,t){return e.setValue(c,t)}function d(e){return e.deleteValue(c)}var f=n(17063),p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},g=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},y=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=p(e,2);return[t[0],t[1]]})},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=new e(this._entries);try{for(var s=g(r),a=s.next();!a.done;a=s.next()){var c=a.value;i._entries.delete(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},e.prototype.clear=function(){return new e},e}();function v(e){return void 0===e&&(e={}),new y(new Map(Object.entries(e)))}f.K.instance();var m="propagation",b=new o,w=(function(){function e(){this.createBaggage=v,this.getBaggage=l,this.getActiveBaggage=u,this.setBaggage=h,this.deleteBaggage=d}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return(0,r.$G)(m,e,f.K.instance())},e.prototype.inject=function(e,t,n){return void 0===n&&(n=s),this._getGlobalPropagator().inject(e,t,n)},e.prototype.extract=function(e,t,n){return void 0===n&&(n=i),this._getGlobalPropagator().extract(e,t,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){(0,r.kv)(m,f.K.instance())},e.prototype._getGlobalPropagator=function(){return(0,r.mS)(m)||b},e})().getInstance()},78047:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},80019:e=>{e.exports=function(e){return this.__data__.has(e)}},80493:(e,t,n)=>{var r=n(89367);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},82274:(e,t,n)=>{var r=n(46027),o=n(38665);e.exports=function(e,t){t=r(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[o(t[n++])];return n&&n==i?e:void 0}},83463:(e,t,n)=>{var r=n(56359);e.exports=n(57766)(function(e,t){return null==e?{}:r(e,t)})},84503:(e,t,n)=>{var r=n(75180),o=n(33388),i=n(4409),s=n(85261),a=n(20765);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},84724:(e,t,n)=>{"use strict";n.d(t,{MU:()=>L,xp:()=>q,Ng:()=>z,bd:()=>g});var r=n(66218),o=n(57010),i=(n(95570),{debug:-1,info:0,warn:1,error:2}),s=e=>(t,n)=>{if(n&&!n.telemetry){let e=r.u.getSpan(o._.active());e&&(n.telemetry={traceId:e.spanContext().traceId,spanId:e.spanContext().spanId})}if(!n?.transportMessage)return void e(t,n);let{payload:i,...s}=n.transportMessage;n.transportMessage=s,e(t,n)},a=class{minLevel;output;constructor(e,t="info"){this.minLevel=t,this.output=e}debug(e,t){i[this.minLevel]<=i.debug&&this.output(e,t??{},"debug")}info(e,t){i[this.minLevel]<=i.info&&this.output(e,t??{},"info")}warn(e,t){i[this.minLevel]<=i.warn&&this.output(e,t??{},"warn")}error(e,t){i[this.minLevel]<=i.error&&this.output(e,t??{},"error")}},c=e=>({debug:s(e.debug.bind(e)),info:s(e.info.bind(e)),warn:s(e.warn.bind(e)),error:s(e.error.bind(e))}),l=n(16875),u=n(46308),h=n(94598),d=n(25883),f=n(45843),p=n(27115),g={RetriesExceeded:"conn_retry_exceeded",HandshakeFailed:"handshake_failed",MessageOrderingViolated:"message_ordering_violated",InvalidMessage:"invalid_message",MessageSendFailure:"message_send_failure"},y=class{eventListeners={};removeAllListeners(){this.eventListeners={}}numberOfListeners(e){return this.eventListeners[e]?.size??0}addEventListener(e,t){this.eventListeners[e]||(this.eventListeners[e]=new Set),this.eventListeners[e]?.add(t)}removeEventListener(e,t){this.eventListeners[e]&&this.eventListeners[e]?.delete(t)}dispatchEvent(e,t){let n=this.eventListeners[e];if(n)for(let e of[...n])e(t)}},v=new TextEncoder,m=new TextDecoder,b={heartbeatIntervalMs:1e3,heartbeatsUntilDead:2,sessionDisconnectGraceMs:5e3,connectionTimeoutMs:2e3,handshakeTimeoutMs:1e3,enableTransparentSessionReconnects:!0,codec:{toBuffer:e=>v.encode(JSON.stringify(e,function(e){let t,n=this[e];if(!(n instanceof Uint8Array))return n;return{$t:(t="",n.forEach(e=>{t+=String.fromCharCode(e)}),btoa(t))}})),fromBuffer:e=>{let t=JSON.parse(m.decode(e),function(e,t){return t?.$t!==void 0?function(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}(t.$t):t});if("object"!=typeof t||null===t)throw Error("unpacked msg is not an object");return t}}},w={...b,baseIntervalMs:150,maxJitterMs:200,maxBackoffMs:32e3,attemptBudgetCapacity:5,budgetRestoreIntervalMs:200},x=(e=>(e.NoConnection="NoConnection",e.BackingOff="BackingOff",e.Connecting="Connecting",e.Handshaking="Handshaking",e.Connected="Connected",e.WaitingForHandshake="WaitingForHandshake",e))(x||{}),E="session state has been consumed and is no longer valid",_=class{_isConsumed;close(){this._handleClose()}constructor(){return this._isConsumed=!1,new Proxy(this,{get(e,t){if("_isConsumed"===t||"id"===t||"state"===t)return Reflect.get(e,t);if("_handleStateExit"===t)return()=>{e._isConsumed=!0,e._handleStateExit()};if("_handleClose"===t)return()=>{e._isConsumed=!0,e._handleStateExit(),e._handleClose()};if(e._isConsumed)throw Error(`${E}: getting ${t.toString()} on consumed state`);return Reflect.get(e,t)},set(e,t,n){if(e._isConsumed)throw Error(`${E}: setting ${t.toString()} on consumed state`);return Reflect.set(e,t,n)}})}},C=class extends _{from;options;codec;tracer;log;constructor({from:e,options:t,log:n,tracer:r,codec:o}){super(),this.from=e,this.options=t,this.log=n,this.tracer=r,this.codec=o}},S=class extends C{id;telemetry;to;protocolVersion;seq;seqSent;ack;sendBuffer;constructor(e){let{id:t,to:n,seq:r,ack:o,sendBuffer:i,telemetry:s,log:a,protocolVersion:c,seqSent:l}=e;super(e),this.id=t,this.to=n,this.seq=r,this.ack=o,this.sendBuffer=i,this.telemetry=s,this.log=a,this.protocolVersion=c,this.seqSent=l}get loggingMetadata(){let e={clientId:this.from,connectedTo:this.to,sessionId:this.id};if(this.telemetry.span.isRecording()){let t=this.telemetry.span.spanContext();e.telemetry={traceId:t.traceId,spanId:t.spanId}}return e}constructMsg(e){let t={...e,id:(0,l.$C)(),to:this.to,from:this.from,seq:this.seq,ack:this.ack};return this.seq++,t}nextSeq(){return this.sendBuffer.length>0?this.sendBuffer[0].seq:this.seq}send(e){let t=this.constructMsg(e);return this.sendBuffer.push(t),{ok:!0,value:t.id}}_handleStateExit(){}_handleClose(){this.sendBuffer.length=0,this.telemetry.span.end()}},k=class extends S{graceExpiryTime;gracePeriodTimeout;listeners;constructor(e){super(e),this.listeners=e.listeners,this.graceExpiryTime=e.graceExpiryTime,this.gracePeriodTimeout=setTimeout(()=>{this.listeners.onSessionGracePeriodElapsed()},this.graceExpiryTime-Date.now())}_handleStateExit(){super._handleStateExit(),this.gracePeriodTimeout&&(clearTimeout(this.gracePeriodTimeout),this.gracePeriodTimeout=void 0)}_handleClose(){super._handleClose()}};function M(e,t,n){let r=t.toBuffer(n);return r.ok?e.send(r.value)?{ok:!0,value:n.id}:{ok:!1,reason:"failed to send message"}:r}var O=class extends k{state="Connecting";connPromise;listeners;connectionTimeout;constructor(e){super(e),this.connPromise=e.connPromise,this.listeners=e.listeners,this.connPromise.then(e=>{this._isConsumed||this.listeners.onConnectionEstablished(e)},e=>{this._isConsumed||this.listeners.onConnectionFailed(e)}),this.connectionTimeout=setTimeout(()=>{this.listeners.onConnectionTimeout()},this.options.connectionTimeoutMs)}bestEffortClose(){let e=this.log,t=this.loggingMetadata;this.connPromise.then(n=>{n.close(),e?.info("connection eventually resolved but session has transitioned, closed connection",{...t,...n.loggingMetadata})}).catch(()=>{})}_handleStateExit(){super._handleStateExit(),this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0)}_handleClose(){super._handleClose(),this.bestEffortClose()}},T=class extends k{state="NoConnection";_handleClose(){super._handleClose()}_handleStateExit(){super._handleStateExit()}},U=class extends C{state="WaitingForHandshake";conn;listeners;handshakeTimeout;constructor(e){super(e),this.conn=e.conn,this.listeners=e.listeners,this.handshakeTimeout=setTimeout(()=>{this.listeners.onHandshakeTimeout()},this.options.handshakeTimeoutMs),this.conn.setDataListener(this.onHandshakeData),this.conn.setErrorListener(this.listeners.onConnectionErrored),this.conn.setCloseListener(this.listeners.onConnectionClosed)}get loggingMetadata(){return{clientId:this.from,connId:this.conn.id,...this.conn.loggingMetadata}}onHandshakeData=e=>{let t=this.codec.fromBuffer(e);if(!t.ok)return void this.listeners.onInvalidHandshake(`could not parse handshake message: ${t.reason}`,"MALFORMED_HANDSHAKE");this.listeners.onHandshake(t.value)};sendHandshake(e){return M(this.conn,this.codec,e)}_handleStateExit(){this.conn.removeDataListener(),this.conn.removeErrorListener(),this.conn.removeCloseListener(),clearTimeout(this.handshakeTimeout),this.handshakeTimeout=void 0}_handleClose(){this.conn.close()}},I=class extends k{state="Handshaking";conn;listeners;handshakeTimeout;constructor(e){super(e),this.conn=e.conn,this.listeners=e.listeners,this.handshakeTimeout=setTimeout(()=>{this.listeners.onHandshakeTimeout()},this.options.handshakeTimeoutMs),this.conn.setDataListener(this.onHandshakeData),this.conn.setErrorListener(this.listeners.onConnectionErrored),this.conn.setCloseListener(this.listeners.onConnectionClosed)}get loggingMetadata(){return{...super.loggingMetadata,...this.conn.loggingMetadata}}onHandshakeData=e=>{let t=this.codec.fromBuffer(e);if(!t.ok)return void this.listeners.onInvalidHandshake(`could not parse handshake message: ${t.reason}`,"MALFORMED_HANDSHAKE");this.listeners.onHandshake(t.value)};sendHandshake(e){return M(this.conn,this.codec,e)}_handleStateExit(){super._handleStateExit(),this.conn.removeDataListener(),this.conn.removeErrorListener(),this.conn.removeCloseListener(),this.handshakeTimeout&&(clearTimeout(this.handshakeTimeout),this.handshakeTimeout=void 0)}_handleClose(){super._handleClose(),this.conn.close()}},j=class extends S{state="Connected";conn;listeners;heartbeatHandle;heartbeatMissTimeout;isActivelyHeartbeating=!1;updateBookkeeping(e,t){this.sendBuffer=this.sendBuffer.filter(t=>t.seq>=e),this.ack=t+1,this.heartbeatMissTimeout&&clearTimeout(this.heartbeatMissTimeout),this.startMissingHeartbeatTimeout()}assertSendOrdering(e){if(e.seq>this.seqSent+1){let t=`invariant violation: would have sent out of order msg (seq: ${e.seq}, expected: ${this.seqSent} + 1)`;throw this.log?.error(t,{...this.loggingMetadata,transportMessage:e,tags:["invariant-violation"]}),Error(t)}}send(e){let t=this.constructMsg(e);this.assertSendOrdering(t),this.sendBuffer.push(t);let n=M(this.conn,this.codec,t);return n.ok?this.seqSent=t.seq:this.listeners.onMessageSendFailure(t,n.reason),n}constructor(e){super(e),this.conn=e.conn,this.listeners=e.listeners,this.conn.setDataListener(this.onMessageData),this.conn.setCloseListener(this.listeners.onConnectionClosed),this.conn.setErrorListener(this.listeners.onConnectionErrored)}sendBufferedMessages(){if(this.sendBuffer.length>0)for(let e of(this.log?.info(`sending ${this.sendBuffer.length} buffered messages, starting at seq ${this.nextSeq()}`,this.loggingMetadata),this.sendBuffer)){this.assertSendOrdering(e);let t=M(this.conn,this.codec,e);if(!t.ok)return this.listeners.onMessageSendFailure(e,t.reason),t;this.seqSent=e.seq}return{ok:!0,value:void 0}}get loggingMetadata(){return{...super.loggingMetadata,...this.conn.loggingMetadata}}startMissingHeartbeatTimeout(){let e=this.options.heartbeatsUntilDead,t=e*this.options.heartbeatIntervalMs;this.heartbeatMissTimeout=setTimeout(()=>{this.log?.info(`closing connection to ${this.to} due to inactivity (missed ${e} heartbeats which is ${t}ms)`,this.loggingMetadata),this.telemetry.span.addEvent("closing connection due to missing heartbeat"),this.conn.close()},t)}startActiveHeartbeat(){this.isActivelyHeartbeating=!0,this.heartbeatHandle=setInterval(()=>{this.sendHeartbeat()},this.options.heartbeatIntervalMs)}sendHeartbeat(){this.log?.debug("sending heartbeat",this.loggingMetadata),this.send({streamId:"heartbeat",controlFlags:1,payload:{type:"ACK"}})}onMessageData=e=>{let t=this.codec.fromBuffer(e);if(!t.ok)return void this.listeners.onInvalidMessage(`could not parse message: ${t.reason}`);let n=t.value;if(n.seq!==this.ack){if(n.seq<this.ack)this.log?.debug(`received duplicate msg (got seq: ${n.seq}, wanted seq: ${this.ack}), discarding`,{...this.loggingMetadata,transportMessage:n});else{let e=`received out-of-order msg, closing connection (got seq: ${n.seq}, wanted seq: ${this.ack})`;this.log?.error(e,{...this.loggingMetadata,transportMessage:n,tags:["invariant-violation"]}),this.telemetry.span.setStatus({code:u.s.ERROR,message:e}),this.conn.close()}return}if(this.log?.debug("received msg",{...this.loggingMetadata,transportMessage:n}),this.updateBookkeeping(n.ack,n.seq),!(0,l.o0)(n.controlFlags))return void this.listeners.onMessage(n);this.log?.debug("discarding msg (ack bit set)",{...this.loggingMetadata,transportMessage:n}),this.isActivelyHeartbeating||this.sendHeartbeat()};_handleStateExit(){super._handleStateExit(),this.conn.removeDataListener(),this.conn.removeCloseListener(),this.conn.removeErrorListener(),this.heartbeatHandle&&(clearInterval(this.heartbeatHandle),this.heartbeatHandle=void 0),this.heartbeatMissTimeout&&(clearTimeout(this.heartbeatMissTimeout),this.heartbeatMissTimeout=void 0)}_handleClose(){super._handleClose(),this.conn.close()}},B=class extends k{state="BackingOff";listeners;backoffTimeout;constructor(e){super(e),this.listeners=e.listeners,this.backoffTimeout=setTimeout(()=>{this.listeners.onBackoffFinished()},e.backoffMs)}_handleClose(){super._handleClose()}_handleStateExit(){super._handleStateExit(),this.backoffTimeout&&(clearTimeout(this.backoffTimeout),this.backoffTimeout=void 0)}},L={toBuffer:e=>(0,h.l)(e,{ignoreUndefined:!0}),fromBuffer:e=>{let t=(0,d.D4)(e);if("object"!=typeof t||null===t)throw Error("unpacked msg is not an object");return t}},A=class{constructor(e){this.codec=e}toBuffer(e){try{return{ok:!0,value:this.codec.toBuffer(e)}}catch(e){return{ok:!1,reason:(0,l.xH)(e)}}}fromBuffer(e){try{let t=this.codec.fromBuffer(e);if(!f.J(l.bH,t))return{ok:!1,reason:"transport message schema mismatch"};return{ok:!0,value:t}}catch(e){return{ok:!1,reason:(0,l.xH)(e)}}}};function R(e){return{id:e.id,from:e.from,to:e.to,seq:e.seq,ack:e.ack,seqSent:e.seqSent,sendBuffer:e.sendBuffer,telemetry:e.telemetry,options:e.options,log:e.log,tracer:e.tracer,protocolVersion:e.protocolVersion,codec:e.codec}}function P(e){return{...R(e),graceExpiryTime:e.graceExpiryTime}}var $={entrypoints:{NoConnection:(e,t,n,r,o,i,s)=>{let a=`session-${(0,l.$C)()}`,c=(0,l.iH)(i,a,e,t),u=new T({listeners:n,id:a,from:t,to:e,seq:0,ack:0,seqSent:0,graceExpiryTime:Date.now()+r.sessionDisconnectGraceMs,sendBuffer:[],telemetry:c,options:r,protocolVersion:o,tracer:i,log:s,codec:new A(r.codec)});return u.log?.info(`session ${u.id} created in NoConnection state`,{...u.loggingMetadata,tags:["state-transition"]}),u},WaitingForHandshake:(e,t,n,r,o,i)=>{let s=new U({conn:t,listeners:n,from:e,options:r,tracer:o,log:i,codec:new A(r.codec)});return s.log?.info("session created in WaitingForHandshake state",{...s.loggingMetadata,tags:["state-transition"]}),s}},transition:{NoConnectionToBackingOff:(e,t,n)=>{let r=P(e);e._handleStateExit();let o=new B({backoffMs:t,listeners:n,...r});return o.log?.info(`session ${o.id} transition from NoConnection to BackingOff`,{...o.loggingMetadata,tags:["state-transition"]}),o},BackingOffToConnecting:(e,t,n)=>{let r=P(e);e._handleStateExit();let o=new O({connPromise:t,listeners:n,...r});return o.log?.info(`session ${o.id} transition from BackingOff to Connecting`,{...o.loggingMetadata,tags:["state-transition"]}),o},ConnectingToHandshaking:(e,t,n)=>{let r=P(e);e._handleStateExit();let o=new I({conn:t,listeners:n,...r});return t.telemetry=(0,l._I)(o.tracer,t,o.telemetry),o.log?.info(`session ${o.id} transition from Connecting to Handshaking`,{...o.loggingMetadata,tags:["state-transition"]}),o},HandshakingToConnected:(e,t)=>{let n=R(e),r=e.conn;e._handleStateExit();let o=new j({conn:r,listeners:t,...n});return o.startMissingHeartbeatTimeout(),o.log?.info(`session ${o.id} transition from Handshaking to Connected`,{...o.loggingMetadata,tags:["state-transition"]}),o},WaitingForHandshakeToConnected:(e,t,n,r,o,i,s)=>{let a=e.conn,{from:c,options:u}=e,h=t?R(t):{id:n,from:c,to:r,seq:0,ack:0,seqSent:0,sendBuffer:[],telemetry:(0,l.iH)(e.tracer,n,r,c,o),options:u,tracer:e.tracer,log:e.log,protocolVersion:s,codec:new A(u.codec)};e._handleStateExit(),t?._handleStateExit();let d=new j({conn:a,listeners:i,...h});return d.startMissingHeartbeatTimeout(),a.telemetry=(0,l._I)(d.tracer,a,d.telemetry),d.log?.info(`session ${d.id} transition from WaitingForHandshake to Connected`,{...d.loggingMetadata,tags:["state-transition"]}),d},BackingOffToNoConnection:(e,t)=>{let n=P(e);e._handleStateExit();let r=new T({listeners:t,...n});return r.log?.info(`session ${r.id} transition from BackingOff to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},ConnectingToNoConnection:(e,t)=>{let n=P(e);e.bestEffortClose(),e._handleStateExit();let r=new T({listeners:t,...n});return r.log?.info(`session ${r.id} transition from Connecting to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},HandshakingToNoConnection:(e,t)=>{let n=P(e);e.conn.close(),e._handleStateExit();let r=new T({listeners:t,...n});return r.log?.info(`session ${r.id} transition from Handshaking to NoConnection`,{...r.loggingMetadata,tags:["state-transition"]}),r},ConnectedToNoConnection:(e,t)=>{let n=R(e),r=Date.now()+e.options.sessionDisconnectGraceMs;e.conn.close(),e._handleStateExit();let o=new T({listeners:t,graceExpiryTime:r,...n});return o.log?.info(`session ${o.id} transition from Connected to NoConnection`,{...o.loggingMetadata,tags:["state-transition"]}),o}}},D=$.transition,H={entrypoint:$.entrypoints.NoConnection,transition:{NoConnectionToBackingOff:D.NoConnectionToBackingOff,BackingOffToConnecting:D.BackingOffToConnecting,ConnectingToHandshaking:D.ConnectingToHandshaking,HandshakingToConnected:D.HandshakingToConnected,BackingOffToNoConnection:D.BackingOffToNoConnection,ConnectingToNoConnection:D.ConnectingToNoConnection,HandshakingToNoConnection:D.HandshakingToNoConnection,ConnectedToNoConnection:D.ConnectedToNoConnection}},N=($.entrypoints.WaitingForHandshake,D.WaitingForHandshakeToConnected,D.ConnectedToNoConnection,class{status;clientId;eventDispatcher;options;log;tracer;sessions;constructor(e,t){this.options={...b,...t},this.eventDispatcher=new y,this.clientId=e,this.status="open",this.sessions=new Map,this.tracer=(0,l.EK)()}bindLogger(e,t){if("function"==typeof e){this.log=c(new a(e,t));return}this.log=c(e)}handleMsg(e){"open"===this.getStatus()&&this.eventDispatcher.dispatchEvent("message",e)}addEventListener(e,t){this.eventDispatcher.addEventListener(e,t)}removeEventListener(e,t){this.eventDispatcher.removeEventListener(e,t)}protocolError(e){this.eventDispatcher.dispatchEvent("protocolError",e)}close(){for(let e of(this.status="closed",Array.from(this.sessions.values())))this.deleteSession(e);this.eventDispatcher.dispatchEvent("transportStatus",{status:this.status}),this.eventDispatcher.removeAllListeners(),this.log?.info("manually closed transport",{clientId:this.clientId})}getStatus(){return this.status}createSession(e){let t=this.sessions.get(e.to);if(t){let n=`attempt to create session for ${e.to} but active session (${t.id}) already exists`;throw this.log?.error(n,{...e.loggingMetadata,tags:["invariant-violation"]}),Error(n)}this.sessions.set(e.to,e),this.eventDispatcher.dispatchEvent("sessionStatus",{status:"created",session:e}),this.eventDispatcher.dispatchEvent("sessionTransition",{state:e.state,id:e.id})}updateSession(e){let t=this.sessions.get(e.to);if(!t){let t=`attempt to transition session for ${e.to} but no active session exists`;throw this.log?.error(t,{...e.loggingMetadata,tags:["invariant-violation"]}),Error(t)}if(t.id!==e.id){let n=`attempt to transition active session for ${e.to} but active session (${t.id}) is different from handle (${e.id})`;throw this.log?.error(n,{...e.loggingMetadata,tags:["invariant-violation"]}),Error(n)}this.sessions.set(e.to,e),this.eventDispatcher.dispatchEvent("sessionTransition",{state:e.state,id:e.id})}deleteSession(e,t){if(e._isConsumed)return;let n=e.loggingMetadata;n.tags&&t?.unhealthy&&n.tags.push("unhealthy-session"),e.log?.info(`closing session ${e.id}`,n),this.eventDispatcher.dispatchEvent("sessionStatus",{status:"closing",session:e});let r=e.to;e.close(),this.sessions.delete(r),this.eventDispatcher.dispatchEvent("sessionStatus",{status:"closed",session:{id:e.id,to:r}})}onSessionGracePeriodElapsed(e){this.log?.info(`session to ${e.to} grace period elapsed, closing`,e.loggingMetadata),this.deleteSession(e)}onConnectingFailed(e){let t=$.transition.ConnectingToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}});return this.updateSession(t),t}onConnClosed(e){let t;return t="Handshaking"===e.state?$.transition.HandshakingToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}}):$.transition.ConnectedToNoConnection(e,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}}),this.updateSession(t),t}getSessionBoundSendFn(e,t){if("open"!==this.getStatus())throw Error("cannot get a bound send function on a closed transport");return n=>{let r=this.sessions.get(e);if(!r)throw Error(`session scope for ${t} has ended (close), can't send`);if(r.id!==t||r._isConsumed)throw Error(`session scope for ${t} has ended (transition), can't send`);let o=r.send(n);if(!o.ok)throw Error(o.reason);return o.value}}}),F=class{budgetConsumed;intervalHandle;options;constructor(e){this.options=e,this.budgetConsumed=0}getBackoffMs(){if(0===this.getBudgetConsumed())return 0;let e=Math.max(0,this.getBudgetConsumed()-1),t=Math.floor(Math.random()*this.options.maxJitterMs);return Math.min(this.options.baseIntervalMs*2**e,this.options.maxBackoffMs)+t}get totalBudgetRestoreTime(){return this.options.budgetRestoreIntervalMs*this.options.attemptBudgetCapacity}consumeBudget(){this.stopLeak(),this.budgetConsumed=this.getBudgetConsumed()+1}getBudgetConsumed(){return this.budgetConsumed}hasBudget(){return this.getBudgetConsumed()<this.options.attemptBudgetCapacity}startRestoringBudget(){this.intervalHandle||(this.intervalHandle=setInterval(()=>{let e=this.budgetConsumed;if(!e)return void this.stopLeak();let t=e-1;0!==t&&(this.budgetConsumed=t)},this.options.budgetRestoreIntervalMs))}stopLeak(){this.intervalHandle&&(clearInterval(this.intervalHandle),this.intervalHandle=void 0)}close(){this.stopLeak()}},q=class extends N{options;retryBudget;reconnectOnConnectionDrop=!0;handshakeExtensions;sessions;constructor(e,t){super(e,t),this.sessions=new Map,this.options={...w,...t},this.retryBudget=new F(this.options)}extendHandshake(e){this.handshakeExtensions=e}tryReconnecting(e){let t=this.sessions.get(e);!this.options.enableTransparentSessionReconnects&&t&&this.deleteSession(t),this.reconnectOnConnectionDrop&&"open"===this.getStatus()&&this.connect(e)}createUnconnectedSession(e){let t=H.entrypoint(e,this.clientId,{onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(t)}},this.options,l.mH,this.tracer,this.log);return this.createSession(t),t}onConnectingFailed(e){let t=super.onConnectingFailed(e);return this.tryReconnecting(t.to),t}onConnClosed(e){let t=super.onConnClosed(e);return this.tryReconnecting(t.to),t}onConnectionEstablished(e,t){let n=H.transition.ConnectingToHandshaking(e,t,{onConnectionErrored:e=>{let t=(0,l.xH)(e);this.log?.error(`connection to ${n.to} errored during handshake: ${t}`,n.loggingMetadata)},onConnectionClosed:()=>{this.log?.warn(`connection to ${n.to} closed during handshake`,n.loggingMetadata),this.onConnClosed(n)},onHandshake:e=>{this.onHandshakeResponse(n,e)},onInvalidHandshake:(t,r)=>{this.log?.error(`invalid handshake: ${t}`,n.loggingMetadata),this.deleteSession(e,{unhealthy:!0}),this.protocolError({type:g.HandshakeFailed,code:r,message:t})},onHandshakeTimeout:()=>{this.log?.error(`connection to ${n.to} timed out during handshake`,n.loggingMetadata),this.onConnClosed(n)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(n)}});return this.updateSession(n),this.sendHandshake(n),n}rejectHandshakeResponse(e,t,n){e.conn.telemetry?.span.setStatus({code:u.s.ERROR,message:t}),this.log?.warn(t,n),this.deleteSession(e,{unhealthy:!0})}onHandshakeResponse(e,t){if(!f.J(l.O9,t.payload))return void this.rejectHandshakeResponse(e,"received invalid handshake response",{...e.loggingMetadata,transportMessage:t,validationErrors:[...p.I(l.O9,t.payload)]});if(!t.payload.status.ok){let n=f.J(l.Bi,t.payload.status.code),r=`handshake failed: ${t.payload.status.reason}`,o=e.to;this.rejectHandshakeResponse(e,r,{...e.loggingMetadata,transportMessage:t}),n?this.tryReconnecting(o):this.protocolError({type:g.HandshakeFailed,code:t.payload.status.code,message:r});return}if(t.payload.status.sessionId!==e.id){let n=`session id mismatch: expected ${e.id}, got ${t.payload.status.sessionId}`;this.rejectHandshakeResponse(e,n,{...e.loggingMetadata,transportMessage:t});return}this.log?.info(`handshake from ${t.from} ok`,{...e.loggingMetadata,transportMessage:t});let n=H.transition.HandshakingToConnected(e,{onConnectionErrored:e=>{let t=(0,l.xH)(e);this.log?.warn(`connection to ${n.to} errored: ${t}`,n.loggingMetadata)},onConnectionClosed:()=>{this.log?.info(`connection to ${n.to} closed`,n.loggingMetadata),this.onConnClosed(n)},onMessage:e=>{this.handleMsg(e)},onInvalidMessage:e=>{this.log?.error(`invalid message: ${e}`,{...n.loggingMetadata,transportMessage:t}),this.protocolError({type:g.InvalidMessage,message:e}),this.deleteSession(n,{unhealthy:!0})},onMessageSendFailure:(e,t)=>{this.log?.error(`failed to send message: ${t}`,{...n.loggingMetadata,transportMessage:e}),this.protocolError({type:g.MessageSendFailure,message:t}),this.deleteSession(n,{unhealthy:!0})}});n.sendBufferedMessages().ok&&(this.updateSession(n),this.retryBudget.startRestoringBudget())}connect(e){if("open"!==this.getStatus())return void this.log?.info(`transport state is no longer open, cancelling attempt to connect to ${e}`);let t=this.sessions.get(e)??this.createUnconnectedSession(e);if("NoConnection"!==t.state)return void this.log?.debug(`session to ${e} has state ${t.state}, skipping connect attempt`,t.loggingMetadata);if(!this.retryBudget.hasBudget()){let n=this.retryBudget.getBudgetConsumed(),r=`tried to connect to ${e} but retry budget exceeded (more than ${n} attempts in the last ${this.retryBudget.totalBudgetRestoreTime}ms)`;this.log?.error(r,t.loggingMetadata),this.protocolError({type:g.RetriesExceeded,message:r});return}let n=this.retryBudget.getBackoffMs();this.log?.info(`attempting connection to ${e} (${n}ms backoff)`,t.loggingMetadata),this.retryBudget.consumeBudget();let r=H.transition.NoConnectionToBackingOff(t,n,{onBackoffFinished:()=>{this.onBackoffFinished(r)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(r)}});this.updateSession(r)}hardDisconnect(){for(let e of Array.from(this.sessions.values()))this.deleteSession(e)}onBackoffFinished(e){let t=e.tracer.startActiveSpan("connect",async t=>{try{return await this.createNewOutgoingConnection(e.to)}catch(n){let e=(0,l.xH)(n);throw t.recordException(e),t.setStatus({code:u.s.ERROR}),n}finally{t.end()}}),n=H.transition.BackingOffToConnecting(e,t,{onConnectionEstablished:e=>{this.log?.debug(`connection to ${n.to} established`,{...e.loggingMetadata,...n.loggingMetadata}),this.onConnectionEstablished(n,e)},onConnectionFailed:e=>{let t=(0,l.xH)(e);this.log?.error(`error connecting to ${n.to}: ${t}`,n.loggingMetadata),this.onConnectingFailed(n)},onConnectionTimeout:()=>{this.log?.error(`connection to ${n.to} timed out`,n.loggingMetadata),this.onConnectingFailed(n)},onSessionGracePeriodElapsed:()=>{this.onSessionGracePeriodElapsed(n)}});this.updateSession(n)}async sendHandshake(e){let t;if(this.handshakeExtensions&&(t=await this.handshakeExtensions.construct()),e._isConsumed)return;let n=(0,l.sE)({from:this.clientId,to:e.to,sessionId:e.id,expectedSessionState:{nextExpectedSeq:e.ack,nextSentSeq:e.nextSeq()},metadata:t,tracing:(0,l.oG)(e.telemetry.ctx)});this.log?.debug(`sending handshake request to ${e.to}`,{...e.loggingMetadata,transportMessage:n});let r=e.sendHandshake(n);r.ok||(this.log?.error(`failed to send handshake request: ${r.reason}`,{...e.loggingMetadata,transportMessage:n}),this.protocolError({type:g.MessageSendFailure,message:r.reason}),this.deleteSession(e,{unhealthy:!0}))}close(){this.retryBudget.close(),super.close()}},z=class{id;telemetry;constructor(){this.id=`conn-${(0,l.$C)()}`}get loggingMetadata(){let e={connId:this.id};if(this.telemetry?.span.isRecording()){let t=this.telemetry.span.spanContext();e.telemetry={traceId:t.traceId,spanId:t.spanId}}return e}dataListener;closeListener;errorListener;onData(e){this.dataListener?.(e)}onError(e){this.errorListener?.(e)}onClose(){this.closeListener?.(),this.telemetry?.span.end()}setDataListener(e){this.dataListener=e}removeDataListener(){this.dataListener=void 0}setCloseListener(e){this.closeListener=e}removeCloseListener(){this.closeListener=void 0}setErrorListener(e){this.errorListener=e}removeErrorListener(){this.errorListener=void 0}}},85261:(e,t,n)=>{var r=n(43397);e.exports=function(e){return r(this,e).has(e)}},86701:(e,t,n)=>{var r=n(45764);e.exports=function(e,t){var n=this.__data__;return this.size+=+!this.has(e),n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},88371:(e,t,n)=>{"use strict";e.exports=n(18319)},88999:(e,t,n)=>{var r=n(17500),o=n(65916),i=n(41705),s=n(49181),a=n(80493);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=o,c.prototype.get=i,c.prototype.has=s,c.prototype.set=a,e.exports=c},89338:(e,t,n)=>{var r=n(84503);function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=e.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},89367:(e,t,n)=>{var r=n(55304);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return -1}},89674:(e,t,n)=>{var r=n(66363),o=n(48842),i=n(59156);e.exports=function(e){return i(e)?r(e):o(e)}},89946:(e,t,n)=>{var r=n(17418),o=n(36317),i=n(93904);e.exports=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i},90067:(e,t,n)=>{"use strict";n.d(t,{a6:()=>m,vt:()=>G});var r=n(95570);let o={Remove:"remove",Replace:"replace",Add:"add"},i=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),s=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),a=Symbol.iterator,c={mutable:"mutable",immutable:"immutable"},l={};function u(e,t){return e instanceof Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function h(e,t){if(t in e){let n=Reflect.getPrototypeOf(e);for(;n;){let e=Reflect.getOwnPropertyDescriptor(n,t);if(e)return e;n=Reflect.getPrototypeOf(n)}}}function d(e){return Object.getPrototypeOf(e)===Set.prototype}function f(e){return Object.getPrototypeOf(e)===Map.prototype}function p(e){var t;return null!=(t=e.copy)?t:e.original}function g(e){return!!y(e)}function y(e){return"object"!=typeof e?null:null==e?void 0:e[i]}function v(e){var t;let n=y(e);return n?null!=(t=n.copy)?t:n.original:e}function m(e,t){let n;return!!e&&"object"==typeof e&&(Object.getPrototypeOf(e)===Object.prototype||Array.isArray(e)||e instanceof Map||e instanceof Set||!!(null==t?void 0:t.mark)&&((n=t.mark(e,c))===c.immutable||"function"==typeof n))}function b(e){return Array.isArray(e)?1:e instanceof Map?2:3*(e instanceof Set)}function w(e,t){return 2===b(e)?e.get(t):e[t]}function x(e,t,n){2===b(e)?e.set(t,n):e[t]=n}function E(e,t){let n=y(e);return(n?p(n):e)[t]}function _(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function C(e){if(e)for(;e.finalities.revoke.length>0;)e.finalities.revoke.pop()()}function S(e,t){return t?e:[""].concat(e).map(e=>{let t=`${e}`;return -1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}let k=Object.prototype.propertyIsEnumerable;function M(e,t){let n;if(Array.isArray(e))return Array.prototype.concat.call(e);if(e instanceof Set)return d(e)?Set.prototype.difference?Set.prototype.difference.call(e,new Set):new Set(e.values()):new(Object.getPrototypeOf(e)).constructor(e.values());if(e instanceof Map)return f(e)?new Map(e):new(Object.getPrototypeOf(e)).constructor(e);if((null==t?void 0:t.mark)&&void 0!==(n=t.mark(e,c))&&n!==c.mutable){if(n===c.immutable){let t=Object.create(Object.getPrototypeOf(e));return Reflect.ownKeys(e).forEach(n=>{let r=Reflect.getOwnPropertyDescriptor(e,n);if(r.enumerable&&r.configurable&&r.writable){t[n]=e[n];return}r.writable||(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(r={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[n]}),Reflect.defineProperty(t,n,r)}),t}if("function"==typeof n){if(t.enablePatches||t.enableAutoFreeze)throw Error("You can't use mark and patches or auto freeze together.");return n()}throw Error(`Unsupported mark result: ${n}`)}if("object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype){let t={};return Object.keys(e).forEach(n=>{t[n]=e[n]}),Object.getOwnPropertySymbols(e).forEach(n=>{k.call(e,n)&&(t[n]=e[n])}),t}else throw Error("Please check mark() to ensure that it is a stable marker draftable function.")}function O(e){e.copy||(e.copy=M(e.original,e.options))}function T(e){return y(e)?function e(t){if(!m(t))return v(t);if(Array.isArray(t))return t.map(e);if(t instanceof Map){let n=Array.from(t.entries()).map(([t,n])=>[t,e(n)]);return f(t)?new Map(n):new(Object.getPrototypeOf(t)).constructor(n)}if(t instanceof Set){let n=Array.from(t).map(e);return d(t)?new Set(n):new(Object.getPrototypeOf(t)).constructor(n)}let n=Object.create(Object.getPrototypeOf(t));for(let r in t)n[r]=e(t[r]);return n}(e):e}function U(e){var t;e.assignedMap=null!=(t=e.assignedMap)?t:new Map,!e.operated&&(e.operated=!0,e.parent&&U(e.parent))}function I(){throw Error("Cannot modify frozen object")}function j(e,t){let n=b(e);if(0===n)Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)});else if(1===n){let n=0;for(let r of e)t(n,r,e),n+=1}else e.forEach((n,r)=>t(r,n,e))}function B(e){3===e.type&&e.copy&&(e.copy.clear(),e.setMap.forEach(t=>{e.copy.add(v(t))}))}function L(e,t,n,r){if(e.operated&&e.assignedMap&&e.assignedMap.size>0&&!e.finalized){if(n&&r){let o=function e(t,n=[]){if(Object.hasOwnProperty.call(t,"key")){let e=t.parent.copy,r=y(w(e,t.key));if(null!==r&&(null==r?void 0:r.original)!==t.original)return null;let o=3===t.parent.type,i=o?Array.from(t.parent.setMap.keys()).indexOf(t.key):t.key;if(!(o&&e.size>i||u(e,i)))return null;n.push(i)}if(t.parent)return e(t.parent,n);n.reverse();try{var r=t.copy,o=n;for(let e=0;e<o.length-1;e+=1){let t=o[e];if("object"!=typeof(r=w(3===b(r)?Array.from(r):r,t)))throw Error(`Cannot resolve patch at '${o.join("/")}'.`)}}catch(e){return null}return n}(e);o&&t(e,o,n,r)}e.finalized=!0}}function A(e,t,n,r){let o=y(n);o&&(o.callbacks||(o.callbacks=[]),o.callbacks.push((i,s)=>{var a;let c=3===e.type?e.setMap:e.copy;if(_(w(c,t),n)){let n=o.original;o.copy&&(n=o.copy),B(e),L(e,r,i,s),e.options.enableAutoFreeze&&(e.options.updatedValues=null!=(a=e.options.updatedValues)?a:new WeakMap,e.options.updatedValues.set(n,o.original)),x(c,t,n)}}),e.options.enableAutoFreeze&&o.finalities!==e.finalities&&(e.options.enableAutoFreeze=!1)),m(n,e.options)&&e.finalities.draft.push(()=>{_(w(3===e.type?e.setMap:e.copy,t),n)&&function(e,t){let n=3===e.type?e.setMap:e.copy;e.finalities.revoke.length>1&&e.assignedMap.get(t)&&n&&function e(t,n,r){if(y(t)||!m(t,r)||n.has(t)||Object.isFrozen(t))return;let o=t instanceof Set,i=o?new Map:void 0;if(n.add(t),j(t,(s,a)=>{var c;if(!y(a))e(a,n,r);else{let e=y(a);O(e),x(o?i:t,s,(null==(c=e.assignedMap)?void 0:c.size)||e.operated?e.copy:e.original)}}),i){let e=Array.from(t);t.clear(),e.forEach(e=>{t.add(i.has(e)?i.get(e):e)})}}(w(n,t),e.finalities.handledSet,e.options)}(e,t)})}function R(e,t,n,r){let{pathAsArray:i=!0}=e.options.enablePatches;switch(e.type){case 0:case 2:return function({original:e,copy:t,assignedMap:n},r,i,s,a){n.forEach((n,c)=>{let l=w(e,c),h=T(w(t,c)),d=n?u(e,c)?o.Replace:o.Add:o.Remove;if(_(l,h)&&d===o.Replace)return;let f=S(r.concat(c),a);i.push(d===o.Remove?{op:d,path:f}:{op:d,path:f,value:h}),s.push(d===o.Add?{op:o.Remove,path:f}:d===o.Remove?{op:o.Add,path:f,value:l}:{op:o.Replace,path:f,value:l})})}(e,t,n,r,i);case 1:return function(e,t,n,r,i){let{original:s,assignedMap:a,options:c}=e,l=e.copy;l.length<s.length&&([s,l]=[l,s],[n,r]=[r,n]);for(let e=0;e<s.length;e+=1)if(a.get(e.toString())&&l[e]!==s[e]){let a=S(t.concat([e]),i);n.push({op:o.Replace,path:a,value:T(l[e])}),r.push({op:o.Replace,path:a,value:T(s[e])})}for(let e=s.length;e<l.length;e+=1){let r=S(t.concat([e]),i);n.push({op:o.Add,path:r,value:T(l[e])})}if(s.length<l.length){let{arrayLengthAssignment:e=!0}=c.enablePatches;if(e){let e=S(t.concat(["length"]),i);r.push({op:o.Replace,path:e,value:s.length})}else for(let e=l.length;s.length<e;e-=1){let n=S(t.concat([e-1]),i);r.push({op:o.Remove,path:n})}}}(e,t,n,r,i);case 3:return function({original:e,copy:t},n,r,i,s){let a=0;e.forEach(e=>{if(!t.has(e)){let t=S(n.concat([a]),s);r.push({op:o.Remove,path:t,value:e}),i.unshift({op:o.Add,path:t,value:e})}a+=1}),a=0,t.forEach(t=>{if(!e.has(t)){let e=S(n.concat([a]),s);r.push({op:o.Add,path:e,value:t}),i.unshift({op:o.Remove,path:e,value:t})}a+=1})}(e,t,n,r,i)}}let P=(e,t,n=!1)=>{if("object"==typeof e&&null!==e&&(!m(e,t)||n)&&1)throw Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},$={get size(){return p(y(this)).size},has(e){return p(y(this)).has(e)},set(e,t){let n=y(this),r=p(n);return r.has(e)&&_(r.get(e),t)||(O(n),U(n),n.assignedMap.set(e,!0),n.copy.set(e,t),A(n,e,t,R)),this},delete(e){if(!this.has(e))return!1;let t=y(this);return O(t),U(t),t.original.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.copy.delete(e),!0},clear(){let e=y(this);if(this.size){for(let[t]of(O(e),U(e),e.assignedMap=new Map,e.original))e.assignedMap.set(t,!1);e.copy.clear()}},forEach(e,t){p(y(this)).forEach((n,r)=>{e.call(t,this.get(r),r,this)})},get(e){var t,n;let r=y(this),o=p(r).get(e),i=(null==(n=(t=r.options).mark)?void 0:n.call(t,o,c))===c.mutable;if(r.options.strict&&P(o,r.options,i),i||r.finalized||!m(o,r.options)||o!==r.original.get(e))return o;let s=l.createDraft({original:o,parentDraft:r,key:e,finalities:r.finalities,options:r.options});return O(r),r.copy.set(e,s),s},keys(){return p(y(this)).keys()},values(){let e=this.keys();return{[a]:()=>this.values(),next:()=>{let t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}},entries(){let e=this.keys();return{[a]:()=>this.entries(),next:()=>{let t=e.next();if(t.done)return t;let n=this.get(t.value);return{done:!1,value:[t.value,n]}}}},[a](){return this.entries()}},D=Reflect.ownKeys($),H=(e,t,{isValuesIterator:n})=>()=>{var r,o;let i=t.next();if(i.done)return i;let s=i.value,a=e.setMap.get(s),u=y(a),h=(null==(o=(r=e.options).mark)?void 0:o.call(r,a,c))===c.mutable;if(e.options.strict&&P(s,e.options,h),!h&&!u&&m(s,e.options)&&!e.finalized&&e.original.has(s)){let t=l.createDraft({original:s,parentDraft:e,key:s,finalities:e.finalities,options:e.options});e.setMap.set(s,t),a=t}else u&&(a=u.proxy);return{done:!1,value:n?a:[a,a]}},N={get size(){return y(this).setMap.size},has(e){let t=y(this);if(t.setMap.has(e))return!0;O(t);let n=y(e);return!!(n&&t.setMap.has(n.original))},add(e){let t=y(this);return this.has(e)||(O(t),U(t),t.assignedMap.set(e,!0),t.setMap.set(e,e),A(t,e,e,R)),this},delete(e){if(!this.has(e))return!1;let t=y(this);O(t),U(t);let n=y(e);return n&&t.setMap.has(n.original)?(t.assignedMap.set(n.original,!1),t.setMap.delete(n.original)):(!n&&t.setMap.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.setMap.delete(e))},clear(){if(!this.size)return;let e=y(this);for(let t of(O(e),U(e),e.original))e.assignedMap.set(t,!1);e.setMap.clear()},values(){let e=y(this);O(e);let t=e.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:H(e,t,{isValuesIterator:!0})}},entries(){let e=y(this);O(e);let t=e.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:H(e,t,{isValuesIterator:!1})}},keys(){return this.values()},[a](){return this.values()},forEach(e,t){let n=this.values(),r=n.next();for(;!r.done;)e.call(t,r.value,r.value,this),r=n.next()}};Set.prototype.difference&&Object.assign(N,{intersection(e){return Set.prototype.intersection.call(new Set(this.values()),e)},union(e){return Set.prototype.union.call(new Set(this.values()),e)},difference(e){return Set.prototype.difference.call(new Set(this.values()),e)},symmetricDifference(e){return Set.prototype.symmetricDifference.call(new Set(this.values()),e)},isSubsetOf(e){return Set.prototype.isSubsetOf.call(new Set(this.values()),e)},isSupersetOf(e){return Set.prototype.isSupersetOf.call(new Set(this.values()),e)},isDisjointFrom(e){return Set.prototype.isDisjointFrom.call(new Set(this.values()),e)}});let F=Reflect.ownKeys(N),q=new WeakSet,z={get(e,t,n){var r,o;let s,a=null==(r=e.copy)?void 0:r[t];if(a&&q.has(a))return a;if(t===i)return e;if(e.options.mark){let r="size"===t&&(e.original instanceof Map||e.original instanceof Set)?Reflect.get(e.original,t):Reflect.get(e.original,t,n);if((s=e.options.mark(r,c))===c.mutable)return e.options.strict&&P(r,e.options,!0),r}let l=p(e);if(l instanceof Map&&D.includes(t)){if("size"===t)return Object.getOwnPropertyDescriptor($,"size").get.call(e.proxy);let n=$[t];if(n)return n.bind(e.proxy)}if(l instanceof Set&&F.includes(t)){if("size"===t)return Object.getOwnPropertyDescriptor(N,"size").get.call(e.proxy);let n=N[t];if(n)return n.bind(e.proxy)}if(!u(l,t)){let n=h(l,t);return n?"value"in n?n.value:null==(o=n.get)?void 0:o.call(e.proxy):void 0}let d=l[t];if(e.options.strict&&P(d,e.options),e.finalized||!m(d,e.options))return d;if(d===E(e.original,t)){if(O(e),e.copy[t]=Z({original:e.original[t],parentDraft:e,key:1===e.type?Number(t):t,finalities:e.finalities,options:e.options}),"function"==typeof s){let n=y(e.copy[t]);return O(n),U(n),n.copy}return e.copy[t]}return d},set(e,t,n){var r;let o;if(3===e.type||2===e.type)throw Error("Map/Set draft does not support any property assignment.");if(1===e.type&&"length"!==t&&!(Number.isInteger(o=Number(t))&&o>=0&&(0===t||0===o||String(o)===String(t))))throw Error("Only supports setting array indices and the 'length' property.");let i=h(p(e),t);if(null==i?void 0:i.set)return i.set.call(e.proxy,n),!0;let s=E(p(e),t),a=y(s);return a&&_(a.original,n)?(e.copy[t]=n,e.assignedMap=null!=(r=e.assignedMap)?r:new Map,e.assignedMap.set(t,!1),!0):!!(_(n,s)&&(void 0!==n||u(e.original,t)))||(O(e),U(e),u(e.original,t)&&_(n,e.original[t])?e.assignedMap.delete(t):e.assignedMap.set(t,!0),e.copy[t]=n,A(e,t,n,R),!0)},has:(e,t)=>t in p(e),ownKeys:e=>Reflect.ownKeys(p(e)),getOwnPropertyDescriptor(e,t){let n=p(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},getPrototypeOf:e=>Reflect.getPrototypeOf(e.original),setPrototypeOf(){throw Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(e,t){var n;return 1===e.type?z.set.call(this,e,t,void 0,e.proxy):(void 0!==E(e.original,t)||t in e.original?(O(e),U(e),e.assignedMap.set(t,!1)):(e.assignedMap=null!=(n=e.assignedMap)?n:new Map,e.assignedMap.delete(t)),e.copy&&delete e.copy[t],!0)}};function Z(e){let{original:t,parentDraft:n,key:r,finalities:o,options:i}=e,s=b(t),a={type:s,finalized:!1,parent:n,original:t,copy:null,proxy:null,finalities:o,options:i,setMap:3===s?new Map(t.entries()):void 0};(r||"key"in e)&&(a.key=r);let{proxy:c,revoke:l}=Proxy.revocable(1===s?Object.assign([],a):a,z);if(o.revoke.push(l),q.add(c),a.proxy=c,n)n.finalities.draft.push((e,t)=>{var o,i;let s=y(c),a=3===n.type?n.setMap:n.copy,l=w(a,r),u=y(l);if(u){let i=u.original;u.operated&&(i=v(l)),B(u),L(u,R,e,t),n.options.enableAutoFreeze&&(n.options.updatedValues=null!=(o=n.options.updatedValues)?o:new WeakMap,n.options.updatedValues.set(i,u.original)),x(a,r,i)}null==(i=s.callbacks)||i.forEach(n=>{n(e,t)})});else{let e=y(c);e.finalities.draft.push((t,n)=>{B(e),L(e,R,t,n)})}return c}function V(e){let{rootDraft:t,value:n,useRawReturn:o=!1,isRoot:i=!0}=e;j(n,(n,r,o)=>{let i=y(r);if(i&&t&&i.finalities===t.finalities){e.isContainDraft=!0;let t=i.original;if(o instanceof Set){let e=Array.from(o);o.clear(),e.forEach(e=>o.add(n===e?t:e))}else x(o,n,t)}else"object"==typeof r&&null!==r&&(e.value=r,e.isRoot=!1,V(e))}),i&&(e.isContainDraft||r.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),o&&r.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function W(e){if(!y(e))throw Error(`current() is only used for Draft, parameter: ${e}`);return function e(t){var n;let r,o=y(t);if(!m(t,null==o?void 0:o.options))return t;let i=b(t);if(o&&!o.operated)return o.original;function s(){r=2===i?f(t)?new Map(t):new(Object.getPrototypeOf(t)).constructor(t):3===i?Array.from(o.setMap.values()):M(t,null==o?void 0:o.options)}if(o){o.finalized=!0;try{s()}finally{o.finalized=!1}}else r=t;if(j(r,(n,i)=>{if(o&&_(w(o.original,n),i))return;let a=e(i);a!==i&&(r===t&&s(),x(r,n,a))}),3===i){let e=null!=(n=null==o?void 0:o.original)?n:r;return d(e)?new Set(r):new(Object.getPrototypeOf(e)).constructor(r)}return r}(e)}l.createDraft=Z;let G=(e=>{if(void 0!==e&&"[object Object]"!==Object.prototype.toString.call(e))throw Error(`Invalid options: ${String(e)}, 'options' should be an object.`);return function t(n,r,i){var a,l,u;let h;if("function"==typeof n&&"function"!=typeof r)return function(e,...o){return t(e,e=>n.call(this,e,...o),r)};let d=i;if("function"!=typeof r&&(d=r),void 0!==d&&"[object Object]"!==Object.prototype.toString.call(d))throw Error(`Invalid options: ${d}, 'options' should be an object.`);d=Object.assign(Object.assign({},e),d);let f=y(n)?W(n):n,p=Array.isArray(d.mark)?(e,t)=>{for(let n of d.mark){if("function"!=typeof n)throw Error(`Invalid mark: ${n}, 'mark' should be a function.`);let r=n(e,t);if(r)return r}}:d.mark,g=null!=(a=d.enablePatches)&&a,v=null!=(l=d.strict)&&l,w={enableAutoFreeze:null!=(u=d.enableAutoFreeze)&&u,mark:p,strict:v,enablePatches:g};if(!m(f,w)&&"object"==typeof f&&null!==f)throw Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");let[x,E]=function(e,t){var n;let r,i,s={draft:[],revoke:[],handledSet:new WeakSet};t.enablePatches&&(r=[],i=[]);let a=(null==(n=t.mark)?void 0:n.call(t,e,c))!==c.mutable&&m(e,t)?Z({original:e,parentDraft:null,finalities:s,options:t}):e;return[a,(e=[])=>{let[n,s,c]=function(e,t,n,r,i){var s;let a=y(e),c=null!=(s=null==a?void 0:a.original)?s:e,l=!!t.length;if(null==a?void 0:a.operated)for(;a.finalities.draft.length>0;)a.finalities.draft.pop()(n,r);let u=l?t[0]:a?a.operated?a.copy:a.original:e;return a&&C(a),i&&function e(t,n,r,o,i){{r=null!=r?r:new WeakMap,o=null!=o?o:[],i=null!=i?i:[];let e=r.has(t)?r.get(t):t;if(o.length>0){let t=o.indexOf(e);if(e&&"object"==typeof e&&-1!==t){if(o[0]===e)throw Error("Forbids circular reference");throw Error(`Forbids circular reference: ~/${i.slice(0,t).map((e,t)=>{if("symbol"==typeof e)return`[${e.toString()}]`;let n=o[t];return"object"==typeof e&&(n instanceof Map||n instanceof Set)?Array.from(n.keys()).indexOf(e):e}).join("/")}`)}o.push(e),i.push(n)}else o.push(e)}if(Object.isFrozen(t)||y(t)){o.pop(),i.pop();return}switch(b(t)){case 2:for(let[n,s]of t)e(n,n,r,o,i),e(s,n,r,o,i);t.set=t.clear=t.delete=I;break;case 3:for(let n of t)e(n,n,r,o,i);t.add=t.clear=t.delete=I;break;case 1:Object.freeze(t);let s=0;for(let n of t)e(n,s,r,o,i),s+=1;break;default:Object.freeze(t),Object.keys(t).forEach(n=>{e(t[n],n,r,o,i)})}o.pop(),i.pop()}(u,u,null==a?void 0:a.options.updatedValues),[u,n&&l?[{op:o.Replace,path:[],value:t[0]}]:n,r&&l?[{op:o.Replace,path:[],value:c}]:r]}(a,e,r,i,t.enableAutoFreeze);return t.enablePatches?[n,s,c]:n}]}(f,w);if("function"!=typeof r){if(!m(f,w))throw Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[x,E]}try{h=r(x)}catch(e){throw C(y(x)),e}let S=e=>{let t=y(x);if(!y(e)){if(void 0!==e&&!_(e,x)&&(null==t?void 0:t.operated))throw Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");let n=null==e?void 0:e[s];if(n){let r=n[0];return w.strict&&"object"==typeof e&&null!==e&&V({rootDraft:t,value:e,useRawReturn:!0}),E([r])}if(void 0!==e)return"object"==typeof e&&null!==e&&V({rootDraft:t,value:e}),E([e])}if(e===x||void 0===e)return E([]);let n=y(e);if(w===n.options){if(n.operated)throw Error("Cannot return a modified child draft.");return E([W(e)])}return E([e])};return h instanceof Promise?h.then(S,e=>{throw C(y(x)),e}):S(h)}})();Object.prototype.constructor.toString()},90164:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},92277:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var o=t(),i=16-(o-r);if(r=o,i>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},92642:(e,t,n)=>{var r=n(49657);e.exports=function(e){return r(e)?void 0:e}},93904:e=>{e.exports=function(e){return e}},94598:(e,t,n)=>{"use strict";n.d(t,{l:()=>c});var r=n(17051),o=n(21186),i=n(58059),s=n(22102),a=function(){function e(e){var t,n,r,i,s,a,c,l;this.extensionCodec=null!=(t=null==e?void 0:e.extensionCodec)?t:o.g.defaultCodec,this.context=null==e?void 0:e.context,this.useBigInt64=null!=(n=null==e?void 0:e.useBigInt64)&&n,this.maxDepth=null!=(r=null==e?void 0:e.maxDepth)?r:100,this.initialBufferSize=null!=(i=null==e?void 0:e.initialBufferSize)?i:2048,this.sortKeys=null!=(s=null==e?void 0:e.sortKeys)&&s,this.forceFloat32=null!=(a=null==e?void 0:e.forceFloat32)&&a,this.ignoreUndefined=null!=(c=null==e?void 0:e.ignoreUndefined)&&c,this.forceIntegerToFloat=null!=(l=null==e?void 0:e.forceIntegerToFloat)&&l,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return e.prototype.reinitializeState=function(){this.pos=0},e.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},e.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},e.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw Error("Too deep objects in depth ".concat(t));null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.useBigInt64&&"bigint"==typeof e?this.encodeBigInt64(e):this.encodeObject(e,t)},e.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)},e.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n},e.prototype.encodeNil=function(){this.writeU8(192)},e.prototype.encodeBoolean=function(e){!1===e?this.writeU8(194):this.writeU8(195)},e.prototype.encodeNumber=function(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<0x100000000?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-0x80000000?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)},e.prototype.encodeNumberAsFloat=function(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},e.prototype.encodeBigInt64=function(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))},e.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<0x100000000)this.writeU8(219),this.writeU32(e);else throw Error("Too long string: ".concat(e," bytes in UTF-8"))},e.prototype.encodeString=function(e){var t=(0,r.dS)(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),(0,r.yi)(e,this.bytes,this.pos),this.pos+=t},e.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if("object"==typeof e)this.encodeMap(e,t);else throw Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)))},e.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<0x100000000)this.writeU8(198),this.writeU32(t);else throw Error("Too large binary: ".concat(t));var n=(0,s.C)(e);this.writeU8a(n)},e.prototype.encodeArray=function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<0x100000000)this.writeU8(221),this.writeU32(n);else throw Error("Too large array: ".concat(n));for(var r=0;r<e.length;r++){var o=e[r];this.doEncode(o,t+1)}},e.prototype.countWithoutUndefined=function(e,t){for(var n=0,r=0;r<t.length;r++)void 0!==e[t[r]]&&n++;return n},e.prototype.encodeMap=function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else if(r<0x100000000)this.writeU8(223),this.writeU32(r);else throw Error("Too large map object: ".concat(r));for(var o=0;o<n.length;o++){var i=n[o],s=e[i];this.ignoreUndefined&&void 0===s||(this.encodeString(i),this.doEncode(s,t+1))}},e.prototype.encodeExtension=function(e){var t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<0x100000000)this.writeU8(201),this.writeU32(t);else throw Error("Too large extension object: ".concat(t));this.writeI8(e.type),this.writeU8a(e.data)},e.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},e.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},e.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},e.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},e.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},e.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},e.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},e.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},e.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},e.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),(0,i.X3)(this.view,this.pos,e),this.pos+=8},e.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),(0,i._j)(this.view,this.pos,e),this.pos+=8},e.prototype.writeBigUint64=function(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8},e.prototype.writeBigInt64=function(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8},e}();function c(e,t){return new a(t).encodeSharedRef(e)}},94995:(e,t,n)=>{var r=n(96998),o=n(25671),i=n(8360),s=n(95881),a=n(11499),c=n(77882),l=n(75895),u="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",g=l(r),y=l(o),v=l(i),m=l(s),b=l(a),w=c;(r&&w(new r(new ArrayBuffer(1)))!=p||o&&w(new o)!=u||i&&w(i.resolve())!=h||s&&w(new s)!=d||a&&w(new a)!=f)&&(w=function(e){var t=c(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case g:return p;case y:return u;case v:return h;case m:return d;case b:return f}return t}),e.exports=w},95677:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},95782:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},95881:(e,t,n)=>{e.exports=n(11650)(n(28811),"Set")},96230:(e,t,n)=>{var r=n(77882),o=n(54557);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},96979:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},96998:(e,t,n)=>{e.exports=n(11650)(n(28811),"DataView")},97295:(e,t,n)=>{var r=n(47225),o=n(55922);e.exports=function(e,t){return r(e,o(e),t)}},98197:(e,t,n)=>{var r=n(90164),o=n(867);e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},98757:(e,t,n)=>{var r=n(89946);e.exports=n(92277)(r)},98958:(e,t,n)=>{var r=n(88999);e.exports=function(){this.__data__=new r,this.size=0}},99211:(e,t,n)=>{var r=n(88999),o=n(25671),i=n(84503);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!o||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(s)}return n.set(e,t),this.size=n.size,this}}}]);
//# sourceMappingURL=9119-0e66f439bbf3a6d9.js.map