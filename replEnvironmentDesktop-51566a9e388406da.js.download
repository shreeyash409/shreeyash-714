!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="427b3a93-dc48-4453-a674-964c91fc4bde",e._sentryDebugIdIdentifier="sentry-dbid-427b3a93-dc48-4453-a674-964c91fc4bde")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"b5bd925e"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2542,5506],{2248:(e,n,t)=>{"use strict";t.d(n,{P_:()=>p,kh:()=>s});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  fragment DeleteReplDialogRepl on Repl {\n    id\n    title\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation DeleteReplDialogReplDelete($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return c=function(){return e},e}var u={},s=(0,o.J1)(l()),d=(0,o.J1)(c());function p(e){var n=(0,r._)({},u,e);return a.n(d,n)}},5657:e=>{e.exports={container:"FigmaImportEntry_container__0gcKx",replitIcon:"FigmaImportEntry_replitIcon__Vmv79",figmaIcon:"FigmaImportEntry_figmaIcon__cj71Z",button:"FigmaImportEntry_button__tGaaO"}},8345:(e,n,t)=>{"use strict";t.d(n,{Um:()=>f,y3:()=>g,zT:()=>p});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(97206);function c(){var e=(0,i._)(["\n  fragment OrgGroupsOrg on Org {\n    ...OrgMetadata\n    authorizations {\n      createOrgGroup {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment OrgGroupsOrgGroup on OrgGroup {\n    id\n    slug\n    type\n    name\n    color\n    isMember\n    memberCount\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,i._)(["\n  query OrgGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}var d={},p=(0,o.J1)(c(),l.wW),f=(0,o.J1)(u()),h=(0,o.J1)(s(),f);function g(e){var n=(0,r._)({},d,e);return a.I(h,n)}},11748:(e,n,t)=>{"use strict";t.d(n,{L:()=>P});var r=t(12694),i=t(81073),o=t(21462),a=t(17844),l=t(12584),c=t(41114),u=t(86997);function s(){var e=(0,l._)(["\n  fragment ReplDesktopAvatarMenuCurrentUser on CurrentUser {\n    id\n    url\n    username\n    fullName\n    image\n    userSubscriptionType\n  }\n"]);return s=function(){return e},e}function d(){var e=(0,l._)(["\n  query ReplDesktopAvatarMenu {\n    currentUser {\n      id\n      ...ReplDesktopAvatarMenuCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,c.J1)(s()),h=(0,c.J1)(d(),f),g=t(66890),m=t(16362),v=t(99528),y=t(36937),w=t(18509),b=t(85051),x=t(27023),Y=t(22422),S=t(1132),A=t(85144),_=t(37252),k=t(41358),C=t(4616),I=t(85389),D=t(27789),E=t(78103),R=t(12813),U=t(51055),F=(0,w.x)({wrapper:[x.wp.noDragRegion],button:[b.b.nofill,x.wp.p(4),x.wp.viewStyle,x.wp.reset.button,x.wp.rowWithGap(2),x.wp.align.center,x.wp.color.foregroundDefault,x.wp.cursor.pointer,x.wp.borderRadius(8),{transition:"box-shadow 120ms ease-out",":hover svg":{fill:y.LU.foregroundDefault}}],surface:[x.wp.borderRadius(8),x.wp.minWidth(80),{"& > ul > li:first-of-type":{borderRadius:"10px 10px 0 0"}}],username:[x.wp.ml(8)],menuItem:[],accountModal:[x.wp.overflow("auto"),x.wp.height("100%")],appVersionWrapper:[x.wp.center,x.wp.border({color:y.LU.outlineDimmer,width:1,style:"solid",direction:"top"})]});function P(e){var n,t=e.showName,l=(0,r._)((0,o.useState)(!1),2),c=l[0],s=l[1],d=(0,r._)((0,o.useState)(!1),2),f=d[0],w=d[1],b=(n=(0,a._)({},p,void 0),u.I(h,n)).data,x=null==b?void 0:b.currentUser;if(!x)return null;var P=[{label:"Home",icon:(0,i.Y)(R.A,{}),onAction:function(){v.M.openExternalUrl("/"),s(!1)}},{label:"Account",icon:(0,i.Y)(U.A,{}),onAction:function(){w(function(e){return!e}),s(!1)}},{label:"Log out",icon:(0,i.Y)(E.A,{}),onAction:function(){v.M.logout()}}];return(0,i.FD)(I.S,{css:F.wrapper,children:[(0,i.FD)(_.Wv,{isOpen:c,onOpenChange:s,placement:"bottom start",label:"Account options",children:[(0,i.FD)("button",{onClick:function(){s(function(e){return!e})},css:F.button,"data-cy":"desktop-app-avatar-menu",children:[(0,i.Y)(Y.e,{size:24,src:(null==x?void 0:x.image)||null,username:(null==x?void 0:x.username)||"",fullName:(null==x?void 0:x.fullName)||"",showCoreBadge:x.userSubscriptionType===g.Ohf.HackerPro}),t?(0,i.FD)(I.S,{css:F.username,className:"username",children:["@",null==x?void 0:x.username]}):null,(0,i.Y)(D.A,{color:y.LU.foregroundDimmest,size:12})]}),(0,i.FD)(k.ui,{elevated:!0,css:F.surface,background:"higher",children:[(0,i.Y)(S.W1,{label:"Account options",onAction:function(e){var n=P[parseInt(e,10)];n&&n.onAction()},children:P.map(function(e,n){return(0,i.Y)(S.q7,{"aria-label":e.label,children:(0,i.FD)(I.S,{row:!0,gap:8,align:"center",children:[e.icon,(0,i.Y)(C.EY,{children:e.label})]})},n)})}),(0,i.Y)(I.S,{css:F.appVersionWrapper,py:4,px:8,children:(0,i.Y)(C.EY,{color:"dimmer",variant:"small",dataCy:"desktop-app-version",children:"Version ".concat(v.M.getVersion())})})]})]}),(0,i.Y)(A.a,{isOpen:f,onRequestClose:function(){return w(!1)},maxWidth:872,elevation:"root",skipTransition:!0,css:F.accountModal,children:(0,i.Y)(m.A,{})})]})}},14054:e=>{e.exports={dividerContainer:"PlanningTimeline_dividerContainer__1Fxqg",divider:"PlanningTimeline_divider__J7gIK",pill:"PlanningTimeline_pill__E8NBl",pillActive:"PlanningTimeline_pillActive__f75bR",text:"PlanningTimeline_text__mGnOC",stepInteractive:"PlanningTimeline_stepInteractive__8yHKb"}},14245:(e,n,t)=>{"use strict";t.d(n,{Z:()=>i,_:()=>o});var r=t(17089),i=function(e){(0,r.u4)(r.AZ.COURSE_ACTION,e)},o=function(e){(0,r.u4)(r.AZ.LESSON_ACTION,e)}},15506:(e,n,t)=>{"use strict";t.d(n,{cr:()=>u,tU:()=>c,ZA:()=>C});var r=t(95570),i="object"==typeof localStorage&&(localStorage.getItem("debug")?.includes("next-usequerystate")||localStorage.getItem("debug")?.includes("nuqs"))||!1;function o(e,...n){if(!i)return;let t=function(e,...n){return e.replace(/%[sfdO]/g,e=>{let t=n.shift();return"%O"===e&&t?JSON.stringify(t).replace(/"([^"]+)":/g,"$1:"):String(t)})}(e,...n);performance.mark(t),r.log(e,...n)}function a(e,n,t){try{return e(n)}catch(e){return!function(e,...n){i&&r.warn(e,...n)}("[nuqs] Error while parsing value `%s`: %O"+(t?" (for key `%s`)":""),n,e,t),null}}function l(e){function n(n){if(void 0===n)return null;let t="";if(Array.isArray(n)){if(void 0===n[0])return null;t=n[0]}return"string"==typeof n&&(t=n),a(e.parse,t)}return{...e,parseServerSide:n,withDefault(e){return{...this,defaultValue:e,parseServerSide:t=>n(t)??e}},withOptions(e){return{...this,...e}}}}var c=l({parse:e=>e,serialize:e=>`${e}`});l({parse:e=>{let n=parseInt(e);return Number.isNaN(n)?null:n},serialize:e=>Math.round(e).toFixed()}),l({parse:e=>{let n=parseInt(e,16);return Number.isNaN(n)?null:n},serialize:e=>{let n=Math.round(e).toString(16);return n.padStart(n.length+n.length%2,"0")}}),l({parse:e=>{let n=parseFloat(e);return Number.isNaN(n)?null:n},serialize:e=>e.toString()});var u=l({parse:e=>"true"===e,serialize:e=>e?"true":"false"}),s=(l({parse:e=>{let n=parseInt(e);return Number.isNaN(n)?null:new Date(n)},serialize:e=>e.valueOf().toString()}),l({parse:e=>{let n=new Date(e);return Number.isNaN(n.valueOf())?null:n},serialize:e=>e.toISOString()}),{409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using %s, but %s was about to load on top.",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for keys %s. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"});function d(e){return`[nuqs] ${s[e]}
  See https://err.47ng.com/NUQS-${e}`}var p=t(87742),f=t(21462),h=t(95570),g=function(){if("undefined"==typeof window||!window.GestureEvent)return 50;try{let e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}(),m=new Map,v={history:"replace",scroll:!1,shallow:!0,throttleMs:g},y=new Set,w=0,b=null;function x(e){return m.get(e)??null}function Y(e,n){let t=e.split("#")[0]??"";return t+function(e){if(0===e.size)return"";let n=[];for(let[t,r]of e.entries())n.push(`${t}=${r.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E")}`);return"?"+n.join("&")}(n)+location.hash}var S=Symbol("__nuqs__SYNC__"),A="__nuqs__NO_SYNC__",_=Symbol("__nuqs__NOTIFY__"),k=function(e){return{all:e=e||new Map,on:function(n,t){var r=e.get(n);r?r.push(t):e.set(n,[t])},off:function(n,t){var r=e.get(n);r&&(t?r.splice(r.indexOf(t)>>>0,1):e.set(n,[]))},emit:function(n,t){var r=e.get(n);r&&r.slice().map(function(e){e(t)}),(r=e.get("*"))&&r.slice().map(function(e){e(n,t)})}}}();function C(e,{history:n="replace",shallow:t=!0,scroll:r=!1,throttleMs:i=g,parse:l=e=>e,serialize:c=String,defaultValue:u,startTransition:s}={history:"replace",scroll:!1,shallow:!0,throttleMs:g,parse:e=>e,serialize:String,defaultValue:void 0}){let _=(0,p.useRouter)(),I=(0,p.useSearchParams)(),[D,E]=f.useState(()=>{let n=x(e),t="object"!=typeof location?I?.get(e)??null:new URLSearchParams(location.search).get(e)??null,r=n??t;return null===r?null:a(l,r,e)}),R=f.useRef(D);o("[nuqs `%s`] render - state: %O, iSP: %s",e,D,I?.get(e)??null),f.useEffect(()=>{if("14.0.3"!==window.next.version)return;let n=I.get(e)??null,t=null===n?null:a(l,n,e);o("[nuqs `%s`] syncFromUseSearchParams %O",e,t),R.current=t,E(t)},[I?.get(e),e]),f.useInsertionEffect(()=>{function n(n){o("[nuqs `%s`] updateInternalState %O",e,n),R.current=n,E(n)}function t(t){let r=t.get(e)??null,i=null===r?null:a(l,r,e);o("[nuqs `%s`] syncFromURL %O",e,i),n(i)}return o("[nuqs `%s`] subscribing to sync",e),k.on(S,t),k.on(e,n),()=>{o("[nuqs `%s`] unsubscribing from sync",e),k.off(S,t),k.off(e,n)}},[e]);let U=f.useCallback((a,l={})=>{var p;let f="function"==typeof a?a(R.current??u??null):a;return k.emit(e,f),function(e,n,t,r){let i=null===n?null:t(n);o("[nuqs queue] Enqueueing %s=%s %O",e,i,r),m.set(e,i),"push"===r.history&&(v.history="push"),r.scroll&&(v.scroll=!0),!1===r.shallow&&(v.shallow=!1),r.startTransition&&(y.add(r.startTransition),v.shallow=!1),v.throttleMs=Math.max(r.throttleMs??g,Number.isFinite(v.throttleMs)?v.throttleMs:0)}(e,f,c,{history:l.history??n,shallow:l.shallow??t,scroll:l.scroll??r,throttleMs:l.throttleMs??i,startTransition:l.startTransition??s}),p=_,null===b&&(b=new Promise((e,n)=>{if(!Number.isFinite(v.throttleMs)){o("[nuqs queue] Skipping flush due to throttleMs=Infinity"),e(new URLSearchParams(location.search)),setTimeout(()=>{b=null},0);return}function t(){w=performance.now();let[t,r]=function(e){let n=new URLSearchParams(location.search);if(0===m.size)return[n,null];let t=Array.from(m.entries()),r={...v},i=Array.from(y);for(let[e,i]of(m.clear(),y.clear(),v.history="replace",v.scroll=!1,v.shallow=!0,v.throttleMs=g,o("[nuqs queue] Flushing queue %O with options %O",t,r),t))null===i?n.delete(e):n.set(e,i);try{let t=window.next?.router;if("string"==typeof t?.state?.asPath){let e=Y(t.state.asPath.split("?")[0]??"",n);o("[nuqs queue (pages)] Updating url: %s",e),("push"===r.history?t.push:t.replace).call(t,e,e,{scroll:r.scroll,shallow:r.shallow})}else{let t=Y(location.origin+location.pathname,n);o("[nuqs queue (app)] Updating url: %s",t),("push"===r.history?history.pushState:history.replaceState).call(history,history.state,A,t),r.scroll&&window.scrollTo(0,0),r.shallow||function(e,n){let t=r=>{if(r===e.length)return n();let i=e[r];if(!i)throw Error("Invalid transition function");i(()=>t(r+1))};t(0)}(i,()=>{e.replace(t,{scroll:!1,shallow:!1})})}return[n,null]}catch(e){return h.error(d(429),t.map(([e])=>e).join(),e),[n,e]}}(p);null===r?e(t):n(t),b=null}setTimeout(function(){let e=performance.now()-w,n=v.throttleMs,r=Math.max(0,Math.min(n,n-e));o("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",r,n),0===r?t():setTimeout(t,r)},0)})),b},[e,n,t,r,i,s]);return[D??u??null,U]}"object"==typeof history&&function(){let e="1.15.3",n=history.__nuqs_patched;if(n){n!==e&&h.error(d(409),n,e);return}for(let n of(o("[nuqs] Patching history with %s",e),["pushState","replaceState"])){let e=history[n].bind(history);history[n]=function(t,r,i){if(!i)return o("[nuqs] history.%s(null) (%s) %O",n,r,t),e(t,r,i);let a=r===A?"internal":"external",l=new URL(i,location.origin).searchParams;if(o("[nuqs] history.%s(%s) (%s) %O",n,i,a,t),"external"===a){for(let[e,n]of l.entries()){let t=x(e);null!==t&&t!==n&&(o("[nuqs] Overwrite detected for key: %s, Server: %s, queue: %s",e,n,t),l.set(e,t))}setTimeout(()=>{o("[nuqs] External history.%s call: triggering sync with %s",n,l),k.emit(S,l),k.emit(_,{search:l,source:a})},0)}else setTimeout(()=>{k.emit(_,{search:l,source:a})},0);return e(t,r===A?"":r,i)}}Object.defineProperty(history,"__nuqs_patched",{value:e,writable:!1,enumerable:!1,configurable:!1})}()},15603:(e,n,t)=>{"use strict";t.d(n,{Sc:()=>p,pV:()=>s});var r=t(17844),i=t(12584),o=t(41114),a=t(50175);function l(){var e=(0,i._)(["\n  fragment EditReplFormRepl on Repl {\n    id\n    title\n    description\n    imageUrl\n    iconUrl\n    templateInfo {\n      iconUrl\n      imageUrl\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation EditReplFormEdit($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditReplFormRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.J1)(l()),d=(0,o.J1)(c(),s);function p(e){var n=(0,r._)({},u,e);return a.n(d,n)}},16057:(e,n,t)=>{"use strict";t.d(n,{g:()=>y});var r=t(12694),i=t(81073),o=t(21462),a=t(22345),l=t(80457),c=t(65097),u=t(17982),s=t(7868),d=t(36937),p=t(18509),f=t(85051),h=t(27023),g=t(41358),m=t(4616),v=t(85389),y=function(e){var n=e.isIndividualOwner,t=e.showUpgradeForm,p=(0,r._)((0,o.useState)({type:"closed"}),2),f=p[0],h=p[1],y=(0,l.g)();if(!n||"loading"===y.type||"error"===y.type)return null;var b=y.replCount,x=y.isStarterUser,Y=y.shouldEnforceUsersOverLimit;if(!x||!Y)return null;var S=a.q-b,A=Array.from({length:a.q}).map(function(e,n){return(0,i.Y)(v.S,{css:w.measureBar,style:{backgroundColor:n<b?(0,u.p)({replCount:b}):d.LU.backgroundDefault,border:n+1>b?"1px solid ".concat(d.LU.outlineDefault):"1px solid ".concat((0,u.A)({replCount:b}))}},n)});return(0,i.FD)(i.FK,{children:[(0,i.Y)(v.S,{tag:"button",css:w.bannerWrapper,onClick:function(e){e.preventDefault(),t?t():h({type:"open",onUpgradeConfirm:y.refetch})},children:(0,i.FD)(g.ui,{css:w.container,p:8,children:[(0,i.Y)(m.EY,{variant:"small",color:"dimmest",height:"singleLine",css:w.text,children:b===a.q-1?"This is your last free app":b<a.q?"You have ".concat(S," free ").concat((0,s.A)("app",S)," left"):"You're at the limit of free Apps"}),(0,i.Y)(v.S,{css:w.measures,row:!0,gap:4,children:A})]})}),(0,i.Y)(c.k,{setState:h,state:f})]})},w=(0,p.x)({bannerWrapper:[h.wp.reset.button,h.wp.textAlign.left,h.wp.borderRadius()],container:[h.wp.cursor.pointer,h.wp.borderRadius(),f.b.filled,h.wp.rowWithGap(24),h.wp.align.center],text:[h.wp.fontWeight.medium],measures:[h.wp.cursor.pointer,h.wp.flex.growAndShrink(1),h.wp.minWidth(42),h.wp.align.center],measureBar:[h.wp.height(10),h.wp.borderRadius(2),h.wp.overflow("visible"),h.wp.backgroundColor.backgroundDefault,h.wp.flex.growAndShrink(1)]})},16358:(e,n,t)=>{"use strict";t.d(n,{X:()=>s});var r=t(12584),i=t(41114),o=t(2248),a=t(15603);function l(){var e=(0,r._)(["\n  fragment ComponentsReplActionsFeaturedRepl on Repl {\n    id\n    isPrivate\n    isFeaturedRepl\n    publicForkCount\n    timeUpdated\n    org {\n      id\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,r._)(["\n  fragment ComponentsReplActions on Repl {\n    id\n    url\n    user {\n      id\n      username\n    }\n    ...DeleteReplDialogRepl\n    ...EditReplFormRepl\n    ...ComponentsReplActionsFeaturedRepl\n    owner {\n      __typename\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    authorizations {\n      deleteRepl {\n        isAuthorized\n      }\n      fork {\n        isAuthorized\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return c=function(){return e},e}var u=(0,i.J1)(l()),s=(0,i.J1)(c(),o.kh,a.pV,u)},18854:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.FD)(a.Ay,(0,i._)((0,r._)({},e),{children:[(0,o.Y)("path",{fillRule:"evenodd",d:"M12 7.75a4.25 4.25 0 1 0 0 8.5 4.25 4.25 0 0 0 0-8.5ZM6.25 12a5.75 5.75 0 1 1 11.5 0 5.75 5.75 0 0 1-11.5 0Z",clipRule:"evenodd"}),(0,o.Y)("path",{d:"M1 11.25a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5H1ZM21 11.25a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5h-2ZM19.248 20.309a.75.75 0 0 0 1.06-1.061l-1.414-1.414a.75.75 0 0 0-1.06 1.06l1.414 1.415ZM5.106 6.166a.75.75 0 0 0 1.06-1.06L4.752 3.692a.75.75 0 1 0-1.06 1.06l1.414 1.414ZM3.692 19.248a.75.75 0 0 0 1.06 1.06l1.414-1.414a.75.75 0 0 0-1.06-1.06l-1.414 1.414ZM17.834 5.106a.75.75 0 1 0 1.06 1.06l1.415-1.414a.75.75 0 1 0-1.061-1.06l-1.414 1.414ZM11.25 23a.75.75 0 0 0 1.5 0v-2a.75.75 0 0 0-1.5 0v2ZM11.25 3a.75.75 0 0 0 1.5 0V1a.75.75 0 0 0-1.5 0v2Z"})]}))}},19522:(e,n,t)=>{"use strict";t.d(n,{LT:()=>L,TR:()=>B,c6:()=>z,hh:()=>C,k6:()=>O,qO:()=>W,vJ:()=>G});var r=t(17844),i=t(12584),o=t(41114),a=t(50175),l=t(86997),c=t(51026),u=t(70883),s=t(33319),d=t(83239);function p(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsOrgScopeOption on OrgScopeOption {\n    __typename\n    role\n    status\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgGroupPermissionsGroup on OrgGroup {\n    ...OrgGroupMetadata\n    permissions {\n      editPermissions\n      viewPermissions\n    }\n    orgScopeOptions {\n      ...OrgGroupPermissionsOrgScopeOption\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgGroupOption on OrgGroupScopeOption {\n    status\n    role\n  }\n"]);return h=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgGroupOptions on OrgGroupScopeOptions {\n    targetGroupId\n    options {\n      __typename\n      ...OrgGroupOption\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgGroupRepl on Repl {\n    id\n    title\n    iconUrl\n    ...ReplLinkRepl\n    authorizations {\n      editPermissions {\n        isAuthorized\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment GroupReplsPage on ReplConnection {\n    pageInfo {\n      hasNextPage\n      nextCursor\n      previousCursor\n    }\n    items {\n      __typename\n      ...OrgGroupRepl\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function y(){var e=(0,i._)(["\n  fragment ReplScopeOption on ReplScopeOption {\n    status\n    role\n  }\n"]);return y=function(){return e},e}function w(){var e=(0,i._)(["\n  fragment ReplScopeOptions on ReplScopeOptions {\n    replId\n    options {\n      __typename\n      ...ReplScopeOption\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation UpdateOrgGroupScopes($input: UpdateOrgGroupScopesInput!) {\n    updateOrgGroupScopes(input: $input) {\n      __typename\n      ... on OrgGroup {\n        ...OrgGroupPermissionsGroup\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function x(){var e=(0,i._)(["\n  query OrgGroupPermissionsGroups($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupMetadata\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return x=function(){return e},e}function Y(){var e=(0,i._)(["\n  query OrgGroupScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupGroupScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              groupScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupGroupScopeOptions {\n                  items {\n                    ...OrgGroupOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return Y=function(){return e},e}function S(){var e=(0,i._)(["\n  query OrgGroupPermissionsRepls($orgId: String, $input: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          ...OrgReplManagement\n          replsCount\n          repls(input: $input) {\n            __typename\n            ... on ReplConnection {\n              ...GroupReplsPage\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return S=function(){return e},e}function A(){var e=(0,i._)(["\n  query OrgGroupReplScopeOptions(\n    $orgId: String!\n    $groupId: String!\n    $input: OrgGroupReplScopeOptionsInput!\n  ) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              __typename\n              id\n              replScopeOptions(input: $input) {\n                __typename\n                ... on OrgGroupReplScopeOptions {\n                  items {\n                    ...ReplScopeOptions\n                  }\n                }\n                ... on UnauthorizedError {\n                  message\n                }\n              }\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}var _={},k=(0,o.J1)(p()),C=(0,o.J1)(f(),s.Fe,k),I=(0,o.J1)(h()),D=(0,o.J1)(g(),I),E=(0,o.J1)(m(),u.r),R=(0,o.J1)(v(),E),U=(0,o.J1)(y()),F=(0,o.J1)(w(),U),P=(0,o.J1)(b(),C);function O(e){var n=(0,r._)({},_,e);return a.n(P,n)}var T=(0,o.J1)(x(),s.Fe);function L(e){var n=(0,r._)({},_,e);return l.I(T,n)}var M=(0,o.J1)(Y(),D);function G(e){var n=(0,r._)({},_,e);return l.I(M,n)}var N=(0,o.J1)(S(),d.PQ,R);function B(e){var n=(0,r._)({},_,e);return l.I(N,n)}var H=(0,o.J1)(A(),F);function z(e){var n=(0,r._)({},_,e);return l.I(H,n)}function W(e){var n=(0,r._)({},_,e);return c._(H,n)}},20696:e=>{e.exports={root:"DockSidebar_root__N_L1p",header:"DockSidebar_header__xaaAD",content:"DockSidebar_content__e0_hV",title:"DockSidebar_title__e3CZQ",footerButtons:"DockSidebar_footerButtons__ENw63",resizeHandleRoot:"DockSidebar_resizeHandleRoot__vsVgf",resizeHandleGrip:"DockSidebar_resizeHandleGrip__5IgIv"}},21862:(e,n,t)=>{"use strict";t.d(n,{n:()=>a,u:()=>o});var r=t(81073),i=t(42793);function o(){return(0,r.Y)(i.mL,{styles:[{body:{overscrollBehaviorX:"none"}}]})}function a(){return(0,r.Y)(i.mL,{styles:[{body:{overscrollBehaviorY:"none"}}]})}},33319:(e,n,t)=>{"use strict";t.d(n,{Fe:()=>c});var r=t(12584),i=t(41114),o=t(97206);function a(){var e=(0,r._)(["\n  fragment OrgGroupMetadata on OrgGroup {\n    id\n    color\n    slug\n    type\n    name\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgGroupMetadata($orgId: String!, $groupId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n          group(orgGroupId: $groupId) {\n            __typename\n            ... on OrgGroup {\n              ...OrgGroupMetadata\n            }\n            ... on NotFoundError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return l=function(){return e},e}var c=(0,i.J1)(a());l(),o.rh,o.wW},36776:e=>{e.exports={root:"Search_root__qfJle"}},40860:(e,n,t)=>{"use strict";t.d(n,{A:()=>f,z:()=>p});var r=t(12694),i=t(21462),o=t(17844),a=t(12584),l=t(41114),c=t(86997);function u(){var e=(0,a._)(["\n  query CreateReplTitle($teamId: Int, $title: String) {\n    replTitle(teamId: $teamId, title: $title)\n  }\n"]);return u=function(){return e},e}var s={},d=(0,l.J1)(u()),p=60;function f(e){var n,t,a=e.preferredTitle,l=e.teamId,u=(0,r._)((0,i.useState)(""),2),f=u[0],h=u[1],g=(0,i.useRef)(null),m=(0,i.useRef)(!1),v=(n={variables:{title:a,teamId:l},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1},t=(0,o._)({},s,n),c.I(d,t)),y=v.data,w=v.previousData,b=(null==y?void 0:y.replTitle)||(null==w?void 0:w.replTitle);(0,i.useEffect)(function(){b&&(m.current||h(b))},[b]);var x=(0,i.useCallback)(function(e){m.current=!0,h(e.slice(0,p))},[]),Y=!a&&b===f;return{title:f,setTitle:x,titleInputRef:g,isTitleAutoGenerated:Y}}},45796:(e,n,t)=>{"use strict";t.d(n,{A:()=>p});var r=t(81073),i=t(66890),o=t(91326),a=t(18509),l=t(27023),c=t(85389),u=t(11011),s=[l.wp.backgroundColor.outlineDimmest,l.wp.color.foregroundDefault,l.wp.borderRadius(4),l.wp.align.center,l.wp.justify.center,{height:"var(--group-icon-size)",width:"var(--group-icon-size)"}],d=(0,a.x)({grey:[s,l.wp.backgroundColor.greyDimmest],red:[s,l.wp.backgroundColor.redDimmest],orange:[s,l.wp.backgroundColor.orangeDimmest],yellow:[s,l.wp.backgroundColor.yellowDimmest],lime:[s,l.wp.backgroundColor.limeDimmest],blue:[s,l.wp.backgroundColor.blueDimmest],purple:[s,l.wp.backgroundColor.purpleDimmest],pink:[s,l.wp.backgroundColor.pinkDimmest]});let p=function(e){var n,t,a=e.group,l=e.variant,s=void 0===l?"normal":l;switch(a.color){case i.RVn.Grey:n=d.grey;break;case i.RVn.Red:n=d.red;break;case i.RVn.Orange:n=d.orange;break;case i.RVn.Yellow:n=d.yellow;break;case i.RVn.Lime:n=d.lime;break;case i.RVn.Blue:n=d.blue;break;case i.RVn.Purple:n=d.purple;break;case i.RVn.Pink:n=d.pink;break;default:n=d.grey}switch(s){case"normal":t=32;break;case"compact":t=24;break;default:(0,o.A)(s)}return(0,r.Y)(c.S,{css:n,style:{"--group-icon-size":"".concat(t,"px")},children:(0,r.Y)(u.A,{})})}},49003:(e,n,t)=>{"use strict";t.d(n,{Cp:()=>r,GB:()=>o,xn:()=>i});var r=86,i=140,o=48},51045:(e,n,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/replEnvironmentDesktop",function(){return t(66785)}])},51254:(e,n,t)=>{"use strict";t.d(n,{R:()=>s});var r=t(81073),i=t(91326),o=t(13843),a=t(82839),l=t(36073),c=t(4616),u=t(48604);function s(e){var n=e.type,t=(0,a.Z)("org-roles-and-permissions-info-banner"),s=t.isLoading,d=t.isDone,p=t.setAsDone;return s||d?null:(0,r.Y)(l.N,{text:(0,r.FD)(c.EY,{children:["View detailed role permissions"," ",(0,r.Y)("a",{href:function(e){switch(e){case"org":return o.ik.ORG_PERMISSIONS;case"repl":return o.ik.REPL_PERMISSIONS;case"group":return o.ik.GROUP_PERMISSIONS;default:(0,i.A)(e)}}(n),target:"_blank",children:"here"}),"."]}),icon:(0,r.Y)(u.A,{}),colorway:"primary",closable:!0,closeAction:p})}},52980:e=>{e.exports={opaqueOnHover:"Header_opaqueOnHover__cvJl6",root:"Header_root__fJWuA","slide-in":"Header_slide-in__Syhyv","fade-in":"Header_fade-in__24vq_",fadeIn:"Header_fadeIn___0kos",desktopAppWindowsOs:"Header_desktopAppWindowsOs__XZvA_"}},53131:e=>{e.exports={overlay:"FigmaImport_overlay__to7_u",animationWrapper:"FigmaImport_animationWrapper__8PuMi",progressBarContainer:"FigmaImport_progressBarContainer__GBU7c",progressBarTrack:"FigmaImport_progressBarTrack__AjpdN",progressBarFill:"FigmaImport_progressBarFill__WUllg"}},54393:(e,n,t)=>{"use strict";t.d(n,{B:()=>i});var r=t(90629);function i(e,n){return r.v4(function(t){t.setTag("start-with-ai",!0),n&&t.setExtras(n),r.Cp(e)}),e}},55315:(e,n,t)=>{"use strict";t.d(n,{H:()=>eg,A:()=>em});var r=t(81073),i=t(10764),o=t(17844),a=t(12584),l=t(41114),c=t(86997),u=t(44753);function s(){var e=(0,a._)(["\n  fragment FigmaImportCurrentUser on CurrentUser {\n    id\n    url\n    image\n    username\n    fullName\n    email\n    timeCreated\n    isStaff: hasRole(role: REPLIT_STAFF)\n    replCount {\n      ... on ReplCount {\n        count\n      }\n    }\n    ...ReplOwnerCurrentUser\n    teams {\n      id\n      ...ReplOwnerTeam\n    }\n    figmaAuth: auth(provider: FIGMA) {\n      provider\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,a._)(["\n  query FigmaImport {\n    currentUser {\n      id\n      ...FigmaImportCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var p={},f=(0,l.J1)(s(),u.nM,u.eC),h=(0,l.J1)(d(),f),g=t(71983),m=t(41398),v=t(1982),y=t(17089),w=t(11769),b=t(4616),x=t(85389),Y=t(29935),S=t(12694),A=t(82643),_=t(21462),k=t(90629),C=t(15506),I=t(21701),D=t(1989),E=t(15693),R=t(30620),U=t(71920),F=t(22464),P=t(12032),O=t(80457),T=t(16057),L=t(83603),M=t(46011),G=t(30124),N=t(40259),B=t(62019),H=t(37743),z=t(1833),W=t(93629),j=t(89264),$=t(67313),Z=t(50175);function q(){var e=(0,a._)(["\n  mutation CreateFigmaRepl($input: CreateReplInput!) {\n    createRepl(input: $input, isTitleAutoGenerated: false) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        nextPagePathname\n        origin {\n          id\n          isOwner\n        }\n        config {\n          figmaUrl\n          figmaImportStatus\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return q=function(){return e},e}var V={},K=(0,l.J1)(q()),J=t(54393),Q=t(21762),X=t(54682),ee=t(18427),en=t(97298),et=function(e){function n(e){var t;return(0,H._)(this,n),(t=(0,B._)(this,n,[e])).name="CreateFigmaReplError",t}return(0,z._)(n,e),n}((0,j._)(Error)),er=t(54148),ei=t(63456),eo=t(89469),ea=t.n(eo),el="Invalid Figma URL. Please ensure link is a valid Figma frame for your connected account in the format https://www.figma.com/design/...";function ec(e){var n,t=e.currentUser,a=e.onUpsell,l=(0,S._)((0,_.useState)(null),2),c=l[0],u=l[1],s=(0,S._)((0,C.ZA)("figmaUrl",{defaultValue:""}),2),d=s[0],p=s[1],f=(0,M.A)(d,500),h=(0,L.ET)().orgId,g=(0,S._)((0,F.p)(t,h),3),m=g[0],v=g[1],b=g[2],B=(0,_.useId)(),H=(0,P.d)(m,void 0),z=H.isPrivate,j=H.setIsPrivate,q=H.privacyAuthz,eo=H.isValidPrivacy,ec=function(){var e,n=(0,S._)((0,_.useState)("idle"),2),t=n[0],r=n[1],a=(0,X.m6)(),l=(0,S._)((e=(0,o._)({},V,void 0),Z.n(K,e)),1)[0],c=(0,$.useRouter)(),u=(0,ee.A)(),s=(0,Q._P)({controlName:"flag-figma-imports"});function d(){return(d=(0,Y._)(function(e){var n,t,d,p,f,h,g,m,v;return(0,A.YH)(this,function(y){switch(y.label){case 0:if(n=e.isPrivate,t=e.orgId,d=e.figmaUrl,!s)throw new et("This feature is currently unavailable.");return r("creating_repl"),[4,l({variables:{input:{isPrivate:n,orgId:t,figmaUrl:d,figmaImportStatus:i.u4D.Started}}})];case 1:if((h=y.sent()).errors)throw(0,J.B)(new et(h.errors.map(function(e){return e.message}).join(", "))),new et("Something went wrong. Please try again.");if((null==(f=h.data)||null==(p=f.createRepl)?void 0:p.__typename)==="UserError")throw(0,J.B)(new et(h.data.createRepl.message)),new et(h.data.createRepl.message);if(!h.data)throw new et("Something went wrong. Please try again.");if(g=h.data.createRepl,r("opening_repl"),m={enterInAgentMode:!0,agentOnboarding:!1},v=(0,en.q1)(g,m),!a)return[3,2];return window.location.href=(0,en.cY)(g,m),[3,4];case 2:return[4,c.push((0,W._)((0,o._)({},v.href),{pathname:u}),v.as)];case 3:y.sent(),y.label=4;case 4:return[2]}})})).apply(this,arguments)}return{createFigmaRepl:function(e){return d.apply(this,arguments)},status:t}}(),eu=ec.createFigmaRepl,es=ec.status;(0,_.useEffect)(function(){f?u((0,S._)((0,I.uQ)(f),1)[0]?null:el):u(null)},[f]);var ed=(n=(0,Y._)(function(){var e;return(0,A.YH)(this,function(n){switch(n.label){case 0:if(!(0,S._)((0,I.uQ)(d),1)[0])return u(el),[2];(0,y.u4)(y.AZ.FIGMA_IMPORT_USED,{action:"form_submitted"}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eu({isPrivate:z,orgId:"Org"===m.__typename?m.id:void 0,figmaUrl:d})];case 2:return n.sent(),[3,4];case 3:return(e=n.sent())instanceof et?u(e.message):(u("Something went wrong. Please try again."),k.v4(function(n){n.setTag("figma-import-create-repl",!0),n.setExtras({figmaUrl:d,isPrivate:z,orgId:"Org"===m.__typename?m.id:void 0}),k.Cp(e)})),[2];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),ep=(0,O.g)(),ef="CurrentUser"===m.__typename&&m.id===t.id,eh=ef&&"data"===ep.type&&!ep.canCreateRepl;return(0,r.Y)(x.S,{tag:"form",onSubmit:function(e){ed(),e.preventDefault()},gap:16,children:(0,r.Y)(x.S,{gap:8,children:(0,r.FD)(x.S,{clsx:ea().container,p:16,children:[(0,r.FD)(x.S,{gap:8,pb:8,children:[(0,r.Y)("label",{htmlFor:"figmaUrl",children:"Figma URL"}),(0,r.Y)(N.pd,{id:"figmaUrl",value:d,onChange:function(e){return p(e.target.value)},placeholder:"https://www.figma.com/design/...",clsx:ea().input})]}),c?(0,r.Y)(x.S,{pb:8,py:4,children:(0,r.Y)(D.A,{children:c})}):null,(0,r.Y)(G.a,{clsx:ea().divider}),(0,r.FD)(x.S,{gap:12,children:[b.length>1?(0,r.FD)(x.S,{gap:8,children:[(0,r.Y)("label",{htmlFor:B,children:"Owner"}),(0,r.Y)(U.A,{id:B,owners:b,selectedOwner:m,setSelectedOwner:v})]}):null,"Org"===m.__typename?(0,r.Y)(E.A,{org:m,isPrivate:z,setIsPrivate:j,privacyAuthz:q}):(0,r.Y)(R.Z,{isPrivate:z,isTeam:"Team"===m.__typename,setIsPrivate:j,privacyAuthz:q,onUpsell:a})]}),(0,r.FD)(x.S,{clsx:ea().importButtonContainer,row:!0,gap:12,justify:"space-between",pt:12,children:[(0,r.Y)(x.S,{clsx:ea().limitMeter,children:(0,r.Y)(T.g,{isIndividualOwner:ef,showUpgradeForm:function(){(0,y.u4)(y.AZ.UPGRADE_SELECTED,{source:"import_figma"}),null==a||a(!0)}})}),(0,r.Y)(x.S,{align:"center",justify:"center",children:(0,r.Y)(w.$n,{iconLeft:"idle"!==es?(0,r.Y)(ei.A,{}):(0,r.Y)(er.A,{}),colorway:"primary",stretch:!0,type:"submit",loading:"loading"===ep.type,disabled:!!c||"idle"!==es||"loading"===ep.type||eh||!eo,text:"Import from Figma",dataCy:"import-figma-btn"})})]})]})})})}var eu=t(95418),es=t(1035),ed=t(75813),ep=t(53376),ef=t(5657),eh=t.n(ef),eg=function(){return(0,r.FD)(x.S,{row:!0,justify:"center",gap:8,pb:12,align:"center",children:[(0,r.Y)(x.S,{justify:"center",align:"center",clsx:eh().figmaIcon,children:(0,r.Y)(ed.A,{size:24})}),(0,r.Y)(x.S,{justify:"center",align:"center",children:(0,r.Y)(es.A,{})}),(0,r.Y)(x.S,{justify:"center",align:"center",clsx:eh().replitIcon,children:(0,r.Y)(ep.A,{size:24})})]})};function em(e){var n,t,a,l=e.onUpsell,u=(n={fetchPolicy:"no-cache"},t=(0,o._)({},p,n),c.I(h,t)),s=u.data,d=u.refetch,f=null==s?void 0:s.currentUser,Y=(0,v.A)().showConfirm,S=(0,m.m)({onAuth:function(){Y("Successfully connected to Figma"),d(),(0,y.u4)(g.AZ.FIGMA_AUTH_COMPLETE,{source:"import_page"})}}),A=(null==f?void 0:f.__typename)==="CurrentUser"&&(null==f||null==(a=f.figmaAuth)?void 0:a.provider)===i.edb.Figma;return(null==f?void 0:f.__typename)!=="CurrentUser"?(0,r.Y)(eu.A,{}):A?(0,r.Y)(ec,{currentUser:f,onUpsell:l}):(0,r.FD)(x.S,{clsx:eh().container,px:24,py:32,gap:12,align:"center",justify:"center",children:[(0,r.Y)(eg,{}),(0,r.Y)(b.EY,{variant:"subheadDefault",children:"Connect Figma to Replit"}),(0,r.Y)(b.EY,{children:"Get started by logging in with your Figma account"}),(0,r.Y)(w.$n,{clsx:eh().button,onClick:function(){return S()},text:"Log in with Figma",colorway:"primary",iconRight:(0,r.Y)(es.A,{})})]})}},56983:(e,n,t)=>{"use strict";t.d(n,{A:()=>_});var r=t(12694),i=t(81073),o=t(21462),a=t(66890),l=t(19522),c=t(36937),u=t(18509),s=t(27023),d=t(69762),p=t(78626),f=t(85389),h=t(24140),g=t(87064),m=t(8486),v=t(83728),y=t(53307),w=t(10327),b=t(63456),x=t(71872),Y=(0,u.x)({scopeSelector:[s.wp.position.relative],selectOption:[{"&:hover":{cursor:"auto"}}],icon:[s.wp.position.absolute,s.wp.top("50%"),s.wp.left(-4),{transform:"translate(-100%, -50%)"}]}),S=function(e){switch(e){case a.oOo.Owner:return{icon:(0,i.Y)(w.A,{}),label:"Owner",description:"Full permissions including App deletion"};case a.oOo.Deployer:return{icon:(0,i.Y)(m.A,{}),label:"Deployer",description:"Can edit, deploy, and manage resources"};case a.oOo.Editor:return{icon:(0,i.Y)(v.A,{}),label:"Editor",description:"Can edit code and view resources"};case a.oOo.Viewer:return{icon:(0,i.Y)(y.A,{}),label:"Viewer",description:"Can only view code and fork Apps"};case a.oOo.None:return{icon:(0,i.Y)(g.A,{}),label:"None",description:"Cannot search, view, or edit Apps"}}},A=function(e){switch(e){case a.oOo.Owner:return a.Fvk.Owner;case a.oOo.Deployer:return a.Fvk.Deployer;case a.oOo.Editor:return a.Fvk.Editor;case a.oOo.Viewer:return a.Fvk.Viewer}};let _=function(e){var n,t=e.group,u=e.repl,s=e.options,g=e.onScopeChange,m=e.iconSize,v=void 0===m?24:m,y=(0,r._)((0,o.useState)(!1),2),w=y[0],_=y[1],k=(0,r._)((0,o.useState)(s.find(function(e){return e.status===a.jLn.Current})),2),C=k[0],I=k[1],D="".concat(u.id,"-role-").concat((0,o.useId)()),E=C?S(C.role).label:void 0,R=u.authorizations.editPermissions.isAuthorized,U=(0,r._)((0,l.k6)({onCompleted:function(e){"OrgGroup"===e.updateOrgGroupScopes.__typename&&(g(),_(!0),setTimeout(function(){return _(!1)},2e3))}}),2),F=U[0],P=U[1],O=P.data,T=P.loading,L=P.error,M=(null==O?void 0:O.updateOrgGroupScopes)&&"OrgGroup"!==O.updateOrgGroupScopes.__typename?O.updateOrgGroupScopes.message:null==L?void 0:L.message;return n=M?(0,i.Y)(p.m_,{tooltip:M,children:(0,i.Y)(x.A,{size:v,color:c.LU.accentNegativeDefault})}):T?(0,i.Y)(b.A,{size:v}):w?(0,i.Y)(h.A,{size:v,color:c.LU.accentPositiveDefault}):null,(0,i.FD)(f.S,{css:Y.scopeSelector,row:!0,gap:8,justify:"end",children:[n?(0,i.Y)(f.S,{css:Y.icon,children:n}):null,(0,i.Y)(p.m_,{tooltip:"You cannot edit this group's permissions.",isDisabled:R,children:(0,i.Y)(d.in,{id:D,label:null!=E?E:"Select a role...","aria-label":"".concat(t.name,"'s access to ").concat(u.title),onAction:function(e){var n=s.find(function(n){return n.role===e});if(n&&n.role!==(null==C?void 0:C.role)){I(n);var r=n.role===a.oOo.None?[]:[{resourceId:u.id,role:A(n.role)}],i=n.role===a.oOo.None?[{resourceType:a.mWV.Repl,resourceId:u.id}]:[];F({variables:{input:{orgGroupId:t.id,orgScopes:[],groupScopes:[],replScopes:r,removeScopes:i}}})}},items:s,disallowEmptySelection:!0,isDisabled:!R,children:function(e){var n=S(e.role),r=e.status===a.jLn.Unavailable;return(0,i.Y)(d.Dr,{id:e.role,label:n.label,description:r?"".concat(t.name," cannot have ").concat(e.role," access"):n.description,css:Y.selectOption,icon:n.icon,isDisabled:r},e.role)}})})]})}},57839:(e,n,t)=>{"use strict";t.d(n,{A:()=>l});var r=t(17844),i=t(93629),o=t(81073),a=t(52351);function l(e){return(0,o.Y)(a.Ay,(0,i._)((0,r._)({},e),{children:(0,o.Y)("path",{fillRule:"evenodd",d:"M11.863 2.632a.75.75 0 0 1-.05.814 6.25 6.25 0 0 0 8.741 8.74.75.75 0 0 1 1.193.673A9.749 9.749 0 1 1 11.14 2.253a.75.75 0 0 1 .722.379ZM9.747 4.036a8.25 8.25 0 1 0 10.217 10.217A7.75 7.75 0 0 1 9.747 4.036Z",clipRule:"evenodd"})}))}},58211:(e,n,t)=>{"use strict";t.d(n,{A:()=>R});var r=t(17844),i=t(93629),o=t(12694),a=t(86105),l=t(81073),c=t(21462),u=t(39695),s=t(12584),d=t(41114),p=t(86997),f=t(8345);function h(){var e=(0,s._)(["\n  query OrgGroupSearch($orgId: String, $input: OrgGroupsInput) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          groups(input: $input) {\n            __typename\n            ... on OrgGroupConnection {\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n              items {\n                ...OrgGroupsOrgGroup\n              }\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var g={},m=(0,d.J1)(h(),f.Um),v=t(46011),y=t(36937),w=t(18509),b=t(27023),x=t(83070),Y=t(40259),S=t(36073),A=t(4616),_=t(85389),k=t(87064),C=t(63456),I=t(47820),D=[b.wp.p(8),b.wp.cursor.pointer],E=(0,w.x)({container:[b.wp.position.relative],rightIcon:[b.wp.position.absolute,b.wp.right(8),b.wp.top("50%"),{transform:"translateY(-50%)"}],dropdownMenu:[b.wp.width("100%"),b.wp.position.absolute,b.wp.zIndex(1),b.wp.top("100%"),b.wp.left(0),b.wp.backgroundColor.backgroundDefault,b.wp.maxHeight(300),b.wp.overflow("auto"),b.wp.borderRadius(4),b.wp.border({color:y.LU.foregroundDimmest}),{borderTop:"0 none"}],result:(0,a._)(D),activeResult:(0,a._)(D).concat([b.wp.backgroundColor.accentPrimaryDimmer]),closeIconButton:[{"&:hover":{backgroundColor:"".concat(y.LU.backgroundHighest," !important")}}]});let R=function(e){var n,t,a,s=e.inputId,d=e.orgId,f=e.types,h=e.selectedGroups,y=e.value,w=e.setValue,b=e.onSelect,D=e.onClear,R=e.placeholder,U=void 0===R?"Find an existing group...":R,F=(0,o._)((0,c.useState)([]),2),P=F[0],O=F[1],T=(0,v.A)(y.trim(),250),L=(n={variables:{orgId:d,input:{count:10,types:f,filters:{name:{search:T}}}},ssr:!1,skip:!T,fetchPolicy:"cache-and-network",onCompleted:function(e){if((null==e||null==(t=e.currentUser)||null==(n=t.org)?void 0:n.__typename)==="Org"&&(null==e||null==(o=e.currentUser)||null==(i=o.org)||null==(r=i.groups)?void 0:r.__typename)==="OrgGroupConnection"){var n,t,r,i,o;O(e.currentUser.org.groups.items.filter(function(e){return!h.some(function(n){return e.id===n.id})}))}}},t=(0,r._)({},g,n),p.I(m,t)),M=L.data,G=L.loading,N=L.error,B=M&&M.currentUser&&"Org"!==M.currentUser.org.__typename?M.currentUser.org.message:void 0,H=M&&M.currentUser&&"Org"===M.currentUser.org.__typename&&"OrgGroupConnection"!==M.currentUser.org.groups.__typename?M.currentUser.org.groups.message:void 0,z=null==N?void 0:N.message,W=null!=(a=null!=B?B:H)?a:z;return(0,c.useEffect)(function(){0===y.length&&0!==P.length&&O([])},[y.length,P.length]),(0,l.Y)(_.S,{css:E.container,children:(0,l.Y)(u.Ay,{onSelect:function(e){e&&b(e)},itemToString:function(e){return(null==e?void 0:e.name)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var n=e.getInputProps,t=e.getItemProps,o=e.getMenuProps,a=e.isOpen,c=e.highlightedIndex,u=e.getRootProps;return(0,l.FD)(_.S,(0,i._)((0,r._)({},u({refKey:"innerRef"})),{children:[(0,l.Y)(Y.pd,(0,r._)({},n({id:s,ref:null,value:y,onChange:function(e){w(e.currentTarget.value)},placeholder:U,autoComplete:"off"}))),G||0!==y.length?null:(0,l.Y)(I.A,{css:E.rightIcon}),G?(0,l.Y)(_.S,{css:E.rightIcon,children:(0,l.Y)(C.A,{})}):null,!G&&y.length>0?(0,l.Y)(_.S,{css:E.rightIcon,children:(0,l.Y)(x.K0,{css:E.closeIconButton,alt:"Clear",tooltipBehavior:"hidden",onClick:function(){w(""),D&&D()},children:(0,l.Y)(k.A,{})})}):null,(0,l.FD)(_.S,(0,i._)((0,r._)({tag:"ul"},o({refKey:"innerRef"})),{children:[W?(0,l.Y)(_.S,{tag:"ul",css:E.dropdownMenu,children:(0,l.Y)(_.S,{tag:"li",css:E.result,children:(0,l.Y)(S.N,{colorway:"negative",text:W})})}):null,a&&P&&P.length?(0,l.Y)(_.S,{css:E.dropdownMenu,children:P.map(function(e,n){return(0,l.Y)(_.S,(0,i._)((0,r._)({tag:"li"},t({item:e,index:n})),{css:n===c?E.activeResult:E.result,children:(0,l.Y)(A.EY,{height:"singleLine",multiline:!1,children:e.name})}),e.id)})}):null,a&&!G&&T.length>0&&0===P.length?(0,l.Y)(_.S,{tag:"ul",css:E.dropdownMenu,children:(0,l.Y)(_.S,{tag:"li",css:E.result,children:(0,l.FD)(A.EY,{height:"singleLine",color:"dimmer",multiline:!1,children:['No results found for "',y,'"']})})}):null]}))]}))}})})}},62611:e=>{e.exports={root:"Pane_root__Dz_FC",container:"Pane_container__V2H53",interactionBlanket:"Pane_interactionBlanket__HGhM4",border:"Pane_border__i_sKd"}},66785:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>_2});var r,i,o,a,l,c,u,s,d,p=t(12694),f=t(81073),h=t(67313),g=t(21462),m=t(17844),v=t(12584),y=t(41114),w=t(86997),b=t(50175),x=t(78638),Y=t(96597),S=t(45368);function A(){var e=(0,v._)(["\n  fragment FigmaImportFlowRepl on Repl {\n    id\n    config {\n      figmaUrl\n      figmaImportStatus\n    }\n    slug\n    title\n    layoutState\n    description\n    rootOriginReplUrl\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n    ...PageTitleRepl\n  }\n  ","\n  ","\n  ","\n"]);return A=function(){return e},e}function _(){var e=(0,v._)(["\n  query FigmaImportFlow($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...FigmaImportFlowRepl\n      }\n    }\n  }\n  ","\n"]);return _=function(){return e},e}function k(){var e=(0,v._)(["\n  mutation UpdateReplForFigmaImport($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          figmaUrl\n          figmaImportStatus\n        }\n        isRenamed\n        title\n      }\n    }\n  }\n"]);return k=function(){return e},e}function C(){var e=(0,v._)(["\n  mutation GetFigmaIntermediateToken($input: GetFigmaIntermediateTokenInput!) {\n    getFigmaIntermediateToken(input: $input) {\n      ... on FigmaImportIntermediateToken {\n        token\n      }\n      ... on NoOAuthFoundError {\n        message\n      }\n      ... on InvalidFigmaUrlError {\n        message\n      }\n      ... on FigmaRateLimitError {\n        message\n      }\n    }\n  }\n"]);return C=function(){return e},e}var I={},D=(0,y.J1)(A(),x.c,S.c,Y.b),E=(0,y.J1)(_(),D),R=(0,y.J1)(k()),U=(0,y.J1)(C()),F=t(39264),P=t(58231),O=t(73380);function T(){var e=(0,v._)(["\n  query ReplEnvironmentDesktop(\n    $replId: String!\n    $environment: KeybindingsEnvironmentEnum!\n    $platform: KeybindingsPlatformEnum!\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentDesktopRepl\n        ...ReplEnvironmentTourRepl\n        ...HandleReplRedirectionRepl\n        ...FigmaImportFlowRepl\n      }\n      ... on ReplRedirect {\n        ...HandleReplRedirectionReplRedirect\n      }\n      ... on ReplSubscriptionExpired {\n        ...HandleReplRedirectionSubscriptionExpired\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      id\n      isVerified\n      ...ReplEnvironmentDesktopCurrentUser\n      keybindings(environment: $environment, platform: $platform) {\n        keybindings\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return T=function(){return e},e}var L={},M=(0,y.J1)(T(),P.cL,F.I,O.VU,D,O.V4,O.aU,P.dL),G=t(70738),N=t(21762),B=t(42546),H=t(8985),z=t(26805);function W(){var e=(0,v._)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return W=function(){return e},e}var j={},$=(0,y.J1)(W()),Z=t(40502);function q(e){return!e.origin&&"/@replit/Blank-Repl"===e.rootOriginReplUrl}var V=t(83715),K=t(71514),J=t(27741),Q=t(54682),X=t(96050),ee=t(62721),en=t(94613),et=t(29426);function er(){var e=(0,v._)(["\n  fragment AgentLayoutReplConfig on ReplConfig {\n    isInPlanningPhase\n    isAgentRepl\n  }\n"]);return er=function(){return e},e}function ei(){var e=(0,v._)(["\n  query CenteredAgentPresentationDuringInitialPlanning($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        origin {\n          id\n        }\n        config {\n          ...AgentLayoutReplConfig\n        }\n      }\n    }\n  }\n  ","\n"]);return ei=function(){return e},e}var eo={},ea=(0,y.J1)(er()),el=(0,y.J1)(ei(),ea),ec=t(55100),eu=t(76957),es=t(96907),ed=t.n(es),ep=t(8950),ef=t(73176),eh=t(684),eg=eh.ZU.String();eh.ZU.String();var em=eh.ZU.Object({width:eh.ZU.Number(),height:eh.ZU.Number()}),ev=eh.ZU.Object({x:eh.ZU.Number(),y:eh.ZU.Number()}),ey=eh.ZU.Intersect([ev,em]),ew=eh.ZU.Object({top:eh.ZU.Number(),bottom:eh.ZU.Number(),left:eh.ZU.Number(),right:eh.ZU.Number()}),eb=eh.ZU.Object({id:eh.ZU.String(),type:eh.ZU.Literal("paneGroup"),panes:eh.ZU.Array(eg),percent:eh.ZU.Number(),activeIndex:eh.ZU.Number()}),ex=eh.ZU.Object({id:eh.ZU.String(),type:eh.ZU.Literal("floatingPaneGroup"),panes:eh.ZU.Array(eg),activeIndex:eh.ZU.Number(),rect:ey}),eY=eh.ZU.Recursive(function(e){return eh.ZU.Object({type:eh.ZU.Literal("split"),stacked:eh.ZU.Boolean(),children:eh.ZU.Array(eh.ZU.Union([eb,e])),percent:eh.ZU.Number()})});eh.ZU.Union([eb,eY]);var eS=eh.ZU.Object({tiling:eh.ZU.Union([eY,eb,eh.ZU.Null()]),floating:eh.ZU.Array(ex)});eh.ZU.Union([eh.ZU.Literal("left"),eh.ZU.Literal("right")]),eh.ZU.Object({inset:eh.ZU.Optional(ew),size:em,gap:eh.ZU.Number(),headerHeight:eh.ZU.Number()});var eA=eh.ZU.Union([eh.ZU.Literal("above"),eh.ZU.Literal("below"),eh.ZU.Literal("leftOf"),eh.ZU.Literal("rightOf")]);function e_(e,n){var t,r,i,o,a={width:t=.5*n.width,height:r=.5*n.height,x:n.x+(n.width-t)/2,y:n.y+(n.height-r)/2};if(i=e.x,o=e.y,i>a.x&&i<a.x+a.width&&o>a.y&&o<a.y+a.height)return{dropLocation:"middle",previewRect:n};var l={x:n.x+n.width/2,y:n.y+n.height/2},c=.3*n.width,u=l.x-c/2;if(e.x>=u&&e.x<=u+c){var s=e.y<=l.y?"above":"below",d=n.height/2;return{dropLocation:s,previewRect:{x:n.x,y:"above"===s?n.y:n.y+d,width:n.width,height:d}}}var p=e.x<=l.x?"leftOf":"rightOf",f=n.width/2;return{dropLocation:p,previewRect:{x:"leftOf"===p?n.x:n.x+f,y:n.y,width:f,height:n.height}}}eh.ZU.Union([eA,eh.ZU.Literal("replace")]),eh.ZU.Union([eh.ZU.Literal("up"),eh.ZU.Literal("left"),eh.ZU.Literal("right"),eh.ZU.Literal("down")]);var ek={height:0,width:0};function eC(e){if(e.length<1)throw Error("Expected a path with a parent");return e.slice(0,-1)}function eI(e){return"floatingPaneGroup"!==e.type}var eD=t(56902),eE=t(86105),eR=t(22531);function eU(e,n){var t=(0,eD._)(n),r=t[0],i=t.slice(1);if("floating"===r){if(!e.floating)return null;var o=i[0];if("number"!=typeof o)throw Error("Expected floatingIndex");var a=e.floating[o];if(!a)throw Error("Expected paneGroup");return a}if("tiling"!==r)throw Error("Expected tiling path");var l=e.tiling;if(!l)return null;var c=l,u=i.length,s=0,d=!0,p=!1,f=void 0;try{for(var h,g=i[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var m=h.value;if("paneGroup"===c.type)break;if("number"!=typeof m)throw Error("Expected number");s++,c=c.children[m]}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}return u===s?c:null}function eF(e,n){var t=e.floating.find(function(e){return e.panes.includes(n)});if(t)return{index:t.panes.indexOf(n),paneGroup:t,paneGroupPath:["floating",e.floating.indexOf(t)],floating:!0};var r=e.tiling;if(!r)return null;for(var i=[{paneGroupPath:["tiling"],parent:null,grandparent:null,node:r}];i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.node.type){var a=!0,l=!1,c=void 0;try{for(var u,s=o.node.children[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value;i.push({grandparent:o.parent,parent:o.node,node:d,paneGroupPath:(0,eE._)(o.paneGroupPath).concat([o.node.children.indexOf(d)])})}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}else if(o.node.panes.includes(n))return{paneGroupPath:o.paneGroupPath,paneGroup:o.node,parent:o.parent,grandparent:o.grandparent,index:o.node.panes.indexOf(n),floating:!1}}return null}function eP(e,n){var t=e.tiling;return t?function e(n,t,r){if("paneGroup"===n.type)return{paneGroup:n,path:r};var i=0,o=n.children.length-1;return"topRight"!==t||n.stacked?"bottomRight"===t?i=o:"bottomLeft"===t&&n.stacked&&(i=o):i=o,e(n.children[i],t,(0,eE._)(r).concat([i]))}(t,n,["tiling"]):null}function eO(e,n){var t=e.tiling,r=e.floating,i=(0,eE._)(r);for(t&&i.push(t);i.length;){var o=i.shift();if(!o)throw Error("Expected item");if("split"===o.type)i.push.apply(i,(0,eE._)(o.children));else if(o.id===n)return o}return null}function eT(e,n){var t=e.tiling;if(null===t)return null;for(var r=[[t,["tiling"]]];r.length;){var i=function(){var e=r.shift();if(!e)throw Error("Expected item");var t=(0,p._)(e,2),i=t[0],o=t[1];return"split"!==i.type?"continue":i.children.some(function(e){return"paneGroup"===e.type&&e.id===n})?{v:{node:i,path:o}}:void i.children.forEach(function(e,n){r.push([e,(0,eE._)(o).concat([n])])})}();if("object"===(0,eR._)(i))return i.v}return null}function eL(e,n){var t=eF(e,n);if((null==t?void 0:t.paneGroup.type)==="paneGroup"){var r=eT(e,t.paneGroup.id);if(r){var i=r.node.children,o=i.indexOf(t.paneGroup);return o<i.length-1?i[o+1]:i[o-1]}}return null}function eM(e){var n=e.relativeTo,t=e.rects,r=e.direction,i=t.get(n);if(!i)throw Error("Expected relativeTo rect to be included in rects");var o=null,a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=(0,p._)(u.value,2),f=d[0],h=d[1];if(f===n)continue;var g=function(e){var n=e.from,t=e.other;switch(e.direction){case"above":return n.y-t.y;case"below":return t.y-n.y;case"rightOf":return t.x-n.x;case"leftOf":return n.x-t.x}}({from:i,other:h,direction:r});if(("leftOf"!==r&&"above"!==r||!(g<=0))&&("rightOf"!==r&&"below"!==r||!(g<0))){var m=function(e,n,t){var r=(0,p._)("x"===t?[[e.x,e.x+e.width],[n.x,n.x+n.width]]:[[e.y,e.y+e.height],[n.y,n.y+n.height]],2),i=r[0],o=r[1],a=Math.max(i[0],o[0]);return Math.min(i[1],o[1])-a}(i,h,"leftOf"===r||"rightOf"===r?"y":"x");!(m<=0)&&(!o||o.distance>g||o.distance===g&&o.overlap<m)&&(o={key:f,rect:h,distance:g,overlap:m})}}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return(null==o?void 0:o.key)||null}var eG={top:0,bottom:0,left:0,right:0};function eN(e,n){var t=n.inside,r=n.minVisibleX,i=n.minVisibleY,o=-e.width+r,a=t.width-r,l=t.height-i;return{x:Math.min(Math.max(o,e.x),a),y:Math.min(Math.max(0,e.y),l)}}function eB(e,n){var t=void 0===n.activeIndex?0:n.activeIndex;if(n.isFloating)return void e.floating.push({id:n.id,type:"floatingPaneGroup",panes:n.panes,activeIndex:t,rect:n.rect});var r=null;if(Array.isArray(n.relativeTo))r=n.relativeTo;else{var i=eF(e,n.relativeTo);if(!i)throw Error("Expected pane");r=i.paneGroupPath}if(null===r)throw Error("Expected relativeTo");if("tiling"!==r[0])throw Error("Expected tiling path");var o=n.placement,a=n.panes,l=n.percent,c="above"===o||"below"===o,u="rightOf"===o||"below"===o;if(!e.tiling&&1===r.length){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(!e.tiling)throw Error("Expected tiling");var s=eU(e,r);if(!s||!eI(s))throw Error("Expected tiled node");if(1===r.length&&"replace"===o){e.tiling={id:n.id,type:"paneGroup",percent:100,panes:a,activeIndex:t};return}if(1===r.length&&"paneGroup"===e.tiling.type){var d=[e.tiling];e.tiling={type:"split",percent:100,stacked:c,children:d},eH({id:n.id,insertIndex:+!!u,panes:a,children:d,percent:l,activeIndex:t});return}if(1===r.length&&"split"===e.tiling.type){if(!!e.tiling.stacked==!!c)return void eH({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?e.tiling.children.length:0,children:e.tiling.children});var p={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},f=u?[s,p]:[p,s];return s.percent=100-p.percent,void(e.tiling={type:"split",stacked:c,children:f,percent:100})}if(0===r.length)throw Error("Expected relativeTo length");var h=eU(e,eC(r));if((null==h?void 0:h.type)!=="split")throw Error("Expected split parent");if("replace"===o){var g=h.children.indexOf(s);h.children.splice(g,1,{id:n.id,panes:a,percent:s.percent,type:"paneGroup",activeIndex:t});return}if(!!h.stacked==!!c){var m=h.children.indexOf(s);eH({id:n.id,panes:a,percent:l,activeIndex:t,insertIndex:u?m+1:m,children:h.children});return}if(!!h.stacked!=!!c){var v={id:n.id,panes:a,type:"paneGroup",percent:void 0===l?50:l,activeIndex:t},y=u?[s,v]:[v,s],w=s.percent;s.percent=100-v.percent;var b=h.children.indexOf(s);h.children[b]={type:"split",stacked:c,children:y,percent:w};return}}function eH(e){var n=e.id,t=e.percent,r=e.children,i=e.panes,o=e.insertIndex,a=e.activeIndex;if(void 0!==t){var l=(100-t)/100;r.forEach(function(e){e.percent=e.percent*l}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:t,activeIndex:a});return}var c=r.reduce(function(e,n){return e+n.percent},0)/r.length,u=100/(100+c);r.forEach(function(e){e.percent=e.percent*u}),r.splice(o,0,{id:n,panes:i,type:"paneGroup",percent:c*u,activeIndex:a})}function ez(e,n){var t=eO(e,n.paneGroupId);if(!t)throw Error("Expected paneGroup");!function(e,n){var t,r=n.index,i=n.paneIds,o=n.activate;if(void 0!==r&&r>e.panes.length)throw Error("Invalid index");var a=void 0===r?e.panes.length:r;(t=e.panes).splice.apply(t,[a,0].concat((0,eE._)(i))),(void 0===o||o)&&(e.activeIndex=a)}(t,n)}function eW(e,n){e.panes.splice(n,1),0!==e.activeIndex&&(n>e.activeIndex||(e.activeIndex=e.activeIndex-1))}function ej(e,n){var t=eF(e,n);if(!t)throw Error("Expected pane");if(t.floating){if(1===t.paneGroup.panes.length){var r=t.paneGroupPath[1];if("number"!=typeof r)throw Error("Expected floatingIndex");e$(e,["floating",r])}else eW(t.paneGroup,t.index);return}var i=t.paneGroup,o=t.paneGroupPath,a=t.parent;if(!i)throw Error("paneGroup eith paneId not found: "+n);var l=i.panes.indexOf(n);if(-1===l)throw Error("Expected paneIndex");if(!a&&1===i.panes.length){e.tiling=null;return}if(i.panes.length>1)return void eW(i,l);e$(e,o)}function e$(e,n){var t=(0,eD._)(n),r=t[0],i=t.slice(1);if("tiling"===r&&0===i.length){e.tiling=null;return}if("floating"===r&&0===i.length){e.floating=[];return}var o=eU(e,n);if(!o)throw Error("Expected node");if("floatingPaneGroup"===o.type){var a=e.floating.indexOf(o);if(-1===a)throw Error("Expected paneGroupIndex");e.floating.splice(a,1);return}var l=eC(n),c=eU(e,l);if((null==c?void 0:c.type)!=="split")throw Error("Expected split");var u=c.children.indexOf(o);if(-1===u)throw Error("Expected paneGroupIndex");var s=c.children;if(s.splice(u,1),s.length>1){var d=100/s.reduce(function(e,n){return e+n.percent},0);s.forEach(function(e){e.percent=e.percent*d});return}var f=(0,p._)(s,1)[0],h=l.length>1?eU(e,eC(l)):null;if(!h){f.percent=100,e.tiling=f;return}if("split"!==h.type)throw Error("Expected split");var g=h.children.indexOf(c);if(-1===g)throw Error("Expected parentIndex");f.percent=c.percent,h.children[g]=f}function eZ(e,n){var t=n.paneGroupPath,r=n.rect,i=eU(e,t);if((null==i?void 0:i.type)!=="paneGroup")throw Error("Expected paneGroup");e$(e,t),eB(e,{id:i.id,isFloating:!0,panes:i.panes,rect:r,activeIndex:i.activeIndex})}function eq(e,n){var t="floatingIndex"in n?e.floating[n.floatingIndex]:eU(e,n.paneGroupPath);if(!t||!("panes"in t))throw Error("Expected paneGroup");ej(e,n.paneId);var r=void 0===n.index?t.panes.length:n.index;t.panes.splice(r,0,n.paneId),n.activate?t.activeIndex=r:t.activeIndex>=r&&t.activeIndex++}function eV(e,n){var t=n.leftPath,r=n.percent,i=n.snapPercent,o=void 0===i?0:i,a=eU(e,t);if(!a||!eI(a))throw Error("Expected leftNode");var l=eU(e,eC(t));if((null==l?void 0:l.type)!=="split")throw Error("Expected splitNode");var c=l.children.indexOf(a);if(-1===c)throw Error("Expected leftNodeIndex");var u=c+1,s=l.children[u];if(!s)throw Error("Expected rightNode");if(r<=o){if(a.percent=0,r<0&&c>0)for(var d=Math.abs(r),p=c-1;d>0;){var f=l.children[p];if(f.percent>d){f.percent-=d;break}if(d-=f.percent,f.percent=0,0===p)break;p--}var h=l.children.reduce(function(e,n){return n===s?e:e+n.percent},0);s.percent=100-h;return}var g=a.percent+s.percent,m=l.children.slice(c).reduce(function(e,n){return e+n.percent},0);if(r>g-o){if(a.percent=Math.min(m,Math.max(g,r)),s.percent=0,r>g&&u<l.children.length-1)for(var v=r-g,y=u+1;v>0;){var w=l.children[y];if(w.percent>v){w.percent-=v;break}if(v-=w.percent,w.percent=0,y===l.children.length-1)break;y++}return}var b=a.percent-r;s.percent=s.percent+b,a.percent=r}function eK(e){var n=new Set,t=!0,r=!1,i=void 0;try{for(var o,a=e.floating[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=!0,u=!1,s=void 0;try{for(var d,p=l.panes[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value;n.add(f)}}catch(e){u=!0,s=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw s}}}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return e.tiling&&function e(t){if("paneGroup"!==t.type)return t.children.forEach(e);var r=!0,i=!1,o=void 0;try{for(var a,l=t.panes[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;n.add(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(e.tiling),n}var eJ=t(35992),eQ=t(69737),eX=(0,eu.eU)([]),e0=(0,eu.eU)([]),e1=(0,eu.eU)([]),e2={x:0,y:0,width:0,height:0},e4={type:"commands",data:{autoFocus:!1}},e5=(0,eQ.Iz)(function(e){return(0,eu.eU)({paneId:e,type:"tile",rectAtom:(0,eu.eU)((0,m._)({},e2)),dataAtom:(0,eu.eU)((0,m._)({},e4)),isHidden:!1,isCommitted:!1})}),e7=(0,eu.eU)(function(e){return e(eX).map(function(n){return e(e5(n))})}),e3=(0,eu.eU)(function(e){return e(e7).filter(function(e){return!e.isHidden})}),e6=(0,eu.eU)(function(e){return e(e7).filter(function(e){return e.isHidden})}),e8=(0,eu.eU)(function(e){return e(e1).map(function(n){return e(ne(n))})}),e9=(0,eQ.Iz)(function(e){return(0,eu.eU)({handleId:e,rect:e2,stacked:!1,parentPath:["tiling"],leftPath:["tiling"],rightPath:["tiling"]})}),ne=(0,eQ.Iz)(function(e){return(0,eu.eU)({id:e,rectAtom:(0,eu.eU)((0,m._)({},e2)),panes:[],path:["tiling"],activeIndex:0})}),nn=(0,eu.eU)(function(){return 32}),nt=(0,eu.eU)({x:0,y:0,width:0,height:0}),nr=t(79166),ni=(0,eu.eU)(null),no=(0,eu.eU)(null,function(e,n,t){t!==e(ni)&&n(ni,t)}),na=(0,eu.eU)(null,function(e,n,t){var r=e5(t);e(r).isCommitted||n(r,function(e){return(0,eJ.jM)(e,function(e){e.isCommitted=!0})})}),nl=(0,eu.eU)(function(e){var n=e(ni);if(!n)return null;var t=e(e5(n)),r=e(t.dataAtom);return"markdown"===r.type?r.data.path:(0,nr.xS)(r)&&r.data.path||null}),nc=(0,eu.eU)(null),nu=t(30908),ns=(0,eu.eU)(null),nd=(0,eu.eU)(null,function(e,n,t){nu.A.set(ng(t.popupId),Date.now()+6048e5),nu.A.set(nh(t.popupId),t.state);var r=!0,i=!1,o=void 0;try{for(var a,l=nu.A.keys().filter(function(e){return e.startsWith(nf)})[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,u=nu.A.get(c);if("number"==typeof u&&u<Date.now()){var s=c.split(":")[1];nu.A.remove(ng(s)),nu.A.remove(nh(s))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}),np=(0,eu.eU)(function(e){return!!e(ns)}),nf="popup-id-ttl:";function nh(e){return"".concat("popup-id-data:").concat(e)}function ng(e){return"".concat(nf).concat(e)}var nm=(0,eu.eU)(!0),nv=(0,eu.eU)(!1),ny=(0,eu.eU)({tiling:null,floating:[]}),nw=(0,eu.eU)(function(e){return e(e7).filter(function(n){return(0,nr.xS)(e(n.dataAtom))})}),nb=(0,eu.eU)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(e7)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&(0,nr.xS)(e(a.dataAtom)))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),nx=(0,eu.eU)(function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e(e7)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value;if(!a.isCommitted&&!(0,nr.xS)(e(a.dataAtom)))return a.paneId}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return null}),nY=(0,eu.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e3)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),nS=(0,eu.eU)([]),nA=(0,eu.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e6)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),n_=(0,eu.eU)(function(e){var n=[],t=!0,r=!1,i=void 0;try{for(var o,a=e(e7)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;n.push([l.paneId,e(l.dataAtom)])}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return n}),nk=(0,eu.eU)(function(e){return e(n_).length}),nC=(0,eu.eU)(function(e){var n=e(nt);return!!(n.width&&n.height)}),nI=(0,eu.eU)(null),nD=(0,eu.eU)(function(e){var n=e(ni);if(!n)return null;var t=e(e5(n)).rectAtom,r=e(t),i=e(nn);return{x:r.x,y:r.y-i,width:r.width,height:r.height+i}}),nE=(0,eu.eU)(null,function(e,n,t){var r=e(e7).find(function(n){var r=e(n.dataAtom);return(0,nr.xS)(r)?t===(0,nr.Vj)(r):"markdown"===r.type&&t===r.data.path});r&&(n(no,r.paneId),n(na,r.paneId))}),nR=(0,eu.eU)(null),nU=(0,eu.eU)(!1),nF=(0,eu.eU)(function(e){return e(nU)?e(ni):null}),nP=(0,eu.eU)(null,function(e,n,t){n(no,t),n(nU,!0)}),nO=(0,eu.eU)(null,function(e,n,t){n(nU,!0);var r=eO(e(ny),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(nI,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(nI,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/maximizePaneGroupAtom"}),a}n(no,o)}),nT=(0,eu.eU)(null,function(e,n){e(np)||n(nU,!1)}),nL=(0,eu.eU)(null,function(e,n,t){e(nF)===t?n(nT):n(nP,t)}),nM=(0,eu.eU)(null,function(e,n,t){var r=eO(e(ny),t.paneGroupId);if(!r){var i=Error("Expected paneGroup");throw n(nI,{error:i,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),i}var o=r.panes[r.activeIndex];if(!o){var a=Error("Expected paneId");throw n(nI,{error:a,tags:{layoutstate:!0},origin:"Layout: state/maximize/toggleMaximizePaneGroupAtom"}),a}n(nL,o)}),nG=(0,eu.eU)(function(e){var n=e(nt);return{x:-n.x,y:-n.y,width:n.width+n.x,height:n.height+n.y}}),nN=(0,eu.eU)(function(e){var n=e(nn),t=e(nG);return{x:t.x,y:t.y,width:t.width,height:n}}),nB=(0,eu.eU)(function(e){var n=e(nn),t=e(nG);return{x:t.x,y:t.y+n,width:t.width,height:t.height-n}}),nH=(0,eu.eU)(null),nz=(0,eu.eU)(null,function(e,n,t){n(nH,t)}),nW=(0,eu.eU)(null,function(e,n){n(nH,null)}),nj=(0,eu.eU)(null),n$=(0,eu.eU)(null,function(e,n,t){var r=e(nj);r&&clearTimeout(r),n(nH,t),n(nj,setTimeout(function(){n(nW)},function(e){for(var n=null!=(u=e.duration)?u:0,t=null!=(s=e.delay)?s:0,r=0,i=[e.panes,e.headers];r<i.length;r++){var o=i[r];if(o){var a=!0,l=!1,c=void 0;try{for(var u,s,d,f=o[Symbol.iterator]();!(a=(d=f.next()).done);a=!0){var h=(0,p._)(d.value,2)[1];void 0!==h.duration&&(n=Math.max(n,h.duration)),void 0!==h.delay&&(t=Math.max(t,h.delay))}}catch(e){l=!0,c=e}finally{try{a||null==f.return||f.return()}finally{if(l)throw c}}}}return n+t+10}(t)))});function nZ(e,n){var t=e.x,r=e.y;return t>n.x&&t<n.x+n.width&&r>n.y&&r<n.y+n.height}function nq(e,n){var t,r,i,o,a,l,c,u,s,d=(r=(t={point:e,rect:n}).rect,i=t.point,o=r.height>r.width?r.width/r.height:1,a=r.width>r.height?r.height/r.width:1,l=(i.x-r.x)*a,(s=Math.min(l,c=(r.x+r.width-i.x)*a,u=(i.y-r.y)*o,(r.y+r.height-i.y)*o))===l?"left":s===c?"right":s===u?"top":"bottom"),p={x:n.x,y:n.y,width:n.width,height:n.height},f="below";return"top"===d?(p.height=n.height/2,f="above"):"bottom"===d?(p.height=n.height/2,p.y=n.y+n.height/2,f="below"):"left"===d?(p.width=n.width/2,p.x=n.x,f="leftOf"):"right"===d&&(p.width=n.width/2,p.x=n.x+n.width/2,f="rightOf"),{placement:f,rect:p}}function nV(e){return"handle:"+e.leftPath.join(":")}function nK(e){return(0,J.A)(function(){return(0,eQ.mg)(e,function(e){return{width:e.width,height:e.height}},function(e,n){return e.height===n.height&&e.width===n.width})},[e])}function nJ(e){return(0,J.A)(function(){return(0,eQ.mg)(e,function(e){return{x:e.x,y:e.y}},function(e,n){return e.x===n.x&&e.y===n.y})},[e])}var nQ=(0,eu.eU)(!1),nX=(0,eu.eU)(function(e){var n=e(n_).find(function(e){return"webview"===(0,p._)(e,2)[1].type});if(!n)return null;switch(e(nc)){case"centered":case"centeredVisualPlanner":return null}if(null!==e(nH))return null;var t=e(e5(n[0]));if(t.isHidden)return null;if(e(nF)===n[0]){var r,i=(r=e(nG),{x:r.x+1,y:r.y+1,width:Math.max(0,r.width-2),height:Math.max(0,r.height-2)});return{x:i.x,y:i.y,width:i.width,height:i.height,show:e(nQ)}}var o=e(t.rectAtom),a=e(nn);return{x:o.x,y:o.y-a,width:o.width,height:o.height+a,show:e(nQ)}}),n0=t(23099),n1=t.n(n0),n2=t(72924),n4=eh.ZU.Object({width:eh.ZU.Number({minimum:0}),isOpen:eh.ZU.Boolean()}),n5=(0,eu.eU)({width:180,isOpen:!1}),n7=(0,eu.eU)(function(e){return e(n5).isOpen}),n3=(0,eu.eU)(function(e){var n=e(n5);return n.isOpen?n.width:0}),n6=(0,eu.eU)(!0),n8=(0,eu.eU)(function(e){return e(nv)?16:6}),n9=(0,eu.eU)(function(e){var n=e(nn),t=e(n6),r=e(n5),i=r.isOpen?r.width:0,o=e(nt),a=e(n8),l=i+(t?48:a);return i>0&&(l+=a),{headerHeight:n,inset:{top:0,bottom:a+2,left:l,right:a+2},gap:a,size:{width:o.width,height:o.height}}}),te=(0,eu.eU)(null,function(e,n,t){n(nt,t),n(tt,e(ny))});function tn(e,n){return n1()(e,n)}var tt=(0,eu.eU)(null,function(e,n,t){var r=function(t){var r=t.paneId,i=t.rect,o=t.type,a=t.isHidden;l.delete(r);var c=e5(r),u=e(c);tn(e(u.rectAtom),i)||n(u.rectAtom,i);var s=(0,eJ.jM)(u,function(e){e.paneId=r,e.type=o,e.isHidden=a});tn(u,s)||n(c,s)},i=e(eX),o=e(e0),a=e(e1),l=new Set(i),c=new Set(o),u=new Set(a),s=function(e,n){var t=n.size,r=n.gap,i=n.headerHeight,o=n.inset,a=void 0===o?eG:o,l=[],c=[],u=[],s=[],d=null,p={x:a.left,y:a.top,width:t.width-(a.left+a.right),height:t.height-(a.top+a.bottom)},f=e.tiling;if((null==f?void 0:f.type)==="paneGroup"){var h={x:p.x,y:p.y+i,width:p.width,height:p.height-i},g={x:h.x,y:h.y-i,width:h.width,height:i};s.push({id:f.id,rect:g,panes:f.panes,activeIndex:f.activeIndex,path:["tiling"]}),c.push.apply(c,(0,eE._)(f.panes.map(function(e,n){return{paneId:e,rect:h,active:n===f.activeIndex}})))}else f&&f.children.forEach(function(n,t){return function n(t,o,a,l){var p,f,h,g=o.children.indexOf(t),m=o.children.length,v=o.stacked?a.height:a.width,y=(p=a.width,f=a.height,h=t.percent/100,o.stacked?f=(v-(r*(m-1)+i*m))*h+i:p=(v-r*(m-1))*h,{width:p,height:f}),w=y.width,b=y.height,x=function(){var e=a.x,n=a.y;if(0===g)return{x:e,y:n};if(!d)throw Error("Expected previousRect");return o.stacked?n=d.y+d.height+r:e=d.x+d.width+r,{x:e,y:n}}(),Y={x:x.x,y:x.y,height:b,width:w};if(d=Y,"paneGroup"===t.type){var S={x:Y.x,y:Y.y+i,width:Y.width,height:Y.height-i},A={x:S.x,y:S.y-i,width:S.width,height:i};s.push({id:t.id,rect:A,panes:t.panes,activeIndex:t.activeIndex,path:l}),c.push.apply(c,(0,eE._)(t.panes.map(function(e,n){return{paneId:e,rect:S,active:n===t.activeIndex}})))}else t.children.forEach(function(e,r){return n(e,t,Y,(0,eE._)(l).concat([r]))});if(0!==g){var _={x:Y.x-(o.stacked?0:r),y:Y.y-(o.stacked?r:0),width:o.stacked?Y.width:r,height:o.stacked?r:Y.height},k=eC(l),C=(0,eE._)(k).concat([g-1]),I=eU(e,C);if(!I||!eI(I))throw Error("Expected leftNode");var D=void 0;0===I.percent?D="left":0===t.percent&&(D="right"),u.push({parentPath:k,leftPath:C,rightPath:l,stacked:o.stacked,rect:_,snapped:D})}}(n,f,p,["tiling",t])});var m={x:p.x-a.left,y:p.y-a.top,width:p.width+a.left+a.right,height:p.height+a.top+a.bottom};return e.floating.forEach(function(e,n){var t=eN(e.rect,{inside:m,minVisibleX:2*i,minVisibleY:i}),r={height:i,width:e.rect.width,x:t.x,y:t.y},o={x:t.x,y:t.y+i,width:e.rect.width,height:Math.max(e.rect.height-i,0)};s.push({id:e.id,rect:r,panes:e.panes,activeIndex:e.activeIndex,path:["floating",n]}),l.push.apply(l,(0,eE._)(e.panes.map(function(n,t){return{paneId:n,rect:o,active:t===e.activeIndex}})))}),{tiles:c,gutters:u,headers:s,floating:l}}(t,e(n9)),d=s.tiles,p=s.floating,f=s.gutters,h=s.headers,g=f.map(nV);tn(o,g)||n(e0,g);var m=(0,eE._)(d).concat((0,eE._)(p)).map(function(e){return e.paneId});tn(i,m)||n(eX,(0,n2.A)(m,{existing:i,getKey:function(e){return e}}));var v=[];h.forEach(function(t){u.delete(t.id);var r=ne(t.id),i=e(r);v.push(t.id),tn(e(i.rectAtom),t.rect)||n(i.rectAtom,t.rect);var o=(0,eJ.jM)(i,function(e){e.panes=t.panes,e.activeIndex=t.activeIndex,e.path=t.path});tn(i,o)||n(r,o)}),tn(a,v)||n(e1,v),d.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"tile"})}),p.forEach(function(e){r({paneId:e.paneId,rect:e.rect,isHidden:!e.active,type:"floating"})}),f.forEach(function(t){var r={handleId:nV(t),rect:t.rect,parentPath:t.parentPath,leftPath:t.leftPath,rightPath:t.rightPath,stacked:t.stacked,snapped:t.snapped};c.delete(r.handleId);var i=e9(r.handleId);tn(e(i),r)||n(i,r)}),l.forEach(e5.remove),c.forEach(e9.remove),u.forEach(ne.remove);var y=e(ni);y&&l.has(y)&&n(ni,null),n(ny,t)}),tr=eh.ZU.Object({type:eh.ZU.String()}),ti=eh.ZU.Object({visible:eh.ZU.Boolean(),primaryTools:eh.ZU.Array(tr),secondaryTools:eh.ZU.Array(tr)}),to=(0,eu.eU)({visible:!0,primaryTools:[{type:"agentChat"},{type:"ghostwriterChat"}],secondaryTools:[{type:"agentProgress"},{type:"webview"},{type:"runnerOutput"},{type:"neon"},{type:"deployments"}]}),ta=(0,eu.eU)(null,function(e,n){n(to,(0,eJ.jM)(e(to),function(e){e.visible=!1})),n(n6,!1),n(tt,e(ny))}),tl=(0,eu.eU)(null,function(e,n){n(to,(0,eJ.jM)(e(to),function(e){e.visible=!0})),n(n6,!0),n(tt,e(ny))}),tc=(0,eu.eU)(null,function(e,n,t){var r=e(to),i=r.secondaryTools.findIndex(function(e){return e.type===t});-1!==i&&n(to,(0,eJ.jM)(r,function(e){e.secondaryTools.splice(i,1)}))}),tu=(0,eu.eU)(null,function(e,n,t){var r=e(to);r.secondaryTools.some(function(e){return e.type===t.pane.type})||n(to,(0,eJ.jM)(r,function(e){void 0!==t.atIndex?e.secondaryTools.splice(t.atIndex,0,t.pane):e.secondaryTools.push(t.pane)}))});function ts(e){return"extension"===e.type?e.data.installationId:e.type}var td=t(93629),tp=t(79203),tf=t(26325),th=t(94680),tg=t(83846),tm=t(67201),tv=t(13843);function ty(e){var n,t,r,i,o,a,l,c,u,s,d=e.codeEditorPath,p=e.isStacked,f=e.isExtension,h=e.isInPopup,g=e.showAssistantChat,m=(t=(n={isStacked:p,isExtension:f,isInPopup:h,codeEditorPath:d,showAssistantChat:void 0!==g&&g,isBlankRepl:e.isBlankRepl}).isStacked,r=n.isExtension,i=n.isInPopup,a=void 0===(o=n.codeEditorPath)?"":o,l=n.showAssistantChat,c=n.isBlankRepl,u={config:{paneId:(0,tm.A)(),pane:{type:"config",flow:"incompleteConfig"}},codeEditor:{paneId:(0,tm.A)(),pane:{type:a.toLowerCase().endsWith(".md")?"markdown":"codeEditor",data:{path:a}}},output:{paneId:(0,tm.A)(),pane:{type:"runnerOutput"}},shell:{paneId:(0,tm.A)(),pane:{type:"shell"}},commands:{paneId:(0,tm.A)(),pane:{type:"commands",data:{autoFocus:!1}}},ghostwriter:{paneId:(0,tm.A)(),pane:{type:"ghostwriterChat"}},extensionDevtools:{paneId:(0,tm.A)(),pane:{type:"extensionDevtools"}},extensionDocs:{paneId:(0,tm.A)(),pane:{type:"docs",data:{url:tv.ik.EXTENSIONS}}}},s={},Object.values(u).forEach(function(e){var n=e.paneId,t=e.pane;s[n]=t}),{layout:function(e){var n=e.configId,t=e.codeEditorId,r=e.outputId,i=e.shellId,o=e.extensionDevtoolsId,a=e.extensionDocsId,l=e.ghostwriterId,c=e.isStacked,u=e.isExtension,s=e.isInPopup,d=e.showAssistantChat,p=e.isBlankRepl;if(s)return{floating:[],tiling:null};var f=p?[n]:[t],h=[r,i];d&&h.unshift(l);var g=c?{type:"split",stacked:!0,percent:100,children:[{id:(0,tm.A)(),percent:60,type:"paneGroup",panes:f,activeIndex:0},{id:(0,tm.A)(),percent:40,type:"paneGroup",panes:h,activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:(0,tm.A)(),percent:55,type:"paneGroup",panes:f,activeIndex:0},{id:(0,tm.A)(),percent:45,type:"paneGroup",panes:h,activeIndex:0}]};return u&&(g=c?{type:"split",stacked:!0,percent:100,children:[{id:(0,tm.A)(),percent:40,type:"paneGroup",panes:f,activeIndex:0},{id:(0,tm.A)(),percent:60,type:"paneGroup",panes:[o,a,i],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:(0,tm.A)(),percent:55,type:"paneGroup",panes:f,activeIndex:0},{id:(0,tm.A)(),percent:45,type:"paneGroup",panes:[o,a,i],activeIndex:0}]}),p||(g={type:"split",stacked:!1,percent:100,children:[{id:(0,tm.A)(),percent:40,type:"paneGroup",panes:[l],activeIndex:0},{id:(0,tm.A)(),percent:60,type:"paneGroup",panes:[t],activeIndex:0}]}),{floating:[],tiling:g}}({configId:u.config.paneId,codeEditorId:u.codeEditor.paneId,outputId:u.output.paneId,shellId:u.shell.paneId,commandsId:u.commands.paneId,extensionDevtoolsId:u.extensionDevtools.paneId,extensionDocsId:u.extensionDocs.paneId,ghostwriterId:u.ghostwriter.paneId,isStacked:t,isExtension:r,isInPopup:i,showAssistantChat:l,isBlankRepl:c}),data:s});return{data:m.data,layout:m.layout,type:"default",sidebarPercent:0}}var tw=t(29935),tb=t(82643),tx=t(81869),tY=(0,eu.eU)(function(e){var n=e(ny),t={};return e(e7).forEach(function(n){t[n.paneId]=e(n.dataAtom)}),{layout:n,data:t,agentMode:null!==e(nc)?{isActive:!0,sidebarPercent:0,layout:{tiling:null,floating:[]}}:void 0,sidebar:e(n5),dock:e(to)}}),tS=(0,eu.eU)(null),tA=(0,eu.eU)(null),t_=(0,eu.eU)(null);function tk(){return(tk=(0,tw._)(function(e,n){var t,r;return(0,tb.YH)(this,function(i){switch(i.label){case 0:r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===tx.V||void 0===tx.V?void 0:tx.V.mutate({mutation:$,variables:{input:{replId:e,state:n}}})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{success:!1,retry:!0}];case 4:if((null==r||null==(t=r.data)?void 0:t.setReplLayoutState.__typename)==="Repl")return[2,{success:!0,retry:void 0}];return[2,{success:!1,retry:!1}]}})})).apply(this,arguments)}var tC=(0,eu.eU)(null,function(){var e=(0,tw._)(function(e,n,t){var r,i,o,a,l,c,u;return(0,tb.YH)(this,function(s){switch(s.label){case 0:if((r=e(tA))&&!r.retry||r&&Date.now()-r.timestamp<6e4||!e(nC)||(i=e(tY),o=t.replId,a=e(tS),!t.force&&n1()(a,i)))return[2];if(l=e(ns))return n(nd,{popupId:l,state:i}),n(tS,i),[2];return n(t_,c=(0,tm.A)()),[4,function(e,n){return tk.apply(this,arguments)}(o,i)];case 1:if(u=s.sent(),e(t_)!==c)return[2];if(n(t_,null),u.retry)return n(tA,{timestamp:Date.now(),retry:!0}),[2];if(!u.success)return n(tA,{timestamp:Date.now(),retry:!1}),[2];return n(tS,i),[2]}})});return function(n,t,r){return e.apply(this,arguments)}}()),tI=(0,eu.eU)(null,function(e,n,t){var r=t.data,i=t.layout,o=t.sidebar,a=t.dock,l=t.type,c=t.agentMode;Object.entries(r).forEach(function(t){var r=(0,p._)(t,2),i=r[0],o=r[1],a=e5(i);n(a,(0,eJ.jM)(e(a),function(e){e.isCommitted=!0})),n(e(a).dataAtom,o)}),n(ny,i),c&&n(nc,"default"===l?"centered":"tilingLayout"),o&&"saved"===l&&n(n5,o),a&&n(to,a),n(tt,i),n(nR,l),n(tS,e(tY))}),tD=t(16182),tE=t.n(tD),tR=(0,eu.eU)(null,function(e,n,t){var r=eO(e(ny),t);if(!r)return null;n(no,r.panes[r.activeIndex])}),tU=(0,eu.eU)(null,function(e,n,t){var r=e(ny),i=eF(r,t);if(!i)throw Error("Expected pane");var o=!i.paneGroup.panes.some(function(e){return e!==t}),a=t===e(ni),l=eL(r,t),c=(0,eJ.jM)(r,function(e){try{ej(e,t)}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});if(n(tt,c),o&&e(nU)&&!e(np)&&n(nU,!1),a&&(o||n(tR,i.paneGroup.id),o&&l)){do"split"===l.type&&(l=l.children[0]);while("paneGroup"!==l.type);n(tR,l.id)}}),tF=(0,eu.eU)(null,function(e,n,t){var r=e(ny),i=eF(r,t),o=null==i?void 0:i.paneGroup.panes.filter(function(e){return e!==t});if(null==o?void 0:o.length){var a=(0,eJ.jM)(r,function(e){try{var t=!0,r=!1,i=void 0;try{for(var a,l=o[Symbol.iterator]();!(t=(a=l.next()).done);t=!0){var c=a.value;ej(e,c)}}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/removePane/removePaneAtom"}),e}});n(tt,a)}}),tP=(0,eu.eU)(null,function(e,n,t){var r=e(ny),i=eF(r,t);i&&n(tt,(0,eJ.jM)(r,function(e){var n=!1,r=!0,o=!1,a=void 0;try{for(var l,c=i.paneGroup.panes[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;n&&ej(e,u),u===t&&(n=!0)}}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}))}),tO=(0,eu.eU)(null,function(e,n,t){var r=e(ny),i=eO(r,t.paneGroupId);if(!i){var o=Error("Expected pane group");throw n(nI,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),o}var a=(0,eJ.jM)(r,function(e){try{i.panes.forEach(function(n){ej(e,n)})}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/removePaneGroupAtom"}),e}});e(nU)&&!e(np)&&n(nU,!1),n(tt,a)}),tT=(0,eu.eU)(null,function(e,n,t){var r=e(ny),i=eF(r,t.paneId);if(!i){var o=Error("Expected relativeToPane");throw n(nI,{error:o,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),o}var a=(0,tm.A)();n(e(e5(a)).dataAtom,{type:"commands",data:{autoFocus:!!t.autoFocus}});var l=(0,eJ.jM)(r,function(e){try{eB(e,{id:(0,tm.A)(),isFloating:!1,placement:t.placement,relativeTo:i.paneGroupPath,panes:[a]})}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/splitPaneAtom"}),e}});n(tt,l),n(no,a)}),tL=(0,eu.eU)(null,function(e,n,t){var r=e(ny),i=(0,tm.A)();n(e(e5(i)).dataAtom,t.pane),(0,nr.NM)(t.pane)&&n(na,i);var o=(0,eJ.jM)(r,function(e){try{eB(e,{id:(0,tm.A)(),isFloating:!1,placement:t.placement,relativeTo:t.relativeTo,panes:[i],percent:t.percent})}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/splits/insertSplitPaneAtom"}),e}});return n(tt,o),i}),tM=(0,eu.eU)(null,function(e,n,t){var r=e(ny);n(tt,(0,eJ.jM)(r,function(e){eV(e,{leftPath:t.leftPath,percent:t.percent})}))}),tG=t(56262),tN=(0,eu.eU)(null,function(e,n,t){if(0===t.panes.length){var r=Error("Expect at least one pane");throw n(nI,{error:r,origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),r}var i=e(ny),o=t.panes.map(function(){return(0,tm.A)()}),a=(0,eJ.jM)(i,function(e){try{eB(e,{id:(0,tm.A)(),panes:o,relativeTo:t.relativeTo||["tiling"],placement:t.placement,percent:t.percent})}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertPaneGroupAtom"}),e}});if(n(tt,a),t.panes.forEach(function(t,r){var i=o[r];n(e(e5(i)).dataAtom,t),(0,nr.NM)(t)&&n(na,i);var a=(0,nr.gG)(t.type)?e(e7).find(function(n){return e(n.dataAtom).type===t.type&&n.paneId!==i}):null;a&&n(tU,a.paneId)}),t.commit){var l=!0,c=!1,u=void 0;try{for(var s,d=o[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(na,p)}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}return t.makeActive&&n(no,o[0]),o}),tB={top:"above",left:"leftOf",right:"rightOf",bottom:"below"},tH=(0,eu.eU)(null,function(e,n,t){n(tL,{pane:t.pane,relativeTo:["tiling"],placement:tB[t.edge]})}),tz=(0,eu.eU)(null,function(e,n,t){var r=e(ny),i=(0,tm.A)(),o=(0,tm.A)(),a=(0,eJ.jM)(r,function(e){try{eB(e,{id:o,panes:[i],isFloating:!0,rect:t.rect})}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/insertPaneGroup/insertFloatingPaneGroupAtom"}),e}});return n(tt,a),n(e(e5(i)).dataAtom,t.pane),(0,nr.NM)(t.pane)&&n(na,i),t.makeActive&&(n(no,i),t.makeModal&&n(tG.LY,o)),i}),tW=(0,eu.eU)(null,function(e,n,t){var r=t.paneId,i=t.activate,o=e(ny);if("tile"===e(e5(r)).type?n(tt,(0,eJ.jM)(o,function(e){try{!function(e,n){var t=eF(e,n.paneId);if(t){var r=t.paneGroupPath;t.paneGroup.activeIndex=t.index;var i=r.map(function(e,n){return r.slice(0,n+1)}),o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value,d=eU(e,s);if(!d)throw Error("Expected node");if("floatingPaneGroup"===d.type)throw Error("Expected tiled pane");if(1!==s.length){var p=s[s.length-1];if("number"!=typeof p)throw Error("Expected number");var f=eU(e,eC(s));if((null==f?void 0:f.type)!=="split")throw Error("Expected split");var h=f.stacked?n.minPercentVertical:n.minPercentHorizontal;if(!(d.percent>=h)){var g=p===f.children.length-1,m=g?(0,eE._)(s.slice(0,-1)).concat([p-1]):s,v=g?f.children[p-1].percent-(h-d.percent):h;eV(e,{leftPath:m,percent:v})}}}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}}(e,{paneId:r,minPercentHorizontal:30,minPercentVertical:20})}catch(e){throw n(nI,{error:e,origin:"Layout: revealPaneAtom/revealTiledPane"}),e}})):n(tt,(0,eJ.jM)(o,function(e){try{!function(e,n){var t=eF(e,n.paneId);if(t){var r=t.paneGroup;if("floatingPaneGroup"!==r.type)throw Error("Expected floatingPaneGroup");r.activeIndex=t.index,r.rect.width=Math.max(r.rect.width,n.minWidth),r.rect.height=Math.max(r.rect.height,n.minHeight)}}(e,{paneId:r,minWidth:200,minHeight:140})}catch(e){throw n(nI,{error:e,origin:"Layout: revealPaneAtom/revealFloatingPane"}),e}})),!i){var a=eF(o,r),l=e(ni);if(!a)throw Error("Expected pane");if(!l)return;var c=eF(o,l);if(!c)throw Error("Expected active pane");if(c.paneGroup.id!==a.paneGroup.id)return}n(no,r)}),tj=(0,eu.eU)(null,function(e,n,t){if(0===t.panes.length)return[];var r=e(ny),i=t.panes.map(function(){return(0,tm.A)()}),o=(0,eJ.jM)(r,function(e){try{ez(e,{paneIds:i,activate:t.activate,paneGroupId:t.paneGroupId,index:t.index})}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/insertPanesAtom"}),e}});return n(tt,o),t.panes.forEach(function(r,o){var a=i[o];n(e(e5(a)).dataAtom,r);var l=(0,nr.gG)(r.type)?e(e7).find(function(n){return e(n.dataAtom).type===r.type&&n.paneId!==a}):null;l&&n(tU,l.paneId),(t.commit||(0,nr.NM)(r))&&n(na,a)}),t.activate&&n(tW,{paneId:(0,p._)(i,1)[0],activate:!0}),i}),t$=(0,eu.eU)(null,function(e,n,t){var r=t.pane,i=t.activate,o=t.commit,a=t.placement,l=e(ny);if(!l.tiling){var c=n(tL,{pane:r,relativeTo:["tiling"],placement:"replace"});return i&&n(no,c),c}if("after"===a.type){var u=eF(l,a.paneId);if(u){var s=(0,p._)(n(tj,{panes:[r],paneGroupId:u.paneGroup.id,index:u.index+1,activate:i}),1)[0];return i&&n(no,s),s}}if("secondary"===a.type&&a.relativeTo){var d=eL(l,a.relativeTo);if(d){if("paneGroup"===d.type){var f=(0,p._)(n(tj,{panes:[r],paneGroupId:d.id,activate:i}),1)[0];return i&&n(no,f),f}var h=n(tL,{pane:r,relativeTo:a.relativeTo,placement:"rightOf"});return i&&n(no,h),h}var g=eF(l,a.relativeTo);if((null==g?void 0:g.paneGroup.type)==="floatingPaneGroup"){var m=e(e5(a.relativeTo)),v=e(m.rectAtom);return n(tz,{rect:{x:v.x+v.width,y:v.y,width:v.width,height:v.height},pane:r,makeActive:i})}}var y=n(tL,{pane:r,relativeTo:["tiling"],placement:"rightOf"});return i&&n(no,y),o&&n(na,y),y}),tZ=t(33090),tq=(0,eu.eU)(null,function(e,n,t){var r;n(e(e5(t.paneId)).dataAtom,t.pane),(t.makeActive||t.reveal)&&n(tW,{paneId:t.paneId,activate:null!=(r=t.makeActive)&&r}),(t.commit||(0,nr.NM)(t.pane))&&n(na,t.paneId)}),tV=(0,eu.eU)(null,function(e,n,t){var r=e(ny),i=eF(r,t);if(!i){var o=Error("Expected selectedPane");throw n(nI,{error:o,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),o}n(ne(i.paneGroup.id),function(e){return(0,eJ.jM)(e,function(e){e.activeIndex=i.index})});var a=!0,l=!1,c=void 0;try{for(var u,s=i.paneGroup.panes[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value,p=e5(d);n(p,function(e){return(0,eJ.jM)(e,function(e){e.isHidden=e.paneId!==t})})}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}n(ny,(0,eJ.jM)(r,function(e){try{var r=eF(e,t);if(!(null==r?void 0:r.paneGroup))throw Error("Expected pane group");var i=r.paneGroup,o=i.panes.indexOf(t);if(-1===o)throw Error("Expected index");i.activeIndex=o}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/selectTabAtom"}),e}})),0===e(e(e5(t)).rectAtom).width?n(tW,{paneId:t,activate:!0}):n(no,t)}),tK=(0,eu.eU)(null,function(e,n,t){var r=e(ny),i=eP(r,"topRight"),o=eP(r,"topLeft");if(!i||!o||!r.tiling){var a=n(tL,{pane:t,relativeTo:["tiling"],placement:"replace"});n(na,a);return}if("paneGroup"===r.tiling.type){var l=n(tL,{pane:t,relativeTo:["tiling"],placement:"rightOf"});n(na,l);return}if("split"===r.tiling.type&&2===r.tiling.children.length&&"paneGroup"===r.tiling.children[1].type){var c=r.tiling.stacked,u=n(tL,{pane:t,relativeTo:i.path,placement:c?"rightOf":"above"});n(na,u);return}n(tj,{panes:[t],paneGroupId:i.paneGroup.id,commit:!0})}),tJ=(0,eu.eU)(null,function(e,n,t){var r=t.pane,i=t.focusIfExists,o=e(e7).find(function(n){return e(n.dataAtom).type===r.type});if(o){i&&(n(tV,o.paneId),n(na,o.paneId));return}n(tK,r)}),tQ=(0,eu.eU)(null,function(e,n,t){if(!e(e7).find(function(n){var r,i,o,a,l,c,u,s=e(n.dataAtom);return"webview"===s.type&&(u=s&&s.data,!t&&!u||!!t&&!!u&&(null==(r=t.ports)?void 0:r.port)===(null==(i=u.ports)?void 0:i.port)&&(null==(o=t.ports)?void 0:o.type)===(null==(a=u.ports)?void 0:a.type)&&(null==(l=t.ports)?void 0:l.path)===(null==(c=u.ports)?void 0:c.path))}))return void n(tK,{type:"webview",data:t})}),tX=(0,eu.eU)(null,function(e,n,t){var r=e(ny),i=(0,eJ.jM)(r,function(e){var r=eF(e,t.paneId);if(!r){var i=Error("Expected pane");throw n(nI,{error:i,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),i}var o=eO(e,t.toPaneGroupId);if(!o){var a=Error("Expected toPaneGroup");throw n(nI,{error:a,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),a}var l=1===r.paneGroup.panes.length,c=!o.panes.includes(t.paneId);if(!l||c)try{ej(e,t.paneId),ez(e,{paneIds:[t.paneId],paneGroupId:t.toPaneGroupId,index:t.index}),c&&n(na,t.paneId)}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/tabs/movePaneAtom"}),e}});n(tt,i)}),t0=(0,eu.eU)(null,function(e,n,t){var r=e(ni);if(r){var i=e(ny),o=eF(i,r);if(o){var a=o.paneGroup,l=eM({relativeTo:r,rects:new Map(e(e7).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t}),c=l?eF(i,l):null;if(c)return void n(tX,{paneId:r,toPaneGroupId:c.paneGroup.id});var u=a.panes.find(function(e){return e!==r});u&&n(tt,(0,eJ.jM)(i,function(e){ej(e,r),eB(e,{id:(0,tm.A)(),relativeTo:u,panes:[r],placement:t})}))}}}),t1=(0,eu.eU)(!1),t2=(0,eu.eU)(null,function(e,n,t){var r=e(nw).map(function(n){return{paneId:n.paneId,path:(0,nr.Vj)(e(n.dataAtom))}}).filter(function(e){return t===e.path}),i=[],o=e(ny),a=(0,eJ.jM)(o,function(e){var t=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var u=l.value.paneId,s=eF(e,u);if(!s){var d=Error("Expected pane");throw n(nI,{error:d,tags:{layoutstate:!0},origin:"Layout: state/tabs/removePanesForFileAtom"}),d}s.floating||1!==s.paneGroup.panes.length?ej(e,u):i.push(u)}}catch(e){o=!0,a=e}finally{try{t||null==c.return||c.return()}finally{if(o)throw a}}}),l=!0,c=!1,u=void 0;try{for(var s,d=i[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var p=s.value;n(tq,{paneId:p,pane:{type:"commands",data:{autoFocus:!1}}})}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}n(tt,a)}),t4=(0,eu.eU)(null,function(e,n,t){var r=t.node.path;if(t.eventType===tZ.dV.Delete)return void n(t2,r);var i=e(nw).filter(function(n){return(0,nr.Vj)(e(n.dataAtom))===r}),o={type:(0,nr.QY)({path:t.to}),data:{path:t.to}},a=!0,l=!1,c=void 0;try{for(var u,s=i[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var d=u.value.paneId;n(tq,{paneId:d,pane:o})}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}}),t5=(0,eu.eU)(null,function(e,n,t){var r=e(ni),i=e(ny);if(r){var o=eF(i,r);if(o)return void n(tj,{panes:t,paneGroupId:null==o?void 0:o.paneGroup.id,activate:!0,index:o.index+t.length})}var a=eP(i,"topLeft");if(a)return void n(tj,{activate:!0,paneGroupId:a.paneGroup.id,index:a.paneGroup.activeIndex+t.length,panes:t});var l=i.floating.length?i.floating[0]:null;if(l)return void n(tj,{activate:!0,paneGroupId:l.id,index:l.activeIndex+t.length,panes:t});n(tN,{panes:t,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),t7=(0,eu.eU)(null,function(e,n){n(t5,[{type:"commands",data:{autoFocus:!0}}])}),t3=(0,eu.eU)(null,function(e,n){var t=e(ni);return!!t&&(n(tU,t),!0)}),t6=(0,eu.eU)(null,function(e,n,t){var r=e(ni);if(r){var i=function(e,n){var t=n.paneId,r=n.dir,i=eF(e,t);if(i){var o=i.index,a=i.paneGroup.panes;return"previous"===r?a[0===o?a.length-1:o-1]:a[o===a.length-1?0:o+1]}}(e(ny),{paneId:r,dir:t});i&&n(tV,i)}}),t8=(0,eu.eU)(null,function(e,n,t){var r=t.paneId,i=t.pane;n(tq,{paneId:r,pane:i});var o=(0,nr.gG)(i.type)?e(e7).find(function(n){return e(n.dataAtom).type===i.type&&n.paneId!==r}):null;if(o){var a=eF(e(ny),o.paneId);if(!(null==a?void 0:a.floating)&&(null==a?void 0:a.paneGroup.panes.length)===1)return void n(tq,{paneId:o.paneId,pane:{type:"commands",data:{autoFocus:!1}}});n(tU,o.paneId)}}),t9=(0,eu.eU)(null,function(e,n,t){var r=e(e(e5(t.b)).dataAtom);n(tq,{paneId:t.a,pane:r});var i=eF(e(ny),t.b);if(!(null==i?void 0:i.floating)&&(null==i?void 0:i.paneGroup.panes.length)===1)return void n(t8,{paneId:t.b,pane:{type:"commands",data:{autoFocus:!1}}});n(tU,t.b)}),re=(0,eu.eU)(null,function(e,n,t){var r,i,o=e(ny),a=t.activate,l=void 0===a||a,c=t.update,u=void 0===c||c,s=function(e){return n(tV,e.paneId),u&&n(tq,{paneId:e.paneId,pane:t.pane,makeActive:l,reveal:t.reveal}),e.paneId};if("diff"===t.pane.type||"webview"===t.pane.type){var d=e(e7).find(function(n){var r=e(n.dataAtom);return tE()(r,t.pane)});if(d)return s(d)}var p=e(e7).find(function(n){return e(n.dataAtom).type===t.pane.type});if((0,nr.gG)(t.pane.type)&&p)return s(p);var f=eP(o,"topRight"),h=eP(o,"topLeft"),g=f,m="rightOf";if("agentChat"===t.pane.type||"ghostwriterChat"===t.pane.type?(null==(i=o.tiling)?void 0:i.type)==="paneGroup"?(g=null,m="leftOf"):g=h:(null==(r=o.tiling)?void 0:r.type)==="paneGroup"&&(g=null,m="rightOf"),!g)return n(tN,{panes:[t.pane],placement:m,relativeTo:["tiling"],makeActive:l,commit:t.commit})[0];var v=g.paneGroup.panes.find(function(n){var t=e(e5(n));if(t.isHidden)return!1;var r=e(t.dataAtom);return!t.isCommitted&&!(0,nr.Dx)(r.type)});if(v)return n(tq,{paneId:v,pane:t.pane,makeActive:l,reveal:t.reveal}),v;var y=n(tj,{panes:[t.pane],paneGroupId:g.paneGroup.id,activate:l,commit:t.commit});return t.reveal&&n(tW,{paneId:y[0],activate:l}),y[0]}),rn=t(50301),rt=(0,g.createContext)(null);function rr(e){var n=e.children,t=e.savedLayoutState,r=e.isStacked,i=void 0!==r&&r,o=e.isExtension,a=void 0!==o&&o,l=e.isBlankRepl,c=e.popupId,u=e.initialPane,s=e.agentCenteredLayout,d=void 0!==s&&s,h=e.agentDefaultSplitLayout,v=(0,rn.eg)(),y=(0,p._)((0,g.useState)(function(){var e,n,r,o,s,p=(0,eu.y$)(),f=null!=t?t:ty({isStacked:i,isExtension:a,isInPopup:!!c,showAssistantChat:null==u,isBlankRepl:l});return c&&(p.set(ns,c),p.set(nU,!0),f=(0,td._)((0,m._)({},f),{sidebarPercent:0})),((null==(s=f.agentMode)?void 0:s.isActive)===void 0&&d||v||h)&&(n=(0,tm.A)(),r=(0,tm.A)(),o={tiling:{type:"split",stacked:!1,percent:100,children:[{id:(0,tm.A)(),percent:40,type:"paneGroup",panes:[n],activeIndex:0},{id:(0,tm.A)(),percent:60,type:"paneGroup",panes:[r],activeIndex:0}]},floating:[]},f={data:(e={},(0,tg._)(e,n,{type:"agentChat"}),(0,tg._)(e,r,{type:"webview"}),e),layout:o,type:"default",agentMode:{isActive:!0,layout:{tiling:null,floating:[]}}}),p.set(tI,f),h?p.set(nc,"tilingLayout"):v&&(p.set(nc,"tilingLayout"),p.set(ta)),d&&p.set(nc,"centeredVisualPlanner"),null!=u&&(p.get(e3).some(function(e){return p.get(e.dataAtom).type===(null==u?void 0:u.type)})||p.set(re,{pane:u,commit:!0})),p}),1)[0];return(0,g.useEffect)(function(){v?y.set(ta):y.set(tl)},[v,y]),(0,f.Y)(rt.Provider,{value:y,children:n})}function ri(){var e=(0,g.useContext)(rt);if(!e)throw Error("Expected store in context");return e}function ro(e){return(0,tp.md)(e,{store:ri()})}function ra(e){return(0,th.k)(e,ri())}var rl=function(e){return(0,tp.Xr)(e,{store:ri()})};function rc(e){return(0,tf.yF)((0,g.useCallback)(function(n){return n(e)},[e]),{store:ri()})}var ru=(0,eu.eU)(null),rs=(0,eu.eU)(null,function(e,n){var t=e(n5);n(ru,{startWidth:t.width,startIsOpen:t.isOpen})}),rd=(0,eu.eU)(function(e){return!!e(ru)}),rp=(0,eu.eU)(null,function(e,n,t){var r=e(ru);if(r){var i=.6*e(nt).width,o=Math.min(Math.max(r.startWidth+t,0),i),a=t>0;0===o&&a?o=140:!a&&o<140&&140-o>20&&(o=0),n(n5,function(e){return(0,eJ.jM)(e,function(e){e.width=o,0===o?e.isOpen=!1:e.isOpen=r.startIsOpen})}),r.startIsOpen&&n(tt,e(ny))}}),rf=(0,eu.eU)(null,function(e,n){var t=e(n5),r=e(ru);t.isOpen||n(n5,function(e){return(0,eJ.jM)(e,function(e){var n;e.width=null!=(n=null==r?void 0:r.startWidth)?n:140})}),n(ru,null)}),rh=(0,eu.eU)(function(e){var n=e(n5),t=e(nt),r=e(n8);return n.isOpen?{width:n.width,isOpen:!0,height:t.height-(r+2),x:48,y:0}:{width:n.width,isOpen:!1,height:t.height-(r+2),x:-n.width,y:0}}),rg=(0,eu.eU)(function(e){var n=e(n5),t=e(n8);return n.isOpen?{isOpen:!0,width:t}:{isOpen:!1,width:t}}),rm=t(81986),rv=t(61700),ry=t(36937),rw=t(18509),rb=t(15311),rx=(0,eu.eU)(null),rY=(0,rb.v)(["backgroundColor","borderRadius","zIndex","border","opacity","visibility","width","height","x","y","innerScale","innerOpacity"]),rS=rY.cssVars,rA=rY.styleTokens,r_=(0,eQ.mg)(rx,function(e){return(0,tg._)({},rS.border,(null==e?void 0:e.type)==="detachPreview"&&e.progress<.98?"1px dashed ".concat(ry.LU.foregroundDefault):"1px solid ".concat(ry.LU.accentPrimaryDefault))},n1()),rk=(0,eQ.mg)(rx,function(e){return null==e?void 0:e.rect},n1()),rC=(0,eQ.mg)(rk,function(e){var n;return e?(n={},(0,tg._)(n,rS.width,e.width+"px"),(0,tg._)(n,rS.height,e.height+"px"),n):null},n1()),rI=(0,eQ.mg)(rk,function(e){var n;return e?(n={},(0,tg._)(n,rS.x,e.x+"px"),(0,tg._)(n,rS.y,e.y+"px"),n):null},n1()),rD=(0,eQ.mg)(rx,function(e){var n,t;return e?"detachPreview"===e.type?(n={},(0,tg._)(n,rS.zIndex,rv.W.detachPreview.toString()),(0,tg._)(n,rS.borderRadius,"100%"),(0,tg._)(n,rS.backgroundColor,"transparent"),n):(t={},(0,tg._)(t,rS.zIndex,rv.W.dropPreview.toString()),(0,tg._)(t,rS.borderRadius,"8px"),(0,tg._)(t,rS.backgroundColor,ry.LU.accentPrimaryDimmer),t):null},n1()),rE=(0,eQ.mg)(rx,function(e){var n,t,r;return e?"detachPreview"===e.type?(t={},(0,tg._)(t,rS.opacity,(.5*e.progress).toString()),(0,tg._)(t,rS.visibility,"visible"),t):(r={},(0,tg._)(r,rS.opacity,"0.2"),(0,tg._)(r,rS.visibility,"visible"),r):(n={},(0,tg._)(n,rS.opacity,"0"),(0,tg._)(n,rS.visibility,"hidden"),n)},n1()),rR=(0,eQ.mg)(rx,function(e){return(0,tg._)({},rS.innerOpacity,(null==e?void 0:e.type)==="detachPreview"?"0.5":"0")},n1()),rU=(0,eQ.mg)(rx,function(e){return(0,tg._)({},rS.innerScale,(null==e?void 0:e.type)==="detachPreview"?e.progress.toString():"1")},n1()),rF=(0,rw.x)({root:[{position:"absolute",pointerEvents:"none",opacity:rA.opacity,width:rA.width,height:rA.height,transform:"translate(".concat(rA.x,", ").concat(rA.y,")"),backgroundColor:rA.backgroundColor,borderRadius:rA.borderRadius,border:rA.border,zIndex:rA.zIndex,visibility:rA.visibility,transition:"transform 140ms, width 140ms, height 140ms, border-radius 140ms, opacity 140ms ease-out 200ms","@media (prefers-reduced-motion: reduce)":{transitionDuration:"0ms"}}],inner:[{width:"100%",height:"100%",borderRadius:"100%",background:"radial-gradient(transparent, ".concat(ry.LU.backgroundHighest,")"),opacity:rA.innerOpacity,transform:"scale(".concat(rA.innerScale,")")}]}),rP=(0,g.memo)(function(){var e=(0,g.useRef)(null);(0,rm.d)(e,ra(rI)),(0,rm.d)(e,ra(rC)),(0,rm.d)(e,ra(r_)),(0,rm.d)(e,ra(rD)),(0,rm.d)(e,ra(rE));var n=(0,g.useRef)(null);return(0,rm.d)(n,ra(rR)),(0,rm.d)(n,ra(rU)),(0,f.Y)("div",{ref:e,css:rF.root,children:(0,f.Y)("div",{ref:n,css:rF.inner})})}),rO=(0,eu.eU)(null,function(e,n){n(rx,{type:"dropPreview",rect:e(rL)})}),rT=(0,eu.eU)(null,function(e,n,t){n(rx,null),n(t1,!1),n(tN,{panes:t.panes,placement:"leftOf",makeActive:!0,relativeTo:["tiling"]})}),rL=(0,eu.eU)(function(e){if(e(np))return e(nG);var n=e(nt),t=e(n5),r=t.isOpen?t.width:0,i=e(n8),o=Math.round(r+i)+48-i,a=n.width-r-2*i;return r>0?o+=i:a+=i,{x:o,y:0,width:a,height:n.height-i}});function rM(){var e=(0,v._)(["\n  query FiletypeAssociations {\n    currentUser {\n      id\n      filetypeAssociations\n    }\n  }\n"]);return rM=function(){return e},e}function rG(){var e=(0,v._)(["\n  mutation SetFiletypeAssociation($input: FiletypeAssociationInput!) {\n    setFiletypeAssociation(input: $input) {\n      ... on UserFiletypeAssociations {\n        associations\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return rG=function(){return e},e}var rN={},rB=(0,y.J1)(rM()),rH=(0,y.J1)(rG()),rz=(0,eu.eU)({}),rW=(0,eu.eU)(null),rj=(0,eu.eU)(null,function(){var e=(0,tw._)(function(e,n,t){var r,i,o,a,l,c;return(0,tb.YH)(this,function(u){switch(u.label){case 0:r=e(rz),n(rz,(0,eJ.jM)(r,function(e){if(!t.newAssociation)return void delete e[t.fileExtension];e[t.fileExtension]={extensionId:t.newAssociation.extensionId,fileHandlerId:t.newAssociation.fileHandlerId}})),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,null===tx.V||void 0===tx.V?void 0:tx.V.mutate({mutation:rH,variables:{input:t}})];case 2:if((null==(a=u.sent())||null==(o=a.data)||null==(i=o.setFiletypeAssociation)?void 0:i.__typename)!=="UserFiletypeAssociations")throw Error("Failed to set Filetype Association: "+(null==a||null==(c=a.data)||null==(l=c.setFiletypeAssociation)?void 0:l.message));return[3,4];case 3:return u.sent(),n(rz,r),[3,4];case 4:return[2]}})});return function(n,t,r){return e.apply(this,arguments)}}()),r$=1920/1020,rZ=(0,eu.eU)(null,function(e,n,t){var r,i,o,a,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{location:"bottomRight"},c=e(e7).find(function(n){return e(n.dataAtom).type===t.type});if(c){n(tq,{paneId:c.paneId,pane:t}),l.commit&&n(na,c.paneId);return}var u=e(nt),s=e(nn),d=n(tz,{pane:t,rect:"bottomRight"===l.location?{width:r=Math.min(600,u.width),height:i=Math.min(600/r$+s,u.height),x:u.width-r,y:u.height-i}:(a=Math.min((o=Math.min(600,u.width))/r$+s,u.height),{width:o,height:a,x:(u.width-o)/2,y:(u.height-a)/2})});l.commit&&n(na,d)}),rq=(0,eu.eU)(null,function(e,n,t){e(e7).filter(function(n){return e(n.dataAtom).type===t}).forEach(function(e){return n(tU,e.paneId)})}),rV=(0,eu.eU)(null),rK=(0,eu.eU)(null,function(e,n,t){if("end"===t.type)return void n(rV,null);if("update"===t.type){var r=e(rV);if(!r){var i=Error("Expected tilingResize");throw n(nI,{error:i,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),i}var o=r.stacked,a=r.leftPath,l=r.startPercent,c=r.resizeDistance,u=r.initialLayout,s=r.snapPercent,d=l+(o?t.moveDelta.y:t.moveDelta.x)/c*100;n(tt,(0,eJ.jM)(u,function(e){eV(e,{leftPath:a,percent:d,snapPercent:s})}));return}var p=e(ny),f=t.stacked?window.innerHeight:window.innerWidth,h=eU(p,t.leftPath);if(!h||!eI(h)){var g=Error("Expected left node");throw n(nI,{error:g,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),g}var m=eC(t.leftPath),v=h.percent,y=null;try{y=function(e){var n=e.layout,t=e.splitPath,r=e.tilingOptions,i=function(e,n){var t=n.splitPath,r=eU(e,t);if(!r||"split"!==r.type)throw Error("Expected split node");for(var i=100,o=eC(t);o.length;){var a=eU(e,o);if(!a)break;o=eC(o),"split"===a.type&&a.stacked===r.stacked&&(i*=a.percent/100)}return i}(n,{splitPath:t}),o=eU(n,t);if((null==o?void 0:o.type)!=="split")throw Error("Expected split node");var a=r.size,l=r.gap,c=r.headerHeight,u=r.inset,s=void 0===u?{top:0,bottom:0,left:0,right:0}:u,d=o.children.length,p=o.stacked?l*(d-1)+c*d:l*(d-1);return i/100*((o.stacked?a.height-(s.top+s.bottom):a.width-(s.left+s.right))-p)}({splitPath:m,layout:p,tilingOptions:e(n9)})}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/resizeTiling"}),e}if(null===y)throw Error("Expected resizeDistance");n(rV,{stacked:t.stacked,leftPath:t.leftPath,startPercent:v,resizeDistance:y,snapPercent:30/f*100,initialLayout:p})});function rJ(e){return(0,J.A)(function(){return e9(e)},[e])}function rQ(e){var n=rJ(e);return(0,J.A)(function(){return(0,eQ.mg)(n,function(e){return e.rect})},[n])}function rX(e){return(0,J.A)(function(){return(0,eu.eU)(function(n){var t=n(rV);return!!t&&e===nV({leftPath:t.leftPath})})},[e])}function r0(e){var n=rJ(e);return(0,J.A)(function(){return(0,eQ.mg)(n,function(e){return e.stacked})},[n])}var r1={width:100,height:200},r2={width:200,height:100},r4=function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=n.width-t,o=n.width-r2.width/2-i/2,a=(n.height-r)/2-r1.height/2;return{middle:{rect:{x:0,y:0,width:0,height:0},paneId:null,visible:!1},above:{visible:!1,rect:{x:o,y:0,width:r2.width,height:r2.height}},below:{visible:!1,rect:{x:o,y:n.height-r2.height-r,width:r2.width,height:r2.height}},leftOf:{visible:!1,rect:{x:t+r,y:a,width:r1.width,height:r1.height}},rightOf:{visible:!1,rect:{x:n.width-r1.width-r,y:a,width:r1.width,height:r1.height}}}},r5=["above","rightOf","leftOf","below","middle"],r7=(0,eu.eU)(null),r3=(0,eu.eU)(function(e){var n=e(r7);if(!n)return null;var t=eO(e(ny),n.paneGroupId);return t&&t.panes[t.activeIndex]||null}),r6=(0,eQ.mg)(r7,function(e){return null==e?void 0:e.dropPoints}),r8=(0,eu.eU)(null,function(e,n,t){if(!e(nU)){var r=e(nt),i=eO(e(ny),t.paneGroupId);if(!i){var o=Error("Expected paneGroup");throw n(nI,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e(e5(i.panes[i.activeIndex])),l=e(a.rectAtom),c=e(nn),u={x:l.x,y:l.y-c,width:l.width,height:l.height+c},s=t.mouse.x-(r.x+l.x),d=e(n8);n(nz,{duration:140,panes:new Map([[a.paneId,{duration:0}]]),headers:new Map([[i.id,{duration:0}]])}),n(r7,{startType:a.type,startPoint:{x:t.mouse.x-r.x,y:t.mouse.y-r.y},paneGroupId:t.paneGroupId,transformOriginX:Math.round(s)+"px",scale:1,fromRect:u,movedAtAll:!1,dropPoints:"floating"===a.type?r4({container:r,sidebarWidth:e(n3),gap:d}):null})}}),r9=(0,eu.eU)(null,function(e,n,t){if(!e(nU)){var r=e(r7);if(!r)return void n(rx,null);var i=t.delta,o=r.paneGroupId,a=r.fromRect,l=e(ny),c=eO(e(ny),o);if(!c){var u=Error("Expected paneGroup");throw n(nI,{error:u,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),u}var s=c.panes[c.activeIndex],d=eF(l,s);if(!d){var f=Error("Expected pane");throw n(nI,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),f}var h=e5(s),g=ne(d.paneGroup.id),m=e(nn),v=Math.max(Math.abs(i.x),Math.abs(i.y)),y=v>=50,w=v>0;if(y&&!d.floating){var b=e(h).rectAtom,x=e(b),Y=(0,eJ.jM)(l,function(e){try{eZ(e,{paneGroupPath:d.paneGroupPath,rect:{x:x.x+i.x,y:x.y-m+i.y,width:x.width,height:x.height+m}})}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),e}});n(tt,Y),n(it,t.mouse);return}var S=e(g),A=e(h);c.id===e(tG.LY)&&n(tG.LY,null);var _="floating"===r.startType?eN({x:a.x+i.x,y:a.y+i.y,width:a.width,height:a.height},{inside:e(nt),minVisibleX:2*m,minVisibleY:m}):{x:a.x+i.x,y:a.y+i.y},k=_.x,C=_.y;if(n(S.rectAtom,function(e){return(0,eJ.jM)(e,function(e){e.x=k,e.y=C})}),n(A.rectAtom,function(e){return(0,eJ.jM)(e,function(e){e.x=k,e.y=C+m})}),!y&&!d.floating){var I=r.startPoint,D=1-.7*(1-Math.sqrt(1-Math.pow(v/50,2)));n(rx,{type:"detachPreview",rect:{x:I.x-50,y:I.y-50,width:100,height:100},progress:v/50}),n(r7,(0,eJ.jM)(r,function(e){e.scale=D,e.movedAtAll=e.movedAtAll||w}));return}var E=e(n8);if(r.dropPoints)return void n(r7,function(n){return(0,eJ.jM)(n,function(n){(null==n?void 0:n.dropPoints)&&function(e,n){var t=n.container,r=n.gap,i=n.sidebarWidth,o=n.headerHeight,a=n.paneRects,l=n.mouse,c={x:l.x-t.x,y:l.y-t.y},u=null,s=null;if(a.length){var d=!0,f=!1,h=void 0;try{for(var g,m=a[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=(0,p._)(g.value,2),y=v[0],w=v[1],b={x:w.x-r/2,y:w.y-r/2-o,width:w.width+r,height:w.height+r+o};if(nZ(l,b)){u=y,s=w;break}}}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}if(e.middle.visible=!!s,s){var x={width:Math.min(100,s.width),height:Math.min(100,s.height)};e.middle.paneId=u,e.middle.rect={x:s.x+s.width/2-x.width/2,y:s.y-o+(s.height+o)/2-x.height/2-r,width:x.width,height:x.height+o/2}}}else{var Y={x:t.x+i+r,y:t.y,width:t.width-r-i,height:t.height},S={width:Math.min(100,Y.width),height:Math.min(100,Y.height)};e.middle.rect={x:Y.x+Y.width/2-S.width/2,y:Y.height/2-S.height/2,width:S.width,height:S.height},e.middle.visible=!0}var A=null,_=!0,k=!1,C=void 0;try{for(var I,D=r5[Symbol.iterator]();!(_=(I=D.next()).done);_=!0){var E=I.value,R=e[E].rect;if(nZ(c,R)){A=E;break}}}catch(e){k=!0,C=e}finally{try{_||null==D.return||D.return()}finally{if(k)throw C}}var U=!0,F=!1,P=void 0;try{for(var O,T=r5[Symbol.iterator]();!(U=(O=T.next()).done);U=!0){var L=O.value;e[L].visible=!A||L===A}}catch(e){F=!0,P=e}finally{try{U||null==T.return||T.return()}finally{if(F)throw P}}}(n.dropPoints,{paneRects:e(ie),container:e(nt),sidebarWidth:e(n3),headerHeight:e(nn),gap:E,mouse:t.mouse})})});if(!d.floating)throw Error("Expected floating pane");n(it,t.mouse)}}),ie=(0,eu.eU)(function(e){return e(e7).filter(function(e){return"tile"===e.type&&!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})}),it=(0,eu.eU)(null,function(e,n,t){var r=e(nn),i=e(nt),o=function(e){var n=e.views,t=e.mouse,r=e.container,i=e.headerHeight,o=e.sidebarWidth,a=e.gap,l={x:Math.min(Math.max(t.x-r.x,1),r.width-1),y:Math.min(Math.max(t.y-r.y,1),r.height-1)},c=!0,u=!1,s=void 0;try{for(var d,f=n[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=(0,p._)(d.value,2),g=h[0],m=h[1],v={x:m.x,y:m.y-i,width:m.width,height:i},y={x:v.x-a/2,y:v.y-a/2,width:v.width+a,height:i+a/2};if(nZ(l,y))return{dropPreview:v,drop:{type:"insert",paneId:g}};var w={x:m.x,y:m.y-i,width:m.width,height:m.height+i},b={x:w.x-a/2,y:w.y-a/2,width:w.width+a,height:w.height+a};if(nZ(l,b)){var x=nq(l,w);return{dropPreview:x.rect,drop:{type:"split",relativeTo:g,placement:x.placement}}}}}catch(e){u=!0,s=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw s}}var Y=nq(l,{x:o,y:0,width:r.width-o,height:r.height});return{dropPreview:Y.rect,drop:{type:"split",relativeTo:["tiling"],placement:Y.placement}}}({views:e(ie),container:i,mouse:t,headerHeight:r,sidebarWidth:e(n3),gap:e(n8)}),a=o.drop;n(rx,{type:"dropPreview",rect:o.dropPreview}),n(r7,function(e){return(0,eJ.jM)(e,function(e){e&&(e.drop=a,e.movedAtAll=!0)})})}),ir=(0,eu.eU)(null,function(e,n,t){var r=t.delta;if(!e(nU)){n(rx,null);var i=e(r7);if(i){var o=i.paneGroupId,a=i.drop,l=i.fromRect,c=e(ny),u=eO(e(ny),o);if(!u){var s=Error("Expected paneGroup");throw n(nI,{error:s,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),s}var d=u.panes[u.activeIndex],p=eF(c,d);if(!p){var f=Error("Expected pane");throw n(nI,{error:f,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),f}var h=(0,eJ.jM)(c,function(t){if(!a&&p.floating&&"floating"===i.startType){var o=eU(t,p.paneGroupPath);if((null==o?void 0:o.type)!=="floatingPaneGroup")return;var c=e(nn),u=eN({x:l.x+r.x,y:l.y+r.y,width:l.width,height:l.height},{inside:e(nt),minVisibleX:2*c,minVisibleY:c}),s=u.x,f=u.y;o.rect.x=s,o.rect.y=f;return}if(a){if(p.paneGroup.panes.forEach(function(e){n(na,e)}),"split"===a.type){if(null===t.tiling){var h=(0,tm.A)();try{eB(t,{id:(0,tm.A)(),panes:[h],placement:"leftOf",relativeTo:["tiling"]})}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}}try{!function(e,n){var t=n.from,r=n.to,i=n.placement,o=eF(e,t);if(!o)throw Error("Expected fromPane");var a=o.paneGroup,l=a.panes,c=a.activeIndex;e$(e,o.paneGroupPath),eB(e,{id:o.paneGroup.id,relativeTo:r,panes:l,placement:i,activeIndex:c})}(t,{from:d,to:a.relativeTo,placement:a.placement})}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),e}return}var g=eF(t,a.paneId);p.paneGroup.panes.forEach(function(e){eq(t,{paneId:e,paneGroupPath:(null==g?void 0:g.paneGroupPath)||["tiling"],activate:!1})})}});n(nW),n(r7,null),n(tt,h),(null==a?void 0:a.type)==="insert"&&n(tV,d)}}});function ii(e){var n=il(e);return(0,J.A)(function(){return(0,eu.eU)(function(t){if(t(n))return t(nN);var r=t(ne(e));return t(r.rectAtom)})},[n,e])}function io(e){return(0,J.A)(function(){return(0,eu.eU)(function(n){var t=n(r7);return t&&e===t.paneGroupId?t:null})},[e])}function ia(e){return(0,J.A)(function(){return(0,eQ.mg)(ny,function(n){return eO(n,e)})},[e])}function il(e){var n=ia(e);return(0,J.A)(function(){return(0,eu.eU)(function(e){if(e(np))return!0;if(!e(nU))return!1;var t=e(n);if(!t)return!1;var r=e(ni);return!!r&&t.panes.includes(r)})},[n])}function ic(e){var n=ne(e);return(0,J.A)(function(){return(0,eQ.mg)(n,function(e){return"floating"===e.path[0]})},[n])}var iu=t(41467),is=t(8030),id=(0,eu.eU)(null,function(e,n,t){var r,i=t.path,o=e(ny),a=(0,m._)({},t);if(!a.opener){var l=e(rz),c=(0,is.QC)(i);if(c){var u=l[c];if(u){var s=e(nS).find(function(e){return e.extension.extensionId===u.extensionId});s&&(a.opener={paneType:"extension",extensionFileHandler:s,supports:function(){return!0}})}}}if(a.newPane)return void n(tH,{pane:ip(a),edge:null!=(r=a.newPaneEdge)?r:"left"});var d=eP(o,"topLeft");if(!d)return void n(tL,{pane:ip(a),relativeTo:["tiling"],placement:"replace"});var p=e(e7).find(function(n){var t,r=e(n.dataAtom);return(0,nr.xS)(r)?i===(0,nr.Vj)(r):!!((null==(t=a.opener)?void 0:t.paneType)==="extension"&&(0,nr.En)(r))&&r.data.filePath===i&&a.opener.extensionFileHandler.extension.installationId===r.data.installationId||"markdown"===r.type&&i===r.data.path});if(p&&!a.newTab){var f=e(p.dataAtom);if((0,nr.xS)(f)||"markdown"===f.type){n(tV,p.paneId),n(tq,{paneId:p.paneId,pane:ip((0,m._)({opener:{paneType:f.type}},a))});return}if((0,nr.En)(f))return void n(tV,p.paneId)}var h=d.paneGroup;if(a.newTab)return void n(tj,{panes:[ip(a)],paneGroupId:h.id,activate:!0,commit:!0,index:h.activeIndex+1});var g=e(e7).find(function(n){return!n.isCommitted&&((0,nr.xS)(e(n.dataAtom))||"markdown"===e(n.dataAtom).type)});if(g){n(tq,{paneId:g.paneId,pane:ip(a)}),n(tV,g.paneId);return}var v=e(nw).find(function(n){var t=e(n.dataAtom);return"codeEditor"===t.type&&""===(0,nr.Vj)(t)});if(v){n(tq,{paneId:v.paneId,pane:ip(a)}),n(tV,v.paneId);return}var y=h.panes.find(function(n){var t=e(e5(n));return"commands"===e(t.dataAtom).type});if(y){n(tq,{paneId:y,pane:ip(a)}),n(e5(y),function(e){return(0,eJ.jM)(e,function(e){e.isCommitted=!1})}),n(tV,y);return}n(tj,{panes:[ip(a)],paneGroupId:h.id,activate:!0})});function ip(e){var n=e.path,t=e.col,r=e.line,i=e.opener;if(!(null==i?void 0:i.paneType)&&(0,iu.e$)(n.toLowerCase()))return{type:"markdown",data:{path:n}};if(!(null==i?void 0:i.paneType)&&(0,iu.Zy)(n.toLowerCase()))return{type:"csvPreview",data:{path:n}};var o=(null==i?void 0:i.paneType)||(0,nr.QY)({path:n});if("codeEditor"===o)return{type:"codeEditor",data:{path:n,col:t,line:r}};if("extension"===o){var a=i.extensionFileHandler;return{type:"extension",data:{filePath:n,extensionId:a.extension.extensionId,installationId:a.extension.installationId,name:a.extension.manifest.name,baseUrl:a.extension.baseUrl,path:a.handler}}}return"markdown"===o?{type:"markdown",data:{path:n}}:{type:o,data:{path:n}}}var ih=(0,eu.eU)(null,function(e,n,t){var r,i=t.paths.map(function(e){var n=e.match(/(.+?)(:(\d+))?(:(\d+))?$/);if(!n)return!1;var t=[n[1],void 0!==n[3]&&parseInt(n[3],10),void 0!==n[5]&&parseInt(n[5],10)],r=t[0],i=t[1],o=t[2];return{type:(0,nr.QY)({path:r}),data:{path:r,line:i,col:o}}}).filter(Boolean),o=i.length-1,a=e(ni);i.forEach((r=(0,tw._)(function(e,t){return(0,tb.YH)(this,function(r){return n(t$,{pane:e,activate:o===t,placement:{type:"secondary",relativeTo:a}}),[2]})}),function(e,n){return r.apply(this,arguments)}))}),ig=(0,eu.eU)(null,function(e,n,t){var r=t.urls;if(null===e(nc)){var i=r.map(function(e){var n;try{n=new URL(e)}catch(e){return!1}return"0.0.0.0"===n.hostname||"localhost"===n.hostname?{ports:{type:"local",path:n.pathname,port:parseInt(n.port,10)}}:(window.open(e,"_blank"),!1)}).filter(Boolean);if(0!==i.length){var o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;n(tQ,s)}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}}}),im=(0,eu.eU)(null,function(e,n,t){if(!e(nU)){var r=e(nt),i=t.pageX,o=t.pageY,a=e(e5(t.over)),l=e_({x:i-r.x,y:o-r.y},e(a.rectAtom)).previewRect;n(t1,!0),n(rx,{type:"dropPreview",rect:l})}}),iv=(0,eu.eU)(null,function(e,n,t){if(!e(nU)){var r=e(nt),i=t.pageX,o=t.pageY,a=t.over,l=e(e5(a)),c=e_({x:i-r.x,y:o-r.y},e(l.rectAtom)).dropLocation;n(rx,null),n(t1,!1);var u=e(ny);if("newPaneGroup"===t.type){if("middle"===c){var s=eF(u,l.paneId);if(!s)return;n(tj,{panes:t.panes,paneGroupId:s.paneGroup.id,activate:!0,index:s.index+1});return}n(tN,{panes:t.panes,placement:c,makeActive:!0,relativeTo:l.paneId});return}var d=a;if("middle"===c){if(d===t.paneId)return;var p=eF(u,l.paneId);if(!p)return;n(tX,{paneId:t.paneId,toPaneGroupId:p.paneGroup.id,index:p.index+1});return}if(d===t.paneId){var f=eF(u,t.paneId);if(!f){var h=Error("Expected pane");throw n(nI,{error:h,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/expectedPane"}),h}if(f.floating)throw Error("Expected paneGroup");var g=f.paneGroup.panes.find(function(e){return e!==t.paneId});if(!g)return;d=g}var m=(0,eJ.jM)(u,function(e){try{ej(e,t.paneId),eB(e,{id:(0,tm.A)(),panes:[t.paneId],relativeTo:d,placement:c}),n(na,t.paneId)}catch(e){throw n(nI,{error:e,tags:{layoutstate:!0},origin:"Layout: state/paneDragAndDrop/updatedLayout"}),e}});n(tt,m)}});function iy(e){var n=(0,J.A)(function(){return(0,eu.eU)(function(n){return!!n(np)||!!n(nU)&&n(ni)===e})},[e]);return(0,J.A)(function(){return(0,eu.eU)(function(t){if(t(n))return t(nB);var r=t(e5(e));if("agentChat"===t(r.dataAtom).type){var i=t(nt),o=t(nc),a=Math.min("centeredVisualPlanner"===o?1/0:600,i.width-32);switch(o){case"centered":case"centeredVisualPlanner":return{x:i.width/2-a/2,y:0,width:a,height:i.height-16}}}return t(r.rectAtom)})},[e,n])}function iw(e){return(0,J.A)(function(){return(0,eu.eU)(function(n){var t=n(r7);return t&&e===n(r3)?t:null})},[e])}function ib(e){return(0,J.A)(function(){return(0,eu.eU)(function(n){return n(ni)===e})},[e])}function ix(e){return(0,J.A)(function(){return(0,eu.eU)(function(n){return n(n(e5(e)).dataAtom)})},[e])}function iY(e){return(0,J.A)(function(){return(0,eQ.mg)(e5(e),function(e){return"floating"===e.type})},[e])}var iS=(0,eu.eU)(null),iA=(0,eu.eU)(function(e){var n=e(iS);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=eF(e(ny),n.paneId);if(!t)return null;var r=t.paneGroup;return{target:"pane",paneGroupId:r.id,activeIndex:r.activeIndex,panes:r.panes.map(function(n){var t=e(e5(n));return[t.paneId,e(t.dataAtom)]})}}),i_=(0,eu.eU)(function(e){var n=e(iA);if(!n)return null;if("sidebar"===n.target)return{target:"sidebar"};var t=n.paneGroupId,r=n.activeIndex;return{target:"pane",paneId:n.panes[r][0],paneGroupId:t}}),ik=(0,eu.eU)(function(e){var n=e(iS);if(!n||"sidebar"===n.target)return null;if(e(nF)===n.paneId)return e(nB);var t=e(e5(n.paneId)),r=e(t.rectAtom),i=e(nn);return{x:Math.round(r.x),y:Math.round(r.y-i),width:Math.round(r.width),height:Math.round(r.height+i)}}),iC=(0,eu.eU)(null,function(e,n,t){var r=e(ni),i=null!=t?t:r;if(i){n(iS,{target:"pane",paneId:i}),i!==r&&n(no,i);return}var o=eP(e(ny),"topLeft"),a=o?o.paneGroup.panes[o.paneGroup.activeIndex]:null;if(a)return void n(iS,{target:"pane",paneId:a})}),iI=(0,eu.eU)(null,function(e,n){var t=e(iS);t&&(n(iS,null),"sidebar"!==t.target&&n(tW,{paneId:t.paneId,activate:!0}))}),iD=(0,eu.eU)(null,function(e,n){if(e(iA))return void n(iI);var t=e(ni);if(t)return void n(iC,t);var r=eP(e(ny),"topLeft"),i=r?r.paneGroup.panes[r.paneGroup.activeIndex]:null;if(i)return void n(iC,i)}),iE=(0,eu.eU)(function(e){return null!==e(iS)}),iR=(0,eu.eU)(null,function(e,n){n(iS,null)}),iU=(0,eu.eU)(null,function(e,n,t){var r=e(ni);if(!(!r||e(nF))){var i=eM({relativeTo:r,rects:new Map(e(e7).filter(function(e){return!e.isHidden}).map(function(n){return[n.paneId,e(n.rectAtom)]})),direction:t});i&&(n(ni,i),e(iS)&&n(iS,{target:"pane",paneId:i}))}}),iF=(0,eu.eU)(null,function(e,n,t){var r=e(iA);null!==r&&"sidebar"!==r.target&&n(tt,(0,eJ.jM)(e(ny),function(e){!function(e,n){var t=n.paneGroupId,r=n.direction,i=eO(e,t),o=eT(e,t);if((null==i?void 0:i.type)==="paneGroup"&&o){var a=o.node.children.indexOf(i);if(-1===a)throw Error("Expected index");var l=(0,eE._)(o.path).concat([a]),c="down"===r||"right"===r,u=0===a,s=a===o.node.children.length-1,d=o.node.stacked===("up"===r||"down"===r),p=o.path.length>2;if(d&&!((s&&c||u&&!c)&&p))return function(e,n,t){var r=e.indexOf(n);if(-1===r)throw Error("Expected item to be in array");if(1!==e.length){var i=r===e.length-1;if("forward"===t&&i){e.pop(),e.unshift(n);return}if("back"===t&&0===r){e.shift(),e.push(n);return}var o="forward"===t?1:-1;e[r]=e[r+o],e[r+o]=n}}(o.node.children,i,c?"forward":"back");var f=(v=eT(e,i.id))?function e(n,t){var r=t.path,i=t.forwards,o=t.vertical,a=eU(n,r);if((null==a?void 0:a.type)!=="split")return null;var l=eC(r);if(0===l.length)return null;var c=eU(n,l);if((null==c?void 0:c.type)!=="split")return null;if(c.stacked!==o)return e(n,{path:l,forwards:i,vertical:o});var u=c.children.indexOf(a),s=0===u;if(!(u===c.children.length-1&&i||s&&!i)){var d=u+(i?1:-1),p=c.children[d],f=c.children[u];return p?{other:f,node:p,parent:c,path:(0,eE._)(l).concat([d])}:null}if(1===l.length){var h=s&&!i?c.children.length-1:0;return{parent:c,other:c.children[u],path:(0,eE._)(l).concat([h]),node:c.children[h]}}return e(n,{path:l,forwards:i,vertical:o})}(e,{path:v.path,forwards:"down"===r||"right"===r,vertical:"up"===r||"down"===r}):null;if(f){var h=l.slice(0,f.path.length+("paneGroup"===f.node.type?2:1));if("tiling"!==h[0])throw Error("Expected tiling path");var g=eU(e,h);if(!g||"floatingPaneGroup"===g.type)throw Error("Expected adjacentNode");if("split"!==f.other.type)throw Error("Expected split");var m=function(e,n){var t=e.indexOf(n),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=e.slice(0,t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value.percent;r+=u}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{start:r,end:r+n.percent}}(f.other.children,g);if("paneGroup"===f.node.type){var v,y,w,b=(y={start:0,end:100},w=!f.parent.stacked,m.start-y.start<y.end-m.end?w?"above":"rightOf":w?"below":"leftOf");e$(e,(0,eE._)(o.path).concat([a])),eB(e,{placement:b,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:f.path});return}var x=function(e,n){var t=e.children,r=e.stacked,i="above",o=0,a=0,l=0,c=0,u=!0,s=!1,d=void 0;try{for(var p,f=t[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var h=p.value,g={start:l,end:l+h.percent},m=Math.max(0,Math.min(n.end,g.end)-Math.max(n.start,g.start));m>c&&(c=m,o=a,i=n.start-g.start<g.end-n.end?r?"above":"rightOf":r?"below":"leftOf"),l+=h.percent,a++}}catch(e){s=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(s)throw d}}return{placement:i,index:o}}(f.node,m),Y=x.index,S=x.placement;e$(e,(0,eE._)(o.path).concat([a])),eB(e,{placement:S,id:i.id,panes:i.panes,activeIndex:i.activeIndex,percent:i.percent,relativeTo:(0,eE._)(f.path).concat([Y])})}}}(e,{paneGroupId:r.paneGroupId,direction:t.direction})}))}),iP=(0,eu.eU)(null,function(e,n,t){n(tI,ty({isStacked:t.isStacked,isExtension:t.isExtension,isInPopup:t.isInPopup,codeEditorPath:t.entrypoint})),n(tC,{replId:t.replId,force:!0})}),iO={width:120,height:120},iT=(0,eu.eU)(null),iL=(0,eu.eU)(null,function(e,n,t){var r=e(ny);if("end"===t.type){n(iT,null),n(tt,r);return}if("update"===t.type){var i=e(iT);if(!i){var o=Error("Expected floatingResizeState");throw n(nI,{error:o,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),o}var a=e(nn),l=function(e,n){var t=n.edge,r=n.delta,i=n.minSize,o=void 0===i?ek:i,a=(0,m._)({},e),l=o.height,c=o.width;if("top"===t||"topLeft"===t||"topRight"===t){var u=e.height-r.y;a.height=Math.max(u,l),u<l?a.y=e.y+e.height-l:a.y=e.y+r.y}else("bottom"===t||"bottomLeft"===t||"bottomRight"===t)&&(a.height=Math.max(e.height+r.y,l));if("right"===t||"bottomRight"===t||"topRight"===t)a.width=Math.max(e.width+r.x,c);else if("left"===t||"bottomLeft"===t||"topLeft"===t){var s=e.width-r.x;a.width=Math.max(s,c),s<c?a.x=e.x+e.width-c:a.x=e.x+r.x}return a}(i.rectStart,{delta:t.moveDelta,edge:i.edge,minSize:iO}),c=i.paneId,u=(0,eJ.jM)(r,function(e){var t=e.floating.find(function(e){return e.panes.includes(c)});if(!t){var r=Error("Expected floating");throw n(nI,{error:r,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),r}var i=t.rect;i.x=l.x,i.y=l.y-a,i.width=l.width,i.height=l.height+a});n(tt,u);return}var s=e(e7).find(function(e){return e.paneId===t.paneId});if(!s){var d=Error("Expected pane");throw n(nI,{error:d,tags:{layoutstate:!0},origin:"Layout: state/resizeFloating"}),d}n(no,t.paneId),n(iT,{paneId:t.paneId,edge:t.edge,rectStart:e(s.rectAtom)})}),iM=(0,eu.eU)(null,function(e,n,t){var r=e(ny),i=e(e5(t)),o=i.rectAtom,a=i.type,l=e(o),c=eF(r,t);if(!c){var u=Error("Expected pane");throw n(nI,{error:u,tags:{layoutstate:!0},origin:"Layout: state/toggleFloating"}),u}if("tile"===a)return void n(tt,(0,eJ.jM)(r,function(e){eZ(e,{paneGroupPath:c.paneGroupPath,rect:{x:l.x-16,y:l.y-16,width:l.width,height:l.height}})}));c.paneGroup.id===e(tG.LY)&&n(tG.LY,null);var s=e(e7).filter(function(e){return"tile"===e.type&&!e.isHidden}),d=e(nn),p={x:l.x+l.width/2,y:l.y+l.height/2},f=s.find(function(n){var t=e(n.rectAtom);return nZ(p,{x:t.x,y:t.y-d,width:t.width,height:t.height+d})});if(!f)return void n(tt,(0,eJ.jM)(r,function(e){!function(e,n){var t=n.paneGroupPath,r=n.placement,i=n.to,o=eU(e,t);if((null==o?void 0:o.type)!=="floatingPaneGroup")throw Error("Expected floatingPaneGroup");if(e$(e,t),null===i){e.tiling={id:o.id,panes:o.panes,percent:100,type:"paneGroup",activeIndex:o.activeIndex};return}eB(e,{id:o.id,relativeTo:i,panes:o.panes,activeIndex:o.activeIndex,placement:r})}(e,{paneGroupPath:c.paneGroupPath,to:["tiling"],placement:"leftOf"})}));n(tt,(0,eJ.jM)(r,function(e){var n=eF(e,f.paneId);c.paneGroup.panes.forEach(function(t){eq(e,{paneId:t,paneGroupPath:(null==n?void 0:n.paneGroupPath)||["tiling"],activate:!1})})})),n(tV,c.paneGroup.panes[c.paneGroup.activeIndex])}),iG=(0,eu.eU)(null),iN=(0,eu.eU)(function(e){var n=e(iG);return n&&e(e7).find(function(t){var r=e(t.dataAtom);return"videoPlayer"===r.type&&r.data.embedUrl===(null==n?void 0:n.embedUrl)})||null}),iB=(0,eu.eU)(function(e){var n=e(iN);return n&&!n.isHidden?n:null}),iH=(0,eu.eU)(null,function(e,n,t){n(iG,t);var r,i="videoPlayer";if(!t)return void n(rq,i);n(rZ,{type:i,data:{title:null!=(r=t.title)?r:"Tutorial",embedUrl:t.embedUrl}},{commit:!0,location:"center"})}),iz=(0,eu.eU)(null,function(e,n){var t=e(iN);if(null==t?void 0:t.isHidden){n(tV,t.paneId),n(na,t.paneId);return}var r=e(iG);r&&n(iH,r)}),iW=(0,eu.eU)(function(e){return e(e7).find(function(n){return"tutorial"===e(n.dataAtom).type})||null}),ij=(0,eu.eU)(null,function(e,n){var t=e(iW);if(null==t?void 0:t.isHidden)return void n(tV,t.paneId);n(tN,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1,commit:!0})}),i$=(0,eu.eU)(function(e){return!!(e(r7)||e(iT)||e(rV)||e(t1)||e(rd))}),iZ=(0,eu.eU)(null,function(e,n,t){n(n5,function(e){return(0,eJ.jM)(e,function(e){e.isOpen=null!=t?t:!e.isOpen,t&&0===e.width&&(e.width=180)})}),n(tt,e(ny))}),iq=(0,eu.eU)(null,function(e,n,t){var r="centered"===t?360:140,i=e(n_).find(function(e){var n=(0,p._)(e,2);return"agentChat"===(n[0],n[1]).type}),o=i?new Map([[i[0],{duration:r,delay:0}]]):void 0;n(n$,{duration:r,delay:r,panes:o}),n(nc,t)}),iV=t(98679),iK=t(47993),iJ=(0,eu.eU)(!1),iQ=(0,eu.eU)(null,function(e,n,t){if(e(iJ))return void(0,iK.flushSync)(function(){n(iX,null),n(iJ,!1)});t&&n(iX,t),n(iJ,!0)}),iX=(0,eu.eU)(null),i0=(0,eu.eU)([]),i1=(0,eu.eU)(function(e){if(e(iE)||e(iJ))return null;var n=e(ni);if(!n)return null;var t=e(e5(n)),r=e(t.dataAtom),i=t.paneId+r.type;return(0,nr.xS)(r)&&(i+=r.data.path),i}),i2=t(27023),i4=t(85389),i5=t(52351);function i7(e){return(0,f.FD)(i5.Ay,(0,td._)((0,m._)({},e),{children:[(0,f.Y)("path",{fillRule:"evenodd",d:"M2 6.75A4.75 4.75 0 0 1 6.75 2h10a4.75 4.75 0 0 1 4.75 4.75v10a4.75 4.75 0 0 1-4.75 4.75h-10A4.75 4.75 0 0 1 2 16.75v-10ZM6.75 3.5A3.25 3.25 0 0 0 3.5 6.75v10A3.25 3.25 0 0 0 6.75 20h10A3.25 3.25 0 0 0 20 16.75v-10a3.25 3.25 0 0 0-3.25-3.25h-10Z",clipRule:"evenodd"}),(0,f.Y)("path",{d:"M5.25 8.398a3.167 3.167 0 0 1 3.167-3.167h6.666a3.167 3.167 0 0 1 3.167 3.167v6.667a3.167 3.167 0 0 1-3.167 3.166H8.417a3.167 3.167 0 0 1-3.167-3.166V8.398Z"})]}))}function i3(e){return(0,f.Y)(i5.Ay,(0,td._)((0,m._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M17 21.75A4.75 4.75 0 0 0 21.75 17V7A4.75 4.75 0 0 0 17 2.25H7A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10ZM20.25 12H3.75V7A3.25 3.25 0 0 1 7 3.75h10A3.25 3.25 0 0 1 20.25 7v5Z",clipRule:"evenodd"})}))}function i6(e){return(0,f.Y)(i5.Ay,(0,td._)((0,m._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M2.25 7A4.75 4.75 0 0 1 7 2.25h10A4.75 4.75 0 0 1 21.75 7v10A4.75 4.75 0 0 1 17 21.75H7A4.75 4.75 0 0 1 2.25 17V7ZM12 3.75v16.5h5A3.25 3.25 0 0 0 20.25 17V7A3.25 3.25 0 0 0 17 3.75h-5Z",clipRule:"evenodd"})}))}function i8(e){return(0,f.Y)(i5.Ay,(0,td._)((0,m._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M21.75 7A4.75 4.75 0 0 0 17 2.25H7A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10A4.75 4.75 0 0 0 21.75 17V7ZM12 3.75v16.5H7A3.25 3.25 0 0 1 3.75 17V7A3.25 3.25 0 0 1 7 3.75h5Z",clipRule:"evenodd"})}))}function i9(e){return(0,f.Y)(i5.Ay,(0,td._)((0,m._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M7 2.25A4.75 4.75 0 0 0 2.25 7v10A4.75 4.75 0 0 0 7 21.75h10A4.75 4.75 0 0 0 21.75 17V7A4.75 4.75 0 0 0 17 2.25H7ZM3.75 12h16.5v5A3.25 3.25 0 0 1 17 20.25H7A3.25 3.25 0 0 1 3.75 17v-5Z",clipRule:"evenodd"})}))}var oe=(0,eu.eU)(null,function(e,n,t){if(null===t){n(rx,null),n(r7,function(e){return e?(0,eJ.jM)(e,function(e){e.drop=null}):e});return}n(r7,function(e){return e?(0,eJ.jM)(e,function(e){!function(e,n){if("edge"===n.type||"emptyLayout"===n.type){e.drop={type:"split",relativeTo:["tiling"],placement:"edge"===n.type?n.position:"replace"};return}var t=n.paneId;if("middle"===n.position){e.drop={type:"insert",paneId:t};return}e.drop={type:"split",relativeTo:t,placement:n.position}}(e,t)}):e});var r=e(nt),i=e(nn),o=e(n3),a=e(n8);if("pane"===t.type){var l=e(e5(t.paneId)),c=e(l.rectAtom);n(rx,{type:"dropPreview",rect:{x:c.x,y:c.y-i,width:c.width,height:c.height+i}});return}if("emptyLayout"===t.type)return void n(rx,{type:"dropPreview",rect:function(e){var n=e.container,t=e.sidebarWidth,r=e.gap,i=e.location,o={x:t+r,y:0,width:n.width-t-2*r,height:n.height-r},a=o.x,l=o.y,c=o.width,u=o.height;switch(i){case"middle":return o;case"leftOf":return{x:a,y:l,width:c/2,height:u};case"rightOf":return{x:a+c/2,y:l,width:c/2,height:u};case"above":return{x:a,y:l,width:c,height:u/2};case"below":return{x:a,y:l+u/2,width:c,height:u/2}}}({container:r,sidebarWidth:o,location:t.position,gap:a})});n(rx,{type:"dropPreview",rect:function(e,n){var t=n.container,r=n.sidebarWidth,i=n.position,o=n.gap,a={x:r+o,y:0,width:t.width-r-2*o,height:t.height-o};if((null==e?void 0:e.type)!=="split"){switch(i){case"above":case"below":a.height=a.height/2,"below"===i&&(a.y+=a.height);break;case"rightOf":case"leftOf":a.width=a.width/2,"rightOf"===i&&(a.x+=a.width)}return a}if(e.stacked){switch(i){case"above":a.height=a.height*(e.children[0].percent/100)/2;break;case"below":a.height=a.height*(e.children[e.children.length-1].percent/100)/2,a.y=t.height-a.height;break;case"leftOf":a.width=a.width/2;break;case"rightOf":a.width=a.width/2,a.x=t.width-a.width-o}return a}switch(i){case"above":a.height=a.height/2;break;case"below":a.height=a.height/2,a.y=t.height-a.height-o;break;case"leftOf":a.width=a.width*(e.children[0].percent/100)/2;break;case"rightOf":a.width=a.width*(e.children[e.children.length-1].percent/100)/2,a.x=t.width-a.width}return a}(e(ny).tiling,{container:r,sidebarWidth:o,position:t.position,gap:a})})}),on=(0,rb.v)(["opacity","width","height","transform","pointerEvents"]),ot=on.cssVars,or=on.styleTokens,oi=(0,rw.x)({dropPoint:[i2.wp.center,i2.wp.top(0),i2.wp.left(0),i2.wp.position.absolute,{zIndex:rv.W.overlay,cursor:"grabbing",width:or.width,height:or.height,transform:or.transform,opacity:"var(".concat(ot.opacity,", 0)"),pointerEvents:or.pointerEvents,transition:"opacity 200ms ease-out 200ms","&:hover":{color:ry.LU.accentPrimaryStronger}}]}),oo={above:(0,f.Y)(i9,{}),below:(0,f.Y)(i3,{}),leftOf:(0,f.Y)(i6,{}),rightOf:(0,f.Y)(i8,{}),middle:(0,f.Y)(i7,{})};function oa(e){var n=(0,g.useRef)(null),t=(0,g.useMemo)(function(){return(0,eQ.mg)(r6,function(n){return null==n?void 0:n[e]})},[e]),r=(0,g.useMemo)(function(){return(0,eQ.mg)(t,function(e){return e?(0,tg._)({},ot.transform,"translate(".concat(e.rect.x,"px, ").concat(e.rect.y,"px)")):null},n1())},[t]);(0,rm.d)(n,ra(r));var i=(0,g.useMemo)(function(){return(0,eQ.mg)(t,function(e){var n;return e?(n={},(0,tg._)(n,ot.width,e.rect.width+"px"),(0,tg._)(n,ot.height,e.rect.height+"px"),n):null},n1())},[t]);(0,rm.d)(n,ra(i));var o=(0,g.useMemo)(function(){return(0,eQ.mg)(t,function(e){var n;return n={},(0,tg._)(n,ot.opacity,(null==e?void 0:e.visible)?"1":"0"),(0,tg._)(n,ot.pointerEvents,(null==e?void 0:e.visible)?"all":"none"),n},n1())},[t]);return(0,rm.d)(n,ra(o)),n}function ol(){var e=oa("middle"),n=rl(oe),t=rc((0,g.useMemo)(function(){return(0,eQ.mg)(r6,function(e){var n;return null!=(n=null==e?void 0:e.middle.paneId)?n:null})},[]));return(0,f.Y)(i4.S,{css:oi.dropPoint,innerRef:e,onMouseEnter:function(){var e=t(),r="middle";n(e?{type:"pane",position:r,paneId:e}:{type:"emptyLayout",position:r})},onMouseLeave:function(){return n(null)},children:(0,f.Y)(i7,{size:32})})}function oc(e){var n=e.position,t=oa(n),r=rl(oe);return(0,f.Y)(i4.S,{css:oi.dropPoint,innerRef:t,onMouseEnter:function(){return r({type:"edge",position:n})},onMouseLeave:function(){return r(null)},children:(0,g.cloneElement)(oo[n],{size:32})})}var ou=(0,g.memo)(function(){return(0,f.FD)(f.FK,{children:[(0,f.Y)(oc,{position:"above"}),(0,f.Y)(oc,{position:"below"}),(0,f.Y)(oc,{position:"leftOf"}),(0,f.Y)(oc,{position:"rightOf"}),(0,f.Y)(ol,{})]})});function os(e){return ro((0,J.A)(function(){return(0,eu.eU)(function(n){var t=n(e5(e));return n(t.dataAtom)})},[e]))}function od(){var e=ri();return(0,g.useCallback)(function(n){var t=e.get(e5(n));return{pane:e.get(t.dataAtom),isCommitted:t.isCommitted}},[e])}function op(e){var n=e.paneId;return ro((0,J.A)(function(){return(0,eu.eU)(function(e){return e(ni)===n})},[n]))}function of(){var e=rl(no),n=rl(na);return(0,J.A)(function(){return function(t,r){(null==r?void 0:r.commit)&&n(t),e(t)}},[n,e])}function oh(){return rl(re)}var og=(0,eu.eU)(null,function(e,n){n(t1,!1)});function om(e){var n=e.paneGroupId,t=rl(r8),r=rl(r9),i=rl(ir),o=(0,J.A)(function(){return{start:function(e){t({paneGroupId:n,mouse:e.mouse})},update:function(e){r(e)},end:function(e){i(e)}}},[n,t,r,i]);return{isDragging:ro((0,J.A)(function(){return(0,eu.eU)(function(e){var t;return n===(null==(t=e(r7))?void 0:t.paneGroupId)})},[n])),dnd:o}}function ov(){return rl(id)}function oy(){return{maximizePane:rl(nP),maximizePaneGroup:rl(nO),restoreMaximizedPaneGroup:rl(nT),toggleMaximizePane:rl(nL),toggleMaximizedPaneGroup:rl(nM)}}function ow(e){var n,t,r=(n=ne(e),{activeIndexAtom:(0,J.A)(function(){return(0,eu.eU)(function(e){return e(n).activeIndex})},[n]),pathAtom:(0,J.A)(function(){return(0,eQ.mg)(n,function(e){return e.path},n1())},[n]),panesAtom:(0,J.A)(function(){return(0,eQ.mg)(n,function(e){return e.panes},n1())},[n]),activeFileAtom:(0,J.A)(function(){return(0,eu.eU)(function(e){var t=e(n),r=e(e5(t.panes[t.activeIndex])),i=e(r.dataAtom);return(0,nr.xS)(i)?(0,nr.Vj)(i):null})},[n])}),i=r.activeIndexAtom,o=r.pathAtom,a=r.panesAtom;return{activeIndex:ra(i),path:ra(o),panes:ra(a),activeTabPaneId:ra((t=ne(e),(0,J.A)(function(){return(0,eu.eU)(function(e){var n=e(t);return e(e5(n.panes[n.activeIndex])).paneId})},[t])))}}function ob(e){return ro((0,J.A)(function(){return(0,eu.eU)(function(n){return n(e7).some(function(t){return n(t.dataAtom).type===e})})},[e]))}function ox(e){var n,t,r,i,o,a,l,c,u,s=iy(e),d=nK(s),p=nJ(s),f=(n=iw(e),(0,J.A)(function(){return(0,eQ.mg)(n,function(e){var n;return null!=(n=null==e?void 0:e.scale)?n:1})},[n])),h=(t=iw(e),(0,J.A)(function(){return(0,eu.eU)(function(n){var r,i,o,a,l,c=n(t);if(c)return null!=(a=c.transformOriginX)?a:"0px";var u=null==(o=n(nH))||null==(i=o.panes)||null==(r=i.get(e))?void 0:r.dropState;return null!=(l=null==u?void 0:u.transformOrginX)?l:"0x"})},[t,e])),g=(r=iy(e),(0,J.A)(function(){return(0,eu.eU)(function(e){var n=e(r),t=e(nt);return{x:Math.round(t.x+n.x),y:Math.round(t.y+n.y)}})},[r])),m=(0,J.A)(function(){return(0,eu.eU)(function(n){var t=n(e5(e));switch(n(nc)){case"centered":case"centeredVisualPlanner":return"agentChat"!==n(t.dataAtom).type}return t.isHidden})},[e]),v=(0,J.A)(function(){return(0,eu.eU)(function(n){var t,r,i,o=n(e5(e));if(o.isHidden)return rv.W.hiddenPane;var a=e===n(ni);return n(nF)===e?rv.W.maximizedPane:e===n(r3)||(null==(i=n(nH))||null==(r=i.panes)||null==(t=r.get(e))?void 0:t.dropState)?rv.W.draggingPane:"floating"===o.type?a?rv.W.floatingPaneActive:rv.W.floatingPane:a?rv.W.tiledPaneActive:rv.W.tiledPane})},[e]),y=(0,J.A)(function(){return(0,eu.eU)(function(n){var t,r,i,o=n(nH);if(!o)return null;var a=null==(t=o.panes)?void 0:t.get(e);return{duration:null!=(r=null==a?void 0:a.duration)?r:o.duration,delay:null!=(i=null==a?void 0:a.delay)?i:o.delay}})},[e]),w=(i=ix(e),(0,J.A)(function(){return(0,eQ.mg)(i,function(e){return e.type})},[i])),b=iY(e),x=(0,J.A)(function(){return(0,eu.eU)(function(n){var t,r=null==(t=eF(n(ny),e))?void 0:t.paneGroup;return!!r&&r.id===n(tG.LY)})},[e]),Y=ib(e),S=(0,J.A)(function(){return(0,eu.eU)(function(n){return n(ni)===e})},[e]),A=(0,J.A)(function(){return(0,eQ.mg)(e5(e),function(e){return e.isCommitted})},[e]),_=ix(e),k=(o=iY(e),a=ib(e),l=iw(e),(0,J.A)(function(){return(0,eu.eU)(function(e){return!e(nU)&&!!(e(o)||e(a)||e(l))})},[o,a,l])),C=(c=iw(e),(0,J.A)(function(){return(0,eu.eU)(function(n){var t,r,i;return!!n(c)||!!(null==(i=n(nH))||null==(r=i.panes)||null==(t=r.get(e))?void 0:t.dropState)})},[c,e])),I=(u=iw(e),(0,J.A)(function(){return(0,eQ.mg)(u,function(e){var n;return null!=(n=null==e?void 0:e.movedAtAll)&&n})},[u]));return{size:ra(d),position:ra(p),scale:ra(f),paneType:ra(w),transformOriginXAtom:ra(h),viewportInset:ra(g),zIndex:ra(v),disableInteractions:ra(i$),transition:ra(y),data:ra(_),isFloating:ra(b),isModal:ra(x),isActive:ra(Y),isActivePane:ra(S),isCommitted:ra(A),isHidden:ra(m),isBeingDragged:ra(C),hasMovedWhileDragging:ra(I),headerHeight:ra(nn),hasBorder:ra(k)}}function oY(e){var n,t,r,i,o,a,l,c,u,s=nK(ii(e)),d=(t=io(e),r=ii(e),(0,J.A)(function(){var n=(0,eu.eU)(function(n){var i,o,a,l=n(r),c=n(t)||(null==(a=n(nH))||null==(o=a.headers)||null==(i=o.get(e))?void 0:i.dropState)?"transform":"top-left";return{x:l.x,y:l.y,positioning:c}});return(0,eQ.mg)(n,function(e){return e},n1())},[t,e,r])),p=(i=io(e),(0,J.A)(function(){return(0,eQ.mg)(i,function(e){var n;return null!=(n=null==e?void 0:e.scale)?n:1})},[i])),f=(o=io(e),(0,J.A)(function(){return(0,eu.eU)(function(n){var t,r,i,a,l,c=n(o);if(c)return null!=(a=c.transformOriginX)?a:"0px";var u=null==(i=n(nH))||null==(r=i.headers)||null==(t=r.get(e))?void 0:t.dropState;return null!=(l=null==u?void 0:u.transformOrginX)?l:"0x"})},[o,e])),h=(a=io(e),l=il(e),c=ic(e),n=ia(e),u=(0,J.A)(function(){return(0,eu.eU)(function(e){var t=e(ni);if(!t)return!1;var r=e(n);return!!r&&r.panes.includes(t)})},[n]),(0,J.A)(function(){return(0,eu.eU)(function(n){var t,r,i;return n(l)?rv.W.maximizedHeader:n(a)||(null==(i=n(nH))||null==(r=i.headers)||null==(t=r.get(e))?void 0:t.dropState)?rv.W.draggingHeader:n(c)?n(u)?rv.W.floatingHeaderActive:rv.W.floatingHeader:rv.W.tiledHeader})},[a,l,c,u,e])),g=(0,J.A)(function(){return(0,eu.eU)(function(n){var t,r,i,o=n(nH);if(!o)return null;var a=null==(t=o.headers)?void 0:t.get(e);return{duration:null!=(r=null==a?void 0:a.duration)?r:o.duration,delay:null!=(i=null==a?void 0:a.delay)?i:o.delay}})},[e]),m=il(e),v=ic(e),y=(0,J.A)(function(){return(0,eu.eU)(function(n){return n(tG.LY)===e})},[e]),w=(0,J.A)(function(){return(0,eu.eU)(function(n){var t;return(null==(t=n(r7))?void 0:t.paneGroupId)===e})},[e]);return{size:ra(s),position:ra(d),scale:ra(p),transformOriginX:ra(f),zIndex:ra(h),transition:ra(g),isMaximized:ra(m),isFloating:ra(v),isModal:ra(y),isBeingDragged:ra(w)}}function oS(){return ro(nc)}function oA(){return{view:ra(rh),resizeHandleView:ra(rg),isOpen:ra(n7),toggle:rl(iZ),resize:{start:rl(rs),update:rl(rp),end:rl(rf)}}}function o_(e){var n=ro(to),t=(0,Z.NC)(),r=(0,ef.Rj)(function(){return t.sessions.query({types:[ep.dF3.CHAT]}).map.select(function(e){return e.size>0})},[t],{default:!1});return(0,g.useMemo)(function(){var t=n.primaryTools.filter(function(n){return e.has(n.type)});return t.some(function(e){return"agentChat"===e.type})&&!r&&(t=t.filter(function(e){return"ghostwriterChat"!==e.type})),{visible:n.visible,primaryTools:t,secondaryTools:n.secondaryTools.filter(function(n){return e.has(n.type)})}},[n,e,r])}var ok=t(29369),oC=t(28210),oI=t(7548);function oD(){var e,n,t,r,i,o,a,l,c,u,s,d,f,h;return t=(0,ec.A)(),r=oS(),i=rl(iq),o=(0,Z.Ik)(),a=(0,ok.Y)(),l=(0,g.useRef)(!1),c=(0,p._)((0,et.V)(),1)[0],d=(u={variables:{replId:t}},s=(0,m._)({},eo,u),w.I(el,s)).data,f=null,h=!1,(null==d||null==(e=d.getRepl)?void 0:e.__typename)==="Repl"&&(f=d.getRepl.config,h=(null==(n=d.getRepl.origin)?void 0:n.id)!=null),(0,g.useEffect)(function(){(null==f?void 0:f.isAgentRepl)&&!h&&a&&null!=o&&!l.current&&("approved"===o?("centeredVisualPlanner"===r&&i("tilingLayout"),(null==f?void 0:f.isInPlanningPhase)!==!1&&c({variables:{input:{id:t,isInPlanningPhase:!1}}})):("centeredVisualPlanner"!==r&&i("centeredVisualPlanner"),(null==f?void 0:f.isInPlanningPhase)!==!0&&c({variables:{input:{id:t,isInPlanningPhase:!0}}})),l.current=!0)},[r,t,i,c,o,a,f,h]),(0,oI.g)(),(0,oC.c)(),null}var oE=t(17089),oR=t(53522),oU=t(59255),oF=t(27301),oP=t(5142);function oO(e){var n,t=(0,Z.dm)().setAssistantMode,r=(0,Z.NC)(),i=(0,g.useCallback)((n=(0,tw._)(function(n){var i,o;return(0,tb.YH)(this,function(a){switch(a.label){case 0:return[4,r.sessions.create({sessionType:ep.dF3.CHAT})];case 1:if(!(i=a.sent()).ok)return[2];return e({pane:{type:"ghostwriterChat",data:{sessionId:(o=i.payload).id}}}),t("basic"),[4,o.appendEvent({kind:"message",message:n,intent:ep.qRv.NONE,modelType:ep.e3q.BASIC})];case 2:return a.sent(),(0,oE.u4)(oE.AZ.ASSISTANT_USED,{action:"message_sent",intent_type:"explain",model:"basic",user_model_selection:"basic",message_content:n,message_source:"ask_ai_command_bar"}),[2]}})}),function(e){return n.apply(this,arguments)}),[r,e,t]);return(0,J.A)(function(){return{data:{type:"context",label:"Assistant",icon:(0,f.Y)(oP.A,{size:16}),key:"assistant"},commands:function(e){var n=e.searchQuery;return n?[{match:(0,oU.u4)({defaultScore:oF.q.askAssistant,matchScoreMultiplier:oF.B.askAssistant,filterLowMatchScores:!1}),data:{type:"action",label:"Ask Assistant: ".concat(n),icon:(0,f.Y)(oP.A,{size:16}),run:function(){return i(n)}}}]:[]}}},[i])}var oT=t(47820);function oL(e){var n=(0,nr.Vv)();return(0,J.A)(function(){return{data:{type:"context",label:"Open with Code Search",icon:(0,f.Y)(oT.A,{}),key:"codeSearch"},commands:function(t){var r=t.searchQuery;if(!r)return[];var i={type:"searchReplace",data:{initialQuery:r}};return[{match:(0,oU.u4)({defaultScore:oF.q.codeSearch,matchScoreMultiplier:oF.B.codeSearch,filterLowMatchScores:!1}),data:{type:"action",label:n.getTitle(i),icon:n.Icon({pane:i}),run:function(){e({pane:i})}}}]}}},[n,e])}var oM=t(71424),oG=t(4977),oN=t(58145),oB=t(92301),oH=t(89170),oz=t(64944),oW=t(39229),oj=t(55515),o$=t(92702),oZ=t(43813),oq=t(22237),oV=t(6064),oK=t(5414);function oJ(e){var n,t=e.currentPaneId,r=e.type,i=(0,nr.Vv)(),o=rl(t9),a=rl(tV),l=(0,tG.t3)(),c=(0,oj.gB)(),u=t?"Move existing tab here":"Jump to existing tab";return(0,g.useCallback)((n=(0,tw._)(function(e){var n,s,d,h,g,m,v,y,w,b,x,Y,S,A,_,k,C,I,D,E,R,U,F,P,O,T;return(0,tb.YH)(this,function(L){switch(L.label){case 0:if(n=e.searchQuery,s=l(),!(d=t?s.filter(function(e){return(0,p._)(e,1)[0]!==t}):s).length||!n&&"files"===r)return[2,[]];h=new Map,g=[],m=!0,v=!1,y=void 0;try{for(w=d[Symbol.iterator]();!(m=(b=w.next()).done);m=!0)(x=(0,p._)(b.value,2))[0],Y=x[1],(0,nr.xS)(Y)&&Y.data.path&&g.push(Y.data.path)}catch(e){v=!0,y=e}finally{try{m||null==w.return||w.return()}finally{if(v)throw y}}return[4,(0,oB.UI)(n,g)];case 1:S=L.sent(),A=!0,_=!1,k=void 0;try{for(C=S[Symbol.iterator]();!(A=(I=C.next()).done);A=!0)D=I.value,h.set(D.path,{score:D.score,ranges:D.ranges})}catch(e){_=!0,k=e}finally{try{A||null==C.return||C.return()}finally{if(_)throw k}}E=[],R=!0,U=!1,F=void 0;try{for(P=function(){var e=(0,p._)(T.value,2),n=e[0],l=e[1],s=(0,nr.NM)(l);if("tools"===r&&!s||"tools"===r&&"commands"===l.type||"files"===r&&s)return"continue";var d=(0,nr.xS)(l)?l.data.path:null,g=d?h.get(d):null;if("deployments"===l.type){var m=c(n);if((null==m?void 0:m.type)==="deployments"){var v=m.getTabs();if(v)return E.push({match:oU.KK,data:{type:"context",label:i.getTitle(l),icon:(0,f.Y)(i.Icon,{pane:l})},commands:function(){return v.map(function(e){return{match:oU.KK,data:{key:n+e.id,type:"action",label:e.label,icon:(0,f.Y)(e.Icon,{size:16}),run:function(){a(n),m.setTab(e.id)}}}})}}),"continue"}}var y=d&&g?function(){return{score:g.score,render:(0,oB.SS)({path:d,ranges:g.ranges,description:u})}}:oU.KK,w=i.getTitle(l),b=i.Icon({pane:l});E.push({match:y,data:{key:n,type:"action",label:w,icon:b,run:function(){return t?o({a:t,b:n}):a(n)},description:u}})},O=d[Symbol.iterator]();!(R=(T=O.next()).done);R=!0)P()}catch(e){U=!0,F=e}finally{try{R||null==O.return||O.return()}finally{if(U)throw F}}return[2,E]}})}),function(e){return n.apply(this,arguments)}),[t,l,i,a,o,c,u,r])}function oQ(e){var n=(0,nr.Vv)(),t=(0,o$.Tb)(),r=(0,tG.t3)();return(0,g.useCallback)(function(){var i=r().map(function(e){var n=(0,p._)(e,2);return(n[0],n[1]).type}),o=[],a=!0,l=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)!function(){var t=u.value;if(!((0,nr.gG)(t.type)&&i.includes(t.type))){var r=n.getTitle(t),a=n.Icon({pane:t});o.push({match:(0,oH.T)({pane:t,aliases:oz.f.get(t.type)}),data:{key:"extension"===t.type?"extension-".concat(t.data.installationId,"-").concat(t.data.path):void 0,type:"action",label:r,description:n.getDescription(t,{short:!0}),icon:a,run:function(){e({pane:t})}}})}}()}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}return o},[t,e,r,n])}function oX(e){var n=e.currentPaneId,t=e.openPane,r=(0,oM.A)(),i=r.fs,o=r.container,a=oQ(t),l=(0,Z.jt)(),c=oJ({currentPaneId:n,type:"tools"}),u=oJ({currentPaneId:n,type:"files"}),s=(0,g.useCallback)(function(e){var n=e.path;t({pane:{type:(0,nr.QY)({path:n}),data:{path:n}}})},[t]),d=(0,tG.Sx)(),p=(0,oW.J)(),h=oL(t),m=oO(t);return(0,J.A)(function(){var e,n,t,r,g=(0,oG.g)({openFile:s,fs:i,shouldHideFile:p,getRecentFiles:d,getCurrentlyOpenFilePanesCommands:u}),v=(0,oN.Y)({container:o,openFile:s}),y={data:{type:"context",label:oq.Ve,icon:(0,f.Y)(oK.A,{})},commands:(e=(0,tw._)(function(e){return(0,tb.YH)(this,function(n){switch(n.label){case 0:return[4,c({searchQuery:e.searchQuery})];case 1:return[2,eE._.apply(void 0,[n.sent()]).concat((0,eE._)(a()))]}})}),function(n){return e.apply(this,arguments)})},w=(t=(n={fs:i,openFile:s}).openFile,r=n.fs,{match:oU.KK,data:{type:"context",label:"New file",description:"Create a new file",icon:(0,f.Y)(oV.A,{})},commands:function(e){var n=e.searchQuery,i=e.active;return n&&i?[{match:oU.G2,data:{type:"action",description:"Create a new file",label:n,icon:(0,f.Y)(oZ.A,{path:n}),run:function(){return(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return[4,r.stat(n)];case 1:if(e.sent().exists)return[2,{type:"error",message:'"'.concat(n,'" already exists')}];return[4,r.writeFile(n,oR.A.from(""))];case 2:if(e.sent().error)return[2,{type:"error",message:'Could not create "'+n+'"'}];return t({path:n}),[2]}})})()}}}]:[]}});return{data:{type:"group",key:"root",description:"Search for files & tools"},commands:function(){return[w,g,y,h,v].concat((0,eE._)(l?[]:[m]))}}},[o,i,d,a,c,u,p,s,h,m,l])}var o0=t(60690),o1=t(72722),o2="Search";function o4(){var e=(0,tp.Xr)(iQ);return(0,g.useCallback)(function(n){e(n)},[e])}var o5=t(61191),o7=t(85144),o3=t(41358),o6=t(19340),o8={id:"toggleGlobalCommandBarCommand",name:"Toggle Commandbar",description:"Opens or closes the command bar",default:(0,o5.FM)({cmdOrCtrl:!0,key:"k"})};function o9(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{enabled:!0}).enabled,t=(0,tp.Xr)(i0);(0,g.useEffect)(function(){if(n)return t(function(n){return(0,eE._)(n).concat([e])}),function(){t(function(n){return n.filter(function(n){return n!==e})})}},[t,e,n])}var ae=(0,rw.x)({surface:[i2.wp.maxHeight("70vh"),i2.wp.borderRadius(8)]});let an=(0,g.memo)(function(){var e,n,t,r,i,o,a,l=(0,tp.md)(iJ),c=o4(),u=(e=oh(),n=oQ((0,g.useCallback)(function(n){(0,oE.u4)(oE.AZ.TOOL_OPENED,{source:"Command Bar",tool:n.pane.type}),e(n)},[e])),t=oJ({type:"tools"}),r=(0,o0.Jn)("toggleGlobalCommandBarCommand"),i=(0,J.A)(function(){return{type:"context",icon:(0,f.Y)(o1.A,{}),label:"",description:o2,keyboardShortcut:r}},[r]),o=(0,J.A)(function(){return(0,eu.eU)(function(e){var r,o=e(i0),a={data:{type:"context",label:oq.Ve,icon:(0,f.Y)(oK.A,{})},commands:(r=(0,tw._)(function(e){return(0,tb.YH)(this,function(r){switch(r.label){case 0:return[4,t({searchQuery:e.searchQuery})];case 1:return[2,eE._.apply(void 0,[r.sent()]).concat((0,eE._)(n()))]}})}),function(e){return r.apply(this,arguments)})};return{data:i,commands:function(){return(0,eE._)(o).concat([a])}}})},[n,i,t]),a=(0,J.A)(function(){return(0,eu.eU)(function(e){var n=e(o),t=e(iX);return t?[n,t]:n})},[o]),(0,tp.md)(a)),s=(0,o0.Jn)(o8.id);return(0,f.Y)(o7.a,{hideCloseButton:!0,isOpen:l,onRequestClose:c,noPadding:!0,skipTransition:!0,topPadding:8,children:(0,f.Y)(o3.ui,{css:ae.surface,children:(0,f.Y)(o6.r,{keyboardShortcut:s,onAction:function(){return c()},command:u,autoFocus:!0})})})});var at=t(29098);function ar(){var e=(0,v._)(["\n  query ExtensionStore($replId: String!, $userId: Int) {\n    extensionList(includeNonBlessed: true, userId: $userId) {\n      ...TopLevelExtension\n      installation(replId: $replId) {\n        ...TopLevelExtensionInstallation\n      }\n    }\n  }\n  ","\n  ","\n"]);return ar=function(){return e},e}var ai=(0,y.J1)(ar(),at.Fz,at.Tu),ao=t(26494),aa=t(78502),al=t(11769),ac=t(4616),au=(0,rw.x)({container:i2.wp.colWithGap(24)});function as(e){var n=e.fileExtension,t=e.onCancel,r=e.onConfirm;return(0,f.FD)(i4.S,{css:au.container,children:[(0,f.Y)(ac.Y9,{level:1,variant:"headerDefault",children:"Make this extension default?"}),(0,f.FD)(ac.EY,{children:["Do you want to use this extension to open ",n," files by default? You can always use another file opener by right clicking on the file and opening it with something else"]}),(0,f.FD)(i4.S,{row:!0,gap:12,justify:"end",children:[(0,f.Y)(al.$n,{onClick:function(){return t()},text:"Cancel"}),(0,f.Y)(al.$n,{colorway:"positive",onClick:function(){return r()},text:"Yes, use this extension by default"})]})]})}var ad=t(1982);function ap(){var e=(0,tG.RG)(),n=rc(nY),t=rc(nA),r=rc(tY),i=rl(t$),o=rl(tW),a=rl(tq),l=rc(nb),c=rc(nx),u=rc(nU);return(0,g.useCallback)(function(s){var d=s.pane,f=s.activate,h=s.updateOnReveal,g=e(),m=(0,nr.xS)(d)?l():c();m||(m=function(e){var n,t,r=e.panes,i=e.pane;if((0,nr.xS)(i)){var o,a,l=i.data.path;return null!=(a=null==(o=r.find(function(e){var n=(0,p._)(e,2)[1];return(0,nr.xS)(n)&&n.data.path===l}))?void 0:o[0])?a:null}if((0,nr.En)(i))return null!=(u=null==(c=r.find(function(e){var n=(0,p._)(e,2)[1];return!!(0,nr.En)(n)&&n.data.installationId===i.data.installationId&&n.data.path===i.data.path&&n.data.filePath===i.data.filePath}))?void 0:c[0])?u:null;if("diff"===i.type){var c,u,s,d=r.find(function(e){var n=(0,p._)(e,2),t=(n[0],n[1]);return"diff"===t.type&&n1()(t.data,i.data)});return null!=(s=null==d?void 0:d[0])?s:null}return(0,nr.gG)(i.type)&&null!=(t=null==(n=r.find(function(e){return(0,p._)(e,2)[1].type===i.type}))?void 0:n[0])?t:null}({panes:(0,eE._)(n()).concat((0,eE._)(t())),pane:d}));var v=u();if(m&&g){var y,w,b=r().layout,x=null==(y=eF(b,g))?void 0:y.paneGroup,Y=null==(w=eF(b,m))?void 0:w.paneGroup;if(!v||(null==x?void 0:x.id)===(null==Y?void 0:Y.id))return(void 0===h||h)&&a({paneId:m,pane:d}),o({paneId:m,activate:f}),m}var S=s.placement;return v&&null!=g?S={type:"after",paneId:g}:(null==S?void 0:S.type)!=="secondary"||S.relativeTo||(S={type:"secondary",relativeTo:g}),i({pane:d,activate:f,placement:S})},[e,l,c,i,n,t,r,u,o,a])}var af=t(73762);function ah(){var e,n=ov(),t=(0,tG.T_)(),r=(e=(0,tG.dm)(),(0,J.A)(function(){return function(n){return e.subscribe(n)}},[e])),i=(0,tG.w1)(),o=(0,ad.A)(),a=ap(),l=(0,tG.RG)(),c=rc(tY),u=rl(tI),s=(0,af.A)(),d=(0,iV.A)(s),p=(0,g.useCallback)(function(e){a({pane:{type:"extension",data:{extensionId:e.extensionId,installationId:e.installationId,baseUrl:e.baseUrl,path:e.path,name:e.name}},activate:!0,placement:{type:"secondary",relativeTo:l()}})},[a,l]);return(0,J.A)(function(){return{openFile:n,watchActiveFile:r,getActiveFile:i,activatePane:t,toasts:o,revealOrInsertTool:p,getLayoutState:c,setLayoutState:u,getSshConfig:function(){return d.current}}},[n,r,i,t,o,p,c,u,d])}var ag=t(9527),am=t(31875),av=t(53974),ay=t(22419),aw=t(9701),ab=t(97841),ax=t(7814),aY=t(79361),aS=t(1114),aA=function(e){return e.RAW="RAW",e.PROXY="PROXY",e.THROW="THROW",e.HANDLER="HANDLER",e}({}),a_=function(e){return e.GET="GET",e.SET="SET",e.APPLY="APPLY",e.CONSTRUCT="CONSTRUCT",e.ENDPOINT="ENDPOINT",e.RELEASE="RELEASE",e}({}),ak=Symbol("Comlink.proxy"),aC=Symbol("Comlink.endpoint"),aI=Symbol("Comlink.releaseProxy"),aD=Symbol("Comlink.thrown"),aE=function(e){return(void 0===e?"undefined":(0,eR._)(e))==="object"&&null!==e||"function"==typeof e},aR=new Map([["proxy",{canHandle:function(e){return aE(e)&&e[ak]},serialize:function(e){var n=new MessageChannel,t=n.port1,r=n.port2;return aU(e,t),[r,[r]]},deserialize:function(e){var n;return e.start(),function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=!1,o=new Proxy(r,{get:function(r,a){if(aP(i),a===aI)return function(){return aN(n,{type:a_.RELEASE,path:t.map(function(e){return e.toString()})}).then(function(){aF(n),i=!0})};if("then"===a){if(0===t.length)return{then:function(){return o}};var l=aN(n,{type:a_.GET,path:t.map(function(e){return e.toString()})}).then(aG);return l.then.bind(l)}return e(n,(0,eE._)(t).concat([a]))},set:function(e,r,o){aP(i);var a=(0,p._)(aM(o),2),l=a[0],c=a[1];return aN(n,{type:a_.SET,path:(0,eE._)(t).concat([r]).map(function(e){return e.toString()}),value:l},c).then(aG)},apply:function(r,o,a){aP(i);var l=t[t.length-1];if(l===aC)return aN(n,{type:a_.ENDPOINT}).then(aG);if("bind"===l)return e(n,t.slice(0,-1));var c=(0,p._)(aO(a),2),u=c[0],s=c[1];return aN(n,{type:a_.APPLY,path:t.map(function(e){return e.toString()}),argumentList:u},s).then(aG)},construct:function(e,r){aP(i);var o=(0,p._)(aO(r),2),a=o[0],l=o[1];return aN(n,{type:a_.CONSTRUCT,path:t.map(function(e){return e.toString()}),argumentList:a},l).then(aG)}});return o}(e,[],n)}}],["throw",{canHandle:function(e){return aE(e)&&aD in e},serialize:function(e){var n,t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function aU(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2?arguments[2]:void 0;function r(i){if(i&&i.data&&(!t||i.origin===t.origin&&i.source===t.source)){var o,a=(0,m._)({path:[]},i.data),l=a.id,c=a.type,u=a.path,s=(i.data.argumentList||[]).map(aG);try{var d=u.slice(0,-1).reduce(function(e,n){return e[n]},e),f=u.reduce(function(e,n){return e[n]},e);switch(c){case a_.GET:o=f;break;case a_.SET:d[u.slice(-1)[0]]=aG(i.data.value),o=!0;break;case a_.APPLY:o=f.apply(d,s);break;case a_.CONSTRUCT:var h=(0,aS._)(f,(0,eE._)(s));o=aL(h);break;case a_.ENDPOINT:var g,v,y=new MessageChannel,w=y.port1,b=y.port2;aU(e,b),g=w,v=[w],aT.set(g,v),o=g;break;case a_.RELEASE:o=void 0;break;default:return}}catch(e){o=(0,tg._)({value:e},aD,0)}Promise.resolve(o).catch(function(e){return(0,tg._)({value:e},aD,0)}).then(function(e){var t=(0,p._)(aM(e),2),i=t[0],o=t[1];n.postMessage((0,td._)((0,m._)({},i),{id:l}),o),c===a_.RELEASE&&(n.removeEventListener("message",r),aF(n))})}}return n.addEventListener("message",r),n.start&&n.start(),function(){n.removeEventListener("message",r),aF(n)}}function aF(e){"MessagePort"===e.constructor.name&&e.close()}function aP(e){if(e)throw Error("Proxy has been released and is not useable")}function aO(e){var n,t=e.map(aM);return[t.map(function(e){return e[0]}),(n=t.map(function(e){return e[1]}),Array.prototype.concat.apply([],n))]}var aT=new WeakMap;function aL(e){return Object.assign(e,(0,tg._)({},ak,!0))}function aM(e){var n=!0,t=!1,r=void 0;try{for(var i,o=aR[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,p._)(i.value,2),l=a[0],c=a[1];if(c.canHandle(e)){var u=(0,p._)(c.serialize(e),2),s=u[0],d=u[1];return[{type:aA.HANDLER,name:l,value:s},d]}}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}return[{type:aA.RAW,value:e},aT.get(e)||[]]}function aG(e){switch(e.type){case aA.HANDLER:return aR.get(e.name).deserialize(e.value);case aA.RAW:return e.value}}function aN(e,n,t){return new Promise(function(r){var i=[,,,,].fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-");e.addEventListener("message",function n(t){t.data&&t.data.id&&t.data.id===i&&(e.removeEventListener("message",n),r(t.data))}),e.start&&e.start(),e.postMessage((0,m._)({id:i},n),t)})}var aB=t(44354),aH=t(49326),az=Symbol("timeout"),aW=t(33986);function aj(){var e=(0,v._)(["\n  fragment InitialCurrentUserData on CurrentUser {\n    id\n    username\n    image\n    bio\n  }\n"]);return aj=function(){return e},e}function a$(){var e=(0,v._)(["\n  fragment SocialCurrentUserData on CurrentUser {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return a$=function(){return e},e}function aZ(){var e=(0,v._)(["\n  fragment RolesCurrentUserData on CurrentUser {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return aZ=function(){return e},e}function aq(){var e=(0,v._)(["\n  fragment PlanCurrentUserData on CurrentUser {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    ...CoreSubscriptionPlanStatus\n  }\n  ","\n"]);return aq=function(){return e},e}function aV(){var e=(0,v._)(["\n  fragment SocialUserData on User {\n    url\n    socials {\n      id\n      url\n      type\n    }\n    firstName\n    lastName\n    displayName\n    fullName\n    followCount\n    followerCount\n  }\n"]);return aV=function(){return e},e}function aK(){var e=(0,v._)(["\n  fragment RolesUserData on User {\n    roles {\n      id\n      name\n      key\n      tagline\n    }\n  }\n"]);return aK=function(){return e},e}function aJ(){var e=(0,v._)(["\n  fragment PlanUserData on User {\n    isUserHacker: subscriptionIsType(subscriptionType: HACKER)\n    isUserPro: subscriptionIsType(subscriptionType: HACKER_PRO)\n  }\n"]);return aJ=function(){return e},e}function aQ(){var e=(0,v._)(["\n  fragment InitialReplData on Repl {\n    id\n    url\n    title\n    description\n    timeCreated\n    slug\n    isPrivate\n  }\n"]);return aQ=function(){return e},e}function aX(){var e=(0,v._)(["\n  fragment SocialReplData on Repl {\n    likeCount\n    publicForkCount\n    iconUrl\n    imageUrl\n  }\n"]);return aX=function(){return e},e}function a0(){var e=(0,v._)(["\n  fragment InitialUserData on User {\n    id\n    username\n    image\n    bio\n  }\n"]);return a0=function(){return e},e}function a1(){var e=(0,v._)(["\n  fragment OwnerData on Repl {\n    owner {\n      __typename\n      ... on User {\n        ...InitialUserData\n      }\n      ... on Team {\n        id\n        username\n        image\n        description\n      }\n    }\n  }\n  ","\n"]);return a1=function(){return e},e}function a2(){var e=(0,v._)(["\n  fragment MultiplayersData on Repl {\n    multiplayers {\n      ...InitialUserData\n    }\n  }\n  ","\n"]);return a2=function(){return e},e}function a4(){var e=(0,v._)(["\n  query extensionPortCurrentUser(\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user: currentUser {\n      ...InitialCurrentUserData\n      ...SocialCurrentUserData @include(if: $includeSocialData)\n      ...RolesCurrentUserData @include(if: $includeRoles)\n      ...PlanCurrentUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return a4=function(){return e},e}function a5(){var e=(0,v._)(["\n  query extensionPortUserByUsername(\n    $username: String!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    userByUsername(username: $username) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return a5=function(){return e},e}function a7(){var e=(0,v._)(["\n  query extensionPortUserById(\n    $id: Int!\n    $includeSocialData: Boolean! = false\n    $includeRoles: Boolean! = false\n    $includePlan: Boolean! = false\n  ) {\n    user(id: $id) {\n      ...InitialUserData\n      ...SocialUserData @include(if: $includeSocialData)\n      ...RolesUserData @include(if: $includeRoles)\n      ...PlanUserData @include(if: $includePlan)\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return a7=function(){return e},e}function a3(){var e=(0,v._)(["\n  query currentUserEditorPreferences {\n    currentUser {\n      id\n      workspacePreferences\n    }\n  }\n"]);return a3=function(){return e},e}function a6(){var e=(0,v._)(["\n  query extensionPortReplById(\n    $id: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        isOwner\n        replId\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return a6=function(){return e},e}function a8(){var e=(0,v._)(["\n  query extensionPortReplByUrl(\n    $url: String!\n    $includeSocialData: Boolean! = false\n    $includeOwner: Boolean! = false\n    $includeMultiplayers: Boolean! = false\n  ) {\n    repl(url: $url) {\n      __typename\n      ... on Repl {\n        ...InitialReplData\n        ...SocialReplData @include(if: $includeSocialData)\n        ...OwnerData @include(if: $includeOwner)\n        ...MultiplayersData @include(if: $includeMultiplayers)\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return a8=function(){return e},e}var a9=(0,y.J1)(aj()),le=(0,y.J1)(a$()),ln=(0,y.J1)(aZ()),lt=(0,y.J1)(aq(),aW.y),lr=(0,y.J1)(aV()),li=(0,y.J1)(aK()),lo=(0,y.J1)(aJ()),la=(0,y.J1)(aQ()),ll=(0,y.J1)(aX()),lc=(0,y.J1)(a0()),lu=(0,y.J1)(a1(),lc),ls=(0,y.J1)(a2(),lc),ld=(0,y.J1)(a4(),a9,le,ln,lt),lp=(0,y.J1)(a5(),lc,lr,li,lo),lf=(0,y.J1)(a7(),lc,lr,li,lo),lh=(0,y.J1)(a3()),lg=(0,y.J1)(a6(),la,ll,lu,ls),lm=(0,y.J1)(a8(),la,ll,lu,ls);function lv(e){var n;return n=(0,tw._)(function(n){var t,r;return(0,tb.YH)(this,function(i){switch(i.label){case 0:return[4,null===tx.V||void 0===tx.V?void 0:tx.V.query({query:e,variables:n||void 0})];case 1:if(null==(t=i.sent())?void 0:t.data)return[2,t.data];throw Error(null==t||null==(r=t.error)?void 0:r.message)}})}),function(e){return n.apply(this,arguments)}}var ly=t(45843);function lw(e,n){var t={};for(var r in n)"function"==typeof n[r]&&(t[r]=function(e,n){return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=!0,a=!1,l=void 0;try{for(var c,u=e[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)(0,c.value)()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return n.apply(void 0,(0,eE._)(r))}}(e,n[r]));return t}function lb(e,n){return function(){var t=e.store.get(e.extensionStateAtom),r=!0,i=!1,o=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(!t.scopes.has(c)){var u="Scope not declared in extension.json: ".concat(c);e.logger.warn("".concat(u,". In the future this will throw an error"))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}}var lx=eh.ZU.Record(eh.ZU.String(),eh.ZU.String({minLength:1})),lY=t(51749);function lS(){var e=(0,v._)(["\n  query ExtensionApiAuthToken($installationId: String!) {\n    extensionInstallationById(id: $installationId) {\n      ... on ExtensionInstallation {\n        id\n        token\n      }\n    }\n  }\n"]);return lS=function(){return e},e}var lA=(0,y.J1)(lS());function l_(e){var n,t;return{registerCommand:(n=(0,tw._)(function(n,t){var r,i,o;return(0,tb.YH)(this,function(a){switch(a.label){case 0:if(t)return[3,2];return e.logger.warn("registerCommand: calling registerCommand with a single argument is deprecated. Pass a {commandId, contributions} object as the first command."),r=n,[4,(0,av.c)(r,e)];case 1:if(!(o=a.sent()).data.id)throw Error("Command: expected id to be defined");if(!("contributions"in o.data))throw Error("Command: In ".concat(o.data.id,", contributions should be an array"));return 0===o.data.contributions.length&&e.logger.warn("Command: ".concat(o.data.id," has no contributions")),(i={commandId:o.data.id,contributions:o.data.contributions}).contributions||(e.logger.warn("Command: '".concat(o.data.id,"' has no contributions")),i.contributions=[]),[3,4];case 2:return i=n,r=t,[4,(0,av.c)(r,e)];case 3:o=a.sent(),a.label=4;case 4:return e.store.set(aB.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:(0,ao.eb)(i.commandId),contributions:i.contributions,create:(0,tw._)(function(){return(0,tb.YH)(this,function(e){return[2,o]})})}}),[2]}})}),function(e,t){return n.apply(this,arguments)}),registerCreateCommand:(t=(0,tw._)(function(n,t){var r,i;return(0,tb.YH)(this,function(o){var a;if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in aH.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(aH.P))),i={id:(0,ao.eb)(n.commandId),contributions:n.contributions,create:(a=(0,tw._)(function(n){var r;return(0,tb.YH)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(null)},50)})])];case 1:if(null===(r=i.sent()))return[2,null];return[2,(0,av.c)(r,e)]}})}),function(e){return a.apply(this,arguments)})},e.store.set(aB.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})}),function(e,n){return t.apply(this,arguments)})}}function lk(e){return function(){if(!e.store.get(e.extensionStateAtom).enableExperimentalApi)throw Error("Experimental APIs are not enabled. (If you are the developer, please add the `experimental-api` scope to your extension.json)")}}var lC=t(5855);function lI(e){return e.error?{error:e.error,success:!1}:{success:!0,error:null}}var lD=t(27915),lE=t(82532),lR=t(37872),lU=function(e,n){var t=e.extension,r=n.showMessage,i=n.hideMessage,o=n.hideAllMessages,a=function(e){return function(n){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,a=arguments.length>2?arguments[2]:void 0,u=Date.now();u-c>=6e4&&(c=u,l=0);var s=null!=(i=t.manifest.name.trim())?i:"Unknown Extension";l<10?(r({content:(0,f.FD)(f.FK,{children:[n,(0,f.Y)("div",{children:(0,f.Y)(ac.EY,{variant:"small",children:s})})]}),type:e,time:o>1e4?1e4:o,style:a}),l++):lR.vF.error("Extension reached showMessage throttle limit",{extensionId:t.extensionId,extensionName:t.manifest.name,content:n})}},l=0,c=Date.now();return{showConfirm:a("confirm"),showError:a("error"),showNotice:a("notice"),showWarning:a("warning"),hideMessage:i,hideAllMessages:o}},lF=t(21476),lP=t(43303);function lO(e){var n=e.extension,t=e.sandboxUrl,r=e.sandboxTitle,i=e.paneId,o=e.environmentAPIs,a=e.filePath,l=(0,g.useRef)(null),c=(0,ec.A)(),u=(0,aa.T)(),s=(0,oM.A)(),d=(0,g.useRef)(),f=(0,lF.p9)(),h=(0,am.X_)(null==n?void 0:n.installationId),v=(0,lP.D)(),y=(0,g.useRef)(v),w=(0,g.useRef)([]);y.current=v;var b=(0,J.A)(function(){return{}},[]),x=(0,aY.A)(s.container),Y=(0,p._)((0,g.useState)(!1),2),S=Y[0],A=Y[1];(0,g.useEffect)(function(){x===aw.KN.CONNECTED&&A(!0)},[x]),(0,g.useEffect)(function(){w.current.forEach(function(e){return e(v.theme)})},[v.theme]),(0,g.useEffect)(function(){return function(){d.current&&d.current()}},[]);var _=(0,g.useCallback)(function(){try{var e=new URL(t);if("https:"===e.protocol)return!0;return!1}catch(e){return!1}},[t]),k=(0,g.useCallback)(function(){l.current&&_()&&n&&h&&u&&(d.current&&d.current(),d.current=function(e){var n=e.extensionIframe,t=new URL(n.src).origin,r=function(e){var n,t,r,i,o,a,l,c,u,s=e.filePath,d=e.replId,p=e.environmentAPIs,f=e.logger.createLogger({api:"debug"});function h(){return(h=(0,tw._)(function(n){var t,r,i,o;return(0,tb.YH)(this,function(a){switch(a.label){case 0:return[4,null==n?void 0:n.clientName];case 1:return r=null!=(t=a.sent())?t:"(unset)",[4,null==n?void 0:n.clientVersion];case 2:return o=null!=(i=a.sent())?i:"(unset)",(0,oE.u4)(oE.AZ.EXTENSION_SANDBOX_INITIALIZED,{clientName:r,clientVersion:o,extensionId:e.extension.extensionId,extensionName:e.extension.manifest.name,installationId:e.extension.installationId}),(0,tw._)(function(){var n,t,i;return(0,tb.YH)(this,function(a){switch(a.label){case 0:if(!e.extension.isLocal||"@replit/extensions"!==r)return[2];return[4,e.services.container.exec("sh","-c","npm view @replit/extensions --json version 2>/dev/null")];case 1:if((t=a.sent()).error)throw t.error;if(!t.output)throw Error("No output from npm");if((i=JSON.parse(null==(n=t.output)?void 0:n.trim()))===o)return[2];return e.logger.warn("There is a new version of @replit/extensions available. You are using ".concat(o,", but the latest version is ").concat(i),{clientVersion:o,latestVersion:i}),[2]}})})(),[2,{success:!0}]}})})).apply(this,arguments)}return(0,td._)((0,m._)({filePath:s},function(e){var n=e.services.fs,t=e.logger.createLogger({api:"fs"});function r(){return(r=(0,tw._)(function(e,t){var r,i,o;return(0,tb.YH)(this,function(a){switch(a.label){case 0:if(r=(0,lC.Fd)(e),"string"!=typeof t)return[3,1];return i=t,[3,4];case 1:if(!(t instanceof Blob))return[3,3];return o=oR.A.from,[4,t.arrayBuffer()];case 2:return i=o.apply(oR.A,[a.sent()]),[3,4];case 3:i=oR.A.from(t),a.label=4;case 4:return[4,n.writeFile(r,i)];case 5:return[2,lI(a.sent())]}})})).apply(this,arguments)}function i(){return(i=(0,tw._)(function(e){var t,r,i,o=arguments;return(0,tb.YH)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"utf8",r=(0,lC.Fd)(e),[4,n.readFile(r)];case 1:var l,c;if((i=a.sent()).error)return[2,{error:i.error,content:null}];return[2,{error:null,content:(l=i.content,"utf8"===(c=t)?l.toString():"binary"===c?l.toBuffer():l)}]}})})).apply(this,arguments)}function o(){return(o=(0,tw._)(function(e){var t,r;return(0,tb.YH)(this,function(i){switch(i.label){case 0:return t=(0,lC.Fd)(e),[4,n.readDir(t)];case 1:if((r=i.sent()).error)return[2,{error:r.error,children:null}];return[2,{error:null,children:r.children}]}})})).apply(this,arguments)}function a(){return(a=(0,tw._)(function(e){var t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:return t=(0,lC.Fd)(e),[4,n.createDir(t)];case 1:return[2,lI(r.sent())]}})})).apply(this,arguments)}function l(){return(l=(0,tw._)(function(e){var t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:return t=(0,lC.Fd)(e),[4,n.deleteDir(t)];case 1:return[2,lI(r.sent())]}})})).apply(this,arguments)}function c(){return(c=(0,tw._)(function(e){var t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:return t=(0,lC.Fd)(e),[4,n.deleteFile(t)];case 1:return[2,lI(r.sent())]}})})).apply(this,arguments)}function u(){return(u=(0,tw._)(function(e,t){var r,i,o;return(0,tb.YH)(this,function(a){switch(a.label){case 0:return r=(0,lC.Fd)(e),[4,n.stat(r)];case 1:if(!(i=a.sent()).exists)return[2,{error:"File or directory does not exist",success:!1}];if(i.type!==tZ.pt.File)return[3,3];return[4,n.moveFile(r,t)];case 2:return o=a.sent(),[3,5];case 3:return[4,n.moveDir(r,t)];case 4:o=a.sent(),a.label=5;case 5:return[2,lI(o)]}})})).apply(this,arguments)}function s(){return(s=(0,tw._)(function(e,t){var r;return(0,tb.YH)(this,function(i){switch(i.label){case 0:return r=(0,lC.Fd)(e),[4,n.copyFile(r,t)];case 1:return[2,lI(i.sent())]}})})).apply(this,arguments)}return lw([lb(e,["read"])],(0,m._)({readFile:function(e){return i.apply(this,arguments)},readDir:function(e){return o.apply(this,arguments)},watchFile:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"binary",o=(0,lC.Fd)(e);(0,iu.m6)(o)&&t.warn("Extension used watchFile on a text file. This works, but watchTextFile is preferred.");var a=n.watchFile(o,{onChange:function(e){if("utf8"===i)return void r.onChange(e.toString("utf8"));r.onChange(e.asBuffer)},onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return aL(function(){a()})},watchDir:function(e,t){var r=(0,lC.Fd)(e),i=n.watchDir(r,{onChange:function(n){t.onChange(n.map(function(n){return{path:(0,lC.me)(e)+n.filename,type:n.type}}))},onError:function(e){t.onError(e)},onMoveOrDelete:function(e){t.onMoveOrDelete(e)}});return aL(function(){i()})}},lw([lb(e,["write-exec"])],{createDir:function(e){return a.apply(this,arguments)},deleteDir:function(e){return l.apply(this,arguments)},writeFile:function(e,n){return r.apply(this,arguments)},deleteFile:function(e){return c.apply(this,arguments)},copyFile:function(e,n){return s.apply(this,arguments)},move:function(e,n){return u.apply(this,arguments)},watchTextFile:function(e,r){(0,iu.m6)(e)||t.warn("It appears that you are trying to use watchTextFile on a non-OT file. Please use fs.watchFile instead");var i,o=n.watchTextFile(e,{onReady:function(e){var n=e.fetchChanges,t=e.initialContent,i=e.transformSelection,o=e.updateSelections,a=e.version,l=e.writeChange;r.onReady(aL({writeChange:l,fetchChanges:n,initialContent:t,version:a,transformSelection:i,updateSelections:o}))},onChange:(i=(0,tw._)(function(e){var n,t,i,o;return(0,tb.YH)(this,function(a){return n=e.latestContent,t=e.changeSource,i=e.changes,o=e.version,r.onChange({latestContent:n.toString(),version:o,changeSource:t,changes:i.toJSON()}),[2]})}),function(e){return i.apply(this,arguments)}),onError:function(e){r.onError(e.message)},onMoveOrDelete:function(e){r.onMoveOrDelete({eventType:e.eventType,node:e.node})}});return aL(function(){o()})}})))}(e),function(e){var n=e.services.container,t=null;function r(){return i.apply(this,arguments)}function i(){return(i=(0,tw._)(function(){var e;return(0,tb.YH)(this,function(r){switch(r.label){case 0:if(t)return[2];return[4,n.exec("bash","-c","echo $REPLIT_DB_URL")];case 1:if((e=r.sent()).error||!e.output)throw Error("unable to find REPLIT_DB_URL");return t=e.output.trim(),[2]}})})).apply(this,arguments)}function o(){return(o=(0,tw._)(function(e,i){return(0,tb.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl",t,"-s","-d","".concat(e,"=").concat(i))];case 2:return o.sent(),[2]}})})).apply(this,arguments)}function a(){return(a=(0,tw._)(function(e){return(0,tb.YH)(this,function(i){switch(i.label){case 0:return[4,r()];case 1:return i.sent(),[4,n.exec("curl","-s","".concat(t,"/").concat(e))];case 2:return[2,i.sent().output]}})})).apply(this,arguments)}function l(){return(l=(0,tw._)(function(e){var i;return(0,tb.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","".concat(t,"?prefix=").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})).apply(this,arguments)}function c(){return(c=(0,tw._)(function(e){var i;return(0,tb.YH)(this,function(o){switch(o.label){case 0:return[4,r()];case 1:return o.sent(),[4,n.exec("curl","-s","-XDELETE","".concat(t,"/").concat(e))];case 2:if((i=o.sent()).error||!i.output)return[2,{error:i.error}];return[2,{keys:i.output.split("\n")}]}})})).apply(this,arguments)}return lw([lb(e,["repldb:read"])],(0,m._)({getReplDbValue:function(e){return a.apply(this,arguments)},listReplDbKeys:function(e){return l.apply(this,arguments)}},lw([lb(e,["repldb:write"])],{setReplDbValue:function(e,n){return o.apply(this,arguments)},deleteReplDbKey:function(e){return c.apply(this,arguments)}})))}(e),{watchActiveFile:function(e){return aL(n.environmentAPIs.watchActiveFile(e))},openFile:(n=e).environmentAPIs.openFile,getActiveFile:function(){return n.environmentAPIs.getActiveFile()}},(t=e.getThemeContext,r=e.onThemeChange,{getCurrentTheme:function(){return t().theme},getCurrentThemeValues:function(){return t().theme.values.global},onThemeChange:function(e){var n=r(e);return aL(function(){n()})},onThemeChangeValues:function(e){var n=r(function(n){return e(n.values.global)});return aL(function(){n()})}}),lU(e,p.toasts),{currentUser:lv(ld),userById:lv(lf),userByUsername:lv(lp),currentRepl:function(e){return lv(lg)((0,m._)({id:d},e))},replById:lv(lg),replByUrl:lv(lm)},function(e){var n=e.services.container.client(),t=e.logger.createLogger({api:"exec"});function r(){return(r=(0,tw._)(function(e){var r,i,o,a;return(0,tb.YH)(this,function(l){switch(l.label){case 0:return[4,e.args];case 1:return r=l.sent(),[4,e.env];case 2:if(i=l.sent(),t.info("exec: [".concat(r.join(", "),"]"),{environmentVariables:i}),!ly.J(lx,i))throw Error("Invalid environment variables");return[4,e.splitStderr];case 3:return o=l.sent(),a=function(){},[2,aL({dispose:function(){a()},promise:new Promise(function(l){a=n.openChannel({service:"exec"},function(n){var c=n.channel;c.onCommand(function(n){o?n.output?e.onOutput(n.output):n.stderr&&e.onStdErr(n.stderr):n.output&&e.onOutput(n.output)}),c.request({exec:{args:r,env:i,splitStderr:!!o}}).then(function(n){if(n.ok)return void l({exitCode:0,error:null});if(n.channelClosed){var t="Channel closed before command's execution finished";e.onError(t),l({exitCode:null,error:t});return}if("open"===c.status&&a(),n.error){var r,i,o=Number(null==(i=n.error)||null==(r=i.match(/-?[0-9]+/g))?void 0:r[0]);l({exitCode:"number"==typeof o?o:null,error:n.error});return}throw Error("Unknown error")}).catch(function(n){t.error("exec: threw crosis error:\n".concat(String(n||"")));var r="exec() failed due to internal error. See console for details.";e.onError(r),l({error:r,exitCode:null})})})})})]}})})).apply(this,arguments)}return(0,m._)({},lw([lb(e,["write-exec"])],{exec:function(e){return r.apply(this,arguments)}}))}(e),(i=e.extension,o=e.paneId,a=e.environmentAPIs,l=!1,{activatePane:function(){o&&(a.activatePane(o),l||(l=!0,(0,oE.u4)(oE.AZ.EXTENSION_USED,{extensionId:i.extensionId,extensionName:i.manifest.name})))}})),{commands:{registerCommand:(c=(0,tw._)(function(n,t){var r;return(0,tb.YH)(this,function(i){switch(i.label){case 0:if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),[4,(0,av.c)(t,e)];case 1:return r=i.sent(),e.store.set(aB.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:{id:n.commandId,contributions:n.contributions,create:(0,tw._)(function(){return(0,tb.YH)(this,function(e){return[2,r]})})}}),[2]}})}),function(e,n){return c.apply(this,arguments)}),registerCreateCommand:(u=(0,tw._)(function(n,t){var r,i;return(0,tb.YH)(this,function(o){var a;if(!n.commandId||""===n.commandId)throw Error("Attempted to register command without id");if(!n.contributions||!Array.isArray(n.contributions))throw Error("Command: In ".concat(n.commandId,", contributions should be an array"));return 0===n.contributions.length&&e.logger.warn("Command: ".concat(n.commandId," has no contributions")),(r=n.contributions.filter(function(e){return!(e in aH.P)})).length>0&&e.logger.warn("Command: ".concat(n.commandId," has unrecognized contributions: ").concat(r.join(", "),". Valid contributions are ").concat(Object.values(aH.P))),i={id:n.commandId,contributions:n.contributions,create:(a=(0,tw._)(function(n){var r;return(0,tb.YH)(this,function(i){switch(i.label){case 0:return[4,Promise.race([t({path:n.path}),new Promise(function(e){return setTimeout(function(){return e(az)},50)})])];case 1:if(null===(r=i.sent()))return[2,null];if(r===az)return e.logger.warn("Command took too long to create. When using registerCreateCommand, you must return a command within ".concat(50,"ms")),[2,null];return[2,(0,av.c)(r,e)]}})}),function(e){return a.apply(this,arguments)})},e.store.set(aB.Pw,{extensionStateAtom:e.extensionStateAtom,createCommand:i}),[2]})}),function(e,n){return u.apply(this,arguments)})},experimental:(0,td._)((0,m._)({},lw([lk(e)],{hasExperimentalApi:function(){return!0}})),{editor:lw([lk(e)],(0,m._)({},function(){function e(){return(e=(0,tw._)(function(){var e,n,t,r;return(0,tb.YH)(this,function(i){switch(i.label){case 0:return[4,null===tx.V||void 0===tx.V?void 0:tx.V.query({query:lh})];case 1:if(null==(t=i.sent())||null==(n=t.data)||null==(e=n.currentUser)?void 0:e.workspacePreferences)return[2,(0,lY.o)(t.data.currentUser.workspacePreferences)];throw Error(null==t||null==(r=t.error)?void 0:r.message)}})})).apply(this,arguments)}return{getPreferences:function(){return e.apply(this,arguments)}}}())),commands:lw([lk(e)],(0,m._)({},l_(e))),auth:lw([lk(e)],(0,m._)({},{getAuthToken:function(){return(0,tw._)(function(){var n,t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:if(e.extension.isLocal)return[2,[btoa(JSON.stringify({alg:"none",typ:"JWT",local:!0,key:"there-is-no-key-for-local-extensions"})),btoa(JSON.stringify({installationId:e.extension.installationId,extensionId:e.extension.extensionId,userId:e.userId,origin:"https://staging.replit.com"})),"this-is-a-locally-generated-jwt-that-will-fail-verification-to-avoid-being-used-accidentally-in-prod-so-please-check-the-header-for-whether-this-is-a-local-extension"].join(".")];return[4,null===tx.V||void 0===tx.V?void 0:tx.V.query({query:lA,variables:{installationId:e.extension.installationId}})];case 1:if(!(null==(n=r.sent())?void 0:n.data))throw Error("Failed to authenticate: something went wrong");if("NotFoundError"===(t=n.data.extensionInstallationById).__typename)throw Error("Failed to authenticate: invalid installation ID");if("ExtensionInstallation"!==t.__typename||!t.token)throw Error("Failed to authenticate: something went wrong");return[2,t.token]}})})()}})),internal:lw([lk(e)],(0,m._)({},l_(e)))}),internal:function(e){var n,t,r;return e.store.get(e.extensionStateAtom).enableInternalApi?{hasInternalApi:function(){return!0},ghostwriter:{},container:(n=e.services.container,{getConnectionState:function(){return n.getConnectionState()},onConnectionStateChanged:function(e){var t=n.onConnectionStateChanged(e);return aL(function(){t()})}}),layout:{revealOrInsertTool:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e.logger.createLogger({api:"revealOrInsertTool"});if(!e.extension.manifest.tools)return void t.warn("No tools defined in extension manifest");if(e.extension.manifest.tools.length<n+1)return void t.warn("Tool index out of bounds");var r=e.extension.manifest.tools[n],i=r.name||e.extension.manifest.name,o=r.handler;e.environmentAPIs.revealOrInsertTool({extensionId:e.extension.extensionId,installationId:e.extension.installationId,baseUrl:e.extension.baseUrl,path:o,name:i})},getLayoutState:function(){return e.environmentAPIs.getLayoutState()},setLayoutState:function(n){return e.environmentAPIs.setLayoutState(n)}},secrets:(t=e.services.secrets,{setSecret:function(e){var n=e.key,r=e.value;return(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return[4,t.addEntries([{key:n,value:r}])];case 1:return e.sent(),[2,(0,lD.Ok)(!0)]}})})()},getSecret:function(e){return(0,tw._)(function(){var n;return(0,tb.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.read()];case 1:return[2,lD.Ok.apply(void 0,[r.sent().get(e.key)])];case 2:return n=r.sent(),[2,(0,lD._)(n)];case 3:return[2]}})})()},getReferenceCode:function(e){return(0,tw._)(function(){return(0,tb.YH)(this,function(n){return[2,(0,lE.M)(e.filePath,e.key)]})})()}}),dotReplit:{getConfig:(r=e.services.dotReplit).getConfig,update:r.updateDotReplit},ssh:{getSshConfig:function(){return(0,tw._)(function(){return(0,tb.YH)(this,function(n){return[2,e.environmentAPIs.getSshConfig()]})})()}},commands:l_(e)}:null}(e),debug:{info:function(e,n){return f.info(e,n)},warn:function(e,n){return f.warn(e,n)},error:function(e,n){return f.error(e,n)}},handshake:function(e){return h.apply(this,arguments)}})}(e);if(!n.contentWindow)throw Error("No contentWindow");var i=aU(r,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"*";return{postMessage:function(n,r){e.postMessage(n,t,r)},addEventListener:n.addEventListener.bind(n),removeEventListener:n.removeEventListener.bind(n)}}(n.contentWindow,self,t),{origin:t,source:n.contentWindow}),o=function(r){if(r.origin===t&&n.contentWindow===r.source){var i=r.data;i.payload&&e.logger.warn("Extension sent deprecated postMessage",i)}};return window.addEventListener("message",o),function(){i(),window.removeEventListener("message",o)}}({extension:n,extensionIframe:l.current,services:s,paneId:i,replId:c,getThemeContext:function(){return y.current},onThemeChange:function(e){return w.current.push(e),function(){w.current.splice(w.current.indexOf(e),1)}},store:f,extensionStateAtom:h,environmentAPIs:o,filePath:a,logger:n.logger.createLogger({sandboxUrl:t,sandboxTitle:r}),userId:u,ghostwriter:b}))},[u,y,s,_,i,f,h,o,c,a,n,t,r,b]);return{isValidExtensionPaneUrl:_,didConnectOnce:S,getIframeProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,td._)((0,m._)({title:r,src:t},ab.A,e),{ref:(0,ax.P)([l,e.ref],{breadcrumb:"client/workspace/extensions/sandbox/useExtensionSandbox.tsx:191"}),onLoad:function(n){k(),e.onLoad&&e.onLoad(n)}})},reloadSandbox:(0,g.useCallback)(function(){if(l.current){var e=l.current.src;l.current.src=e}},[])}}function lT(e){var n=e.extension,t=e.environmentAPIs;if(!n.manifest.background)throw Error("ExtensionBackground loaded without a background script defined in manifest");var r=(0,am.X_)(n.installationId),i=lO({extension:n,sandboxUrl:(0,ay.sU)(n.baseUrl,n.manifest.background.page),sandboxTitle:"Extension Background: "+n.manifest.name,environmentAPIs:t,paneId:null,filePath:null}),o=i.didConnectOnce,a=i.isValidExtensionPaneUrl,l=i.getIframeProps;return a()&&o&&r?(0,f.Y)("iframe",(0,m._)({},l({css:{width:"0px",height:"0px",border:"none"}}))):null}var lL=t(12556),lM=t(12059),lG=t(30095),lN=t(52027),lB=t(81472);function lH(){var e,n,t,r=(0,ec.A)(),i=(0,aa.T)(),o=(0,oM.A)().container,a=(0,ag.A)(o).url,l=(0,lL.oR)(),c=(0,am.Sc)(),u=oh(),s=(0,lM.yb)(),d=(0,am.hS)(),h=(0,lM.iD)();(0,lL.Ju)();var v=(0,am.Ot)(),y=ah(),b=(0,p._)((0,g.useState)(!1),2),x=b[0],Y=b[1];(0,g.useEffect)(function(){r&&i&&h({replId:r,userId:i})},[r,i,h]);var S=(0,aB.xx)(),A=rl(nS);(0,g.useEffect)(function(){A(S)},[S,A]);var _=rl(rj);n=(e=(0,m._)({},rN,void 0),w.I(rB,e)).data,t=rl(rz),(0,g.useEffect)(function(){var e;(null==n||null==(e=n.currentUser)?void 0:e.filetypeAssociations)&&t(n.currentUser.filetypeAssociations)},[n,t]);var k=ro(rW),C=rl(rW),I=function(e){var n,t=e.filterUser;return n=(0,tw._)(function(e){var n,o;return(0,tb.YH)(this,function(a){switch(a.label){case 0:if(!e.active)return[2,[]];return[4,null===tx.V||void 0===tx.V?void 0:tx.V.query({query:ai,variables:{replId:r,userId:t?i:void 0}})];case 1:if(!(n=a.sent())||n.error||!(o=n.data.extensionList))return[2,[]];return[2,o.map(function(e){var n;return{match:oU.G2,data:{type:"action",label:e.name,icon:(0,f.Y)(lB.A,{}),description:null!=(n=e.description)?n:"",run:function(){e.url&&(e.installation?d({installationId:(0,ao.qq)(e.installation.id)}):c({replId:r,extensionId:(0,ao.PM)(e.id)}))}}}})]}})}),function(e){return n.apply(this,arguments)}},D=(0,aB.Zp)(aH.P.CommandBar);return o9({data:{type:"group",key:"Extensions",description:"Commands from Extensions"},commands:(0,tw._)(function(){var e;return(0,tb.YH)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{}}],[4,Promise.all(D.map((t=(0,tw._)(function(n){var t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,av.l)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})},{enabled:!0}),o9({match:oU.G2,commands:function(e){return e.active||""!==e.searchQuery?[{match:oU.G2,data:{type:"action",label:"Extension Devtools",icon:(0,f.Y)(oV.A,{}),description:"Manage and deploy this Repl as an extension",run:function(){u({pane:{type:"extensionDevtools"}})}}},{match:oU.G2,data:{type:"action",label:"URL",icon:(0,f.Y)(oV.A,{}),description:"Add an extension by URL",run:function(){Y(!0)}}},{match:oU.G2,data:{type:"action",label:"From this Repl",icon:(0,f.Y)(oV.A,{}),description:"Load this Repl as an extension",run:function(){a&&s(a)}}},{match:oU.G2,data:{type:"context",label:"My Extensions",icon:(0,f.Y)(lB.A,{}),description:"Browse extensions you have created"},commands:I({filterUser:!0})},{match:oU.G2,data:{type:"action",label:"Docs",icon:(0,f.Y)(lN.A,{}),description:"Read the Extensions docs",run:function(){u({pane:{type:"docs",data:{url:tv.ik.EXTENSIONS}}})}}}]:[]},data:{type:"context",label:"Extensions",icon:(0,f.Y)(lB.A,{}),description:"Manage extensions"}},{enabled:l}),(0,f.FD)(f.FK,{children:[(0,f.Y)(o7.a,{isOpen:x,onRequestClose:function(){return Y(!1)},children:(0,f.Y)(lG.A,{prompt:"Add an extension by URL",desc:"Insert extension url",placeholder:"https://example-extension.replit.app",type:"text",onCancel:function(){return Y(!1)},onConfirm:function(e){s(e)}})}),(0,f.Y)(o7.a,{isOpen:!!k,onRequestClose:function(){return C(null)},children:k?(0,f.Y)(as,{fileExtension:k.fileExtension,extensionId:k.extensionId,fileHandlerId:k.fileHandlerId,onCancel:function(){return C(null)},onConfirm:(0,tw._)(function(){var e;return(0,tb.YH)(this,function(n){switch(n.label){case 0:return e=k.fileExtension,[4,_({fileExtension:e,newAssociation:{extensionId:k.extensionId,fileHandlerId:k.fileHandlerId}})];case 1:return n.sent(),C(null),[2]}})})}):null}),v.map(function(e){return e.manifest.background?(0,f.Y)(lT,{environmentAPIs:y,extension:e},e.installationId):null})]})}var lz=t(52749),lW=t(62183),lj=t(74726);function l$(){var e=(0,oM.A)().fs,n=(0,p._)((0,g.useState)(!1),2),t=n[0],r=n[1],i=(0,p._)((0,g.useState)(!1),2),o=i[0],a=i[1],l=(0,g.useId)();(0,g.useEffect)(function(){if(!o)return e.onDiskQuotaExceeded(function(){r(!0)})},[e,o]);var c=(0,g.useCallback)(function(){r(!1)},[r]);return(0,f.Y)(o7.a,{isOpen:t,onRequestClose:c,children:(0,f.Y)(i4.S,{gap:24,children:(0,f.FD)(i4.S,{gap:24,children:[(0,f.FD)(ac.Y9,{level:3,variant:"headerDefault",children:["Oops! This Repl's disk is full"," ",(0,f.Y)(lW.A,{color:ry.LU.accentNegativeDefault,size:20})]}),(0,f.FD)(ac.EY,{variant:"subheadDefault",children:["Please free up space by deleting some files. You can open the file tree by clicking the ",(0,f.Y)(lj.A,{})," icon on the left."]}),(0,f.Y)(ac.EY,{children:"You can check how much space you are using from the Repl Resources section under the file tree."}),(0,f.FD)(i4.S,{row:!0,gap:8,tag:"label",children:[(0,f.Y)(lz.S,{id:l,checked:o,onChange:a}),(0,f.Y)(ac.EY,{variant:"small",children:"Do not show this message again for this session."})]}),(0,f.Y)(al.$n,{onClick:c,text:"Close"})]})})})}var lZ=t(7306),lq=t(81086),lV=t(27659),lK=t(55557);function lJ(){var e=rl(t4),n=(0,lq.A)({moveOrDeleteFile:e}),t=n.isConverging,r=n.didContentsDiverge,i=n.showMoreDetail,o=n.failedFiles,a=n.failedFilesOptions,l=n.selectedFile,c=n.setSelectedFile,u=n.reviewingPrompt,s=n.onChoice,d=n.local,p=n.remote,h=[i2.wp.minHeight("7em"),i2.wp.maxHeight("50vh"),i2.wp.overflowY("auto"),{"> div":{display:"flex",alignItems:"stretch",width:"100%",height:"100%"},"> div > .cm-editor":{flex:"1 1 auto",width:"100%"}}];return(0,f.Y)(o7.a,{css:[{maxHeight:"90%"}],preventClose:!0,maxWidth:"90%",isOpen:r,onRequestClose:function(){},children:(0,f.FD)(i4.S,{gap:24,children:[(0,f.Y)(ac.Y9,{level:3,variant:"headerDefault",children:"Replit is out of sync!"}),(0,f.FD)(ac.EY,{children:["Sometimes Replit has trouble making sure everyone's code is the same. Let us know which version of"," ",o.length>1?"these files":"this file"," you'd like to keep."," ",o.length>1?(0,f.FD)("strong",{children:["There are ",o.length," files impacted by this."]}):""]}),t?(0,f.Y)(lK.A,{}):(0,f.FD)(f.FK,{children:[a.length?(0,f.Y)(lV.l,{initialSelectedItem:a[0],selectedItem:a.find(function(e){return e.path===l}),items:a,onChange:function(e){c(e.path)}}):null,i?(0,f.FD)(i4.S,{css:[i2.wp.backgroundColor.redDimmest,i2.wp.font.code],pt:16,p:8,row:!0,gap:16,justify:"start",align:"center",children:[(0,f.Y)(ac.EY,{variant:"subheadDefault",multiline:!1,children:"Debug View"}),(0,f.FD)(ac.EY,{multiline:!1,children:["Divergence type: ",null==u?void 0:u.case]})]}):null,(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.FD)(i4.S,{css:[{flexBasis:0}],grow:!0,shrink:!0,children:[(0,f.Y)(ac.EY,{variant:"subheadDefault",multiline:!1,children:"My changes"}),(0,f.Y)(o3.ui,{elevated:!0,grow:!0,shrink:!0,py:8,children:(0,f.Y)(i4.S,{css:h,children:(0,f.Y)(lZ.N,{diffViewer:d})})}),(0,f.FD)(i4.S,{pt:16,children:[(0,f.Y)(ac.EY,{css:[i2.wp.textAlign.center],children:"This might disrupt other people's work or create unexpected bugs."}),(0,f.Y)(al.$n,{onClick:function(){s("local")},text:"Reset to Mine"})]})]}),(0,f.FD)(i4.S,{css:[{flexBasis:0}],grow:!0,shrink:!0,children:[(0,f.Y)(ac.EY,{variant:"subheadDefault",multiline:!1,children:"Shared changes"}),(0,f.Y)(o3.ui,{elevated:!0,grow:!0,shrink:!0,py:8,children:(0,f.Y)(i4.S,{css:h,children:(0,f.Y)(lZ.N,{diffViewer:p})})}),(0,f.FD)(i4.S,{pt:16,justify:"end",children:[(0,f.Y)(ac.EY,{css:[i2.wp.textAlign.center],children:"This is the safest option and won't disrupt other's work."}),(0,f.Y)(al.$n,{onClick:function(){s("remote")},text:"Sync to Shared",colorway:"primary"})]})]})]})]})]})})}var lQ=t(71029),lX=t(81280),l0=t(78579),l1=t(74346),l2=t(75267),l4=t(87363),l5=t(94643),l7=t(42793),l3=t(78626),l6=t(40831),l8=t(80953);function l9(e){return(0,f.Y)(i5.Ay,(0,td._)((0,m._)({},e),{children:(0,f.Y)("path",{d:"M2.47 5.53a.75.75 0 0 1 1.06-1.06l16 16a.75.75 0 1 1-1.06 1.06l-16-16ZM1.291 11.215a7.593 7.593 0 0 1 1.42-3.675l1.077 1.077a6.024 6.024 0 0 0-.376 6.128 6.352 6.352 0 0 0 2.402 2.554 6.73 6.73 0 0 0 3.462.951h4.146l1.5 1.5H9.277a8.23 8.23 0 0 1-4.234-1.164 7.852 7.852 0 0 1-2.967-3.16 7.524 7.524 0 0 1-.785-4.211ZM5.828 5l1.15 1.15.02-.008a6.787 6.787 0 0 1 3.593-.263 6.62 6.62 0 0 1 3.185 1.603 6.2 6.2 0 0 1 1.81 2.962.75.75 0 0 0 .725.556h1.145c1.015 0 1.983.389 2.693 1.072a3.544 3.544 0 0 1 1.101 2.553c0 .952-.393 1.871-1.101 2.553a3.817 3.817 0 0 1-1.317.825l1.134 1.134a5.286 5.286 0 0 0 1.223-.878 5.044 5.044 0 0 0 1.561-3.634 5.044 5.044 0 0 0-1.56-3.634A5.385 5.385 0 0 0 17.455 9.5h-.593a7.725 7.725 0 0 0-2.074-3.124 8.118 8.118 0 0 0-3.907-1.968A8.287 8.287 0 0 0 5.828 5Z"})}))}var ce=(0,l7.i7)("0%,100%{opacity:1;}50%{opacity:0.25;}"),cn=(0,rw.x)({root:[i2.wp.height(20),i2.wp.width(20),i2.wp.center]}),ct=(0,rw.x)({root:[cn.root],pulseRoot:[cn.root,{animation:"".concat(ce," 2s infinite")}]});function cr(){var e=(0,l5.A)(),n=e.isSaving;return e.isOffline?(0,f.Y)(l3.m_,{tooltip:"Reconnecting, changes will be synced when youre online",placement:"right",children:(0,f.Y)(i4.S,{css:ct.root,children:(0,f.Y)(l9,{size:16,color:ry.LU.redDefault})})}):n?(0,f.Y)(l3.m_,{tooltip:"Saving",placement:"right",children:(0,f.Y)(i4.S,{css:ct.pulseRoot,children:(0,f.Y)(l6.A,{size:16,color:ry.LU.foregroundDimmest})})}):(0,f.Y)(l3.m_,{tooltip:"Saved",placement:"right",children:(0,f.Y)(i4.S,{css:ct.root,children:(0,f.Y)(l8.A,{size:16,color:ry.LU.foregroundDimmest})})})}var ci=t(25646),co=t(53301),ca=t(41750),cl=t(86891),cc=t(52949),cu=t(59060),cs=t(65623),cd=t(70089),cp=t(36993),cf=t(83070),ch=t(77915),cg=t(54148),cm=t(53307),cv=t(69554),cy=t(55919),cw=t(62693),cb=t(7481),cx=t(50919),cY=t(63837);function cS(e){var n=e.filetree,t=(0,ec.A)(),r=(0,cl.R)(t).orgId,i=(0,B.A)(r).banSourceCodeExport,o=(0,rn.xu)(),a=(0,rn.xi)(),l=(0,g.useRef)(null),c=(0,g.useRef)(null),u=(0,ca.k)(),s=(0,g.useCallback)(function(){var e=[{icon:(0,f.Y)(cy.A,{}),label:"New file",run:function(){n.create(tZ.pt.File)}},{icon:(0,f.Y)(cb.A,{}),label:"New folder",run:function(){n.create(tZ.pt.Directory)}},{icon:(0,f.Y)(cw.A,{}),label:cu.SS.UploadFile.text,run:function(){l.current&&(l.current.click(),(0,cp.A)({replId:t,action:"uploaded",fileType:tZ.pt.File}))}}];return u&&e.push({icon:(0,f.Y)(cx.A,{}),label:cu.SS.UploadFolder.text,run:function(){c.current&&(c.current.click(),(0,cp.A)({replId:t,action:"uploaded",fileType:tZ.pt.Directory}))}}),i||e.push({icon:(0,f.Y)(cg.A,{}),label:cu.SS.DownloadZip.text,run:function(){return(0,cd._)(t)}},{icon:a?(0,f.Y)(cv.A,{}):(0,f.Y)(cm.A,{}),label:a?cu.SS.HideHiddenFiles.text:cu.SS.ShowHiddenFiles.text,run:function(){o(!a)}}),n.getExpandedDirs()&&e.push({icon:(0,f.Y)(ch.A,{}),label:"Collapse all",run:function(){var e=n.getExpandedDirs();e&&n.collapse((0,eE._)(e))}}),{data:{type:"context",label:"Search actions",icon:(0,f.Y)(oT.A,{})},commands:function(){return e.map(function(e){return{match:oU.G2,data:{type:"action",label:e.label,run:e.run,icon:e.icon}}})}}},[a,o,t,u,n,i]),d=(0,cc.EF)().openContextMenu,p=(0,g.useRef)(null);return(0,f.FD)(f.FK,{children:[(0,f.Y)(cf.K0,{alt:"menu",tooltipBehavior:"hidden",ref:p,onClick:function(){return p.current&&d({target:p.current,command:s()})},children:(0,f.Y)(cY.A,{color:ry.LU.foregroundDimmest})}),(0,f.Y)(cs.v,{fileUploadInputRef:l,dirUploadInputRef:c,uploadFiles:n.upload})]})}var cA=t(36776),c_=t.n(cA),ck=(0,ry.CK)("Search.module.css",["--background-color","--input-height"]),cC={type:"context",icon:(0,f.Y)(oT.A,{}),label:"",description:"Search"};function cI(){var e,n=(0,oM.A)().fs,t=(0,tG.Sx)(),r=ov(),i=(0,oW.J)(),o=(0,g.useMemo)(function(){var e=(0,oG.g)({openFile:r,fs:n,shouldHideFile:i,getRecentFiles:t});return e.data=cC,delete e.match,e},[r,n,i,t]);return(0,f.Y)(i4.S,{clsx:c_().root,style:(e={},(0,tg._)(e,ck.backgroundColor,co.s),(0,tg._)(e,ck.inputHeight,"32px"),e),children:(0,f.Y)(o6.r,{fullWidth:!0,command:o,openOnInput:!0,compact:!0})})}var cD=t(66485),cE=t(79932),cR=t(38674),cU=t(70871),cF=t(90890),cP=t(75679),cO=t(12576),cT=t(55576),cL=t(41526),cM=t(77495),cG=t(83728),cN=t(49748),cB=t(18911),cH=t(66398),cz=t(81650);function cW(e){return{match:oU.G2,data:{type:"action",label:"Rename",icon:(0,f.Y)(cG.A,{}),run:e}}}function cj(e){return[{label:"Copy file path",icon:(0,f.Y)(cL.A,{}),run:function(){return(0,cU.default)(e)}},{label:"Copy link",icon:(0,f.Y)(cN.A,{}),run:function(){return(0,cU.default)((0,cO.Ax)({path:e}))}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:oU.G2,data:{type:"action",label:n,icon:t,run:r}}})}function c$(e){return{match:oU.G2,data:{type:"action",icon:(0,f.Y)(cz.A,{color:ry.LU.redDefault}),label:"Delete",run:e}}}function cZ(e){var n=e.size,t=e.iconUrl,r=e.name;return(0,f.Y)(cT.A,{src:t,width:n,height:n,alt:"Icon for file opener: ".concat(r)})}var cq=/[*]{2}\/[*]\.([a-z0-9.]+)/,cV=t(17254),cK=t(49271),cJ=t(6762),cQ=t(61655),cX=t(20696),c0=t.n(cX),c1={id:"sidebar.toggle",name:"Toggle sidebar",description:"Opens or closes the sidebar",default:(0,o5.FM)({cmdOrCtrl:!0,shift:!0,key:"b"})},c2=(0,ry.CK)("index.module.css",["--width","--height","--transform","--border-color","--background-color","--display","--z-index","--resize-handle-width","--resize-handle-height","--resize-handle-transform","--resize-grip-opacity","--resize-grip-color"]);function c4(e){var n,t=(e.isOpen,co.s),r=e.isOpen?t:"transparent";return n={},(0,tg._)(n,c2.width,e.width+"px"),(0,tg._)(n,c2.height,e.height+"px"),(0,tg._)(n,c2.transform,"translate(".concat(e.x,"px, ").concat(e.y,"px)")),(0,tg._)(n,c2.display,e.isOpen?"flex":"none"),(0,tg._)(n,c2.borderColor,r),(0,tg._)(n,c2.backgroundColor,t),(0,tg._)(n,c2.zIndex,rv.W.filetreeDragLayer.toString()),n}var c5=(0,g.memo)(function(){var e,n,t,r,i,o,a,l,c,u,s,d,h,v,y,w,b,x,Y,S,A,_,k,C,I,D,E,R,U,F,P,O,T,L,M,G,N,B=(0,g.useRef)(null),H=oA().view;(0,rm.d)(B,H,c4);var z=(e=(0,ec.A)(),t=(n=(0,p._)((0,g.useState)(null),2))[0],r=n[1],i=ov(),o=(0,cK.v)(),a=(0,oW.J)(!0),l=(0,g.useCallback)(function(e){return!a(e.filename)},[a]),c=(0,oM.A)().fs,u=(0,K.g)("multiselectModifierKey").preferences,s=rl(nE),d="cmdOrCtrlKey"===u.multiselectModifierKey?"cmdOrCtrlKey":"altKey",h=(0,tG.Sx)(),v=(0,g.useCallback)(function(e){return(0,cJ.J9)(e,h)},[h]),y=(0,cc.EF)().onContextMenu,w=(0,ec.A)(),b=(0,oM.A)().fs,x=ov(),Y=rl(tH),S=ro(nS),A=(0,aB.Zp)(aH.P.FiletreeContextMenu),_=ro(rz),k=rl(rj),C=rl(rW),I=(0,g.useCallback)(function(e){var n=e.extensionId,t=e.fileExtension,r=e.fileHandlerId,i=_[t];i&&i.extensionId===n&&i.fileHandlerId===r||C(e)},[C,_]),D=(0,g.useCallback)(function(e,n){var t,r=e.path,i=[{data:{type:"group",key:"rename"},commands:function(){return[cW(function(){return n.rename(r)})]}}];(0,iu.m6)(r)&&i.push({data:{type:"group",key:"saveFile"},commands:function(){var e;return[(e=(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return[4,b.flush(new Set([r]),tZ.sT.MANUAL_SAVE)];case 1:return e.sent(),[2]}})}),{match:oU.G2,data:{type:"action",label:"Save file",icon:(0,f.Y)(cB.A,{}),run:e}})]}}),i.push({data:{type:"group",key:"open"},commands:function(){return function(e){var n=e.path,t=e.getSelectedNodes,r=e.openFile,i=[{type:tZ.pt.File,path:n}],o=!0,a=!1,l=void 0;try{for(var c,u=t()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=(0,p._)(c.value,2),d=s[0],h=s[1];h!==tZ.pt.Directory&&d!==n&&i.push({path:d,type:h})}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var g=i.length,m=1===g?"Open":"Open ".concat(g," files");return[{label:m,icon:(0,f.Y)(cm.A,{}),run:function(){var e=!0,n=!1,t=void 0;try{for(var o,a=i[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;r({path:l.path,newTab:!0})}}catch(e){n=!0,t=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw t}}}},{label:m+" in split",icon:(0,f.Y)(i6,{}),run:function(){var e=(0,eD._)(i),n=e[0],t=e.slice(1);r({path:n.path,newPane:!0});var o=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;r({path:s.path,newTab:!0})}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:oU.G2,data:{type:"action",label:n,icon:t,run:r}}})}({path:r,getSelectedNodes:n.getSelectedNodes,openFile:x})}});var o=function(e){var n=function(e){var n=r[e],i=(0,cE.tL)(n.glob);if(!i||!i.exec(t))return"continue";var l=cq.exec(n.glob),c=n.icon?n.icon:n.extension.manifest.icon,u=n.name?n.name:n.extension.manifest.name,d=c?(0,ay.sU)(n.extension.baseUrl,c):null;s.push({match:oU.G2,data:{type:"action",icon:d?(0,f.Y)(cZ,{size:16,name:u,iconUrl:d}):(0,f.Y)(cm.A,{}),label:"Open with "+u,run:function(){l&&a({extensionId:n.extension.extensionId,fileHandlerId:e,fileExtension:l[1]}),o({path:t,opener:{paneType:"extension",supports:function(){return!0},extensionFileHandler:n}})}}})},t=e.path,r=e.handlers,i=e.filetypeAssociations,o=e.openFile,a=e.requestAssociateFiletype,l=e.associateFiletype,c=(0,is.QC)(t),u=c?i[c]:null,s=[];for(var d in r)n(d);return u&&c&&s.length&&s.push({match:oU.G2,data:{icon:(0,f.Y)(cz.A,{}),type:"action",label:"Use default opener",run:function(){l({fileExtension:c,newAssociation:null})}}}),s}({path:r,handlers:S,filetypeAssociations:_,requestAssociateFiletype:I,associateFiletype:k,openFile:x});return o.length&&i.push({data:{type:"group",key:"extensions"},commands:function(){return o}}),i.push({data:{type:"group",key:"copy"},commands:function(){return cj(r)}}),i.push((t=(0,tw._)(function(){var e;return(0,tb.YH)(this,function(t){switch(t.label){case 0:e=null,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,cF.A)(r,b)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{type:"error",message:"Error duplicating file"}];case 4:return(0,cp.A)({replId:w,action:"duplicated",fileType:tZ.pt.File}),n.rename(e),[2]}})}),{match:oU.G2,data:{type:"action",label:"Duplicate file",icon:(0,f.Y)(cM.A,{}),run:t}})),i.push((0,cP.Gp)(r,b)),i.push({data:{type:"group",key:"deleteFile"},commands:function(){return[c$(function(){return n.deleteNodes(e)})]}}),i.push({data:{type:"group",key:"extensions"},commands:(0,tw._)(function(){var e;return(0,tb.YH)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{filePath:r,fileType:tZ.pt.File}}],[4,Promise.all(A.map((t=(0,tw._)(function(n){var t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,av.l)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),i},[x,I,k,w,A,S,_,b]),E=(0,rn.xu)(),R=(0,rn.xi)(),U=(0,g.useCallback)(function(e,n){var t,r=e.path,i=r===cR.Dl,o=i?[]:[{data:{type:"group",key:"rename"},commands:function(){return[cW(function(){return n.rename(e.path)})]}}];return o.push({data:{type:"group",key:"search"},commands:function(){var n;return[(n=e.path,{match:oU.G2,data:{type:"action",icon:(0,f.Y)(oT.A,{}),label:"Search this directory",run:function(){Y({pane:{type:"searchReplace",data:{initialIncludeGlob:"".concat(n,"/**")}},edge:"right"})}}})]}}),o.push.apply(o,(0,eE._)((t=function(t){return n.create(t,e.path)},[{label:"Add file",icon:(0,f.Y)(cy.A,{}),run:function(){return t(tZ.pt.File)}},{label:"Add folder",icon:(0,f.Y)(cb.A,{}),run:function(){return t(tZ.pt.Directory)}}].map(function(e){var n=e.label,t=e.icon,r=e.run;return{match:oU.G2,data:{type:"action",label:n,icon:t,run:r}}})))),o.push({data:{type:"group",key:"openShell"},commands:function(){return[{match:oU.G2,data:{type:"action",label:"Open shell here",icon:(0,f.Y)(cH.A,{}),run:function(){Y({pane:{type:"shell",data:{initialPwd:r}},edge:"left"})}}}]}}),i||o.push({data:{type:"group",key:"copy"},commands:function(){return cj(r)}}),n.getExpandedDirs()&&o.push({match:oU.G2,data:{icon:(0,f.Y)(ch.A,{}),type:"action",label:"Collapse "+(i?"all":"child folders"),run:function(){var e=n.getExpandedDirs(r);e&&n.collapse((0,eE._)(e))}}}),i||o.push({data:{type:"group",key:"deleteFile"},commands:function(){return[c$(function(){return n.deleteNodes(e)})]}}),i&&o.push({data:{type:"group",key:"hiddenFiles"},commands:function(){return[{match:oU.G2,data:{type:"action",label:(R?"Hide":"Show")+" hidden files",icon:R?(0,f.Y)(cv.A,{}):(0,f.Y)(cm.A,{}),run:function(){E(!R)}}}]}}),o.push({data:{type:"group",key:"extensions"},commands:(0,tw._)(function(){var e;return(0,tb.YH)(this,function(n){switch(n.label){case 0:var t;return e=[{data:{dirPath:r,fileType:tZ.pt.Directory}}],[4,Promise.all(A.map((t=(0,tw._)(function(n){var t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:return[4,n.create({path:e})];case 1:if(!(t=r.sent()))return[2,null];return[2,(0,av.l)(t,{path:e})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),o},[R,E,A,Y]),F=(0,g.useCallback)(function(e,n){return{data:{type:"context",label:"Search actions",icon:(0,f.Y)(oT.A,{})},commands:function(){return e.type===tZ.pt.Directory?U(e,n):D(e,n)}}},[D,U]),P=(0,rn.Qd)(),O=(0,l2.u)({fs:c,filter:l,fontSize:13,onFileDoubleClick:function(e,n){s(n)},onFileSelect:function(e){var n=e.path,t=e.type,r=e.event,a="click"===t&&"altKey"===d?(0,cD.T$)(r):r.altKey;i({path:n,newTab:a}),o(n,{newTab:a})},onCreate:function(e){e.type===tZ.pt.File&&i({opener:{paneType:(0,nr.QY)({path:e.path})},path:e.path})},multiselectModifierKey:d,onConflicts:function(e){return r({type:"conflicts",data:e})},onDeleteNodes:function(e){return r({type:"deleteNode",data:e})},onContextMenu:function(e,n){return y(e,{command:F(n,O)})},autocomplete:v,localCacheKey:e+":sidebar",onFileRenameStart:P,onFileRenameEnd:function(){return P(null)}}),T=(0,cV._)(),(0,g.useEffect)(function(){return O.setFileStatus(T)},[O,T]),L=(0,tG.dm)(),(0,g.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,tw._)(function(e){return(0,tb.YH)(this,function(n){switch(n.label){case 0:if(null===e)return O.select(null),[2];return[4,O.select({path:e,type:tZ.pt.File})];case 1:if(n.sent(),L.current!==e)return[2];return O.scrollToPath(e),[2]}})})).apply(this,arguments)}return e(L.current),L.subscribe(e)},[L,O]),M=oA(),G=(0,tG.Mg)(),N=(0,tG.JZ)(),(0,g.useEffect)(function(){var e=function(e){return n.apply(this,arguments)};function n(){return(n=(0,tw._)(function(e){return(0,tb.YH)(this,function(n){switch(n.label){case 0:if(null===e)return[2];return M.isOpen.current||M.toggle(),[4,O.select({path:e,type:tZ.pt.File})];case 1:return n.sent(),O.scrollToPath(e),N(null),[2]}})})).apply(this,arguments)}return e(G.current),G.subscribe(e)},[G,N,O,M]),{filetree:O,activeModal:t,closeModal:function(){return r(null)}}),W=z.filetree,j=z.activeModal,$=z.closeModal;return(0,f.FD)(f.FK,{children:[(0,f.FD)(o3.ui,{clsx:c0().root,innerRef:B,children:[(0,f.Y)(c7,{filetree:W}),(0,f.FD)(i4.S,{clsx:c0().content,grow:!0,shrink:!0,children:[(0,f.Y)(cI,{}),(0,f.Y)(i4.S,{grow:!0,shrink:!0,dataCy:"sidebar-filetree-section",children:(0,f.Y)(l2.J,{store:W.store})}),(0,f.FD)(i4.S,{clsx:c0().footerButtons,p:4,row:!0,gap:4,justify:"end",align:"center",children:[(0,f.Y)(al.$n,{dataCy:"filetree-add-file",size:"small",variant:"outlined",iconLeft:(0,f.Y)(cy.A,{}),text:"File",onClick:function(){W.create(tZ.pt.File)}}),(0,f.Y)(al.$n,{size:"small",variant:"outlined",iconLeft:(0,f.Y)(cb.A,{}),text:"Folder",onClick:function(){W.create(tZ.pt.Directory)}})]})]}),(0,f.Y)(c3,{})]}),(0,f.FD)(o7.a,{isOpen:!!j,onRequestClose:$,children:[(null==j?void 0:j.type)==="conflicts"?(0,f.Y)(l4.A,{paths:j.data.conflicts.map(function(e){return e.path}),onCancel:$,onConfirm:function(){var e=j.data;"move"===e.type?W.move({nodes:e.nodes,to:e.to,overwrite:!0}):W.upload({files:e.files,parentPath:e.to,overwrite:!0}),$()}}):null,(null==j?void 0:j.type)==="deleteNode"?(0,f.Y)(cQ.A,(0,td._)((0,m._)({},(0,ci.D)(j.data.nodes)),{delete:function(){return j.data.confirm()},hideModal:$})):null]})]})});function c7(e){var n=e.filetree;return(0,f.FD)(i4.S,{clsx:c0().header,row:!0,gap:4,align:"center",pl:6,pr:4,children:[(0,f.FD)(i4.S,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:[(0,f.Y)(ac.EY,{css:c0().title,children:"Files"}),(0,f.Y)(cr,{})]}),(0,f.Y)(i4.S,{row:!0,gap:0,align:"center",children:(0,f.Y)(cS,{filetree:n})})]})}function c3(){var e=oA(),n=(0,g.useRef)(null);(0,rm.d)(n,e.resizeHandleView,function(n){var t,r=e.isOpen?"translateX(calc(100% + 1px))":"translateX(100%)";return t={},(0,tg._)(t,c2.resizeGripOpacity,n.isOpen?"1":"0"),(0,tg._)(t,c2.resizeHandleTransform,r),(0,tg._)(t,c2.resizeGripColor,ry.LU.outlineDimmest),(0,tg._)(t,c2.resizeHandleWidth,n.width+"px"),(0,tg._)(t,c2.resizeHandleHeight,"24px"),t});var t=(0,g.useRef)(null);return(0,f.Y)(i4.S,{clsx:c0().resizeHandleRoot,innerRef:n,onPointerDown:function(n){(0,l1.j)(n,{start:function(){document.activeElement instanceof HTMLElement&&(t.current=document.activeElement),e.resize.start()},move:function(n){var t=n.delta;e.resize.update(t.x)},end:function(){var n,r;e.resize.end(),null==(r=t.current)||null==(n=r.focus)||n.call(r),t.current=null}})},align:"center",justify:"center",children:(0,f.Y)(i4.S,{clsx:c0().resizeHandleGrip})})}var c6=t(69945),c8=t.n(c6),c9=t(66890),ue=t(64912),un=t(99528),ut=t(34140),ur=t(49384),ui=t.n(ur);function uo(){var e=(0,v._)(["\n  fragment ReplEnvironmentDesktopMyReplsSearchRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    iconUrl\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n  }\n"]);return uo=function(){return e},e}function ua(){var e=(0,v._)(["\n  query ReplEnvironmentDesktopMyReplsSearch($query: String, $count: Int) {\n    currentUser {\n      id\n      search {\n        repls(query: $query, count: $count) {\n          id\n          ...ReplEnvironmentDesktopMyReplsSearchRepl\n        }\n      }\n    }\n  }\n  ","\n"]);return ua=function(){return e},e}var ul=(0,y.J1)(uo()),uc=(0,y.J1)(ua(),ul),uu=t(90646),us=t(65326),ud=t(34229),up=t(19202),uf=t(2188),uh=(0,rw.x)({root:[i2.wp.viewStyle,i2.wp.rowWithGap(8),i2.wp.align.center,i2.wp.px(8),{textDecoration:"none"}],meta:{fontSize:10}});function ug(e){var n=e.repl,t=e.height,r=e.isActive,i=e.searchQuery,o=n.title,a=(0,g.useMemo)(function(){return i?uu.A.match(i,o):null},[i,o]);return(0,f.FD)(ui(),{href:n.url,passHref:!0,style:{height:t},css:uh.root,children:[(0,f.Y)(ud.Ay,{alt:n.title,size:32,iconUrl:n.iconUrl}),(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:2,children:[(0,f.Y)(up.e,{text:n.title,highlight:null==a?void 0:a.ranges,dimmed:!r}),(0,f.FD)(ac.EY,{css:uh.meta,color:"dimmest",multiline:!1,children:[n.owner.username,"  edited ",(0,us.K)(n.timeUpdated)]})]})]})}function um(){return(um=(0,tw._)(function(e){var n;return(0,tb.YH)(this,function(t){switch(t.label){case 0:if(!tx.V)throw Error("Expected apolloClient");return[4,tx.V.query({query:uc,variables:e})];case 1:return[2,(null==(n=t.sent().data.currentUser)?void 0:n.search.repls.filter(function(e){return!!e.owner}))||[]]}})})).apply(this,arguments)}var uv=t(46217),uy=t(74838),uw=t(1035),ub=t(83861),ux=t(51055),uY=["isLayoutStacked","fontSize","wrapping","minimapDisplay","indentDetection","indentFormatPastes","indentIsSpaces","keyboardHandler","showFileTreeGitStatus","codeIntelligence","shellBellAudio","accessibleTerminal","webviewAutoOpenOnPortOpened","forwardPortsAutomatically","chatAudioNotification","multiselectModifierKey","codeSuggestion","chatEngine","ghostwriterModelSelection"],uS=t(27231),uA=t(70489),u_=t(95047),uk=t(29760),uC=t(81740),uI=t(59968),uD=t(15149),uE=t(28174),uR=t(93936),uU=t(18974),uF=t(34883),uP=t(13028),uO=t(61590),uT=t(50932);function uL(e){return(0,f.FD)(i5.Ay,(0,td._)((0,m._)({},e),{children:[(0,f.Y)("path",{d:"M15.721.681A2.137 2.137 0 0 1 18.146.28l4.638 2.233a2.142 2.142 0 0 1 1.213 1.93v.299h-.735v-.303c0-.54-.31-1.033-.797-1.267L17.828.942a1.403 1.403 0 0 0-1.6.272c.485-.486 1.294-.195 1.396.445l-.115-.055a.667.667 0 0 0-.762.13l-.016.015-8.786 8.01-1.19-.902L15.72.68Z"}),(0,f.Y)("path",{d:"m17.634 5.968-7.343 5.571 1.215.922 6.128-4.649V5.968ZM6.798 14.189l1.104 1.006-3.975 3.016a1.673 1.673 0 0 1-2.136-.095l-1.24-1.128a1.673 1.673 0 0 1-.002-2.473l3.303-3.012 1.09.994-3.403 3.104a.203.203 0 0 0 0 .3l1.24 1.128c.073.066.182.07.26.011l3.759-2.851Z"}),(0,f.Y)("path",{d:"M16.228 22.786c.42.421 1.063.53 1.6.272l4.637-2.23c.487-.234.797-.727.797-1.267v-.302H24v.298c0 .824-.472 1.575-1.214 1.933l-4.639 2.233a2.14 2.14 0 0 1-2.428-.402L.547 9.488a1.676 1.676 0 0 1 .002-2.479l1.24-1.127a1.676 1.676 0 0 1 2.14-.095l13.705 10.397v1.852L3.037 6.964a.2.2 0 0 0-.255.01l-1.24 1.128a.2.2 0 0 0 0 .296l15.2 13.86.007.007c.2.2.504.252.758.13l.117-.057c-.1.643-.91.936-1.396.45Z"}),(0,f.Y)("path",{fillRule:"evenodd",d:"M16.576 1.562 15.88.865A1.896 1.896 0 0 1 18.04.497l4.637 2.23a1.9 1.9 0 0 1 1.077 1.712v15.122a1.9 1.9 0 0 1-1.076 1.712l-4.638 2.23a1.896 1.896 0 0 1-2.162-.368l.697-.698c.209.209.565.061.565-.234V1.797a.331.331 0 0 0-.565-.235Zm1.541 20.81 4.134-1.988a.914.914 0 0 0 .518-.823V4.439a.914.914 0 0 0-.518-.823l-4.134-1.988c.007.055.01.111.01.169v20.406c0 .058-.003.114-.01.169Z",clipRule:"evenodd"}),(0,f.Y)("path",{fillRule:"evenodd",d:"M15.706.692a2.141 2.141 0 0 1 2.441-.416l4.638 2.23A2.145 2.145 0 0 1 24 4.44v15.122c0 .824-.473 1.575-1.215 1.933l-4.637 2.229a2.14 2.14 0 0 1-2.442-.415l-.173-.173 1.043-1.044.173.173a.086.086 0 0 0 .147-.06V1.796a.086.086 0 0 0-.147-.061l-.173-.174-.173.174-.87-.87.173-.174Zm.908.562a.577.577 0 0 1 .772.543v20.406a.577.577 0 0 1-.773.544l-.375.375a1.65 1.65 0 0 0 1.697.16l4.637-2.23c.574-.276.938-.855.938-1.491V4.439c0-.636-.364-1.215-.938-1.491L17.935.718a1.651 1.651 0 0 0-1.697.16l.376.376Zm1.207-.04 4.316 2.075.107-.224.442.213-.12.247c.28.217.448.553.448.914v15.122c0 .445-.255.85-.657 1.044l-4.536 2.181.053-.444c.006-.044.009-.09.009-.139V1.797c0-.048-.003-.095-.009-.14l-.053-.443Zm.551.808v19.956l3.773-1.815a.669.669 0 0 0 .379-.602V4.439a.669.669 0 0 0-.379-.602l-3.773-1.815Z",clipRule:"evenodd"})]}))}var uM={nextTab:{id:"tabs.next",name:"Switch to next tab",default:(0,tg._)({},c9._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,shift:!0,key:"]"}))},previousTab:{id:"tabs.previous",name:"Switch to previous tab",default:(0,tg._)({},c9._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,shift:!0,key:"["}))},newTab:{id:"tabs.new",name:"New tab",description:"Opens a tab in the current active group",default:(0,tg._)({},c9._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,key:"t"}))},closeTab:{id:"tabs.close",name:"Close tab",description:"Close the current active tab",default:(0,tg._)({},c9._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,key:"w"}))},reopenClosedTab:{id:"tabs.reopenClosed",name:"Reopen closed tab",default:(0,tg._)({},c9._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,shift:!0,key:"t"}))},findFile:{id:"files.find",name:"Find file",default:(0,o5.FM)({cmdOrCtrl:!0,key:"p"})},searchFileContents:{id:"files.searchContents",name:"Search file contents",default:oN.G},run:{id:"repl.run",name:"Run Repl",default:(0,o5.FM)({cmdOrCtrl:!0,key:"Enter"})},toggleInviteDialog:{id:"repl.multiplayers",name:"See multiplayers",default:(0,o5.FM)({cmdOrCtrl:!0,key:"m"})},showShell:{id:"repl.showShell",name:"Show shell",default:(0,o5.FM)({ctrl:!0,key:"`"}),description:"Opens or reveals a Shell in a tab"},showConsole:{id:"repl.showConsole",name:"Show console",description:"Opens or reveals the Console in a tab",default:void 0},showDocs:{id:"repl.showDocs",name:"Show docs",description:"Opens or reveals the Replit Docs in a tab",default:void 0},showReplitAi:{id:"repl.showGhostwriter",name:"Show Replit AI",description:"Opens or reveals Replit AI in a tab",default:void 0},showSettings:{id:"repl.showSettings",name:"Show settings",description:"Opens or reveals the Settings tab",default:(0,tg._)({},c9._9Z.DesktopApp,(0,o5.FM)({cmdOrCtrl:!0,key:","}))},saveAllFiles:{id:"repl.saveAllFiles",name:"Save all files",description:"Forces all changes to be flushed to disk",default:void 0},showGit:{id:"repl.showGit",name:"Show git",description:"Opens or reveals the Git tool in a tab",default:void 0},toggleFloatPaneGroup:{id:"paneGroup.toggleFloat",name:"Toggle float group",description:"Floats or un-floats the current active group",default:void 0},toggleMaximizePaneGroup:{id:"paneGroup.toggleMaximize",name:"Toggle maximize group",description:"Maximizes or restores the current active group",default:void 0},removePaneGroup:{id:"paneGroup.close",name:"Close group",description:"Closes all tabs in the current active group",default:void 0},removeOthersInPaneGroup:{id:"paneGroup.closeOthers",name:"Close other tabs in group",description:"Closes all tabs except the visible one in the current active group",default:void 0},insertPaneGroupUp:{id:"paneGroup.insertUp",name:"Insert group above",description:"Adds a new group above the current active group",default:void 0},insertPaneGroupRight:{id:"paneGroup.insertRight",name:"Insert group right",description:"Adds a new group to the right of the current active group",default:void 0},insertPaneGroupLeft:{id:"paneGroup.insertLeft",name:"Insert group left",description:"Adds a new group to the left of the current active group",default:void 0},insertPaneGroupDown:{id:"paneGroup.insertDown",name:"Insert group below",description:"Adds a new group below the current active group",default:void 0},moveTabUpGroup:{id:"tabs.move.groupUp",name:"Move tab into group above",description:"Moves the current active tab into the group above",default:void 0},moveTabRightGroup:{id:"tabs.move.groupRight",name:"Move tab into group right",description:"Moves the current active tab into the group to the right",default:void 0},moveTabLeftGroup:{id:"tabs.move.groupLeft",name:"Move tab into group left",description:"Moves the current active tab into the group to the left",default:void 0},moveTabDownGroup:{id:"tabs.move.groupDown",name:"Move tab into group below",description:"Moves the current active tab into the group below",default:void 0},moveFocusUp:{id:"paneGroup.focusUp",name:"Move focus to group above",description:"Move focus to the group above the current active group",default:void 0},moveFocusRight:{id:"paneGroup.focusRight",name:"Move focus to group right",description:"Move focus to the group to the right of the current active group",default:void 0},moveFocusLeft:{id:"paneGroup.focusLeft",name:"Move focus to group left",description:"Move focus to the group to the left of the current active group",default:void 0},moveFocusDown:{id:"paneGroup.focusDown",name:"Move focus to group below",description:"Move focus to the group below the current active group",default:void 0},webviewRefresh:{id:"webviewpane.reload",name:"Refresh the webview",default:(0,o5.FM)({alt:!0,key:"r"})},keepTab:{id:"tab.keep",name:"Keep tab",description:"Converts a preview tab to a persisted tab",default:void 0}},uG=Object.values(uM);let uN=(0,g.memo)(function(e){var n,t,r,i,o,a,l,c,u,s,d,p,h=e.isAdmin,g=e.isSubscribed,m=o4(),v=(0,tG.Sx)(),y=(0,oM.A)(),w=y.fs,b=y.container,x=(0,uI.Z)(),Y=x.fork,S=x.isForking,A=(0,uC.lO)(),_=A.isOffline,k=A.isWorkflowsLoading,C=A.isRunning,I=(0,uC.qP)(),D=(0,oW.J)(),E=ov(),R=rl(t7),U=rl(t3),F=rl(t0),P=rl((n=(0,tG.Ru)(),(0,J.A)(function(){return(0,eu.eU)(null,function(e,t){var r=n();if(r){t(t5,[r.pane]);var i=e(ni);i&&t(na,i)}})},[n]))),O=rl(iU),T=rl(t6),L=rl(na),M=ro(ni),G=ro((0,J.A)(function(){return(0,eu.eU)(function(e){var n=e(ni);if(!n)return null;var t=eF(e(ny),n);return t?t.paneGroup.id:null})},[])),N=rl(iM),B=oy().toggleMaximizePane,H=rl(tO),z=rl(tF),W=rl(iR),j=rl(tT),$=(0,oj.eq)(M),q=(0,X.pE)("replUrl","string"),V=(0,ec.A)(),Q=(0,ut.A)(),ee=rc(nk),en=oh(),et=(0,af.A)(),er=(0,u_.A)(),ei=(0,ag.A)(b).url,eo=(0,ad.A)().showNotice,ea=(0,uk.A)("vscode"),el=ea.openEditor,es=ea.onConfirmConfig,ed=ea.isConfigModalOpen,ep=ea.closeConfigModal,ef=(0,Z.jt)(),eh=c8()(function(e){return(0,oE.u4)(oE.AZ.PROJECT_RAN,{replId:V,placement:e})},500);(0,o0.SJ)(function(){return[uM.saveAllFiles.id,function(){w.flush(void 0,tZ.sT.MANUAL_SAVE)}]},[w]),(0,o0.SJ)(function(){return[uM.newTab.id,function(){return R()}]},[R]),(0,o0.SJ)(function(){return[uM.nextTab.id,function(){return T("next")}]},[T]),(0,o0.SJ)(function(){return[uM.previousTab.id,function(){return T("previous")}]},[T]),(0,o0.SJ)(function(){return[uM.closeTab.id,function(){var e=U();return e||ee()>0}]},[U,ee]),(0,o0.SJ)(function(){return[uM.reopenClosedTab.id,function(){return P()}]},[P]),(0,o0.SJ)(function(){return[uM.moveTabUpGroup.id,function(){return F("above")}]},[F]),(0,o0.SJ)(function(){return[uM.moveTabRightGroup.id,function(){return F("rightOf")}]},[F]),(0,o0.SJ)(function(){return[uM.moveTabLeftGroup.id,function(){return F("leftOf")}]},[F]),(0,o0.SJ)(function(){return[uM.moveTabDownGroup.id,function(){return F("below")}]},[F]),(0,o0.SJ)(function(){return M?[uM.keepTab.id,function(){return L(M)}]:void 0},[M,L]),(0,o0.SJ)(function(){return M?[uM.insertPaneGroupUp.id,function(){return j({paneId:M,placement:"above",autoFocus:!0})}]:void 0},[M]),(0,o0.SJ)(function(){return M?[uM.insertPaneGroupRight.id,function(){return j({paneId:M,placement:"rightOf",autoFocus:!0})}]:void 0},[M]),(0,o0.SJ)(function(){return M?[uM.insertPaneGroupLeft.id,function(){return j({paneId:M,placement:"leftOf",autoFocus:!0})}]:void 0},[M]),(0,o0.SJ)(function(){return M?[uM.insertPaneGroupDown.id,function(){return j({paneId:M,placement:"below",autoFocus:!0})}]:void 0},[M]),(0,o0.SJ)(function(){return[o8.id,function(){return m()}]},[m]);var eg=(0,o0.Jn)(uM.findFile.id);(0,o0.SJ)(function(){return[uM.findFile.id,function(){return m(oG.g({openFile:E,fs:w,shouldHideFile:D,getRecentFiles:v,keyboardShortcut:eg}))}]},[m]);var em=oJ({type:"files"});o9(oG.g({openFile:E,fs:w,shouldHideFile:D,getRecentFiles:v,getCurrentlyOpenFilePanesCommands:em,keyboardShortcut:eg}));var ev=(0,o0.Jn)(uM.searchFileContents.id),ey=oh();(0,o0.SJ)(function(){return[uM.searchFileContents.id,function(){(0,oE.u4)(oE.AZ.SEARCH_PANE_USED,{action:"opened_via_shortcut"});var e,n=void 0;(null==$?void 0:$.type)==="codeEditor"&&(n=null==(e=$.getCurrentSelectionText)?void 0:e.call($)),ey({pane:{type:"searchReplace",data:{initialQuery:n}}})}]},[$,ey]),(0,o0.SJ)(function(){return M?[uM.toggleFloatPaneGroup.id,function(){return N(M)}]:void 0},[M]),(0,o0.SJ)(function(){return M?[uM.toggleMaximizePaneGroup.id,function(){return B(M)}]:void 0},[M]),(0,o0.SJ)(function(){return G?[uM.removePaneGroup.id,function(){H({paneGroupId:G}),W()}]:void 0},[G]),(0,o0.SJ)(function(){return M?[uM.removeOthersInPaneGroup.id,function(){z(M)}]:void 0},[M]),(0,o0.SJ)(function(){return[uM.moveFocusUp.id,function(){return O("above")}]},[]),(0,o0.SJ)(function(){return[uM.moveFocusDown.id,function(){return O("below")}]},[]),(0,o0.SJ)(function(){return[uM.moveFocusRight.id,function(){return O("rightOf")}]},[]),(0,o0.SJ)(function(){return[uM.moveFocusLeft.id,function(){return O("leftOf")}]},[]),o9(oL(en)),o9(oO(en),{enabled:!ef}),o9(oN.Y({container:b,keyboardShortcut:ev,openFile:E})),(0,o0.SJ)(function(){if(!_&&!k)return[uM.run.id,function(){I(uS.QG.KEYBOARD_SHORTCUT),eh("shortcut_cmd_enter")}]},[I]);var ew=(0,o0.Jn)(uM.run.id);o9({match:oU.KK,data:{type:"action",icon:(0,f.Y)(uR.A,{}),label:"New window",keyboardShortcut:"Cmd-Shift-n",description:"Open a new window",run:function(){un.M.openNewWindow()}}},{enabled:Q}),o9({match:oU.KK,data:{type:"action",icon:(0,f.Y)(uU.A,{}),label:"Run",description:"Run Repl",run:function(){I(uS.QG.KEYBOARD_SHORTCUT)},keyboardShortcut:ew}},{enabled:!C}),o9({match:oU.KK,data:{type:"action",icon:(0,f.Y)(uT.A,{}),label:"Stop",description:"Stop Repl",run:function(){I(uS.QG.KEYBOARD_SHORTCUT)}}},{enabled:C}),o9({match:oU.KK,data:{type:"action",icon:(0,f.Y)(uF.A,{}),label:"Kill 1",description:"Kill the Repl pid1 process if it's in a bad state (admin only)",run:function(){b.exec("kill","1")}}},{enabled:h}),o9({match:oU.KK,data:{type:"action",icon:(0,f.Y)(uD.A,{}),label:"Open development URL",run:function(){if(!ei)throw Error("Expected dotdevUrl");window.open(ei,"_blank","noopener")}}},{enabled:!0}),o9({match:oU.KK,data:{type:"action",icon:(0,f.Y)(uE.A,{}),label:"Open in desktop app",description:"Open this Repl in the desktop app",run:function(){if(!q)throw Error("Expected Repl URL query param");var e="".concat(window.location.origin,"/desktopApp/open?replUrl=").concat(q);window.open(e,"_blank")}}},{enabled:!Q}),o9({match:oU.KK,data:{type:"action",icon:(0,f.Y)(uL,{}),label:"Open in VS Code",description:"Connect to this Repl in VS Code via SSH",run:function(){(0,oE.u4)(oE.AZ.OPEN_IN_VSCODE_CLICKED,{source:"command_bar",editor:"vscode"}),el()}}},{enabled:!!et&&g}),o9({match:oU.KK,data:{type:"action",icon:(0,f.Y)(cM.A,{}),label:"Copy SSH Command",description:"Copy a shell command to connect to this Repl via SSH",run:function(){if(!et)throw Error("Expected sshConfig");var e=et.sshPort,n=et.sshUser,t=et.sshHostname,r="ssh -i ".concat(er,"/.ssh/replit -p ").concat(e," ").concat(n,"@").concat(t);(0,oE.u4)(oE.AZ.COPY_SSH_KEY_COMMAND_CLICKED,{source:"command_bar"}),(0,cU.default)(r),eo("Copied SSH command")}}},{enabled:!!et&&g}),o9((r=(t={description:"Jump to another Repl",onRun:function(e){window.location.href=e.url}}).description,i=t.onRun,o=(0,iV.A)(i),(0,J.A)(function(){return{match:(0,oU.u4)({defaultScore:oF.q.myRepls}),data:{type:"context",label:"My Apps",icon:(0,f.Y)(uf.A,{}),description:r},commands:function(e){var n=e.searchQuery,t=e.active;return(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:if(!t)return[2,[]];return[4,function(e){return um.apply(this,arguments)}({query:n,count:50})];case 1:return[2,e.sent().map(function(e){var t,r,i,a;return r=(t={repl:e,searchQuery:n,run:function(){return o.current(e)}}).repl,i=t.searchQuery,a=t.run,{match:function(){return{score:1,render:{height:44,content:(0,f.Y)(ug,{repl:r,height:44,searchQuery:i})}}},data:{type:"action",label:r.title,icon:(0,f.Y)(ud.Ay,{alt:r.title,size:16,iconUrl:r.iconUrl}),run:function(){return a(r)}}}})]}})})()}}},[r,o]))),o9({match:(0,oU.u4)({defaultScore:oF.q.fork}),data:{type:"action",label:"Remix",icon:(0,f.Y)(uP.A,{}),description:"Remix App",run:function(){S||Y()}}}),l=(a=K.g.apply(void 0,(0,eE._)(uY))).preferences,c=a.update,u=function(e){Object.keys(e).forEach(function(n){var t=e[n];(0,oE.u4)(oE.AZ.SETTINGS_TOGGLED,{settingChanged:n,updatedValue:t,isCommandBar:!0})}),c(e)},d=(s=(0,lP.D)()).setActiveTheme,p=s.theme,o9({match:(0,oU.u4)({defaultScore:oF.q.settings,matchScoreMultiplier:oF.B.settings}),data:{type:"context",label:"Settings",description:"Change Replit Settings",icon:(0,f.Y)(ux.A,{})},commands:function(e){var n=e.active,t=e.searchQuery;if(!n&&!t)return[];var r={match:(0,oU.u4)({defaultScore:oF.q.settings,matchScoreMultiplier:oF.B.settings}),data:{type:"context",label:"Theme",icon:(0,f.Y)(ub.A,{}),description:"Change Replit Theme"},commands:function(){return uy.U.map(function(e){return{match:(0,oU.u4)({defaultScore:oF.q.settings,matchScoreMultiplier:oF.B.settings}),data:{type:"action",label:e.title,icon:p.id===e.id?(0,f.Y)(uw.A,{}):(0,f.Y)(ux.A,{opacity:0}),description:"Use "+e.title+" theme "+(p.id===e.id?" (current)":""),run:function(){d(e.id)}}}})}},i=Object.values(uv.KY).filter(function(e){return -1!==uY.indexOf(e.editorPreferencesKey)}).map(function(e){return{match:(0,oU.u4)({defaultScore:oF.q.settings,matchScoreMultiplier:oF.B.settings}),data:{type:"context",label:e.name,icon:(0,f.Y)(ux.A,{}),description:e.description},commands:function(){return e.options.map(function(n){var t=l[e.editorPreferencesKey],r=!!e.editorPreferencesKey&&n.editorPreferencesValue===t;return{match:(0,oU.u4)({defaultScore:oF.q.settings,matchScoreMultiplier:oF.B.settings}),data:{type:"action",label:n.title,icon:r?(0,f.Y)(uw.A,{}):(0,f.Y)(ux.A,{opacity:0}),description:n.description,run:function(){return(0,tw._)(function(){return(0,tb.YH)(this,function(t){switch(t.label){case 0:if(!e.editorPreferencesKey)throw Error("editorPreferencesKey is not defined");return[4,u((0,tg._)({},e.editorPreferencesKey,n.editorPreferencesValue))];case 1:return t.sent(),[2]}})})()}}}})}}});return(0,eE._)(i).concat([r])}},{enabled:!0});var eb=(0,Z.Wq)();return o9({match:oU.KK,data:{type:"action",label:"[Admin] Enable ".concat(ue.g$),icon:(0,f.Y)(uO.A,{}),run:function(){eb()}}},{enabled:h&&!ef}),(0,f.Y)(f.FK,{children:(0,f.Y)(o7.a,{isOpen:ed,onRequestClose:ep,centered:!0,children:(0,f.Y)(uA.A,{onConfirm:es})})})});var uB=t(5204),uH=t(32331),uz=t(44074),uW=t(67843),uj=t(2760),u$=t(25588),uZ=(0,l7.i7)({"0%":{transform:"translate(0, 0)"},"8.33%, 25%":{transform:"translate(-50%, 0)"},"33.33%, 50%":{transform:"translate(-50%, -50%)"},"58.33%, 75%":{transform:"translate(0, -50%)"},"83.33%, 100%":{transform:"translate(0, 0)"}}),uq=(0,rw.x)({root:[i2.wp.color.foregroundDimmest,i2.wp.position.relative,i2.wp.width("100%"),i2.wp.height("100%"),{overflow:"hidden"}],arrows:[i2.wp.position.absolute,i2.wp.top(0),i2.wp.left(0),i2.wp.flex.row,i2.wp.flex.wrap,i2.wp.width("200%"),i2.wp.height("200%"),{animationName:uZ,animationDirection:"normal",animationTimingFunction:"ease-out",animationIterationCount:"infinite"}],arrow:[i2.wp.width("50%"),i2.wp.height("50%"),i2.wp.center]});function uV(e){var n=e.delay,t=e.duration;return(0,f.Y)(i4.S,{css:uq.root,children:(0,f.FD)(i4.S,{css:uq.arrows,style:{animationDelay:n?n+"ms":void 0,animationDuration:t?t+"ms":"8000ms"},children:[(0,f.Y)(i4.S,{css:uq.arrow,children:(0,f.Y)(uW.A,{size:12})}),(0,f.Y)(i4.S,{css:uq.arrow,children:(0,f.Y)(uj.A,{size:12})}),(0,f.Y)(i4.S,{css:uq.arrow,children:(0,f.Y)(uw.A,{size:12})}),(0,f.Y)(i4.S,{css:uq.arrow,children:(0,f.Y)(u$.A,{size:12})})]})})}var uK=t(17459),uJ=t(87064),uQ=(0,rw.x)({root:[i2.wp.position.relative],circle:[i2.wp.top(-6),i2.wp.right(-6),i2.wp.minWidth(12),i2.wp.borderRadius(8),i2.wp.position.absolute,i2.wp.backgroundColor.backgroundHighest,i2.wp.shadow(3),{textAlign:"center",fontSize:10,border:"1px solid",borderColor:ry.LU.outlineDefault}],count:[{textAlign:"center",fontSize:10}]});function uX(e){var n=e.count,t=(0,uK._)(e,["count"]);return(0,f.FD)(i4.S,{css:uQ.root,children:[(0,f.Y)(uJ.A,(0,m._)({},t)),(0,f.Y)(i4.S,{css:[uQ.circle,uQ.count],children:n})]})}function u0(){return(0,f.FD)(i4.S,{css:uQ.root,children:[(0,f.Y)(uJ.A,{}),(0,f.Y)(i4.S,{css:uQ.circle,children:(0,f.Y)(uw.A,{size:6})})]})}function u1(e){var n,t=e.paneId,r=e.paneGroupId,i=(0,nr.Vv)(),o=os(t),a=rl(tU),l=rl(tP),c=rl(tF),u=ro((0,J.A)(function(){return(0,eu.eU)(function(e){var n=eF(e(ny),t);return n?n.paneGroup.panes.findIndex(function(e){return e===t}):null})},[t])),s=ro((n=({paneGroupId:({paneGroupId:r}).paneGroupId}).paneGroupId,(0,J.A)(function(){return(0,eu.eU)(function(e){var t=eO(e(ny),n);return t?t.panes.length:null})},[n])));return(0,J.A)(function(){var e=i.getTitle(o),n=[{match:oU.G2,data:{type:"action",label:"Close "+e,icon:(0,f.Y)(uJ.A,{}),run:function(){a(t)}}}];return s&&s>1&&(null!==u&&u<s-1&&n.push({match:oU.G2,data:{type:"action",label:"Close to the right",icon:(0,f.Y)(u0,{}),run:function(){l(t)}}}),n.push({match:oU.G2,data:{type:"action",label:"Close all other tabs",icon:(0,f.Y)(uX,{count:s-1}),run:function(){c(t)}}})),n},[i,o,s,u,a,t,l,c])}function u2(){var e=od(),n=rl(na);return(0,g.useCallback)(function(t){var r=e(t),i=r.isCommitted,o=r.pane;return!i&&(0,nr.xS)(o)?{match:oU.G2,data:{type:"action",label:"Keep open",icon:(0,f.Y)(lj.A,{}),run:function(){return n(t)}}}:null},[e,n])}var u4=t(49022),u5=t(70855),u7=new Map([["left",{label:"Move Left",icon:(0,f.Y)(uj.A,{})}],["right",{label:"Move Right",icon:(0,f.Y)(uw.A,{})}],["up",{label:"Move Up",icon:(0,f.Y)(u$.A,{})}],["down",{label:"Move Down",icon:(0,f.Y)(uW.A,{})}]]);function u3(e){return(0,f.Y)(i5.Ay,(0,td._)((0,m._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M5 3.75c-.69 0-1.25.56-1.25 1.25v3.25h16.5V5c0-.69-.56-1.25-1.25-1.25H5ZM21.75 5A2.75 2.75 0 0 0 19 2.25H5A2.75 2.75 0 0 0 2.25 5v14A2.75 2.75 0 0 0 5 21.75h14A2.75 2.75 0 0 0 21.75 19V5Zm-1.5 4.75H9.75v10.5H19c.69 0 1.25-.56 1.25-1.25V9.75Zm-12 10.5V9.75h-4.5V19c0 .69.56 1.25 1.25 1.25h3.25Z",clipRule:"evenodd"})}))}var u6=new Map([["leftOf",{label:"Move Left",icon:(0,f.Y)(uj.A,{})}],["rightOf",{label:"Move Right",icon:(0,f.Y)(uw.A,{})}],["above",{label:"Move Up",icon:(0,f.Y)(u$.A,{})}],["below",{label:"Move Down",icon:(0,f.Y)(uW.A,{})}]]),u8=t(88873);function u9(e){return(0,f.Y)(i5.Ay,(0,td._)((0,m._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M2.25 7A4.75 4.75 0 0 1 7 2.25h10A4.75 4.75 0 0 1 21.75 7v10A4.75 4.75 0 0 1 17 21.75H7A4.75 4.75 0 0 1 2.25 17V7ZM7 3.75A3.25 3.25 0 0 0 3.75 7v10A3.25 3.25 0 0 0 7 20.25h4.25V3.75H7Zm5.75 0v16.5H17A3.25 3.25 0 0 0 20.25 17V7A3.25 3.25 0 0 0 17 3.75h-4.25Z",clipRule:"evenodd"})}))}var se=new Map([["leftOf",{commandId:uM.insertPaneGroupUp.id,label:"Insert Left",icon:(0,f.Y)(i6,{})}],["rightOf",{commandId:uM.insertPaneGroupRight.id,label:"Insert Right",icon:(0,f.Y)(i8,{})}],["above",{commandId:uM.insertPaneGroupLeft.id,label:"Insert Up",icon:(0,f.Y)(i9,{})}],["below",{commandId:uM.insertPaneGroupDown.id,label:"Insert Down",icon:(0,f.Y)(i3,{})}]]),sn=t(17562);function st(e){return(0,f.Y)(i5.Ay,(0,td._)((0,m._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M21.53 2.47a.75.75 0 0 1 0 1.06l-5.72 5.72H20a.75.75 0 0 1 0 1.5h-6a.75.75 0 0 1-.75-.75V4a.75.75 0 0 1 1.5 0v4.19l5.72-5.72a.75.75 0 0 1 1.06 0ZM4 14.75a.75.75 0 0 1 0-1.5h6a.75.75 0 0 1 .75.75v6a.75.75 0 0 1-1.5 0v-4.19l-5.72 5.72a.75.75 0 0 1-1.06-1.06l5.72-5.72H4Z",clipRule:"evenodd"})}))}function sr(e){return(0,f.Y)(i5.Ay,(0,td._)((0,m._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M20.483 14.37v2.871a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276a4.259 4.259 0 0 1 4.259-4.259h2.87A3.059 3.059 0 0 1 13.007 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437c0 1.324-.84 2.45-2.017 2.876ZM9.948 5.362h-2.69a2.914 2.914 0 0 0-2.913 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914v-2.69h-6.132a3.057 3.057 0 0 1-3.058-3.057V5.362ZM17 4.75a.75.75 0 0 0-1.5 0V7.5h-2.75a.75.75 0 0 0 0 1.5h2.75v2.75a.75.75 0 0 0 1.5 0V9h2.75a.75.75 0 0 0 0-1.5H17V4.75Z",clipRule:"evenodd"})}))}var si=t(7868),so=t(91326),sa=t(18216),sl=t(31518);function sc(e){return(0,f.Y)(i5.Ay,(0,td._)((0,m._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M16.47.47a.75.75 0 0 1 1.06 0l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 1 1-1.06-1.06l2.72-2.72H7A3.25 3.25 0 0 0 3.75 9v2a.75.75 0 0 1-1.5 0V9A4.75 4.75 0 0 1 7 4.25h12.19l-2.72-2.72a.75.75 0 0 1 0-1.06ZM20.25 15v-2a.75.75 0 0 1 1.5 0v2A4.75 4.75 0 0 1 17 19.75H4.81l2.72 2.72a.75.75 0 1 1-1.06 1.06l-4-4a.75.75 0 0 1 0-1.06l4-4a.75.75 0 0 1 1.06 1.06l-2.72 2.72H17A3.25 3.25 0 0 0 20.25 15Z",clipRule:"evenodd"})}))}function su(e){var n,t,r,i,o,a,l,c,u=e.paneId,s=(n=(0,nr.Vv)(),t=(0,o$.N0)(),r=rl(t8),(0,g.useCallback)(function(){return{data:{type:"context",label:oq.Ve,icon:(0,f.Y)(oK.A,{})},commands:function(){return t().map(function(e){return{match:oU.G2,data:{type:"action",label:n.getTitle(e),icon:n.Icon({pane:e}),run:function(){(0,oE.u4)(oE.AZ.TOOL_OPENED,{source:"Tab Menu",tool:e.type}),r({paneId:u,pane:e})}}}})}}},[t,n,r,u])),d=(i=(0,tG.Sx)(),o=(0,tG.L4)(),a=rl(t8),(0,g.useCallback)(function(){var e=o(),n=i().filter(function(n){return!e.includes(n)});return{data:{type:"context",label:"Recent",icon:(0,f.Y)(sl.A,{})},commands:function(e){var t=e.searchQuery;return(0,oG.h)({paths:n,searchQuery:t,run:function(e){a({paneId:u,pane:{type:(0,nr.QY)({path:e}),data:{path:e}}})}})}}},[i,a,u,o])),p=(l=(0,oM.A)().fs,c=rl(t8),(0,J.A)(function(){return{match:oU.G2,data:{type:"context",label:"Files",icon:(0,f.Y)(lj.A,{})},commands:function(e){var n=e.searchQuery,t=e.active;return(0,tw._)(function(){var e;return(0,tb.YH)(this,function(r){switch(r.label){case 0:if(!n&&!t)return[2,[]];return[4,l.listFiles()];case 1:if((e=r.sent()).error)return[2,[]];if(!e.files)throw Error("Expected files");return[2,(0,oG.h)({paths:e.files,searchQuery:n,run:function(e){c({paneId:u,pane:{type:(0,nr.QY)({path:e}),data:{path:e}}})}})]}})})()}}},[l,c,u]));return(0,J.A)(function(){return{match:oU.G2,data:{type:"context",label:"Change tab",icon:(0,f.Y)(sc,{})},commands:function(e){var n=e.searchQuery,t=e.active;return n||t?[d(),p,s()]:[]}}},[d,s,p])}var ss=(0,l7.AH)(i2.wp.center,{fontSize:ry.LU.fontSizeSmall,border:"1px solid",borderColor:ry.LU.outlineDefault,width:20,height:20,marginTop:-2,marginLeft:-2},i2.wp.borderRadius(8));function sd(e){return(0,f.Y)(i4.S,{css:ss,children:(0,f.Y)(i4.S,{css:{lineHeight:1},children:e.count})})}var sp=t(51349),sf=(0,eu.eU)([]);function sh(e,n){var t=n.run,r=n.enabled,i=void 0===r||r,o=(0,tp.Xr)(sf);(0,g.useEffect)(function(){if(i){var n=(Array.isArray(e)?e:[e]).map(function(e){return{shortcut:e,run:t}});return o(function(e){return(0,eE._)(e).concat((0,eE._)(n))}),function(){o(function(e){return e.filter(function(e){return!n.includes(e)})})}}},[e,t,o,i])}function sg(){var e=(0,tp.md)(sf);return(0,g.useEffect)(function(){var n=function(n){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l,c=o.value,u=c.shortcut,s=c.run;!!u.cmdOrCtrlKey==!!(0,cD.T$)(n)&&!!u.altKey==!!n.altKey&&!!u.shiftKey==!!n.shiftKey&&(null==(l=u.key)?void 0:l.toLowerCase())===n.key.toLowerCase()&&(n.preventDefault(),s(u))}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}},[e]),null}var sm=t(31450),sv=(0,rw.x)({overlay:[i2.wp.position.absolute,i2.wp.overflow("hidden"),i2.wp.zIndex(rv.W.overlay)],surface:[i2.wp.position.relative,i2.wp.borderRadius(8),i2.wp.flex.shrink(1),{maxHeight:"100%",maxWidth:"100%",border:"1px solid",borderColor:ry.LU.outlineDefault,opacity:0},i2.wp.shadow(3)],innerSurface:[i2.wp.borderRadius(8)]}),sy=(0,rw.x)({root:[{borderTop:"1px solid",borderColor:ry.LU.outlineDimmer}],row:[i2.wp.rowWithGap(2),i2.wp.align.center,i2.wp.justify.spaceBetween]});function sw(){var e=(0,o5.Kg)();return(0,f.FD)(i4.S,{css:sy.root,p:8,gap:8,children:[(0,f.FD)(i4.S,{css:sy.row,children:[(0,f.Y)(ac.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move focus"}),(0,f.FD)(i4.S,{row:!0,gap:4,children:[(0,f.Y)(o0._y,{keyCombo:"".concat(e),small:!0}),(0,f.Y)(sp.Js,{text:(0,f.Y)(uV,{duration:6e3,delay:6e3})})]})]}),(0,f.FD)(i4.S,{css:sy.row,children:[(0,f.Y)(ac.EY,{color:"dimmest",variant:"small",multiline:!1,children:"Move pane"}),(0,f.FD)(i4.S,{row:!0,gap:4,children:[(0,f.Y)(o0._y,{keyCombo:"".concat(e,"Shift-"),small:!0}),(0,f.Y)(sp.Js,{text:(0,f.Y)(uV,{duration:6e3,delay:1500})})]})]})]})}var sb=(0,g.memo)(function(){var e=function(){var e=ro(nU),n=ro(ik);if(n){var t={width:n.width,height:n.height,transform:"translate(".concat(n.x,"px, ").concat(n.y,"px)")},r=t.width,i=t.height,o=t.transform,a={border:"1px solid",borderColor:ry.LU.accentPrimaryStronger,borderRadius:ry.LU.borderRadius6,boxShadow:ry.LU.shadow3,transitionProperty:"transform, height, width",transitionDuration:sm.Ds.duration,transitionTimingFunction:sm.Ds.timingFunction};return(0,m._)({width:r,height:i,transform:o},e?void 0:a)}}(),n=rl(iR),t=(0,uH.A)(n,[]);return(0,g.useEffect)(function(){var e=setTimeout(function(){(0,uz.U)(t,"opacity","1")});return function(){clearTimeout(e)}},[t]),(0,f.Y)(uB.n1,{restoreFocus:!0,autoFocus:!0,contain:!0,children:(0,f.Y)(i4.S,{style:e,css:sv.overlay,p:16,align:"end",children:(0,f.Y)(o3.ui,{innerRef:t,elevated:!0,css:sv.surface,children:(0,f.Y)(o3.ui,{css:sv.innerSurface,grow:!0,shrink:!0,elevated:!0,children:(0,f.Y)(sA,{})})})})})}),sx={ArrowUp:"above",ArrowDown:"below",ArrowRight:"rightOf",ArrowLeft:"leftOf"},sY={ArrowUp:"up",ArrowDown:"down",ArrowRight:"right",ArrowLeft:"left"},sS=Object.keys(sx),sA=(0,g.memo)(function(){var e=rl(iU),n=rl(iF),t=rl(iI),r=ro(nU);sh({key:"Escape"},{run:function(){t()}}),sh(sS.map(function(e){return{key:e,cmdOrCtrlKey:!0}}),{run:function(n){e(sx[n.key])},enabled:!r}),sh(sS.map(function(e){return{key:e,cmdOrCtrlKey:!0,shiftKey:!0}}),{run:function(e){n({direction:sY[e.key]})},enabled:!r});var i=ro(i_);return i&&"sidebar"!==i.target?(0,f.Y)(s_,{paneGroupId:i.paneGroupId,paneId:i.paneId}):null});function s_(e){var n,t,r,i,o,a,l,c,u,s,d,h,g,v,y,w,b,x,Y,S,A,_=ro(nU),k=rl(iR),C=rl(iI),I=(n=e.paneGroupId,i=(r={paneId:t=e.paneId,paneGroupId:n}).paneId,o=r.paneGroupId,a=(0,nr.Vv)(),l=os(i),c=(0,oj.eq)(i),u=u2(),s=u1({paneId:i,paneGroupId:o}),d=(0,J.A)(function(){var e=a.getTitle(l),n=function(e){return!!e&&(void 0===e?"undefined":(0,eR._)(e))==="object"&&"data"in e},t=[{data:{type:"group",key:"pane-actions"},commands:function(){var e,t;return(null!=(t=null==c||null==(e=c.commands)?void 0:e.flatMap(function(e){return e.commands}))?t:[]).filter(n)}},{data:{type:"group",key:"pane-close"},commands:function(){return[u(i)].concat((0,eE._)(s)).filter(n)}}];return{match:oU.G2,data:{type:"context",label:e,icon:(0,f.Y)(a.Icon,{pane:l})},commands:function(e){var n=e.active,r=e.searchQuery;return n||r?t:[]}}},[l,c,a,i,s,u]),g=(h={paneId:t,paneGroupId:n}).paneGroupId,v=h.paneId,y=ro((0,J.A)(function(){return(0,eu.eU)(function(e){var n=e(e8),t=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,s=u.panes.map(function(n){return[n,e(e(e5(n)).dataAtom)]}),d="floating"===u.path[0];(d?t:r).push({activeIndex:u.activeIndex,paneGroupId:u.id,isFloating:d,panes:s})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{floating:t,tiling:r}})},[])),w=(0,nr.Vv)(),b=rl(tW),x=rl(tj),Y=su({paneId:v}),S=(0,J.A)(function(){var e=y.tiling,n=y.floating,t=e.reduce(function(e,n){return e+n.panes.length},0)+n.reduce(function(e,n){return e+n.panes.length},0),r={match:oU.G2,data:{type:"action",label:"New tab",icon:(0,f.Y)(oV.A,{}),run:function(){x({paneGroupId:g,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})}}};return t?[Y,{match:oU.G2,data:{type:"context",label:(0,si.A)("Tab",t),icon:(0,f.Y)(sd,{count:t})},commands:function(t){var i=t.active,o=t.searchQuery;if(!(i||o))return[];var a=(0,eE._)(e).concat((0,eE._)(n)).map(function(e,n){return{data:{type:"group",key:"paneGroups"+n},commands:function(){return e.panes.map(function(e){var n=(0,p._)(e,2),t=n[0],r=n[1];return{match:oU.G2,data:{type:"action",label:w.getTitle(r),icon:(0,f.Y)(w.Icon,{pane:r}),run:function(){b({paneId:t,activate:!0})}}}})}}});return a.unshift(r),a}}]:[Y,r]},[y,w,b,x,g,Y]),A=function(e){var n,t,r,i,o,a,l,c,u,s,d,h,g,v,y,w,b,x,Y,S,A,_,k,C,I,D,E,R,U,F,P,O,T,L,M,G,N=e.paneGroupId,B=e.paneId,H=function(e){var n,t,r=e.paneId,i=oY(e.paneGroupId),o=(0,u4.A)(i.isMaximized),a=(0,u4.A)(i.isFloating),l=!o&&!a,c=(n=(0,u8.RI)(),t=rl(tT),(0,J.A)(function(){return(0,eE._)(se.entries()).map(function(e){var i,o,a=(0,p._)(e,2),l=a[0],c=a[1],u=c.commandId,s=c.label,d=c.icon;return{match:oU.G2,data:{label:s,icon:d,type:"action",keyboardShortcut:null!=(o=null==(i=n.get(u))?void 0:i.shortcut)?o:void 0,run:function(){t({placement:l,paneId:r,autoFocus:!0}),(0,oE.u4)(oE.AZ.WS_SPLIT_USED,{action:"opened",placement:l})}}}})},[n,t,r]));return(0,J.A)(function(){return l?[{match:oU.G2,data:{type:"context",label:"Add pane",icon:(0,f.Y)(u9,{})},commands:function(e){var n=e.active,t=e.searchQuery;return n||t?c:[]}}]:[]},[l,c])}({paneId:B,paneGroupId:N}),z=(n=ox(B),t=ro(nU),r=(0,u4.A)(n.isFloating),i=!t&&!r,o=rl(t0),(0,J.A)(function(){var e=(0,eE._)(u6.entries()).map(function(e){var n=(0,p._)(e,2),t=n[0],r=n[1],i=r.label,a=r.icon;return{match:oU.G2,data:{label:i,icon:a,type:"action",run:function(){o(t)}}}});return i?[{match:oU.G2,data:{type:"context",label:"Move tab",icon:(0,f.Y)(u3,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[i,o])),W=(a=oY(N),l=(0,u4.A)(a.isMaximized),c=(0,u4.A)(a.isFloating),u=!l&&!c,s=rl(iF),(0,J.A)(function(){var e=(0,eE._)(u7.entries()).map(function(e){var n=(0,p._)(e,2),t=n[0],r=n[1],i=r.label,o=r.icon;return{match:oU.G2,data:{label:i,icon:o,type:"action",run:function(){s({direction:t})}}}});return u?[{match:oU.G2,data:{type:"context",label:"Move group",icon:(0,f.Y)(u5.A,{})},commands:function(n){var t=n.active,r=n.searchQuery;return t||r?e:[]}}]:[]},[u,s])),j=(h=(d=oy()).maximizePaneGroup,g=d.restoreMaximizedPaneGroup,v=oY(N),y=(0,u4.A)(v.isMaximized),w=ro(np),b=(0,o0.Jn)(uM.toggleMaximizePaneGroup.id),(0,J.A)(function(){return y?w?[]:[{match:oU.G2,data:{type:"action",label:"Restore",icon:(0,f.Y)(st,{}),run:function(){return g()},keyboardShortcut:b}}]:[{match:oU.G2,data:{type:"action",label:"Maximize",icon:(0,f.Y)(sn.A,{}),run:function(){return h({paneGroupId:N})},keyboardShortcut:b}}]},[y,b,w,g,h,N])),$=(x=rl(tO),Y=rl(iR),S=ro(np),A=(0,o0.Jn)(uM.removePaneGroup.id),(0,J.A)(function(){return S?[]:[{match:oU.G2,data:{type:"action",label:"Close",icon:(0,f.Y)(uJ.A,{}),run:function(){Y(),x({paneGroupId:N})},keyboardShortcut:A}}]},[Y,x,S,A,N])),Z=(k=(_={paneId:B,paneGroupId:N}).paneId,C=_.paneGroupId,I=rl(iM),D=oY(C),E=(0,u4.A)(D.isMaximized),R=(0,u4.A)(D.isFloating),U=(0,o0.Jn)(uM.toggleFloatPaneGroup.id),(0,J.A)(function(){return E?[]:[{match:oU.G2,data:{type:"action",label:R?"Unfloat":"Float",icon:R?(0,f.Y)(i7,{}):(0,f.Y)(uR.A,{}),keyboardShortcut:U,run:function(){I(k)}}}]},[k,I,U,R,E])),q=(P=oY((F={paneId:B,paneGroupId:N}).paneGroupId),O=ox(F.paneId),T=ow(F.paneGroupId),L=rc(n_),M=rl(nd),G=(0,u4.A)(P.isMaximized),(0,J.A)(function(){return G?[]:[{match:oU.G2,data:{type:"action",label:"New window",icon:(0,f.Y)(sr,{}),run:function(){var e=(0,tm.A)(),n=L().filter(function(e){var n=(0,p._)(e,1)[0];return T.panes.current.includes(n)});M({popupId:e,state:{sidebarPercent:0,type:"saved",layout:{floating:[],tiling:{id:(0,tm.A)(),type:"paneGroup",percent:100,activeIndex:T.activeIndex.current,panes:T.panes.current}},data:n.reduce(function(e,n){var t=(0,p._)(n,2),r=t[0],i=t[1];return(0,td._)((0,m._)({},e),(0,tg._)({},r,i))},{})}}),window.open("".concat(window.location.origin+window.location.pathname,"?popupId=").concat(e),"_blank","popup=1,height=".concat(O.size.current.height,"px,width=").concat(O.size.current.width,"px")),(0,oE.u4)(oE.AZ.WS_POPOUT_OPENED,{ai:n.some(function(e){var n=(0,p._)(e,2);return"ghostwriterChat"===(n[0],n[1]).type}),console:n.some(function(e){var n=(0,p._)(e,2);return"runnerOutput"===(n[0],n[1]).type}),editor:n.some(function(e){var n=(0,p._)(e,2);return"codeEditor"===(n[0],n[1]).type}),shell:n.some(function(e){var n=(0,p._)(e,2);return"shell"===(n[0],n[1]).type}),paneData:n})}}}]},[G,T.activeIndex,T.panes,L,M,O.size]));return(0,J.A)(function(){return[{data:{type:"group",key:"pane-group"},commands:function(){return(0,eE._)(H).concat((0,eE._)(z),(0,eE._)(W),(0,eE._)(j),(0,eE._)(Z),(0,eE._)(q),(0,eE._)($))}}]},[H,z,W,j,Z,q,$])}({paneGroupId:n,paneId:t}),(0,J.A)(function(){return{data:{type:"group",key:"root",description:"Search"},commands:function(){return[d].concat((0,eE._)(S),(0,eE._)(A))}}},[d,S,A]));return(0,f.Y)(o6.r,{iconBreadcrumbs:!0,command:I,onAction:function(){return k()},onKeyDown:function(e,n){var t=n.inputValue,r=n.hasHighlightedItem;if("Enter"===e.key&&!t&&!r){e.preventDefault(),C();return}(0,cD.T$)(e)&&e.preventDefault()},footer:_?null:(0,f.Y)(sw,{}),compact:!0})}var sk={id:"paneMenu.toggle",name:"Toggle pane context menu",default:(0,o5.FM)({cmdOrCtrl:!0,key:"j"})};function sC(){var e=rl(iD),n=ro(iE);return((0,o0.SJ)(function(){return[sk.id,function(){return e()}]},[e]),n)?(0,f.Y)(sb,{}):null}var sI=t(94917),sD=t(85608),sE=t(16771),sR=t(22091),sU=[c1,o8,sk].concat((0,eE._)(uG),(0,eE._)(l0.ke),(0,eE._)(sD.$f),[sR.B,sI.G,sE.Ws]),sF=t(43601);function sP(e){var n=(0,sF.O)();return(0,f.Y)(o0.jM,{commands:sU,onChange:n,keybindings:e.keybindings,children:e.children})}var sO=t(2582),sT=t(97878),sL=t(45330);function sM(e){var n=e.children,t=(0,J.A)(function(){return new lQ.Y(nu.A.get("stateCache","object"))},[]);return(0,f.Y)(lQ.H.Provider,{value:t,children:n})}function sG(e){var n,t,r=e.ui,i=e.repl,o=e.services,a=e.userKeybindings,l=e.children,c=i.id,u=i.config.isExtension,s=(0,J.A)(function(){return{id:c,replConfigIsExtension:u}},[c,u]);return(0,f.Y)(sP,{keybindings:a,children:(0,f.Y)(nr.lQ,{value:r,children:(0,f.Y)(sM,{children:(0,f.Y)(sO.A.Provider,{value:o,children:(0,f.Y)(sL.A.Provider,{value:s,children:(0,f.Y)(lX.F,{replId:i.id,orgId:null==(n=i.org)?void 0:n.id,container:o.container,fs:o.fs,dotReplit:o.dotReplit,ports:o.ports,secrets:o.secrets,children:(0,f.Y)(uI.B,{repl:i,forkParams:{trackingData:{forkSource:"replEnvironmentDesktop"}},teamContext:(null==(t=i.owner)?void 0:t.__typename)==="Team"?i.owner.id:void 0,children:(0,f.Y)(lF.Ey,{children:(0,f.Y)(sT.A,{children:l})})})})})})})})})}var sN=t(47877),sB=function(){var e=(0,tw._)(function(e){var n,t,r,i;return(0,tb.YH)(this,function(o){switch(o.label){case 0:if(!(0,cO.Fp)())return[2,null];return[4,(0,cO.Eb)(e)];case 1:if(t=(n=o.sent()).path,r=n.line,i=n.col,!t)return[2,null];return[2,{path:t,line:r,col:i}]}})});return function(n){return e.apply(this,arguments)}}();function sH(e){var n,t,r,i,o,a,l,c,u,s,d,f,h,v,y,w,b=e.repl;return t=(n=(0,oM.A)()).fs,r=n.dotReplit,i=ro(nl),o=(0,iV.A)(i),l=(a=(0,p._)((0,g.useState)(!1),2))[0],c=a[1],u=ov(),s=(0,g.useCallback)(function(e){var n;(0,iu.e$)(e.path.toLowerCase())?n={paneType:"markdown"}:(0,iu.Zy)(e.path.toLowerCase())&&(n={paneType:"csvPreview"}),u((0,td._)((0,m._)({},e),{opener:n}))},[u]),d=q(b),f=ro(nR),h=ro(np),v=(0,Z.jt)(),y=(0,rn.eg)(),w=(0,g.useRef)(!1),(0,g.useEffect)(function(){if(l&&!w.current){if(!i){if(!window.location.hash)return;var e=new URL(window.location.href);history.pushState((0,td._)((0,m._)({},history.state),{as:e.pathname}),document.title,window.location.origin+window.location.pathname+window.location.search);return}var n=(0,cO.cg)({path:i}),t=window.location.hash;if(!(t.slice(1)===i||t.startsWith(n+":"))){var r=new URL(window.location.href);r.hash=n,window.history.pushState((0,td._)((0,m._)({},history.state),{as:r.pathname+r.hash}),"",r)}}},[l,i]),(0,g.useEffect)(function(){if(!l){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,tw._)(function(){var n,i;return(0,tb.YH)(this,function(a){switch(a.label){case 0:if(!f)return[2];if(y||o.current)return c(!0),[2];return[4,sB(t)];case 1:if(n=a.sent(),e)return[2];if(n)return s(n),c(!0),[2];if(o.current||"saved"===f||h||v)return c(!0),[2];return[4,(0,sN.o)({fs:t,dotReplit:r})];case 2:return i=a.sent().entrypoint,e||!i||d||s({path:i}),c(!0),[2]}})})).apply(this,arguments)}},[t,s,r,o,f,l,h,d,v,y]),(0,g.useEffect)(function(){if(f){var e,n=(e=(0,tw._)(function(){var e;return(0,tb.YH)(this,function(n){switch(n.label){case 0:return w.current=!0,[4,sB(t)];case 1:return(e=n.sent())&&s(e),w.current=!1,[2]}})}),function(){return e.apply(this,arguments)});return window.addEventListener("hashchange",n),function(){window.removeEventListener("hashchange",n)}}},[f,t,s]),null}function sz(){var e=(0,rn.W9)(),n=(0,rn.gi)(),t=(0,oM.A)().fs,r=function(){n(null)};return(0,f.Y)(o7.a,{isOpen:!!e,onRequestClose:r,children:e?(0,f.Y)(cQ.A,{name:e,description:e,entityType:"file",hideModal:r,delete:function(){e&&(t.deleteFile(e),n(null))}}):null})}var sW=t(13353),sj=t(30267),s$=t(95018);function sZ(){var e,n,t=(0,h.useRouter)(),r=(0,Q.ME)(t,"mobileBridge"),i=oA(),o=(0,l5.A)(),a=o.isSaving,l=o.isOffline,c=(0,g.useRef)(null),u=(0,s$.d)(),s=oh(),d=o4(),p=(e=(0,uC.g3)(),n=(0,uC.qP)(),{runState:(0,g.useMemo)(function(){return e?e.step:uS.ll.OFFLINE},[e]),toggleRunState:(0,g.useCallback)(function(){n()},[n])}),f=p.runState,m=p.toggleRunState,v=(0,g.useCallback)(function(e){var n=function(e){switch(e){case sW.TK.OPEN_FILETREE:i.toggle();break;case sW.TK.TOGGLE_RUN_STATE:m();break;case sW.TK.TOGGLE_ALLPANES:d();break;case sW.TK.OPEN_NEW_PANE:case sW.TK.TOGGLE_DRAWER:break;default:(0,so.A)(e)}},t=function(e){u(e)},r=function(e){var n=e.type,t=e.messageId;try{s({pane:{type:n}})}catch(e){(0,sj.Cf)(t)}};(0,sj.E6)(e,function(e){var i=e.type;switch(i){case sW.tF.SET_KEYBOARD_STATE:t(e.keyboardState);break;case sW.tF.WORKSPACE_REQUEST_ACTION:n(e.action);break;case sW.tF.WORKSPACE_REQUEST_OPEN_PANE:r({messageId:e.id,type:e.paneType});break;default:(0,so.A)(i)}})},[m,u,s,d,i]);return(0,g.useEffect)(function(){if(r){var e={messageType:sW.tF.WORKSPACE_STATE,isDrawerOpen:!1,isShowingAllPanes:!0,isSaving:a,isOffline:l,runState:f,activePaneType:null,activePaneFilePath:null,isInAgentMode:!1,insets:{top:0,bottom:0}},n=c.current;return(null==n||JSON.stringify(e)!==JSON.stringify(n))&&((0,sj._z)(e,(0,tm.A)()),c.current=e),window.addEventListener("message",v),function(){window.removeEventListener("message",v)}}},[r,v,f,a,l,c]),null}var sq=t(7368),sV=t(41398),sK=t(46434),sJ=t(90629),sQ=t(10764),sX=t(40860),s0=t(39159);function s1(){var e=ov(),n=oh();return(0,g.useCallback)(function(t){return(0,nr.xS)(t)&&t.data.path?e((0,td._)((0,m._)({},t.data),{path:t.data.path})):n({pane:t})},[n,e])}var s2=t(36075),s4=t(55315),s5=t(63456),s7=t(53131),s3=t.n(s7);function s6(e){var n=e.text,t=Math.floor(100*e.progress);return(0,f.FD)(f.FK,{children:[(0,f.FD)(i4.S,{row:!0,align:"center",justify:"center",gap:8,style:{cursor:"not-allowed"},children:[(0,f.Y)(s5.A,{}),(0,f.Y)(ac.EY,{children:n})]}),(0,f.Y)(i4.S,{clsx:s3().progressBarContainer,children:(0,f.Y)(i4.S,{clsx:s3().progressBarTrack,children:(0,f.Y)(i4.S,{clsx:s3().progressBarFill,style:{width:"".concat(t,"%")}})})}),(0,f.Y)(i4.S,{justify:"center",align:"center",children:(0,f.FD)(ac.EY,{variant:"small",color:"dimmer",children:[t,"%"]})})]})}function s8(e){var n=e.errorMessage;return(0,f.FD)(i4.S,{align:"center",gap:8,children:[(0,f.Y)(ac.EY,{children:n}),(0,f.Y)(ac.EY,{children:"Please try again or contact support"}),(0,f.Y)(ui(),{href:"/~",children:(0,f.Y)(ac.EY,{children:"Return to Home"})})]})}function s9(e){var n=e.onClick;return(0,f.FD)(i4.S,{align:"center",gap:16,children:[(0,f.Y)(ac.EY,{children:"You must login again to continue importing"}),(0,f.Y)(al.$n,{text:"Reconnect to Figma",onClick:n,colorway:"primary",iconRight:(0,f.Y)(uw.A,{})})]})}function de(){var e,n,t,r,i,o,a,l,c,u,s,d,h,v,y,x,Y,S,A,_,k,C,D,F,P=(e=(0,ec.A)(),t=(0,p._)((n=(0,m._)({},I,void 0),b.n(R,n)),1)[0],i=(0,p._)((r=(0,m._)({},I,void 0),b.n(U,r)),1)[0],a=(o=(0,p._)((0,g.useState)({status:"not_started"}),2))[0],l=o[1],c=s1(),u=(0,Z.NC)(),s=(0,g.useRef)(!1),d=(0,g.useCallback)((0,tw._)(function(){var e;return(0,tb.YH)(this,function(n){switch(n.label){case 0:if(s.current)return[2];return s.current=!0,[4,u.sessions.create({sessionType:ep.dF3.AGENT_SESSION})];case 1:if(!(e=n.sent()).ok)throw Error("Failed to create Agent session");return c({type:"agentChat",data:{sessionId:e.payload.id}}),[4,e.payload.appendEvent({kind:"setupImportedProject",importSource:ep.aJd.PROJECT_IMPORT_SOURCE_FIGMA})];case 2:return n.sent(),[2]}})}),[u,c]),v=(h=(0,p._)((0,g.useState)(0),2))[0],y=h[1],A=(x={variables:{replId:e}},Y=(0,m._)({},I,x),S=w.I(E,Y)).data,_=!S.loading&&A&&"Repl"===A.getRepl.__typename&&A.getRepl.config.figmaImportStatus===sQ.u4D.Started?A.getRepl.config.figmaUrl:null,C=(0,g.useCallback)((k=(0,tw._)(function(n){return(0,tb.YH)(this,function(r){switch(r.label){case 0:return l({status:"error",errorMessage:n.errorMessage}),[4,t({variables:{input:{id:e,figmaImportStatus:sQ.u4D.Failed}}})];case 1:return r.sent(),[2]}})}),function(e){return k.apply(this,arguments)}),[e,t]),((0,s0.b)((D=(0,tw._)(function(n,r){var o,a,c,u,s,p,f,h,g,m,v,w,b,x,Y,S,A;return(0,tb.YH)(this,function(k){switch(k.label){case 0:if(o=r.signal,!_)return[2];return[4,i({variables:{input:{figmaUrl:_}}})];case 1:if((null==(a=k.sent().data)?void 0:a.getFigmaIntermediateToken.__typename)==="NoOAuthFoundError")return l({status:"needs_auth",retryAuth:function(){return y(function(e){return e+1})}}),[2];if((null==a?void 0:a.getFigmaIntermediateToken.__typename)==="InvalidFigmaUrlError"||(null==a?void 0:a.getFigmaIntermediateToken.__typename)==="FigmaRateLimitError")return sJ.Cp(a.getFigmaIntermediateToken,{extra:{replId:e,figmaUrl:_}}),lR.vF.error("Failed to get Figma intermediate token",{repl:e,figmaUrl:_,payload:a.getFigmaIntermediateToken}),C({errorMessage:a.getFigmaIntermediateToken.message}),[2];if(!(c=null==a?void 0:a.getFigmaIntermediateToken)||"FigmaImportIntermediateToken"!==c.__typename)return lR.vF.error("Failed to get Figma intermediate token",{repl:e,figmaUrl:_,payload:a}),C({errorMessage:"Something went wrong while importing. Please try again."}),[2];return u=c.token,l(function(e){return"in_progress"===e.status?e:{status:"in_progress",progress:0,text:"Preparing Figma import..."}}),[4,n.figmaImport.startImport.rpc({intermediateToken:u},{signal:o})];case 2:if(!(s=k.sent()).ok)switch(p=s.payload.code){case"INVALID_REQUEST":case"UNCAUGHT_ERROR":return C({errorMessage:"Something went wrong while importing. Please try again."}),[2];case"UNEXPECTED_DISCONNECT":case"CANCEL":return[2];default:(0,so.A)(p)}f=n.figmaImport.status.subscribe({},{signal:o}).resReadable,h=void 0,g=!1,m=!1,k.label=3;case 3:k.trys.push([3,8,9,14]),w=function(){var n=x.value;if(!n.ok){var t=n.payload.code;switch(t){case"FIGMA_TOKEN_EXPIRED":case"FIGMA_INVALID_TOKEN":return l({status:"needs_auth",retryAuth:function(){return y(function(e){return e+1})}}),{v:void 0};case"FIGMA_NODE_NOT_FOUND":return C({errorMessage:"The selected Figma component could not be found, please ensure you have selected a frame and copied the link to the frame."}),{v:void 0};case"FIGMA_FILE_NOT_FOUND":return C({errorMessage:"The Figma file could not be accessed, please ensure you have copied the link to the file."}),{v:void 0};case"FIGMA_SELECTION_TOO_LARGE":return C({errorMessage:"Your Figma selection is too large to process, please make sure you have selected a single frame."}),{v:void 0};case"FIGMA_RATE_LIMIT_EXCEEDED":return C({errorMessage:"Too many requests. Please wait a moment and try again."}),{v:void 0};case"NO_CODE_GENERATED":return C({errorMessage:"No code could be generated from your frame. Please try a different link."}),{v:void 0};case"TIMEOUT":return C({errorMessage:"The import took too long. Please try again, or try a different component."}),{v:void 0};case"FIGMA_NODE_NOT_SUPPORTED":return C({errorMessage:"The selected Figma component is not supported. Please make sure you have selected a frame and copied the link to the frame."}),{v:void 0};case"FIGMA_PAGE_WITH_MULTIPLE_CHILDREN":return C({errorMessage:"The selected Figma page has multiple children. Please make sure you have selected a single frame."}),{v:void 0};case"FIGMA_PAGE_WITH_NO_VALID_CHILDREN":return C({errorMessage:"The selected Figma page doesn't have any content we can convert to code. Please make sure you've selected a page with visible designs then try again."}),{v:void 0};case"INVALID_REQUEST":case"UNKNOWN":case"UNCAUGHT_ERROR":return C({errorMessage:"Something went wrong while importing. Please try again."}),{v:void 0};case"NOT_STARTED":return lR.vF.error("Figma Import: Failed to import from Figma",{repl:e,figmaUrl:_,payload:n.payload}),sJ.Cp(Error("Figma import: not started"),{extra:{replId:e,figmaUrl:_,payload:n.payload}}),C({errorMessage:"Something went wrong while importing. Please try again."}),{v:void 0};case"READABLE_BROKEN":case"CANCEL":case"UNEXPECTED_DISCONNECT":return{v:void 0};default:(0,so.A)(t)}}var r=n.payload;"progress"===r.kind?l(function(e){return"in_progress"===e.status&&e.progress>=r.number?e:{status:"in_progress",progress:r.number,text:r.statusText}}):"success"===r.kind&&(h=function(e){var n=e.file,t=e.frame,r="".concat(n," (").concat(t,")");if(r.length<=sX.z)return r;var i=sX.z-3;if(n.length<=i-1){var o=i-n.length,a=t.length>o?t.substring(0,o-1)+"":t;return"".concat(n," (").concat(a,")")}var l=i-Math.min(t.length,10),c=n,u=t;n.length>l&&(c=n.substring(0,l-1)+"");var s=i-c.length;return t.length>s&&(u=t.substring(0,s-1)+""),"".concat(c," (").concat(u,")")}({file:r.figmaFileName,frame:r.figmaSelectedFrameName}))},b=(0,sK._)(f),k.label=4;case 4:return[4,b.next()];case 5:if(!(g=!(x=k.sent()).done))return[3,7];if(Y=w(),"object"===(0,eR._)(Y))return[2,Y.v];k.label=6;case 6:return g=!1,[3,4];case 7:return[3,14];case 8:return S=k.sent(),m=!0,v=S,[3,14];case 9:if(k.trys.push([9,,12,13]),!(g&&null!=b.return))return[3,11];return[4,b.return()];case 10:k.sent(),k.label=11;case 11:return[3,13];case 12:if(m)throw v;return[7];case 13:return[7];case 14:return l({status:"in_progress",progress:1,text:"Creating checkpoint"}),[4,n.git.init.rpc({initialCommit:!0,includeAllInitialFiles:!0},{signal:o})];case 15:if(!(A=k.sent()).ok)switch(A.payload.code){case"ALREADY_INITIALIZED":break;case"CANCEL":case"UNEXPECTED_DISCONNECT":return[2];default:sJ.v4(function(e){e.setExtra("gitInitError",A.payload),sJ.Cp(Error("figma import: git init failed"))})}return l({status:"in_progress",progress:1,text:"Handing off to Agent"}),[4,d()];case 16:return k.sent(),[4,t({variables:{input:{id:e,title:h,makeTitleUnique:!0,figmaImportStatus:sQ.u4D.Completed}}})];case 17:return k.sent(),(0,oE.u4)(oE.AZ.FIGMA_IMPORT_USED,{action:"completed"}),l({status:"success"}),[2]}})}),function(e,n){return D.apply(this,arguments)}),[_,e,t,d,v,i,C]),A&&"Repl"===A.getRepl.__typename&&A.getRepl.config.figmaImportStatus===sQ.u4D.Failed)?{status:"error",errorMessage:"Something went wrong"}:a),O=(0,sV.m)({onAuth:function(){"needs_auth"===P.status&&P.retryAuth(),(0,oE.u4)(oE.AZ.FIGMA_AUTH_COMPLETE,{source:"workspace"})}});return"not_started"===P.status||"success"===P.status?null:("in_progress"===P.status?F=(0,f.Y)(s6,{text:P.text,progress:P.progress}):"error"===P.status?F=(0,f.Y)(s8,{errorMessage:P.errorMessage}):"needs_auth"===P.status&&(F=(0,f.Y)(s9,{onClick:O})),(0,f.Y)(s2.Z,{children:(0,f.Y)(i4.S,{clsx:s3().overlay,style:{cursor:"in_progress"===P.status?"wait":"default"},children:(0,f.Y)(sq.Ay,{children:(0,f.FD)(i4.S,{clsx:s3().animationWrapper,tabIndex:-1,children:[(0,f.FD)(i4.S,{align:"center",gap:16,children:[(0,f.Y)(s4.H,{}),(0,f.Y)(ac.EY,{multiline:!1,variant:"subheadBig",dataCy:"figma-lock-screen",children:"Importing from Figma..."})]}),(0,f.Y)(i4.S,{pt:16,px:16,gap:4,children:F})]})})})}))}var dn=t(36999),dt=t(32332);function dr(){var e=(0,oM.A)().replspaceApi,n=(0,p._)((0,g.useState)(!1),2),t=n[0],r=n[1],i=rl(tJ),o=ov(),a=s1();return(0,dn.D)({insertConfigPlugin:function(){return i({pane:{type:"config",flow:"githubImport"},focusIfExists:!0})},setConfigScreenLockIsOpen:r,openFile:o,openPane:a}),(0,g.useEffect)(function(){if(t)return e.onConfirmSendToken(function(e){e&&e(!0,!1)})},[t,e]),t?(0,f.Y)(dt.A,{reason:"Importing"}):null}var di=t(22781);function da(){var e=(0,v._)(["\n  fragment MarkLessonCompleteLesson on UserCourseLesson {\n    id\n    lessonSlug\n    timeCompleted\n    course {\n      id\n      courseSlug\n    }\n  }\n"]);return da=function(){return e},e}function dl(){var e=(0,v._)(["\n  mutation MarkLessonAsComplete($input: CompleteUserCourseLessonInput!) {\n    completeUserCourseLesson(input: $input) {\n      ... on UpdatedUserCourseLesson {\n        __typename\n        userCourseLesson {\n          id\n          timeCompleted\n        }\n      }\n      ... on NotFoundError {\n        __typename\n        message\n      }\n      ... on UnauthorizedError {\n        __typename\n        message\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return dl=function(){return e},e}var dc={},du=(0,y.J1)(da()),ds=(0,y.J1)(dl());function dd(){var e=(0,v._)(["\n  fragment ReplEnvironmentHeaderCurrentUser on CurrentUser {\n    id\n    ...OrgSwitcherCurrentUser\n  }\n  ","\n"]);return dd=function(){return e},e}function dp(){var e=(0,v._)(["\n  fragment ReplEnvironmentHeaderRepl on Repl {\n    id\n    org {\n      id\n      type\n    }\n    authorizations {\n      viewPermissions {\n        isAuthorized\n      }\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    lesson {\n      id\n      ...MarkLessonCompleteLesson\n    }\n    config {\n      isInPlanningPhase\n    }\n    ...ReplEnvironmentHeaderLeftRepl\n  }\n  ","\n  ","\n"]);return dp=function(){return e},e}function df(){var e=(0,v._)(["\n  query ReplEnvironmentHeader($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentHeaderRepl\n      }\n    }\n    currentUser {\n      id\n      ...ReplEnvironmentHeaderCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return df=function(){return e},e}var dh={},dg=(0,y.J1)(dd(),di.ks),dm=(0,y.J1)(dp(),du,S.c),dv=(0,y.J1)(df(),dm,dg),dy=t(58770),dw=t(35422),db=t(45773),dx=t(41847),dY=t(11297),dS=t(54001),dA=t(25882),d_=t(66905),dk=t(59133),dC=t(13011),dI=t(95601),dD=t(27536),dE=t(5441),dR=t(51638),dU=t(32351),dF=t(61168),dP=t(18069),dO=t(54854),dT=t(18701),dL=t(37624),dM=t(83692),dG=t(37252),dN=t(47630),dB=t(27789),dH=t(67611),dz=t(57839),dW=t(94982),dj=t(67382),d$=t(25650),dZ=t(18854),dq=(0,rb.v)(["leftBorderColor","leftBackgroundColor","leftBackgroundColorHover","leftForegroundColor"]),dV=dq.cssVars,dK=dq.styleTokens,dJ=(0,rw.x)({wrapper:[i2.wp.noDragRegion],left:[i2.wp.px(8),i2.wp.borderRadius(6),i2.wp.zIndex(10),i2.wp.height(34),i2.wp.mr(1),i2.wp.width(300),{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",color:dK.leftForegroundColor,border:"1px solid",borderColor:dK.leftBorderColor,backgroundColor:dK.leftBackgroundColor,"&:hover":{backgroundColor:dK.leftBackgroundColorHover},"&:only-child":[i2.wp.borderRadius(4)]}],leftInteractionButton:[i2.wp.fontSize(ry.LU.fontSizeDefault),i2.wp.display.flex,i2.wp.height("100%"),i2.wp.justify.center,{backgroundColor:"transparent",cursor:"pointer"}],codemirror:[i2.wp.display.flex,i2.wp.flex.grow(1),i2.wp.overflow("auto"),i2.wp.maxHeight(300),{"& .cm-editor":[i2.wp.flex.grow(1)]}],agentMessage:[i2.wp.borderRadius(4),i2.wp.colorMixBg(ry.LU.blurpleDimmest,ry.LU.interactiveBackground,.25)],simpleChatInputWrapper:[i2.wp.backgroundColor.backgroundHigher,i2.wp.borderRadius(4)],popoverWrapper:[i2.wp.maxWidth("36em")]}),dQ=db.Lz.theme((fo={"&":{flexGrow:1},"& .cm-content":{fontFamily:ry.LU.fontFamilyDefault}},(0,tg._)(fo,"& .".concat(dk.Fb),{display:"none"}),(0,tg._)(fo,"& .cm-cursor",{borderLeftColor:ry.LU.foregroundDefault,borderLeftWidth:"1px"}),fo));function dX(){}function d0(e){var n,t,r,i;if(e.state===ep.qOk.IN_PROGRESS)return!1;if((null==(n=e.contents.contents)?void 0:n.$kind)==="agentAskUserForActionRequest"){var o=e.contents.contents.agentAskUserForActionRequest.request;return(null==o?void 0:o.$kind)==="userSecretsRequest"}return(null==(t=e.contents.contents)?void 0:t.$kind)==="agentTimelineEventContents"&&(null==(r=e.contents.contents.agentTimelineEventContents.toolData)?void 0:r.$kind)==="messageData"&&(null==(i=e.contents.contents.agentTimelineEventContents.toolData.messageData.agentAction.optionType)?void 0:i.$kind)==="secretRequestAction"}function d1(e){if(e.state===ep.qOk.IN_PROGRESS||(null==(n=e.contents.contents)?void 0:n.$kind)!=="agentTimelineEventContents")return!1;var n,t=e.contents.contents.agentTimelineEventContents,r=t.toolData;return"user_response"===t.toolName&&(null==r?void 0:r.$kind)==="messageData"}function d2(e){var n;return(null==(n=e.contents.contents)?void 0:n.$kind)==="rapidBuildStarted"}function d4(e){var n=e.onSubmit,t=e.disabled,r=e.persistenceKey,i=(0,d_.A)(),o=i.ref,a=i.view,l=(0,dS.Vn)(a,dL.Im),c=(0,dL.hk)({text:"Respond to the Agent"}),u=dT.bZ.use(2e3),s=(0,dR.j)(r,a),d=s.persistPromptDraftCompartment,p=s.clearPersistedPromptDraft,h=(0,g.useCallback)(function(){a&&!l&&(n(a.state.doc.toString()),p(),a.dispatch({changes:{from:0,to:a.state.doc.length}}))},[a,l,n,p]),m=dE.S.use({onPrimaryAction:h});return(0,g.useEffect)(function(){a&&(a.focus(),a.dispatch({selection:{anchor:a.state.doc.length}}))},[a]),(0,f.FD)(i4.S,{row:!0,py:2,pl:4,pr:6,align:"center",css:dJ.simpleChatInputWrapper,children:[(0,f.Y)(dA.A,{ref:o,css:dJ.codemirror,fontSize:14,extensions:[dQ,m,c,dT.tP,u,dY.r,dx.N,d]}),(0,f.Y)(cf.K0,{alt:"Send",tooltipBehavior:"hidden",disabled:t||!!l,onClick:h,children:(0,f.Y)(d$.A,{})})]})}function d5(e){var n,t=e.isOpen,r=e.onOpenChange,i=e.label,o=e.icon,a=e.text,l=e.children;return(0,f.Y)(i4.S,{css:dJ.left,justify:"center",style:(n={},(0,tg._)(n,dV.leftBorderColor,ry.LU.blurpleDefault),(0,tg._)(n,dV.leftBackgroundColor,ry.LU.blurpleDimmest),(0,tg._)(n,dV.leftBackgroundColorHover,ry.LU.blurpleDimmer),(0,tg._)(n,dV.leftForegroundColor,ry.LU.foregroundDefault),n),children:(0,f.FD)(dG.Wv,{isOpen:t,onOpenChange:r,label:i,children:[(0,f.Y)(i4.D.button,{css:dJ.leftInteractionButton,children:(0,f.FD)(i4.S,{row:!0,gap:6,align:"center",children:[o,a]})}),l]})})}function d7(e){var n,t=e.icon,r=e.text,i=e.isAgentWorking,o=(0,dP.zS)(),a=(0,dP.u)();return(0,f.FD)(i4.S,{row:!0,css:dJ.left,align:"center",justify:"space-between",style:(n={},(0,tg._)(n,dV.leftBorderColor,ry.LU.backgroundRoot),(0,tg._)(n,dV.leftBackgroundColor,ry.LU.backgroundDefault),(0,tg._)(n,dV.leftBackgroundColorHover,ry.LU.backgroundDefault),(0,tg._)(n,dV.leftForegroundColor,ry.LU.foregroundDimmer),n),children:[(0,f.FD)(i4.S,{row:!0,gap:6,align:"center",children:[t,r]}),(0,f.Y)(cf.K0,{alt:i?"Pause the Agent":"Resume the Agent",onClick:function(){i?o():a()},children:i?(0,f.Y)(dW.A,{}):(0,f.Y)(dj.A,{})})]})}function d3(e){var n,t=e.icon,r=e.text,i=oh(),o=(0,oj.Hw)();return(0,f.Y)(i4.S,{row:!0,gap:6,css:dJ.left,align:"center",style:(n={},(0,tg._)(n,dV.leftBorderColor,ry.LU.blurpleDefault),(0,tg._)(n,dV.leftBackgroundColor,ry.LU.blurpleDimmest),(0,tg._)(n,dV.leftBackgroundColorHover,ry.LU.blurpleDimmer),(0,tg._)(n,dV.leftForegroundColor,ry.LU.foregroundDefault),n),children:(0,f.Y)(i4.D.button,{css:dJ.leftInteractionButton,onClick:function(){(0,iK.flushSync)(function(){i({pane:{type:"agentChat"},activate:!0,reveal:!0})});var e=o(function(e){var n=(0,p._)(e,2);return"agentChat"===(n[0],n[1]).type});(null==e?void 0:e.bindings.type)==="agentChat"&&e.bindings.focusInput()},children:(0,f.FD)(i4.S,{row:!0,gap:6,align:"center",children:[t,r]})})})}function d6(e){var n=e.event,t=e.session,r=e.isAgentWorking,i=e.isAgentPaused;if(!n||!t)return(0,f.Y)(pn,{isAgentWorking:r});if(i){if(d1(n))return(0,f.Y)(pe,{event:n,session:t,isAgentWorking:r});if(d0(n))return(0,f.Y)(d9,{event:n,session:t,isAgentWorking:r})}return r?d2(n)?(0,f.Y)(d7,{icon:(0,f.Y)(ub.A,{}),text:"Designing",isAgentWorking:r}):(0,f.Y)(d8,{event:n,isAgentWorking:r}):(0,f.Y)(pn,{isAgentWorking:r})}function d8(e){var n,t,r,i=e.event,o=e.isAgentWorking,a=(0,dP.zS)(),l=(0,dP.u)(),c=(null==(n=i.contents.contents)?void 0:n.$kind)==="agentTimelineEventContents"?null==(t=i.contents.contents)?void 0:t.agentTimelineEventContents:void 0,u=(0,dO.m)(i);return(null==c?void 0:c.toolData)&&u?(0,f.FD)(i4.S,{row:!0,css:dJ.left,align:"center",justify:"space-between",style:(r={},(0,tg._)(r,dV.leftBorderColor,ry.LU.backgroundRoot),(0,tg._)(r,dV.leftBackgroundColor,ry.LU.backgroundDefault),(0,tg._)(r,dV.leftBackgroundColorHover,ry.LU.backgroundDefault),(0,tg._)(r,dV.leftForegroundColor,ry.LU.foregroundDimmer),r),children:[(0,f.Y)(dI.X,{toolDataKind:c.toolData.$kind,summary:u}),(0,f.Y)(cf.K0,{alt:o?"Pause":"Resume",onClick:function(){o?a():l()},children:o?(0,f.Y)(dW.A,{}):(0,f.Y)(dj.A,{})})]}):(0,f.Y)(d7,{icon:(0,f.Y)(s5.A,{}),text:"Thinking",isAgentWorking:o})}function d9(e){var n=e.event,t=e.session,r=e.isAgentWorking,i=(0,p._)((0,g.useState)(!1),2),o=i[0],a=i[1],l=(0,p._)((0,g.useState)(!1),2),c=l[0],u=l[1],s=(0,ec.A)(),d=(0,oM.A)().secrets,h=(0,dD.k)(d.replaceAllExternalSecrets),m=h.linkSecrets,v=h.unlinkSecrets,y=(0,dU.M)(t),w=!1;if((null==(Y=n.contents.contents)?void 0:Y.$kind)==="agentAskUserForActionRequest"){var b=n.contents.contents.agentAskUserForActionRequest.request;(null==b?void 0:b.$kind)==="userSecretsRequest"&&(w=!0,A=b.userSecretsRequest.message,_=b.userSecretsRequest.secrets.map(function(e){return e.key}))}if(!w&&(null==(S=n.contents.contents)?void 0:S.$kind)==="agentTimelineEventContents"){var x=n.contents.contents.agentTimelineEventContents.toolData;if((null==x?void 0:x.$kind)==="messageData"){var Y,S,A,_,k,C=x.messageData.agentAction;(null==(k=C.optionType)?void 0:k.$kind)==="secretRequestAction"&&(A=x.messageData.content,_=C.optionType.secretRequestAction.secrets.map(function(e){return e.key}))}}return A&&_?(0,f.Y)(d5,{isOpen:o,onOpenChange:a,label:"Agent Secrets",icon:c?(0,f.Y)(s5.A,{}):(0,f.Y)(dH.A,{}),text:c?"Agent is connecting secrets":"Agent needs a secret from you",children:(0,f.FD)(i4.S,{css:dJ.popoverWrapper,gap:8,p:8,children:[(0,f.Y)(i4.S,{p:8,css:dJ.agentMessage,children:(0,f.Y)(dM.d2,{text:A})}),(0,f.Y)(dC.L,{openSecrets:dX,replId:s,keys:_,addEntries:d.addEntries,removeEntries:d.removeEntries,watch:d.watch,replaceAllExternalSecrets:d.replaceAllExternalSecrets,onComplete:(0,tw._)(function(){var e;return(0,tb.YH)(this,function(t){switch(t.label){case 0:return u(!0),[4,y({type:"userSecretsResponse",requestEventId:n.id,providedSecretKeys:_})];case 1:return e=t.sent(),a(!1),[2,e]}})}),sessionId:t.id,waitingOnUser:!0,linkSecrets:m,unlinkSecrets:v})]})}):(0,f.Y)(d7,{icon:(0,f.Y)(s5.A,{}),text:"Thinking",isAgentWorking:r})}function pe(e){var n,t,r=e.event,i=e.session,o=e.isAgentWorking,a=(null==(n=r.contents.contents)?void 0:n.$kind)==="agentTimelineEventContents"&&(null==(t=r.contents.contents.agentTimelineEventContents.toolData)?void 0:t.$kind)==="messageData"?r.contents.contents.agentTimelineEventContents.toolData.messageData.content:void 0,l=(0,p._)((0,g.useState)(!1),2),c=l[0],u=l[1],s=(0,p._)((0,g.useState)(!1),2),d=s[0],h=s[1],m="dynamicIsland-response-".concat(r.id),v=(0,dF.b)(i,dX).sendMessage,y=(0,g.useCallback)(function(e){v({message:e,attachments:[]}),h(!0),u(!1)},[v]);return a?(0,f.Y)(d5,{isOpen:c,onOpenChange:u,label:"Agent Question",icon:d?(0,f.Y)(s5.A,{}):(0,f.Y)(dB.A,{}),text:d?"Replying to the Agent":"Agent is ready for feedback",children:(0,f.FD)(i4.S,{css:dJ.popoverWrapper,gap:8,p:8,children:[(0,f.Y)(i4.S,{p:8,css:dJ.agentMessage,children:(0,f.Y)(dM.d2,{text:a})}),d?(0,f.FD)(i4.S,{row:!0,gap:8,p:4,children:[(0,f.Y)(s5.A,{}),"Sending"]}):(0,f.Y)(d4,{onSubmit:y,disabled:d,persistenceKey:m})]})}):(0,f.Y)(d7,{icon:(0,f.Y)(s5.A,{}),text:"Thinking",isAgentWorking:o})}function pn(e){var n=e.isAgentWorking;return(0,f.Y)(d7,{icon:n?(0,f.Y)(dZ.A,{}):(0,f.Y)(dz.A,{}),text:n?"Agent is waking up":"Agent is resting",isAgentWorking:n})}var pt={direction:"reverse",state:{event:null},reducer:function(e,n){var t,r,i,o;if(e.sender.type===ep.utd.AI&&((null==(t=e.contents.contents)?void 0:t.$kind)==="rapidBuildStarted"||(null==(r=e.contents.contents)?void 0:r.$kind)==="agentPlanEventContents"||(null==(i=e.contents.contents)?void 0:i.$kind)==="agentAskUserForActionRequest"||(null==(o=e.contents.contents)?void 0:o.$kind)==="agentTimelineEventContents"))return n.event=e,!1}};function pr(e){var n=e.event,t=e.isAgentWorking,r=e.isAgentPaused;if(n&&t&&d2(n))return(0,f.Y)(d7,{icon:(0,f.Y)(ub.A,{}),text:"Agent is designing",isAgentWorking:t});if(n&&r){if(d1(n))return(0,f.Y)(d3,{icon:(0,f.Y)(dN.A,{}),text:"Agent is ready for feedback"});if(d0(n))return(0,f.Y)(d3,{icon:(0,f.Y)(dH.A,{}),text:"Agent needs a secret"})}return(0,f.Y)(d7,{icon:t?(0,f.Y)(dZ.A,{}):(0,f.Y)(dz.A,{}),text:t?"Agent is working":"Agent is resting",isAgentWorking:t})}function pi(){var e=ob("agentChat"),n=(0,Z.NC)(),t=(0,ef.J2)(n.sessions.agent.current),r=(0,ef.Rj)(function(){return null==t?void 0:t.agent.state},[t]),i=(0,g.useMemo)(function(){switch(null==r?void 0:r.state){case ep.g32.AGENT_STATE_PAUSED:case ep.g32.AGENT_STATE_NOT_STARTED:case ep.g32.AGENT_STATE_UNKNOWN:return!0;default:return!1}},[null==r?void 0:r.state]),o=(0,g.useMemo)(function(){return(null==r?void 0:r.state)===ep.g32.AGENT_STATE_RUNNING},[null==r?void 0:r.state]),a=(0,ef.Rj)(function(){return null==t?void 0:t.reduce(pt,1e3)},[t],{default:{event:null}}).event;return(0,f.Y)(i4.S,{css:dJ.wrapper,row:!0,justify:"center",children:e?(0,f.Y)(pr,{event:null!=a?a:void 0,isAgentWorking:o,isAgentPaused:i}):(0,f.Y)(d6,{event:null!=a?a:void 0,session:null!=t?t:void 0,isAgentWorking:o,isAgentPaused:i})})}var po=(0,l7.AH)([i2.wp.dragRegion,i2.wp.flex.growAndShrink(1),i2.wp.height(32)]);function pa(){return(0,f.Y)(i4.S,{css:po})}var pl=t(96768),pc=t(96034),pu=t(78008),ps=t(28367),pd=t(7749),pp=t(36073),pf=t(32145),ph=t(97153),pg="agent_freemium_quota";function pm(e){var n=e.title,t=e.current,r=e.max,i=e.unit,o=e.isUbbV2,a=function(e){return i?"".concat(i).concat(e):e.toString()},l=r>0?t/r:0,c=(0,pf.d8)({decimal:l});return(0,f.FD)(i4.S,{gap:6,children:[(0,f.FD)(i4.S,{css:pw.usageMeterAndTitle,children:[(0,f.Y)(i4.S,{row:!0,align:"center",gap:4,children:(0,f.Y)(ac.EY,{height:"singleLine",children:n})}),(0,f.Y)(ac.EY,{height:"singleLine",color:"dimmer",children:void 0!==o&&o?"".concat(Math.floor(100*l),"%"):"".concat(a(t),"/").concat(a(r))})]}),(0,f.Y)("div",{children:(0,f.Y)(pd.W,{css:pw.measureBar,total:r,current:t,color:c,tooltipHidden:!0})})]})}var pv=(0,rw.x)({root:[i2.wp.border({color:ry.LU.orangeDimmer}),i2.wp.borderRadius(),i2.wp.py(4),i2.wp.px(6),i2.wp.colorMixBg(ry.LU.orangeDimmer,"transparent",.25)],text:[i2.wp.color.orangeStronger]});function py(){return(0,f.Y)(i4.S,{css:pv.root,children:(0,f.FD)(ac.EY,{css:pv.text,children:["You've used 100% of your free ",ue.g$," quota."]})})}var pw=(0,rw.x)({measureBar:[i2.wp.height(8),{pointerEvents:"none"}],usageMeterAndTitle:[i2.wp.display.flex,i2.wp.flex.row,i2.wp.justify.spaceBetween,i2.wp.align.center]});function pb(e){var n=e.limit,t=e.usage,r=e.isShowingAlertExplanation;if(!n||void 0===t)return(0,f.Y)(s5.A,{});var i=t>=n,o=Math.floor(t/n*100),a="You've used ".concat(o,"% of your ").concat(pc.Lm," plan checkpoints. ").concat(ue.g$," creates checkpoints when it's finished a significant piece of work.");return(0,f.FD)(f.FK,{children:[(0,f.Y)(i4.S,{gap:4,children:(0,f.Y)(pm,{title:"Checkpoints",current:t,max:n})}),i?(0,f.Y)(py,{}):null,r?(0,f.Y)(pp.N,{text:a,colorway:"primary"}):null,(0,f.Y)(pu.A,{text:"Upgrade for more",colorway:"brand",variant:"outlined",context:pg,iconLeft:(0,f.Y)(ph.A,{}),highlightUpsell:"agent"})]})}function px(e){var n=e.limit,t=e.usage;if(!n||void 0===t)return(0,f.Y)(s5.A,{});var r=100*Math.min(1,t/n),i="",o="primary";return r>ps.Kd?(i="You've exceeded the ".concat(pc.Lm," plan usage limit."),o="negative"):r===ps.Kd?(i="You've reached the ".concat(pc.Lm," plan usage limit."),o="negative"):r>=ps.a6?(i="You're nearing the ".concat(pc.Lm," plan usage limit."),o="orange"):r>=ps.s7&&(i="You're approaching the ".concat(pc.Lm," plan usage limit."),o="yellow"),(0,f.FD)(f.FK,{children:[(0,f.Y)(i4.S,{gap:4,children:(0,f.Y)(pm,{title:"Usage",current:t,max:n,unit:"$",isUbbV2:!0})}),i?(0,f.Y)(pp.N,{text:i,colorway:o}):null,(0,f.Y)(pu.A,{text:"Upgrade for more",colorway:"primary",variant:"outlined",context:pg,iconLeft:(0,f.Y)(ph.A,{}),highlightUpsell:"agent"})]})}var pY=t(35990),pS=t(85051),pA=(0,rw.x)({root:[i2.wp.px(8),pS.b.nofill,i2.wp.height(32),i2.wp.align.center,i2.wp.rowWithGap(4),i2.wp.px(6),i2.wp.borderRadius(),i2.wp.color.foregroundDefault],measureBar:[i2.wp.width(50),i2.wp.height(8),{pointerEvents:"none"}],popoverWrapper:[i2.wp.width(280)],header:[i2.wp.fontWeight.bold]});function p_(){var e,n,t,r,i=(0,p._)((0,g.useState)(!1),2),o=i[0],a=i[1],l=(0,pY.i)(),c=l.agentUsage,u=l.hasAgentBillingV2,s=(0,p._)((0,g.useState)(!1),2),d=s[0],h=s[1];(0,ps.Nk)({usage:null==c?void 0:c.usage,limit:null==c?void 0:c.limit,percentThreshold:ps.s7,onHitThreshold:function(){a(!0),h(!0)}}),(0,ps.Nk)({usage:null==c?void 0:c.usage,limit:null==c?void 0:c.limit,percentThreshold:ps.a6,onHitThreshold:function(){a(!0),h(!0)}}),(0,ps.Nk)({usage:null==c?void 0:c.usage,limit:null==c?void 0:c.limit,percentThreshold:ps.Kd,onHitThreshold:function(){a(!0),h(!0),(0,oE.u4)(oE.AZ.AGENT_USED,{action:"hit_freemium_quota"})}});var m=(0,g.useMemo)(function(){return(null==c?void 0:c.usage)&&(null==c?void 0:c.limit)?Math.min(1,c.usage/c.limit):0},[null==c?void 0:c.usage,null==c?void 0:c.limit]),v=(0,g.useMemo)(function(){return(0,pf.d8)({decimal:m})},[m]);return(0,f.FD)(dG.Wv,{isOpen:o,onOpenChange:function(e){a(e),e||h(!1)},label:"Agent Usage",placement:"bottom start",children:[(0,f.Y)(al.SC,{css:pA.root,children:(0,f.FD)(i4.S,{row:!0,align:"center",gap:8,children:[(0,f.Y)(pd.W,{css:pA.measureBar,total:null!=(e=null==c?void 0:c.limit)?e:0,current:null!=(n=null==c?void 0:c.usage)?n:0,color:v,tooltipHidden:!0}),u?(0,f.FD)(ac.EY,{color:"dimmer",variant:"small",children:[Math.floor(100*m),"% used"]}):(0,f.FD)(ac.EY,{color:"dimmer",variant:"small",children:[null!=(t=null==c?void 0:c.usage)?t:0,"/",null!=(r=null==c?void 0:c.limit)?r:0," checkpoints used"]})]})}),(0,f.Y)(i4.S,{css:pA.popoverWrapper,p:8,children:(0,f.FD)(i4.S,{gap:12,children:[(0,f.FD)(ac.EY,{css:pA.header,children:[ue.g$," usage"]}),u?(0,f.Y)(px,{limit:null==c?void 0:c.limit,usage:null==c?void 0:c.usage}):(0,f.Y)(pb,{limit:null==c?void 0:c.limit,usage:null==c?void 0:c.usage,isShowingAlertExplanation:d})]})})]})}var pk=t(70883),pC=t(55130);function pI(){var e=(0,v._)(["\n  query ProjectHeaderMenu($id: String!, $input: ProjectReplsInput!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        title\n        ...CreateProjectForkRepl\n        project {\n          id\n          mainRepl {\n            id\n            title\n            ...CreateProjectForkRepl\n          }\n          repls(input: $input) {\n            items {\n              id\n              title\n              ...ReplLinkRepl\n            }\n            pageInfo {\n              hasNextPage\n              nextCursor\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return pI=function(){return e},e}var pD={},pE=(0,y.J1)(pI(),pC.T,pk.r),pR=t(37608),pU=t(63280),pF=t(46449),pP=t(38067),pO=t(51523),pT=t(28046),pL=t(86733),pM=t(30124),pG=t(24928),pN=t(69762),pB=t(61980),pH=t(21963),pz=t(70707),pW=t(97298),pj=t(24140),p$=(0,rw.x)({self:[i2.wp.display.grid,i2.wp.p(4),{gap:4,alignItems:"stretch"}],list:[i2.wp.maxHeight(640)],listItem:[pG.iF.item,i2.wp.px(8),i2.wp.height(28),{span:i2.wp.color.foregroundDefault}],listItemLabel:{flex:1},listButtonLink:[i2.wp.height(28),i2.wp.px(6),i2.wp.transition.none],currentReplIcon:[i2.wp.color.foregroundDimmer],tourWrapper:[i2.wp.p(8)]});function pZ(e){var n=e.label,t=e.icon,r=(0,uK._)(e,["label","icon"]);return(0,f.FD)(pG.if,(0,td._)((0,m._)({css:p$.listItem},r),{textValue:n,children:[(0,f.Y)(pG.PX,{css:p$.listItemLabel,children:n}),(0,f.Y)(i5.Z_,{size:16,children:t})]}))}var pq=(0,g.forwardRef)(function(e,n){var t,r,i,o,a,l,c,u,s,d,h,v,y=(0,ec.A)(),b=(0,p._)((0,g.useState)(""),2),x=b[0],Y=b[1],S=(0,pT.Os)(pO.X.id,pO.F.Forks),A=(t={variables:{id:y,input:{}},notifyOnNetworkStatusChange:!0},r=(0,m._)({},pD,t),w.I(pE,r)),_=A.refetch,k=(0,ad.A)(),C=k.showConfirm,I=k.showError,D=(0,p._)((0,pP.B)({onFork:function(){C("App forked, redirecting...")},onError:function(){I("Error creating fork - please try again")}}),2),E=D[0],R=D[1].loading;(0,pR.A)(function(){_({input:{filters:{title:{search:x}}},id:y})},[x],300);var U=(null==(i=A.data)?void 0:i.repl.__typename)==="Repl"?A.data.repl.project:null,F=(null==(o=A.previousData)?void 0:o.repl.__typename)==="Repl"?null==(a=A.previousData.repl.project)?void 0:a.repls.items:null,P=null!=(d=null==U?void 0:U.mainRepl)?d:(null==(l=A.previousData)?void 0:l.repl.__typename)==="Repl"&&null!=(s=null==(c=A.previousData.repl.project)?void 0:c.mainRepl)?s:null,O=(null==(u=A.data)?void 0:u.repl.__typename)==="Repl"?A.data.repl:null,T=(0,pU.Si)({orgId:e.org.id,projectId:e.projectId}),L=(0,pT.mR)();return(0,f.FD)("div",{css:p$.self,ref:n,children:[(0,f.FD)(pB.U,{children:[(0,f.Y)(pH.L,{"aria-label":"Search Apps in Project",placeholder:"Search by App title...",onChange:Y,isLoading:A.loading,autoFocus:!0}),(0,f.Y)(pG.qF,{isLoading:A.loading,items:null!=(v=null!=(h=null==U?void 0:U.repls.items)?h:F)?v:[],css:p$.list,children:function(e){var n;return(0,f.Y)(pZ,(0,td._)((0,m._)({icon:e.id===y?(0,f.Y)(l3.m_,{tooltip:"You are here",placement:"right",children:(0,f.Y)(pj.A,{css:p$.currentReplIcon})}):void 0,isDisabled:e.id===y,id:e.id,label:e.title},(0,pW.q1)(e)),{sessions:null!=(n=T[e.id])?n:[]}),e.id)}})]}),(0,f.Y)(pM.a,{}),(0,f.FD)(i4.S,{children:[(0,f.Y)(pL.v,(0,td._)((0,m._)({alignment:"start"},(0,pF.gm)({org:e.org,projectId:e.projectId})),{target:"_blank",iconLeft:(0,f.Y)(uD.A,{}),text:"Project dashboard",variant:"nofill",css:p$.listButtonLink})),(0,f.FD)(pN.in,{elevated:!1,placement:"right top",trigger:(0,f.Y)(al.$n,{alignment:"start",variant:"nofill",text:"New fork",iconLeft:R?(0,f.Y)(s5.A,{}):(0,f.Y)(oV.A,{}),loading:R,css:p$.listButtonLink}),children:[O?(0,f.Y)(pN.Dr,{label:"From here (".concat(O.title,")"),isDisabled:R,onAction:function(){E({forkSource:"projectHeaderMenu",orgId:e.org.id,repl:O})}}):null,O&&P&&O.id!==P.id?(0,f.Y)(pN.Dr,{label:"From main App (".concat(P.title,")"),isDisabled:!P||R,onAction:function(){P&&E({orgId:e.org.id,repl:P,forkSource:"projectHeaderMenu"})}}):null]}),S.isActive&&L?(0,f.Y)("div",{css:p$.tourWrapper,children:(0,f.Y)(pz.p,{content:L.content,title:L.title,onDismiss:S.next,onCurrentStepChange:S.goto,currentStepIndex:pO.X.steps.findIndex(function(e){return e.id===pO.F.Forks}),totalSteps:pO.X.steps.length})}):null]})]})}),pV=t(42124),pK=t(24602),pJ=(0,rw.x)({container:[i2.wp.position.relative],loadingGeneratedIcon:[pK.S.foregroundPulse(ry.LU.blurpleDimmest,ry.LU.blurpleDefault),i2.wp.borderRadius()]});function pQ(e){var n=e.replId,t=e.replIconUrl,r=e.size,i=(0,pV.b)({replId:n,replIconUrl:t}),o=i.loading,a=i.generatedIconUrl;return(0,f.Y)(i4.S,{css:pJ.container,children:(0,f.Y)(i4.S,{css:o&&pJ.loadingGeneratedIcon,children:(0,f.Y)(ud.Ay,{iconUrl:a||t,size:void 0===r?20:r,alt:""})})})}var pX=t(54613),p0=(0,rw.x)({projectLinkTooltip:[i2.wp.maxWidth(400),i2.wp.flex.shrink(2)],projectLink:[i2.wp.px(6),i2.wp.noDragRegion,i2.wp.flex.growAndShrink(1)],inheritanceChevron:[i2.wp.color.outlineStrongest,{marginInline:-1}]});function p1(e){var n=e.repl,t=(0,p._)((0,g.useState)(!1),2),r=t[0],i=t[1];return n.project&&n.org?(0,f.FD)(f.FK,{children:[(0,f.Y)(l3.m_,{tooltip:"Project forks",css:p0.projectLinkTooltip,isOpen:!r&&void 0,children:(0,f.FD)(dG.Wv,{label:"Project Menu",isOpen:r,onOpenChange:i,placement:"bottom start",children:[(0,f.Y)(al.$n,{iconLeft:(0,f.Y)(pQ,{replId:n.id,replIconUrl:n.iconUrl}),text:n.project.title,variant:"nofill",css:p0.projectLink}),(0,f.Y)(pq,{org:n.org,projectId:n.project.id})]})}),(0,f.Y)(pX.A,{size:12,css:p0.inheritanceChevron})]}):null}var p2=t(80720),p4=t.n(p2);function p5(){return(0,f.Y)(o3.ui,{background:"higher",clsx:p4().root,children:(0,f.Y)(ac.EY,{children:"Planning"})})}var p7=t(9786),p3=t(13748),p6={backgroundDefault:"var(--background-default)",backgroundHigher:"var(--background-higher)"},p8={primary:{strongest:"var(--accent-primary-strongest)",stronger:"var(--accent-primary-stronger)",default:"var(--accent-primary-default)",dimmer:"var(--accent-primary-dimmer)",dimmest:"var(--accent-primary-dimmest)"},positive:{strongest:"var(--accent-positive-strongest)",stronger:"var(--accent-positive-stronger)",default:"var(--accent-positive-default)",dimmer:"var(--accent-positive-dimmer)",dimmest:"var(--accent-positive-dimmest)"},negative:{strongest:"var(--accent-negative-strongest)",stronger:"var(--accent-negative-stronger)",default:"var(--accent-negative-default)",dimmer:"var(--accent-negative-dimmer)",dimmest:"var(--accent-negative-dimmest)"},red:{strongest:"var(--accent-red-strongest)",stronger:"var(--accent-red-stronger)",default:"var(--accent-red-default)",dimmer:"var(--accent-red-dimmer)",dimmest:"var(--accent-red-dimmest)"},orange:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},yellow:{strongest:"var(--accent-yellow-strongest)",stronger:"var(--accent-yellow-stronger)",default:"var(--accent-yellow-default)",dimmer:"var(--accent-yellow-dimmer)",dimmest:"var(--accent-yellow-dimmest)"},lime:{strongest:"var(--accent-lime-strongest)",stronger:"var(--accent-lime-stronger)",default:"var(--accent-lime-default)",dimmer:"var(--accent-lime-dimmer)",dimmest:"var(--accent-lime-dimmest)"},green:{strongest:"var(--accent-green-strongest)",stronger:"var(--accent-green-stronger)",default:"var(--accent-green-default)",dimmer:"var(--accent-green-dimmer)",dimmest:"var(--accent-green-dimmest)"},teal:{strongest:"var(--accent-teal-strongest)",stronger:"var(--accent-teal-stronger)",default:"var(--accent-teal-default)",dimmer:"var(--accent-teal-dimmer)",dimmest:"var(--accent-teal-dimmest)"},blue:{strongest:"var(--accent-blue-strongest)",stronger:"var(--accent-blue-stronger)",default:"var(--accent-blue-default)",dimmer:"var(--accent-blue-dimmer)",dimmest:"var(--accent-blue-dimmest)"},blurple:{strongest:"var(--accent-blurple-strongest)",stronger:"var(--accent-blurple-stronger)",default:"var(--accent-blurple-default)",dimmer:"var(--accent-blurple-dimmer)",dimmest:"var(--accent-blurple-dimmest)"},purple:{strongest:"var(--accent-purple-strongest)",stronger:"var(--accent-purple-stronger)",default:"var(--accent-purple-default)",dimmer:"var(--accent-purple-dimmer)",dimmest:"var(--accent-purple-dimmest)"},magenta:{strongest:"var(--accent-magenta-strongest)",stronger:"var(--accent-magenta-stronger)",default:"var(--accent-magenta-default)",dimmer:"var(--accent-magenta-dimmer)",dimmest:"var(--accent-magenta-dimmest)"},pink:{strongest:"var(--accent-pink-strongest)",stronger:"var(--accent-pink-stronger)",default:"var(--accent-pink-default)",dimmer:"var(--accent-pink-dimmer)",dimmest:"var(--accent-pink-dimmest)"},grey:{strongest:"var(--accent-grey-strongest)",stronger:"var(--accent-grey-stronger)",default:"var(--accent-grey-default)",dimmer:"var(--accent-grey-dimmer)",dimmest:"var(--accent-grey-dimmest)"},brown:{strongest:"var(--accent-brown-strongest)",stronger:"var(--accent-brown-stronger)",default:"var(--accent-brown-default)",dimmer:"var(--accent-brown-dimmer)",dimmest:"var(--accent-brown-dimmest)"},warning:{strongest:"var(--accent-orange-strongest)",stronger:"var(--accent-orange-stronger)",default:"var(--accent-orange-default)",dimmer:"var(--accent-orange-dimmer)",dimmest:"var(--accent-orange-dimmest)"},brand:{strongest:"var(--brand-accent-strongest)",stronger:"var(--brand-accent-stronger)",default:"var(--brand-accent-default)",dimmer:"var(--brand-accent-dimmer)",dimmest:"var(--brand-accent-dimmest)"}},p9=new Map,fe=new Map,fn=new Map;Object.keys(p8),Object.keys(p8[Object.keys(p8)[0]]);var ft=!0,fr=!1,fi=void 0;try{for(var fo,fa,fl=Object.entries({borderRadius1:"--border-radius-1",borderRadius2:"--border-radius-2",borderRadius4:"--border-radius-4",borderRadius6:"--border-radius-6",borderRadius8:"--border-radius-8",borderRadius12:"--border-radius-12",borderRadius16:"--border-radius-16",borderRadiusDefault:"--border-radius-default",borderRadiusContainer:"--border-radius-container",borderRadiusRound:"--border-radius-round",space1:"--space-1",space2:"--space-2",space4:"--space-4",space6:"--space-6",space8:"--space-8",space12:"--space-12",space16:"--space-16",space24:"--space-24",space32:"--space-32",space40:"--space-40",space48:"--space-48",space56:"--space-56",space64:"--space-64",space80:"--space-80",space96:"--space-96",space128:"--space-128",space256:"--space-256",spaceDefault:"--space-default",shadow1:"--shadow-1",shadow2:"--shadow-2",shadow3:"--shadow-3",shadowDefault:"--shadow-default",fontFamilyDefault:"--font-family-default",fontFamilyCode:"--font-family-code",fontSizeSmall:"--font-size-small",fontSizeDefault:"--font-size-default",fontSizeSubheadDefault:"--font-size-subhead-default",fontSizeSubheadBig:"--font-size-subhead-big",fontSizeHeaderDefault:"--font-size-header-default",fontSizeHeaderBig:"--font-size-header-big",fontWeightRegular:"--font-weight-regular",fontWeightMedium:"--font-weight-medium",fontWeightBold:"--font-weight-bold",lineHeightSmall:"--line-height-small",lineHeightDefault:"--line-height-default",lineHeightSubheadDefault:"--line-height-subhead-default",lineHeightSubheadBig:"--line-height-subhead-big",lineHeightHeaderDefault:"--line-height-header-default",lineHeightHeaderBig:"--line-height-header-big",transitionDurationSnappy:"--transition-duration-snappy",transitionDurationChill:"--transition-duration-chill",transitionTimingFunctionSnappy:"--transition-timing-function-snappy",transitionTimingFunctionChill:"--transition-timing-function-chill",borderWidthDefault:"--border-width-default",singleLine:"--single-line",backgroundRoot:"--background-root",backgroundDefault:"--background-default",backgroundHigher:"--background-higher",backgroundHighest:"--background-highest",backgroundOverlay:"--background-overlay",foregroundDefault:"--foreground-default",foregroundDimmer:"--foreground-dimmer",foregroundDimmest:"--foreground-dimmest",outlineDimmest:"--outline-dimmest",outlineDimmer:"--outline-dimmer",outlineDefault:"--outline-default",outlineStronger:"--outline-stronger",outlineStrongest:"--outline-strongest",accentPrimaryStrongest:"--accent-primary-strongest",accentPrimaryStronger:"--accent-primary-stronger",accentPrimaryDefault:"--accent-primary-default",accentPrimaryDimmer:"--accent-primary-dimmer",accentPrimaryDimmest:"--accent-primary-dimmest",accentPositiveStrongest:"--accent-positive-strongest",accentPositiveStronger:"--accent-positive-stronger",accentPositiveDefault:"--accent-positive-default",accentPositiveDimmer:"--accent-positive-dimmer",accentPositiveDimmest:"--accent-positive-dimmest",accentNegativeStrongest:"--accent-negative-strongest",accentNegativeStronger:"--accent-negative-stronger",accentNegativeDefault:"--accent-negative-default",accentNegativeDimmer:"--accent-negative-dimmer",accentNegativeDimmest:"--accent-negative-dimmest",redStrongest:"--accent-red-strongest",redStronger:"--accent-red-stronger",redDefault:"--accent-red-default",redDimmer:"--accent-red-dimmer",redDimmest:"--accent-red-dimmest",orangeStrongest:"--accent-orange-strongest",orangeStronger:"--accent-orange-stronger",orangeDefault:"--accent-orange-default",orangeDimmer:"--accent-orange-dimmer",orangeDimmest:"--accent-orange-dimmest",yellowStrongest:"--accent-yellow-strongest",yellowStronger:"--accent-yellow-stronger",yellowDefault:"--accent-yellow-default",yellowDimmer:"--accent-yellow-dimmer",yellowDimmest:"--accent-yellow-dimmest",limeStrongest:"--accent-lime-strongest",limeStronger:"--accent-lime-stronger",limeDefault:"--accent-lime-default",limeDimmer:"--accent-lime-dimmer",limeDimmest:"--accent-lime-dimmest",greenStrongest:"--accent-green-strongest",greenStronger:"--accent-green-stronger",greenDefault:"--accent-green-default",greenDimmer:"--accent-green-dimmer",greenDimmest:"--accent-green-dimmest",tealStrongest:"--accent-teal-strongest",tealStronger:"--accent-teal-stronger",tealDefault:"--accent-teal-default",tealDimmer:"--accent-teal-dimmer",tealDimmest:"--accent-teal-dimmest",blueStrongest:"--accent-blue-strongest",blueStronger:"--accent-blue-stronger",blueDefault:"--accent-blue-default",blueDimmer:"--accent-blue-dimmer",blueDimmest:"--accent-blue-dimmest",blurpleStrongest:"--accent-blurple-strongest",blurpleStronger:"--accent-blurple-stronger",blurpleDefault:"--accent-blurple-default",blurpleDimmer:"--accent-blurple-dimmer",blurpleDimmest:"--accent-blurple-dimmest",purpleStrongest:"--accent-purple-strongest",purpleStronger:"--accent-purple-stronger",purpleDefault:"--accent-purple-default",purpleDimmer:"--accent-purple-dimmer",purpleDimmest:"--accent-purple-dimmest",magentaStrongest:"--accent-magenta-strongest",magentaStronger:"--accent-magenta-stronger",magentaDefault:"--accent-magenta-default",magentaDimmer:"--accent-magenta-dimmer",magentaDimmest:"--accent-magenta-dimmest",pinkStrongest:"--accent-pink-strongest",pinkStronger:"--accent-pink-stronger",pinkDefault:"--accent-pink-default",pinkDimmer:"--accent-pink-dimmer",pinkDimmest:"--accent-pink-dimmest",greyStrongest:"--accent-grey-strongest",greyStronger:"--accent-grey-stronger",greyDefault:"--accent-grey-default",greyDimmer:"--accent-grey-dimmer",greyDimmest:"--accent-grey-dimmest",brownStrongest:"--accent-brown-strongest",brownStronger:"--accent-brown-stronger",brownDefault:"--accent-brown-default",brownDimmer:"--accent-brown-dimmer",brownDimmest:"--accent-brown-dimmest",white:"--white",black:"--black",surfaceBackground:"--surface-background",interactiveBackground:"--interactive-background",interactiveBackgroundActive:"--interactive-background--active",interactiveBorder:"--interactive-border",interactiveBorderHover:"--interactive-border--hover",brandText:"--brand-text",brandTextSecondary:"--brand-secondary-text",brandTextLight:"--brand-text-light",brandBackground:"--brand-background",brandBackgroundDarker:"--brand-background-darker",brandBorder:"--brand-border",brandAccentStrongest:"--brand-accent-strongest",brandAccentStronger:"--brand-accent-stronger",brandAccentDefault:"--brand-accent-default",brandAccentDimmer:"--brand-accent-dimmer",brandAccentDimmest:"--brand-accent-dimmest",brandBlack:"--brand-black",fontFamilyBrand:"--font-family-brand",fontFamilyBrandVariable:"--font-family-brand-variable",fontFamilyBrandPixel:"--font-family-brand-pixel",breakpointMobileMin:"--breakpoint-mobile-min",breakpointMobileMax:"--breakpoint-mobile-max",breakpointTabletMin:"--breakpoint-tablet-min",breakpointTabletMax:"--breakpoint-tablet-max"})[Symbol.iterator]();!(ft=(fa=fl.next()).done);ft=!0){var fc=(0,p._)(fa.value,2),fu=fc[0],fs=fc[1];p9.set(fu,fs),fe.set(fs,fu),fn.set(fu,"var(".concat(fs,")"))}}catch(e){fr=!0,fi=e}finally{try{ft||null==fl.return||fl.return()}finally{if(fr)throw fi}}var fd=t(37157),fp=t(58646),ff=(0,rw.x)({metadata:[],iconWrapper:[i2.wp.position.relative,i2.wp.display.none,(0,tg._)({},i2.$_.min("tabletMax"),[i2.wp.display.flex])],dimIcon:[{opacity:.2}],diconnectedIcon:[i2.wp.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[i2.wp.flex.shrink(1),i2.wp.truncate],placeholderTitle:[i2.wp.width(100),i2.wp.borderRadius("default"),{alignSelf:"stretch"},pK.S.foregroundPulse(p6.backgroundDefault,p6.backgroundHigher)]});function fh(e){var n,t=e.repl,r=(0,fd.A)().didDisconnect;return(0,f.FD)(i4.S,{grow:!0,shrink:!0,row:!0,gap:6,align:"center",children:[(0,f.FD)(i4.S,{css:ff.iconWrapper,children:[(null==(n=t.project)?void 0:n.id)?null:(0,f.Y)(i4.S,{css:r&&ff.dimIcon,children:(0,f.Y)(pQ,{replId:t.id,replIconUrl:t.iconUrl})}),r?(0,f.Y)(l3.m_,{tooltip:"Reconnecting",children:(0,f.Y)(fp.A,{size:16,css:ff.diconnectedIcon})}):null]}),(0,f.Y)(ac.EY,{multiline:!1,css:ff.title,"data-cy":"header-repl-title",color:r?"dimmer":"default",children:t.title})]})}var fg=(0,rw.x)({popover:[i2.wp.maxWidth(460),i2.wp.width("100%")],button:[pS.b.nofill,i2.wp.height(32),i2.wp.flex.growAndShrink(1),i2.wp.align.center,i2.wp.rowWithGap(4),i2.wp.px(6),i2.wp.borderRadius(),i2.wp.color.foregroundDefault,{'&[aria-expanded="true"]':{backgroundColor:ry.LU.interactiveBackgroundActive}}]});function fm(e){var n=e.repl,t=e.getDesktopLayoutState,r=(0,p._)((0,g.useState)(!1),2),i=r[0],o=r[1];return(0,f.FD)(dG.Wv,{isOpen:i,onOpenChange:function(e){o(e),e&&(0,oE.u4)(oE.AZ.MODAL_VIEWED,{modal_name:"repl_metadata_popover"})},placement:"bottom start",label:"Repl info",css:fg.popover,children:[(0,f.Y)(i4.D.button,{dataCy:"ws-repl-info-container",css:fg.button,onClick:function(){(0,oE.u4)(oE.AZ.REPL_METADATA_OPENED)},"aria-expanded":i,children:(0,f.Y)(fh,{repl:n})}),(0,f.Y)(p3.A,{getDesktopLayoutState:t,setIsEditing:o})]})}var fv=t(50303),fy=t(73745),fw=t(1441),fb=t(1867),fx=t(21640),fY=i4.D.span,fS=(0,rw.x)({triggerWrapper:[{":focus":{outline:"2px solid ".concat(ry.LU.accentPrimaryDefault),outlineOffset:"-1px",borderRadius:"4px"}}]});function fA(e){var n=e.label,t=e.children,r=(0,p._)(t,2),i=r[0],o=r[1],a=(0,p._)((0,g.useState)(!1),2),l=a[0],c=a[1],u=(0,p._)((0,g.useState)(!1),2),s=u[0],d=u[1],h=(0,g.useRef)(!1);return(0,g.useEffect)(function(){s&&(h.current=!0);var e=setTimeout(function(){c(s)},200);return function(){clearTimeout(e)}},[s]),(0,f.FD)(dG.Wv,{label:n,isOpen:l,onOpenChange:function(){return c(!l)},placement:"right",offset:16,children:[(0,f.Y)(fY,{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},onClick:function(){return c(!0)},onKeyDown:function(e){"Enter"===e.key&&c(!0)},tabIndex:0,css:fS.triggerWrapper,children:i}),(0,f.Y)(fY,{onMouseEnter:function(){return d(!0)},onMouseLeave:function(){return d(!1)},children:o})]})}var f_=t(63492),fk=t(12127);function fC(e,n){var t=100*n;return e.slice(0,fP).filter(function(e){return e>=t}).length}function fI(e){return fC(e,fF)>=fO?"danger":fC(e,fU)>=fO?"warning":"ok"}function fD(e){return Math.round(10*e)/10}function fE(e){return Math.round((e+Number.EPSILON)*100)/100}function fR(e){return e/1024/1024}var fU=.9,fF=1,fP=10,fO=5,fT=eh.ZU.Union([eh.ZU.Literal("ok"),eh.ZU.Literal("warning"),eh.ZU.Literal("danger")]);eh.ZU.Object({cpu:eh.ZU.Object({numVCpu:eh.ZU.Number(),utilPercent:eh.ZU.Number(),recentUtilPercents:eh.ZU.Array(eh.ZU.Number()),status:fT,user:eh.ZU.Object({utilPercent:eh.ZU.Number(),recentUtilPercents:eh.ZU.Array(eh.ZU.Number())}),system:eh.ZU.Object({utilPercent:eh.ZU.Number(),recentUtilPercents:eh.ZU.Array(eh.ZU.Number())})}),memory:eh.ZU.Object({softLimitBytes:eh.ZU.Number(),hardLimitBytes:eh.ZU.Number(),usageBytes:eh.ZU.Number(),recentUtilPercents:eh.ZU.Array(eh.ZU.Number()),status:fT,rss:eh.ZU.Object({usageBytes:eh.ZU.Number(),recentUtilPercents:eh.ZU.Array(eh.ZU.Number())}),cache:eh.ZU.Object({usageBytes:eh.ZU.Number(),recentUtilPercents:eh.ZU.Array(eh.ZU.Number())})}),storage:eh.ZU.Object({usedBytes:eh.ZU.Number(),totalBytes:eh.ZU.Number(),scratchUsedBytes:eh.ZU.Number(),scratchTotalBytes:eh.ZU.Number(),nixUsedBytes:eh.ZU.Number(),workspaceUsedBytes:eh.ZU.Number()})});var fL={cpu:{numVCpu:0,utilPercent:0,recentUtilPercents:Array(20).fill(0),status:"ok",user:{utilPercent:0,recentUtilPercents:Array(20).fill(0)},system:{utilPercent:0,recentUtilPercents:Array(20).fill(0)}},memory:{softLimitBytes:0,hardLimitBytes:0,usageBytes:0,recentUtilPercents:Array(20).fill(0),status:"ok",rss:{usageBytes:0,recentUtilPercents:Array(20).fill(0)},cache:{usageBytes:0,recentUtilPercents:Array(20).fill(0)}},storage:{usedBytes:0,totalBytes:0,scratchUsedBytes:0,scratchTotalBytes:0,nixUsedBytes:0,workspaceUsedBytes:0}},fM=(0,eu.eU)(fL),fG=(0,eu.eU)(!0),fN=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Math.min(n?Math.round(e):e,100)};function fB(e,n){e.unshift(n),e.pop()}var fH=(0,eu.eU)(null,function(e,n,t){n(fM,function(e){return(0,eJ.jM)(e,function(e){var n,r,i,o,a,l,c,u,s,d,p,f,h,g;c=e.cpu,u=e.memory,s=e.storage,c.numVCpu=t.numVCpu,c.utilPercent=fN(t.cpuUtilizationPercent,!0),c.recentUtilPercents.unshift(c.utilPercent),c.status=fI(c.recentUtilPercents),d=c.user,p=c.system,d.utilPercent=fN(t.user.cpuUtilizationPercent),fB(d.recentUtilPercents,d.utilPercent),p.utilPercent=fN(t.system.cpuUtilizationPercent),fB(p.recentUtilPercents,p.utilPercent),u.softLimitBytes=t.memorySoftLimitBytes,u.hardLimitBytes=t.memoryHardLimitBytes,u.usageBytes=t.memoryUsageRssBytes,f=u.usageBytes/u.softLimitBytes*100,fB(u.recentUtilPercents,f),u.status=fI(u.recentUtilPercents),h=u.rss,g=u.cache,h.usageBytes=t.memoryUsageRssBytes,fB(h.recentUtilPercents,t.memoryUsageRssBytes/t.memorySoftLimitBytes*100),g.usageBytes=t.memoryUsageCacheBytes,fB(g.recentUtilPercents,t.memoryUsageCacheBytes/t.memorySoftLimitBytes*100),s.usedBytes=(null==(n=t.storage)?void 0:n.diskUsedBytes)||0,s.totalBytes=(null==(r=t.storage)?void 0:r.diskLimitBytes)||0x40000000,s.scratchUsedBytes=(null==(i=t.storage)?void 0:i.scratchDiskUsedBytes)||0,s.scratchTotalBytes=(null==(o=t.storage)?void 0:o.scratchDiskLimitBytes)||0x40000000,s.nixUsedBytes=(null==(a=t.storage)?void 0:a.diskUsedNixBytes)||0,s.workspaceUsedBytes=(null==(l=t.storage)?void 0:l.diskUsedWorkspaceBytes)||0})})}),fz=(0,eQ.mg)(fM,function(e){return"ok"!==e.cpu.status?e.cpu.status:null}),fW=(0,eQ.mg)(fM,function(e){return"ok"!==e.memory.status?e.memory.status:null}),fj=(0,eu.eU)(function(e){var n=e(fW);if(n)return{type:"ram_alert",status:n};var t=e(fz);return t?{type:"cpu_alert",status:t}:null}),f$=(0,eu.eU)(function(e){for(var n=e(fM),t=n.cpu,r=n.memory,i=0,o=["danger","warning"];i<o.length;i++){var a=o[i];if(t.status===a||r.status===a)return"danger"}return"ok"}),fZ=(0,eQ.mg)(fM,function(e){var n=fD((0,fk.$p)(e.memory.softLimitBytes));return{numVCpu:fD(e.cpu.numVCpu),ramTotalGB:n}},n1()),fq=(0,eQ.mg)(fM,function(e){var n=e.cpu,t=n.status,r=n.recentUtilPercents,i=n.user,o=n.system,a=fE(n.utilPercent),l=fE(i.utilPercent),c=fE(o.utilPercent);return{status:t,currentPercent:a,recentUtilPercents:r,currentUserPercent:l,recentUserUtilPercents:i.recentUtilPercents,currentSystemPercent:c,recentSystemUtilPercents:o.recentUtilPercents}},n1()),fV=(0,eQ.mg)(fM,function(e){var n=e.memory,t=n.status,r=n.recentUtilPercents,i=n.cache,o=n.rss,a=n.softLimitBytes,l=n.usageBytes,c=fR(a);return{status:t,currentPercent:Math.round(100*Math.min(1,Math.round(fE(fR(l)))/c)),currentRssInBytes:1024*Math.round(fE(fR(o.usageBytes)))*1024,currentCacheInBytes:1024*Math.round(fE(fR(i.usageBytes)))*1024,recentUtilPercents:r,recentRssUtilPercents:o.recentUtilPercents,recentCacheUtilPercents:i.recentUtilPercents}},n1()),fK=(0,eQ.mg)(fM,function(e){var n=e.storage;return{replUsedInMib:fR(n.usedBytes),scratchUsedInMib:fR(n.scratchUsedBytes),nixUsedInMib:fR(n.nixUsedBytes),workspaceUsedInMib:fR(n.workspaceUsedBytes)}},n1()),fJ=(0,eQ.mg)(fM,function(e){var n=e.cpu,t=e.memory;return{numVCpu:n.numVCpu,ramQuotaMiBs:fR(t.softLimitBytes),cpuRecentUtilPercents:n.recentUtilPercents,ramRecentUtilPercents:t.recentUtilPercents}},n1()),fQ=((0,eQ.mg)(fM,function(e){return e.cpu.numVCpu}),(0,eQ.mg)(fM,function(e){return fR(e.memory.softLimitBytes)}),(0,eQ.mg)(fM,function(e){return fR(e.storage.totalBytes)})),fX=(0,eQ.mg)(fM,function(e){return fR(e.storage.usedBytes)}),f0=t(71872);function f1(e){return e>fv.O8?"".concat((0,fk.$p)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,fk.lX)(e)).toLocaleString()," MiB")}fx.t1.register(fx.No,fx.dN);var f2=(0,rw.x)({sectionPadding:[i2.wp.py(4),i2.wp.px(12)],rowSpacing:[i2.wp.rowWithGap(8),i2.wp.justify.spaceBetween,i2.wp.align.center]}),f4=(0,rw.x)({wrapper:[i2.wp.borderRadius(4),i2.wp.border({color:ry.LU.outlineDimmer}),i2.wp.overflow("hidden")],rowSection:[f2.sectionPadding,f2.rowSpacing],hoverRowSection:[f2.sectionPadding,f2.rowSpacing,{":hover":{backgroundColor:ry.LU.backgroundHigher}}],hoverColumnSection:[f2.sectionPadding,i2.wp.colWithGap(8),{":hover":{backgroundColor:ry.LU.backgroundHigher}}],sectionHeading:[i2.wp.fontWeight.bold],alignedRow:[i2.wp.rowWithGap(8),i2.wp.align.center],alignedSpaceBetweenRow:[f2.rowSpacing],detailContent:[i2.wp.width(260)],detailSectionsWrapper:[i2.wp.borderRadius(4),i2.wp.border({color:ry.LU.outlineDimmer}),i2.wp.overflow("hidden")],warningText:[i2.wp.color.orangeStronger],dangerText:[i2.wp.color.redStronger],chartWrapper:[i2.wp.width(22),i2.wp.height(18),i2.wp.borderRadius(2)],indentAgain:[i2.wp.pl(24)]});function f5(){var e=(0,f_.h)(fZ);return(0,f.FD)(i4.S,{css:f4.wrapper,children:[(0,f.FD)(i4.S,{css:f4.rowSection,children:[(0,f.Y)(ac.EY,{css:f4.sectionHeading,children:"Compute"}),(0,f.Y)(i4.S,{css:f4.alignedRow,children:(0,f.FD)(ac.EY,{color:"dimmer",children:[e.numVCpu," vCPU, ",e.ramTotalGB," GiB RAM"]})})]}),(0,f.Y)(pM.a,{}),(0,f.Y)(f7,{}),(0,f.Y)(f3,{})]})}function f7(){var e=(0,f_.h)(fq);return(0,f.Y)(f6,{title:"CPU",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The amount of processing power this Repl is using.",detailRows:[{title:"User",displayValue:"".concat(e.currentUserPercent,"%"),recentPercents:e.recentUserUtilPercents},{title:"System",displayValue:"".concat(e.currentSystemPercent,"%"),recentPercents:e.recentSystemUtilPercents}]})}function f3(){var e=(0,f_.h)(fV);return(0,f.Y)(f6,{title:"RAM",displayValue:"".concat(e.currentPercent,"%"),recentPercents:e.recentUtilPercents,status:e.status,detailText:"The memory this Repl is using.",detailRows:[{title:"Active",displayValue:f1(e.currentRssInBytes),recentPercents:e.recentRssUtilPercents},{title:"Cache",displayValue:f1(e.currentCacheInBytes),recentPercents:e.recentCacheUtilPercents}]})}function f6(e){var n=e.title,t=e.displayValue,r=e.status,i=e.recentPercents,o=e.detailText,a=e.detailRows;return(0,f.FD)(fA,{label:"Compute details",children:[(0,f.FD)(i4.S,{css:f4.hoverRowSection,children:[(0,f.FD)(i4.S,{css:f4.alignedRow,children:[(0,f.Y)(ac.EY,{children:n}),(0,f.Y)(f8,{status:r})]}),(0,f.FD)(i4.S,{css:f4.alignedRow,children:[(0,f.Y)(ac.EY,{color:"dimmer",children:t}),(0,f.Y)(i4.S,{css:f4.chartWrapper,children:(0,f.Y)(f9,{data:i,colorAreaUnderLine:!0})})]})]}),(0,f.FD)(i4.S,{css:f4.detailContent,p:8,gap:8,children:[(0,f.Y)(ac.EY,{children:o}),(0,f.Y)(i4.S,{css:f4.detailSectionsWrapper,children:a.map(function(e,n){return(0,f.FD)(i4.S,{css:f4.rowSection,children:[(0,f.Y)(ac.EY,{children:e.title}),(0,f.FD)(i4.S,{css:f4.alignedRow,children:[(0,f.Y)(ac.EY,{color:"dimmer",children:e.displayValue}),(0,f.Y)(i4.S,{css:f4.chartWrapper,children:(0,f.Y)(f9,{data:e.recentPercents,colorAreaUnderLine:!0})})]})]},n)})})]})]})}function f8(e){var n=e.status;return"warning"===n?(0,f.FD)(f.FK,{children:[(0,f.Y)(f0.A,{color:ry.LU.orangeStronger}),(0,f.Y)(ac.EY,{css:f4.warningText,children:"Near limit"})]}):"danger"===n?(0,f.FD)(f.FK,{children:[(0,f.Y)(f0.A,{color:ry.LU.redStronger}),(0,f.Y)(ac.EY,{css:f4.dangerText,children:"At limit"})]}):null}function f9(e){var n=e.data,t=e.colorAreaUnderLine,r=void 0!==t&&t,i=e.showHorizontalGridLines,o=(0,lP.D)().values,a=n.map(function(e,n){return{x:-n,y:e}}),l=fU-.05,c=fF-.02;return(0,f.Y)(fb.N1,{updateMode:"none",options:{clip:4,animation:!1,maintainAspectRatio:!1,events:[],elements:{point:{radius:0},line:{tension:.3,borderWidth:1}},scales:{x:{display:!1,type:"linear",grid:{display:!1},min:0,max:-(n.length-1)},y:{display:void 0!==i&&i,min:0,max:100,ticks:{display:!1,stepSize:10},afterBuildTicks:function(e){var n=[10,50,90];e.ticks=e.ticks.filter(function(e){return n.includes(e.value)})},grid:{color:function(e){return e.tick.value>100*l?o.global.orangeDimmer:o.global.outlineDimmest},drawTicks:!1},border:{dash:[2,2],display:!1}}}},data:{datasets:[{data:a,fill:{target:"origin"},borderColor:function(e){var n=e.chart,t=n.ctx,r=n.chartArea;if(r){var i=t.createLinearGradient(0,r.bottom,0,r.top),a=o.global.blueDefault,u=o.global.orangeDefault,s=o.global.redDefault;return i.addColorStop(0,a),i.addColorStop(l-.08,a),i.addColorStop(l+.08,u),i.addColorStop(c-.08,u),i.addColorStop(c,s),i}},backgroundColor:function(e){if(!r)return"transparent";var t=e.chart,i=t.ctx,u=t.chartArea;if(u){var s=i.createLinearGradient(u.left,0,u.right,0),d=he(o.global.blueDimmest),p=he(o.global.orangeDimmest),f=he(o.global.redDimmest);return a.forEach(function(e,t){if(s){var r=1-t/(n.length-1);e.y<100*l?s.addColorStop(r,d):e.y<100*c?s.addColorStop(r,p):s.addColorStop(r,f)}}),s}}}]}})}function he(e){var n,t,r=(n=(n=e).replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,n,t,r){return n+n+t+t+r+r}),(t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n))?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null);if(!r)return e;var i=r.r,o=r.g,a=r.b;return"rgba(".concat(i,", ").concat(o,", ").concat(a,", ",.5,")")}function hn(e){var n=e.alertDialogType,t=e.onRequestUpgrade,r=(0,f_.h)(fJ);if(!r)return null;var i="cpu_alert"===n?r.cpuRecentUtilPercents:r.ramRecentUtilPercents,o="cpu_alert"===n?"CPU":"RAM",a="You have been near the ".concat("cpu_alert"===n?"".concat(r.numVCpu," vCPU"):"".concat((0,fk.$p)(1024*r.ramQuotaMiBs*1024)," GiB RAM")," limit of the free plan ").concat(fO," or more times in the past ").concat(20," seconds. More ").concat("cpu_alert"===n?"vCPUs":"RAM"," would improve performance and limit disruptions.");return(0,f.FD)(i4.S,{p:8,gap:8,children:[(0,f.Y)(f0.A,{color:ry.LU.orangeStrongest}),(0,f.FD)(ac.EY,{variant:"subheadDefault",multiline:!1,children:["High ",o," usage"]}),(0,f.Y)(ac.EY,{color:"dimmer",children:a}),(0,f.Y)(i4.S,{css:ht.chartWrapper,children:(0,f.Y)(f9,{data:i,showHorizontalGridLines:!0})}),(0,f.Y)(al.$n,{size:"big",colorway:"warning",text:"Increase ".concat(o," limit"),onClick:function(){(0,oE.u4)(oE.AZ.UPGRADE_SELECTED,{source:"compute_alert_dialog"}),t()}})]})}var ht=(0,rw.x)({chartWrapper:[i2.wp.height(67),i2.wp.backgroundColor.backgroundRoot,i2.wp.borderRadius(12),i2.wp.py(12),i2.wp.px(16)]});function hr(){var e=(0,v._)(["\n  query ReplResourcesCurrentUser {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n        userSubscription {\n          isTrial\n        }\n        paymentMethod {\n          __typename\n          ... on PaymentMethod {\n            id\n            last4\n          }\n        }\n      }\n    }\n  }\n"]);return hr=function(){return e},e}function hi(){var e=(0,v._)(["\n  query ReplResourcesReplInfo($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          __typename\n          id\n          type\n        }\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        authorizations {\n          editResources {\n            isAuthorized\n            code\n            message\n          }\n          editFileContents {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return hi=function(){return e},e}var ho={},ha=(0,y.J1)(hr()),hl=(0,y.J1)(hi()),hc=t(96502),hu=function(){var e=(0,fw.A)(),n=e.showResourcesUpsell,t=e.refetch,r=(0,p._)((0,g.useState)(!1),2),i=r[0],o=r[1];return n?(0,f.FD)(f.FK,{children:[(0,f.Y)(l3.m_,{tooltip:hs,children:(0,f.Y)(hc.a,{css:hd.pill,text:"CPU/RAM Limited",onClick:function(){return o(!0)}})}),(0,f.Y)(fy.default,{isOpen:i,onClose:function(){return o(!1)},type:"purchase",onPurchaseComplete:function(){return t()},reloadPageAfterPurchaseComplete:!0,contextualUpsell:(0,f.FD)(f.FK,{children:[(0,f.Y)(ac.EY,{variant:"subheadBig",children:"Upgrade for a faster Workspace"}),(0,f.FD)(ac.EY,{multiline:!0,children:["Unlock 4 vCPU, 8 GiB RAM, and ",(0,fk.$p)(fv.RB)," ","GiB of storage"]})]}),headingText:"Upgrade for a faster Workspace",subHeadingText:"Unlock 4 vCPU, 8 GiB RAM, and ".concat((0,fk.$p)(fv.RB)," GiB of storage"),analyticsContext:{upgrade:{context:"repl_resources"}},highlightUpsell:"resources"})]}):null},hs="Your development resources are limited. Upgrade for more speed, storage, better AI, and more.",hd=(0,rw.x)({pill:[i2.wp.cursor.pointer]});function hp(){var e=(0,v._)(["\n  query ReplResourcesCurrentUserStorageUsage {\n    currentUser {\n      id\n      userSubscriptionType\n      storageInfo {\n        accountStorageUtilization {\n          ... on AccountStorageUtilization {\n            total\n          }\n        }\n      }\n    }\n  }\n"]);return hp=function(){return e},e}var hf={},hh=(0,y.J1)(hp()),hg=t(57829),hm=t(67963);function hv(e){return e>fv.O8?"".concat((0,fk.$p)(e).toLocaleString(void 0,{maximumFractionDigits:1})," GiB"):"".concat(Math.round((0,fk.lX)(e)).toLocaleString()," MiB")}function hy(e,n){return 0===n||0===e?0:Math.round(e/n*100)}function hw(e){var n,t,r=e.isTeamRepl,i=e.isFileEditor,o=(0,f_.h)(fX),a=(0,f_.h)(fQ),l=(n=(0,m._)({},hf,void 0),w.I(hh,n)),c=l.data,u=l.refetch,s=(null==c||null==(t=c.currentUser)?void 0:t.storageInfo.accountStorageUtilization.__typename)==="AccountStorageUtilization"?Number(c.currentUser.storageInfo.accountStorageUtilization.total):0,d=(0,g.useMemo)(function(){return(0,hg.A)(function(){return u()},{wait:12e4,maxWait:3e5})},[u]);return(0,g.useEffect)(function(){var e,n=!1,t=null,r=(e=(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:if(n)return[2];return[4,d()];case 1:return e.sent(),t=setTimeout(r,3e5),[2]}})}),function(){return e.apply(this,arguments)});return r(),function(){n=!0,t&&clearTimeout(t),d.isScheduled()&&d.flush()}},[d,o,a,u]),i?(0,f.FD)(i4.S,{css:f4.wrapper,children:[(0,f.Y)(i4.S,{css:f4.rowSection,children:(0,f.Y)(ac.EY,{css:f4.sectionHeading,children:"Storage"})}),(0,f.Y)(pM.a,{}),(0,f.Y)(hb,{accountUsedInBytes:s,children:(0,f.Y)(hx,{isTeamRepl:r})})]}):null}function hb(e){var n=e.accountUsedInBytes,t=e.children,r=(0,p._)((0,g.useState)(!1),2),i=r[0],o=r[1],a=(0,f_.h)(fK),l=a.replUsedInMib,c=a.scratchUsedInMib,u=a.nixUsedInMib,s=a.workspaceUsedInMib,d=[{title:"This App",usageDisplayText:"".concat(hv(1024*l*1024)),percentOfUsage:hy(1024*l*1024,n),indent:0},{title:"Workspace",usageDisplayText:"".concat(hv(1024*s*1024)),percentOfUsage:null,indent:1},{title:"Nix packages",usageDisplayText:"".concat(hv(1024*u*1024)),percentOfUsage:null,nix:!0,indent:1},{title:"Scratch disk",usageDisplayText:"".concat(hv(1024*c*1024)),percentOfUsage:hy(1024*c*1024,n),indent:0}];return(0,f.FD)(f.FK,{children:[(0,f.FD)(fA,{label:"Storage details",children:[(0,f.Y)(i4.S,{css:f4.hoverColumnSection,children:t}),(0,f.FD)(i4.S,{p:8,gap:8,css:f4.detailContent,children:[(0,f.Y)(ac.EY,{children:"This App's storage usage"}),(0,f.Y)(i4.S,{css:f4.detailSectionsWrapper,children:d.map(function(e,n){return(0,f.FD)(i4.S,{css:f4.rowSection,children:[(0,f.FD)(i4.S,{css:f4.alignedRow,children:[e.indent>0?(0,f.Y)(i4.S,{css:e.indent>1&&f4.indentAgain,children:(0,f.Y)(hm.A,{color:ry.LU.outlineDefault,size:16})}):null,(0,f.Y)(ac.EY,{children:e.title})]}),e.nix?(0,f.Y)(i4.S,{css:f4.alignedRow,children:(0,f.Y)(cf.K0,{onClick:function(){return o(!0)},alt:"Delete Nix packages",disabled:u<1,children:(0,f.Y)(cz.A,{})})}):null,(0,f.FD)(i4.S,{css:f4.alignedRow,children:[(0,f.Y)(ac.EY,{color:"dimmer",children:e.usageDisplayText}),null===e.percentOfUsage?null:(0,f.FD)(ac.EY,{color:"dimmer",children:["(",e.percentOfUsage,"%)"]})]})]},n)})})]})]}),(0,f.Y)(hY,{isOpen:i,onClose:function(){return o(!1)}})]})}function hx(e){var n=e.isTeamRepl,t=(0,f_.h)(fX),r=(0,f_.h)(fQ),i=1024*t*1024,o=hy(i,1024*r*1024);return(0,f.FD)(i4.S,{css:f4.alignedSpaceBetweenRow,children:[(0,f.Y)(i4.S,{css:f4.alignedRow,children:(0,f.Y)(ac.EY,{children:"This App"})}),(0,f.FD)(ac.EY,{color:"dimmer",children:[hv(i)," ",n?"(".concat(o,"% of total)"):null]})]})}var hY=function(e){var n=e.onClose,t=e.isOpen,r=(0,oM.A)().container;return(0,f.Y)(o7.a,{isOpen:t,onRequestClose:n,children:(0,f.Y)(cQ.A,{name:"Nix Packages",description:"this App's Nix packages",confirmDescription:"Nix packages",hideModal:n,delete:function(){n();var e=r.openChannel({service:"file",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(n){return n.channel.request({resetNixFilesystem:{}}).then(function(n){n.ok&&e()}),function(){}})}})})},hS=t(1684),hA=t(565),h_=(0,rw.x)({trialButton:[i2.wp.borderRadius(4)],loadingStateWrapper:[i2.wp.center,i2.wp.p(16)]});function hk(e){var n,t,r,i,o,a,l,c,u,s,d,p,h,g,v,y,b,x,Y=e.onRequestUpgrade,S=(o=(0,m._)({},ho,void 0),w.I(ha,o)),A=S.data,_=S.loading,k=(a={variables:{replId:(0,ec.A)()}},l=(0,m._)({},ho,a),w.I(hl,l)),C=k.data,I=k.loading,D=(null==C?void 0:C.repl.__typename)==="Repl"?C.repl:null,E=(null==D||null==(c=D.org)?void 0:c.id)!==void 0&&(null==D||null==(u=D.org)?void 0:u.type)==="team",R=(null==D||null==(s=D.owner)?void 0:s.__typename)==="Team"||E,U=(null==D||null==(d=D.owner)?void 0:d.id)===(null==A||null==(p=A.currentUser)?void 0:p.id),F=null==A||null==(h=A.currentUser)?void 0:h.userSubscriptionType,P=(null==A||null==(v=A.currentUser)||null==(g=v.paymentMethod)?void 0:g.__typename)==="PaymentMethod"&&null!==A.currentUser.paymentMethod.id,O=null==A||null==(b=A.currentUser)||null==(y=b.userSubscription)?void 0:y.isTrial,T=U&&("HACKER_PRO"!==F||O&&!P)&&!E,L=(0,fw.A)().showResourcesUpsell,M=null==D?void 0:D.authorizations.editResources,G=null!=(x=null==D?void 0:D.authorizations.editFileContents.isAuthorized)&&x,N=(0,f_.h)(fG);return _||I||N||!M?(0,f.Y)(i4.S,{css:h_.loadingStateWrapper,children:(0,f.Y)(s5.A,{})}):(0,f.FD)(i4.S,{p:8,gap:8,children:[(0,f.FD)(i4.S,{gap:4,children:[(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(ac.EY,{variant:"subheadDefault",children:"Resources"}),(0,f.Y)(hC,{resourceTier:(t=(n={isTeamRepl:R,isReplOwner:U,plan:F}).isTeamRepl,r=n.isReplOwner,i=n.plan,t?"team":r&&"HACKER_PRO"===i?"member":r&&null===i?"free":"hidden"),isOnTrial:O,showResourcesUpsell:L})]}),(0,f.Y)(ac.EY,{color:"dimmest",children:"Resources for cloud development environment"})]}),(0,f.Y)(f5,{}),!E||G?(0,f.Y)(hw,{isTeamRepl:R,isFileEditor:G}):null,T?(0,f.FD)(i4.S,{gap:8,children:[(0,f.Y)(al.$n,{colorway:"blurple",iconLeft:(0,f.Y)(hA.A,{}),text:"Join Replit ".concat(pc.en),onClick:function(){return Y()},css:h_.trialButton}),(0,f.FD)(ac.EY,{css:i2.wp.textAlign.center,color:"dimmer",variant:"small",children:["Get 4 vCPU, 8 GiB RAM, and ",(0,fk.$p)(fv.RB)," GiB Storage"]})]}):null]})}function hC(e){var n=e.resourceTier,t=e.isOnTrial,r=e.showResourcesUpsell;switch(n){case"free":return r?(0,f.Y)(hu,{}):(0,f.Y)(hS.a,{text:"Free",colorway:"grey"});case"member":if(t)return(0,f.Y)(hS.a,{text:"".concat(pc.en," Trial"),colorway:"blue"});return(0,f.Y)(hS.a,{text:"".concat(pc.en),colorway:"purple"});case"team":return(0,f.Y)(hS.a,{text:"Team",colorway:"green"});default:return null}}var hI=t(78104),hD=t(64743);function hE(e){var n,t,r,i,o,a,l,c,u,s,d,m,v,y,w,b,x,Y,S,A,_=e.repl,k=e.currentUser,C=(0,p._)((0,g.useState)(!1),2),I=C[0],D=C[1],E=(0,p._)((0,g.useState)("resources"),2),R=E[0],U=E[1],F=(0,fw.A)(),P=F.showResourcesUpsell,O=F.refetch,T=(0,p._)((0,g.useState)(!1),2),L=T[0],M=T[1],G=(r=(n={repl:_,currentUser:k,onAlert:function(e){U(e),D(!0)}}).repl,i=n.currentUser,o=n.onAlert,a=(0,f_.AI)(fj),l=(0,h.useRouter)(),u=(c=(0,p._)((0,g.useState)(!1),2))[0],s=c[1],d=(null==(t=r.owner)?void 0:t.__typename)==="User"&&r.owner.id===(null==i?void 0:i.id),m=null==i?void 0:i.userSubscriptionType,y=(v=(0,hI.A)("announcement","resources-upgrade-modal")).shouldDisplay,w=v.register,b=v.dismiss,(0,g.useEffect)(function(){!(0,Q.Po)(l)&&d&&null===m&&w()},[d,w,l,m]),Y=(x=(0,p._)((0,g.useState)(!0),2))[0],S=x[1],(0,g.useEffect)(function(){var e=setTimeout(function(){S(!1)},6e4);return function(){return clearTimeout(e)}},[]),A=(0,uC.lO)().isRunning,(0,g.useEffect)(function(){!u&&A&&(u||s(!0))},[A,u]),(0,g.useEffect)(function(){if(!(Y||(0,Q.Po)(l))&&y&&u)return a.subscribe(function(e){e&&o(e.type)})},[a,w,Y,d,o,l,y,m,u]),{dismissAlert:b}).dismissAlert,N=function(){G(),D(!1),U("resources")};return(0,f.FD)(f.FK,{children:[(0,f.FD)(dG.Wv,{isOpen:I,onOpenChange:function(e){D(e),e&&(0,oE.u4)(oE.AZ.REPL_RESOURCES_OPENED),e||"cpu_alert"!==R&&"ram_alert"!==R||N()},placement:"bottom start",label:"App resources",css:hU.popover,children:[(0,f.Y)(cf.K0,{"aria-label":"App resources",alt:"App resources","aria-expanded":I,dataCy:"repl-resources-button",css:hU.button,children:(0,f.FD)(i4.S,{css:hU.buttonWrapper,children:[(0,f.Y)(hD.A,{size:16}),(0,f.Y)(hR,{})]})}),(0,f.FD)(i4.S,{css:{overflow:"auto",maxHeight:"80vh"},children:["resources"===R?(0,f.Y)(hk,{onRequestUpgrade:function(){return M(!0)}}):null,"cpu_alert"===R||"ram_alert"===R?(0,f.FD)(i4.S,{css:hU.alertDialogWrapper,children:[(0,f.Y)(cf.K0,{onClick:N,alt:"Close",css:hU.alertDialogCloseButton,children:(0,f.Y)(uJ.A,{})}),(0,f.Y)(hn,{alertDialogType:R,onRequestUpgrade:function(){return M(!0)}})]}):null]})]}),(0,f.Y)(fy.default,{isOpen:L,onClose:function(){return M(!1)},onPurchaseComplete:function(){return O()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:P?(0,f.FD)(f.FK,{children:[(0,f.Y)(ac.EY,{variant:"subheadBig",children:"Upgrade for a faster Workspace"}),(0,f.FD)(ac.EY,{multiline:!0,children:["Unlock 4 vCPU, 8 GiB RAM, and"," ",(0,fk.$p)(fv.RB)," GiB of storage"]})]}):void 0,headingText:"Upgrade for a faster Workspace",subHeadingText:"Unlock 4 vCPU, 8 GiB RAM, and ".concat((0,fk.$p)(fv.RB)," GiB of storage"),analyticsContext:{upgrade:{context:"repl_resources"}},highlightUpsell:"resources"})]})}function hR(){var e=(0,f_.h)(f$);return"ok"===e?null:(0,f.FD)(f.FK,{children:[(0,f.Y)(i4.S,{css:hL.base}),(0,f.Y)(i4.S,{css:"warning"===e?hL.warningColors:hL.dangerColors})]})}var hU=(0,rw.x)({popover:[i2.wp.width(360)],buttonWrapper:[i2.wp.position.relative],button:[i2.wp.height(32),i2.wp.width(32),i2.wp.borderRadius()],alertDialogWrapper:[i2.wp.position.relative],alertDialogCloseButton:[i2.wp.position.absolute,i2.wp.top(8),i2.wp.right(8),i2.wp.zIndex(1)]}),hF=function(e){return"\n0% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 ".concat(e,";\n}\n\n70% {\n  transform: scale(1);\n  box-shadow: 0 0 0 6px transparent;\n}\n\n100% {\n  transform: scale(0.95);\n  box-shadow: 0 0 0 0 transparent;\n}\n")},hP=(0,l7.i7)(hF(ry.LU.orangeDefault)),hO=(0,l7.i7)(hF(ry.LU.redDefault)),hT={position:"absolute",width:8,height:8,borderRadius:"50%",top:-4,right:-4,outline:"2px solid "+ry.LU.backgroundRoot,borderStyle:"solid"},hL=(0,rw.x)({base:[hT,{backgroundColor:ry.LU.backgroundRoot}],warningColors:[hT,{backgroundColor:ry.LU.orangeStronger,animation:"".concat(hP," 2s infinite"),outlineColor:"transparent"}],dangerColors:[hT,{backgroundColor:ry.LU.redStronger,animation:"".concat(hO," 2s infinite"),outlineColor:"transparent"}]}),hM=t(93704);function hG(){var e=(0,v._)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return hG=function(){return e},e}var hN={},hB=(0,y.J1)(hG()),hH=t(41153),hz=t(76969),hW=t(49092),hj=t(81686),h$=t(54781),hZ=function(e){return e.Welcome="Welcome",e.AiFirstWorkspace="AiFirstWorkspace",e.Assistant="Assistant",e.Agent="Agent",e.SidebarDock="SidebarDock",e.Run="Run",e.Deploy="Deploy",e}({}),hq=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},hV=(0,rw.x)({tooltipContainer:[i2.wp.width("100%"),i2.wp.maxWidth(300),i2.wp.center,i2.wp.position.relative,i2.wp.colWithGap(8),i2.wp.pb(8)],image:[i2.wp.borderRadius(8)],textContent:[i2.wp.width("100%")]}),hK={id:"AiFirstWorkspace",title:"Welcome to the Workspace",isModal:!0,content:function(){return(0,f.Y)(i4.S,{css:hV.tooltipContainer,"data-cy":"workspace-tour-welcome",children:(0,f.Y)(ac.EY,{css:hV.textContent,children:"This is where all the magic happens. Let's take a look around!"})})}},hJ={id:"AiFirstWorkspace",title:"The AI-first Workspace",isModal:!0,content:function(){return(0,f.FD)(i4.S,{css:hV.tooltipContainer,"data-cy":"workspace-tour-welcome",children:[(0,f.FD)(ac.EY,{css:hV.textContent,children:["Your workspace has a powerful AI chat called"," ",(0,f.Y)("strong",{children:ue.BP})," which can be used in all your projects."]}),(0,f.Y)(cT.A,{css:hV.image,src:"/public/images/ai/assistant.png",alt:"Assistant available",layout:"fixed",width:300,height:168})]})}},hQ={id:"Assistant",title:"".concat(ue.BP,": Chat & quick edits"),icon:function(){return(0,f.Y)(oP.A,{size:16})},content:function(){return(0,f.FD)(i4.S,{css:hV.tooltipContainer,children:[(0,f.FD)(ac.EY,{css:hV.textContent,children:[(0,f.Y)("strong",{children:ue.BP})," is a general AI chat for your project."]}),(0,f.Y)(hW.A,{src:hq("assistant-dark"),autoPlay:!0,loop:!0}),(0,f.Y)(hj.s,{css:hV.textContent,children:(0,f.FD)("p",{children:["Use ",(0,f.Y)("strong",{children:ue.BP})," when you want to",(0,f.FD)("ul",{children:[(0,f.Y)("li",{children:"Chat with AI about any topic"}),(0,f.Y)("li",{children:"Request quick, one-off edits to code"}),(0,f.Y)("li",{children:"Ask questions about your project"})]})]})}),(0,f.FD)(ac.EY,{color:"dimmer",variant:"small",multiline:!1,children:[hz.a7," cents per ",hz.go]})]})},autoSkipIfNoTarget:!0},hX={id:"Agent",title:"".concat(ue.g$,": Automated developer"),icon:function(){return(0,f.Y)(h$.A,{size:16})},content:function(){return(0,f.FD)(i4.S,{css:hV.tooltipContainer,children:[(0,f.FD)(ac.EY,{css:hV.textContent,children:[(0,f.Y)("strong",{children:ue.g$})," is an automated developer that plans and generates entire projects, occasionally pausing to ask you for feedback."]}),(0,f.Y)(hW.A,{src:hq("agent-dark"),autoPlay:!0,loop:!0}),(0,f.Y)(hj.s,{css:hV.textContent,children:(0,f.FD)("p",{children:["Use ",(0,f.Y)("strong",{children:ue.g$})," when you want to",(0,f.FD)("ul",{children:[(0,f.Y)("li",{children:"Build a new project from scratch"}),(0,f.Y)("li",{children:"Generate a build plan for your project"}),(0,f.Y)("li",{children:"Make complex, multi-step changes"})]})]})}),(0,f.FD)(ac.EY,{color:"dimmer",variant:"small",multiline:!1,children:["Dynamic pricing per ",hz.v7]})]})},autoSkipIfNoTarget:!0},h0={id:"SidebarDock",title:"Dock: Open files & tools",icon:function(){return(0,f.Y)(u5.A,{size:16})},content:function(){return(0,f.FD)(i4.S,{css:hV.tooltipContainer,children:[(0,f.Y)(ac.EY,{css:hV.textContent,children:"In addition to AI tools, you can access code files and other workspace features via the Dock."}),(0,f.Y)(hW.A,{src:hq("sidebar"),autoPlay:!0,loop:!0}),(0,f.FD)(ac.EY,{css:hV.textContent,children:["Notice that ",(0,f.Y)("strong",{children:"Files"})," has its own button at the top left."]})]})}},h1={id:"Run",title:"Run Button: Preview your App",icon:function(){return(0,f.Y)(uU.A,{size:16})},content:function(){return(0,f.FD)(i4.S,{css:hV.tooltipContainer,children:[(0,f.FD)(ac.EY,{css:hV.textContent,children:["Click the ",(0,f.Y)("strong",{children:"Run button"})," at any time to see the output of your app."]}),(0,f.Y)(hW.A,{src:hq("run-button"),autoPlay:!0,loop:!0})]})},advanceOnTargetClick:!0},h2="workspace-desktop-tour-2024",h4=(r={},(0,tg._)(r,uS.ll.IDLE,"Run"),(0,tg._)(r,uS.ll.RUNNING,"Stop"),(0,tg._)(r,uS.ll.STOPPING,"Stopping"),(0,tg._)(r,uS.ll.OFFLINE,"Working"),(0,tg._)(r,uS.ll.BEFORE_RUN,"Working"),r),h5=t(82112),h7=t(14792);function h3(e){return e[e.length-1]}var h6=(0,rw.x)({root:[i2.wp.colWithGap(4)],menuItem:[],menuItemSelector:[i2.wp.height(28),i2.wp.pl(4),{flex:1,transition:"none",span:{flex:1,textAlign:"left"}}],iconInvisible:[i2.wp.visibility.hidden],playControl:[i2.wp.height(28),i2.wp.width(28),i2.wp.color.foregroundDimmer,i2.wp.hover(i2.wp.color.foregroundDefault)],metadata:[],pid1MenuItem:[i2.wp.py(4),i2.wp.flex.row,i2.wp.justify.spaceBetween,i2.wp.borderRadius(),i2.wp.align.center,i2.wp.rowWithGap(8),i2.wp.cursor.pointer,{"&[data-hovered],&[data-focused]":{backgroundColor:ry.LU.interactiveBackground},"&[data-selected]":{backgroundColor:ry.LU.interactiveBackgroundActive},"&[aria-disabled]":{cursor:"not-allowed"}}]});function h8(e){var n=e.setDefault,t=e.onAction,r=e.name,i=e.isRunning,o=e.isRunButton?null:{css:h6.iconInvisible},a=(0,uS.y$)(r);return(0,f.FD)(i4.S,{row:!0,"aria-label":r,children:[(0,f.Y)(al.$n,{css:h6.menuItemSelector,onClick:function(){return n(r)},text:r,iconLeft:(0,f.Y)(pj.A,(0,m._)({},o)),variant:"nofill"}),(0,f.Y)(cf.K0,{css:h6.playControl,alt:"".concat(i?h4[uS.ll.RUNNING]+" ".concat(a):h4[uS.ll.IDLE]+" ".concat(a)),onClick:t,children:i?(0,f.Y)(h7.A,{}):(0,f.Y)(dj.A,{})})]})}function h9(){var e,n,t,r,i,o=(0,uC.g3)(),a=(0,uC.wS)(),l=(0,uC.z1)(),c=(0,uC.OK)(),u=(0,uC.If)(),s=(0,uC.MP)(),d=null==o?void 0:o.workflowId,p=!!(null==c||null==(t=c.workflow)||null==(n=t.find(function(e){return e.name===d}))||null==(e=n.metadata)?void 0:e.generated),h=null==c||null==(i=c.workflow)||null==(r=i.find(function(e){var n;return null==(n=e.metadata)?void 0:n.dotReplitRun}))?void 0:r.name,m=(0,h5.I)(function(e){return function(n){return s(uS.QG.RUN_BUTTON_CLICKED),(0,oE.u4)(oE.AZ.WORKFLOW_RAN,{source:"dropdownMenu"}),e.workflows.runWorkflow.rpc({workflowId:n})}},[s]),v=(0,h5.I)(function(e){return function(n){return(0,oE.u4)(oE.AZ.WORKFLOW_STOPPED,{source:"dropdownMenu"}),e.workflows.stopRun.rpc({runId:n})}},[]),y=function(e){(0,oE.u4)(oE.AZ.RUN_BUTTON_DEFAULT_CHANGED,{runner:e?"workflows":"pid1"}),l(e),a()},w=(0,g.useMemo)(function(){var e;return(null==c?void 0:c.workflow)&&null!=(e=null==c?void 0:c.workflow.filter(function(e){var n,t;return!(null!=(t=null==(n=e.metadata)?void 0:n.generated)&&t)}).map(function(e){var n=Object.values(null!=u?u:{}).filter(function(n){return n.workflow.name===e.name}).sort(function(e,n){return e.startTime-n.startTime});return{workflowConfig:e,workflowRunState:h3(n)}}))?e:[]},[c,u]),b=(0,g.useMemo)(function(){if(h)return h3(Object.values(null!=u?u:{}).filter(function(e){return h===e.workflow.name}).sort(function(e,n){return e.startTime-n.startTime}))},[u,h]);return(0,f.FD)(i4.S,{"aria-label":"Workflows",gap:4,children:[(0,f.Y)(ac.EY,{variant:"small",color:"dimmest",children:"Workflows"}),(0,f.FD)(i4.S,{children:[h?(0,f.Y)(h8,{isRunButton:p,isRunning:(null==b?void 0:b.step)==="RUNNING",onAction:function(){(null==b?void 0:b.step)!=="RUNNING"?null==m||m(h):b&&(null==v||v(b.runId))},setDefault:function(e){y()},name:h}):null,w.map(function(e,n){var t,r=e.workflowConfig,i=e.workflowRunState,o=(null==i?void 0:i.step)==="RUNNING";return(0,f.Y)(h8,{onAction:function(){o?i&&(null==v||v(i.runId)):null==m||m(r.name)},setDefault:y,name:r.name,isRunning:o,isRunButton:r.name===d},r.name+"-"+n+"-"+(null!=(t=null==i?void 0:i.step)?t:"not-started"))})]})]})}var ge=(0,rw.x)({dropDown:[{'&[data-visible="true"]':{visibility:"visible",maxWidth:"100px",transform:"translateX(-4px)",opacity:1},'&[data-visible="false"]':{visibility:"hidden",maxWidth:0,transform:"translateX(-20px)",opacity:0},zIndex:0,transition:"\ntransform 0.2s linear,\nopacity 0.2s linear\n"}],dropDownButton:[i2.wp.reset.button,pS.b.filled,i2.wp.color.foregroundDimmer,i2.wp.height(32),i2.wp.minWidth(20),i2.wp.flex.column,i2.wp.justify.center,i2.wp.pr(2),i2.wp.pl(4),i2.wp.borderRadius(0,"default","default",0),{backgroundColor:"transparent"}],popoverWrapper:[i2.wp.minWidth(240)],popoverSection:[i2.wp.p(8),{":not(:last-of-type)":{borderBottom:"1px solid "+ry.LU.outlineDimmest}}]});function gn(e){var n=e.isVisible,t=e.triggerElement,r=(0,p._)((0,g.useState)(!1),2),i=r[0],o=r[1],a=s1(),l=(0,g.useCallback)(function(){(0,oE.u4)(oE.AZ.WORKFLOWS_SETTINGS_OPENED,{source:"runButton"}),a({type:"workflows"}),o(!1)},[a]);return(0,f.Y)(i4.S,{css:ge.dropDown,"data-visible":void 0===n||n?"true":"false",children:(0,f.FD)(dG.Wv,{isOpen:i,onOpenChange:function(e){(0,oE.u4)(oE.AZ.RUN_BUTTON_DROPDOWN_OPENED),o(e)},label:"Workflows",placement:"bottom start",children:[t||(0,f.Y)(i4.D.button,{css:ge.dropDownButton,children:(0,f.Y)(l3.m_,{tooltip:"Configure Run Button",children:(0,f.Y)(dB.A,{})})}),(0,f.FD)(i4.S,{css:ge.popoverWrapper,children:[(0,f.Y)(i4.S,{css:ge.popoverSection,children:(0,f.Y)(h9,{})}),(0,f.Y)(i4.S,{css:ge.popoverSection,children:(0,f.Y)(al.$n,{text:"Manage Workflows",onClick:l,iconLeft:(0,f.Y)(ux.A,{})})})]})]})})}var gt=[i2.wp.rowWithGap(4),i2.wp.justify.center,i2.wp.align.center,i2.wp.height(32),i2.wp.minWidth(48),i2.wp.px(8),i2.wp.borderRadius(4),i2.wp.cursor.pointer,i2.wp.position.relative,i2.wp.fontWeight.medium,i2.wp.zIndex(1)],gr=(0,rw.x)({wrapper:[i2.wp.noDragRegion,i2.wp.position.relative,i2.wp.borderRadius("default")],runButtonLabel:[i2.wp.display.none,(0,tg._)({},"@media (min-width: ".concat(sm.LO.tabletMax,"px)"),[i2.wp.display.block])],runButtonIdle:(0,eE._)(gt).concat([i2.wp.color.accentPositiveStrongest,i2.wp.backgroundColor.accentPositiveDimmer,{border:"1px solid",borderColor:"transparent","&:disabled":[i2.wp.color.foregroundDimmer,i2.wp.backgroundColor.backgroundHighest,i2.wp.cursor.default],"&:hover:not(:disabled)":[{color:"white"},i2.wp.backgroundColor.accentPositiveDefault],":focus-visible":{outlineColor:"".concat(ry.LU.accentPositiveStrongest)}}]),runButtonRunning:(0,eE._)(gt).concat([i2.wp.color.foregroundDimmer,i2.wp.backgroundColor.backgroundHighest,{border:"1px solid",borderColor:"transparent","&:hover":[i2.wp.color.foregroundDefault,i2.wp.backgroundColor.greyDimmest],"&:active":[{borderColor:ry.LU.accentPrimaryDefault}]}]),runButtonRunByAgent:(0,eE._)(gt).concat([i2.wp.color.foregroundDefault,i2.wp.backgroundColor.blurpleDimmer,i2.wp.maxWidth(68),{border:"1px solid",borderColor:"transparent","&:before":[{content:'"Running"'}],"&:hover":[i2.wp.color.foregroundDimmer,i2.wp.backgroundColor.blurpleDimmest,i2.wp.minWidth(68),{"&::before":[{content:'"Stop"'}]}],"&:active":[{borderColor:ry.LU.accentPrimaryDefault}]}]),agentBanner:[i2.wp.colorMixBg(ry.LU.blurpleDimmest,"transparent",.6),i2.wp.borderRadius("default",0,0,"default"),{'&[data-visible="false"]':{visibility:"hidden",transform:"translateX(30px)",position:"absolute",maxWidth:0,opacity:0},'&[data-visible="true"]':{transform:"translateX(4px)",opacity:1,visibility:"visible",justifyContent:"center",height:"32px",maxWidth:"32px",paddingY:"4px",padding:"4px 8px 4px 6px"},transition:"\ntransform 0.2s linear,\nopacity 0.2s linear\n"}]});function gi(e){var n=e.stop,t=e.cancel;return(0,f.FD)(i4.S,{children:[(0,f.Y)(ac.EY,{children:"Stopping your project while the agent is working can lead to unexpected interruptions that incur additional costs. Are you sure you want to stop?"}),(0,f.FD)(i4.S,{pt:12,row:!0,gap:12,justify:"end",children:[(0,f.Y)(al.$n,{text:"Cancel",onClick:t}),(0,f.Y)(al.$n,{iconLeft:(0,f.Y)(h7.A,{}),text:"Stop",onClick:function(){n(),t()},colorway:"negative"})]})]})}function go(e){var n=e.isRunning,t=e.isAgentRunningWorkflow,r=e.isDisabled,i=e.isAgentRunButtonNotConfigured,o=e.handleRunButtonClick,a=(0,p._)((0,g.useState)(!1),2),l=a[0],c=a[1];return t?(0,f.FD)(f.FK,{children:[(0,f.Y)(o7.a,{isOpen:l,onRequestClose:function(){return c(!1)},children:(0,f.Y)(gi,{stop:o,cancel:function(){return c(!1)}})}),(0,f.Y)(i4.S,{tag:"button",css:gr.runButtonRunByAgent,onClick:function(){return c(!0)}})]}):n?(0,f.FD)(i4.S,{tag:"button",css:gr.runButtonRunning,onClick:o,children:[(0,f.Y)(h7.A,{size:16}),(0,f.Y)(ac.EY,{multiline:!1,css:gr.runButtonLabel,children:h4[uS.ll.RUNNING]})]}):(0,f.FD)(i4.S,{tag:"button",disabled:r||i,css:gr.runButtonIdle,onClick:o,children:[(0,f.Y)(dj.A,{size:16}),(0,f.Y)(ac.EY,{multiline:!1,css:gr.runButtonLabel,children:h4[uS.ll.IDLE]})]})}function ga(e){var n,t,r,i,o,a=e.attachTourRefs,l=(r={variables:{id:(0,ec.A)()}},i=(0,m._)({},hN,r),w.I(hB,i)).data,c=(null==l?void 0:l.repl.__typename)==="Repl"?l.repl:null,u=(t=null==(n=(0,pT.Os)(h2,hZ.Run))?void 0:n.isActive,{tourRefs:n.tourRef,isAnyTourStepActive:t}).tourRefs,s=(0,o0.Jn)(uM.run.id),d=(0,p._)((0,g.useState)(!1),2),h=d[0],v=d[1],y=(0,uC.g3)(),b=null!=(o=null==y?void 0:y.workflowId)?o:uS.Ov,x=(0,uC.lO)(),Y=x.isRunning,S=x.isAgentRunningWorkflow,A=x.isOffline,_=x.isWorkflowsLoading,k=x.isDisabled,C=(0,g.useMemo)(function(){return A||_},[A,_]),I=(0,hH.F)(),D=!C&&!I,E=(0,uC.qP)();(0,g.useEffect)(function(){S&&h&&v(!1)},[S,h]);var R=(0,g.useCallback)(function(){if(c){var e,n,t,r,i,o,a;(0,oE.u4)(oE.AZ.PROJECT_RAN,{placement:"primary_btn",replId:c.id,replTitle:c.title,rootOriginReplUrl:c.rootOriginReplUrl,templateTitle:null==(t=c.source)||null==(n=t.release)||null==(e=n.repl)?void 0:e.title,templateOwner:null==(a=c.source)||null==(o=a.release)||null==(i=o.repl)||null==(r=i.owner)?void 0:r.username})}(0,oE.u4)(oE.AZ.RUN_BUTTON_CLICKED,{source:"header",runner:"workflows"}),E()},[c,E]);return(0,f.FD)(i4.S,{innerRef:void 0!==a&&a?u:void 0,css:gr.wrapper,row:!0,align:"center",children:[(0,f.Y)(i4.S,{css:gr.agentBanner,"data-visible":S&&!A?"true":"false",children:(0,f.Y)(h$.A,{})}),(0,f.Y)(l3.m_,{placement:"bottom",tooltip:function(e){var n=e.isOffline,t=e.isAgentRunningWorkflow,r=e.isDisabled,i=e.isRunning,o=e.runButtonName,a=e.shortcut,l=e.isAgentRunButtonNotConfigured;if(n)return"Connecting to the workspace";if(t)return"Agent is running your App";if(l)return"Agent hasn't configured the run button yet";if(r)return"Run button is not configured";var c=(0,uS.y$)(o);return(0,f.FD)(i4.S,{px:4,gap:4,justify:"center",align:"center",children:[o?(0,f.Y)(ac.EY,{color:"dimmer",variant:"small",children:i?h4[uS.ll.RUNNING]+" all workflows":h4[uS.ll.IDLE]+" ".concat(c)}):null,a?(0,f.Y)(o0._y,{keyCombo:a,fontSize:12}):null]})}({isRunning:Y,isAgentRunningWorkflow:S,isDisabled:k,isOffline:C,runButtonName:b,shortcut:s,isAgentRunButtonNotConfigured:I}),children:C?(0,f.FD)(i4.S,{tag:"button",disabled:!0,css:gr.runButtonRunning,children:[(0,f.Y)(s5.A,{size:16}),(0,f.Y)(ac.EY,{multiline:!1,css:gr.runButtonLabel,children:"Loading"})]}):(0,f.Y)(i4.S,{dataCy:"ws-run-btn",children:(0,f.Y)(go,{isRunning:Y,isAgentRunningWorkflow:S,isDisabled:k,isAgentRunButtonNotConfigured:I,handleRunButtonClick:R})})}),D?(0,f.Y)(gn,{isVisible:!S}):null]})}var gl=(0,rw.x)({button:[i2.wp.width(32),i2.wp.height(32)]});function gc(){var e=(0,uC.lO)(),n=e.isRunning,t=e.isAgentRunningWorkflow,r=e.isOffline,i=e.isDisabled,o=(0,uC.qP)(),a=(0,uC.KZ)(),l=(0,p._)((0,g.useState)(!1),2),c=l[0],u=l[1],s=(0,g.useCallback)(function(){if(!t)return void o();u(!0)},[t,o]);return(0,f.FD)(f.FK,{children:[(0,f.Y)(cf.K0,{alt:n?"Stop the App":"Start the App",css:gl.button,onClick:s,disabled:r||i,children:n?(0,f.Y)(h7.A,{}):(0,f.Y)(dj.A,{})}),(0,f.Y)(o7.a,{isOpen:c,onRequestClose:function(){return u(!1)},children:(0,f.Y)(gi,{stop:a,cancel:function(){return u(!1)}})})]})}var gu=(0,rw.x)({replInfo:[i2.wp.maxWidth(530),{"& > span":[i2.wp.viewStyle,i2.wp.flex.shrink(1)]}]});function gs(e){var n,t=e.repl,r=e.currentUser,i=e.isAgentOnboarding,o=e.isAgentCentered,a=rc(tY),l="centeredVisualPlanner"===oS(),c=(0,hM.F)().isFreemiumStarterPlanUsersOwnRepl,u=(0,Z.jt)(),s=(0,N._P)({controlName:"flag-dont-sue-us-tim",logFlagToAnalytics:!1});return(0,f.FD)(i4.S,{row:!0,gap:4,align:"center",justify:"start",css:i2.wp.noDragRegion,children:[(0,f.Y)(pl.A,{}),(0,f.Y)(p7.C,{org:null!=(n=t.org)?n:void 0}),(0,f.Y)(p1,{repl:t}),(0,f.Y)(i4.S,{row:!0,align:"center",justify:"start",children:i||o?(0,f.Y)(gd,{repl:t}):(0,f.FD)(i4.S,{row:!0,gap:4,children:[(0,f.Y)(i4.S,{row:!0,align:"center",css:gu.replInfo,shrink:!0,children:(0,f.Y)(fm,{repl:t,getDesktopLayoutState:a})}),l?(0,f.Y)(p5,{}):(0,f.Y)(hE,{repl:t,currentUser:r})]})}),c?(0,f.Y)(p_,{}):null,u&&s&&!l?(0,f.Y)(gc,{}):null,(0,f.Y)(pa,{})]})}function gd(e){var n=e.repl;return(0,f.Y)(i4.S,{px:12,children:(0,f.Y)(ac.EY,{children:n.title})})}var gp=t(61284),gf=(0,rw.x)({brokenNixButton:[i2.wp.noDragRegion,i2.wp.backgroundColor.orangeDimmest,i2.wp.color.orangeStrongest,i2.wp.height(32),i2.wp.p(8),i2.wp.borderRadius(4),i2.wp.cursor.pointer,{border:"1px solid",borderColor:"transparent","&:hover":[i2.wp.backgroundColor.orangeDimmer],"&:active":[{borderColor:ry.LU.orangeDefault}]}],brokenNixButtonLabel:[i2.wp.display.none,(0,tg._)({},"@media (min-width: ".concat(sm.LO.tabletMax,"px)"),[i2.wp.display.block])]});function gh(e){var n=e.nixState,t=(0,p._)((0,g.useState)(!1),2),r=t[0],i=t[1],o=s1(),a=(0,g.useCallback)(function(e){o({type:"codeEditor",data:{path:e}})},[o]);return(0,f.FD)(f.FK,{children:[(0,f.FD)(i4.S,{align:"center",css:gf.brokenNixButton,row:!0,gap:8,tag:"button",onClick:function(){i(!0)},children:["error"===n.status?(0,f.Y)(f0.A,{}):null,"rebuilding-after-error"===n.status?(0,f.Y)(s5.A,{}):null,(0,f.Y)(i4.S,{css:gf.brokenNixButtonLabel,children:"App is in recovery mode"})]}),(0,f.Y)(gp.E,{isOpen:r,setIsOpen:i,nixState:n,openFile:a})]})}var gg=t(931),gm=t(43258),gv=t(14054),gy=t.n(gv);function gw(){var e=oS(),n=(rl(iq),(0,N._P)({controlName:"flag-agent-debug-info-button"})),t=(0,Z.NC)(),r=(0,ef.Rj)(function(){return t.sessions.agent.current},[t.sessions.agent]);return(0,f.FD)(i4.S,{row:!0,align:"center",gap:4,children:[(0,f.Y)(gb,{icon:(0,f.Y)(gm.A,{size:12}),text:"Plan",isActive:"centeredVisualPlanner"===e,onClick:void 0}),(0,f.Y)(i4.S,{clsx:gy().dividerContainer,children:(0,f.Y)(pM.a,{clsx:gy().divider})}),(0,f.Y)(gb,{icon:(0,f.Y)(ux.A,{size:12}),text:"Build",isActive:"tilingLayout"===e,onClick:void 0}),n&&r?(0,f.FD)(f.FK,{children:[(0,f.Y)(i4.S,{clsx:gy().dividerContainer,children:(0,f.Y)(pM.a,{clsx:gy().divider})}),(0,f.Y)(gg.O,{sessionId:r.id,sessionType:ep.dF3.AGENT_SESSION})]}):null]})}function gb(e){var n=e.icon,t=e.text,r=e.isActive,i=e.onClick;return(0,f.FD)(i4.S,{row:!0,align:"center",gap:4,clsx:[(0,tg._)({},gy().stepInteractive,null!=i)],onClick:i,children:[(0,f.Y)(hS.a,{iconLeft:n,colorway:r?"positive":"grey",clsx:[gy().pill,(0,tg._)({},gy().pillActive,r)]}),(0,f.Y)(ac.EY,{color:r?"default":"dimmer",clsx:gy().text,children:t})]})}var gx=t(11748),gY=t(83098),gS=t(90765),gA=t(8345),g_=t(97206);function gk(){var e=(0,v._)(["\n  fragment ReplMultiplayerOrg on Org {\n    ...OrgMetadata\n    membersCount\n  }\n  ","\n"]);return gk=function(){return e},e}function gC(){var e=(0,v._)(["\n  fragment ReplMultiplayerOrgGroup on OrgGroup {\n    ...OrgGroupsOrgGroup\n  }\n  ","\n"]);return gC=function(){return e},e}function gI(){var e=(0,v._)(["\n  fragment ReplMultiplayerGroup on ReplMultiplayerGroupScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return gI=function(){return e},e}function gD(){var e=(0,v._)(["\n  fragment ReplMultiplayerIndividual on ReplMultiplayerIndividualScope {\n    group {\n      __typename\n      ...ReplMultiplayerOrgGroup\n    }\n    user {\n      __typename\n      id\n      displayName\n      image\n      username\n    }\n    options {\n      __typename\n      role\n      status\n    }\n  }\n  ","\n"]);return gD=function(){return e},e}function gE(){var e=(0,v._)(["\n  fragment ReplMultiplayerStatus on Repl {\n    id\n    title\n    isPrivate\n    url\n    org {\n      ...ReplMultiplayerOrg\n    }\n    multiplayerStatus {\n      __typename\n      groups {\n        __typename\n        ...ReplMultiplayerGroup\n      }\n      individuals {\n        __typename\n        ...ReplMultiplayerIndividual\n      }\n    }\n    authorizations {\n      editPermissions {\n        isAuthorized\n        message\n      }\n      editVisibility {\n        isAuthorized\n        message\n      }\n      removeSelf {\n        isAuthorized\n        message\n      }\n      viewPermissions {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return gE=function(){return e},e}function gR(){var e=(0,v._)(["\n  query ReplMultiplayerStatus($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        __typename\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return gR=function(){return e},e}function gU(){var e=(0,v._)(["\n  mutation UpdateOrgReplVisibility($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplMultiplayerStatus\n      }\n    }\n  }\n  ","\n"]);return gU=function(){return e},e}var gF={},gP=(0,y.J1)(gk(),g_.wW),gO=(0,y.J1)(gC(),gA.Um),gT=(0,y.J1)(gI(),gO),gL=(0,y.J1)(gD(),gO),gM=(0,y.J1)(gE(),gP,gT,gL),gG=(0,y.J1)(gR(),gM),gN=(0,y.J1)(gU(),gM),gB=t(19522),gH=t(45796),gz=t(58211),gW=t(51254),gj=t(56983),g$=t(22422),gZ=t(10327),gq=t(12813),gV=(0,rw.x)({section:[i2.wp.colWithGap(12),i2.wp.px(12)],sectionWithBorders:[i2.wp.colWithGap(12),i2.wp.p(12),i2.wp.border({direction:"top"}),i2.wp.border({direction:"bottom"}),{"&:last-of-type":{borderBottom:0,paddingBottom:0}}],sectionTitle:[i2.wp.fontWeight.medium],subtitle:[i2.wp.fontWeight.medium],item:[i2.wp.rowWithGap(16),i2.wp.align.center,i2.wp.justify.spaceBetween],groupName:[i2.wp.colWithGap(6),i2.wp.justify.center],visibilitySelector:[i2.wp.position.relative,i2.wp.justify.start,i2.wp.align.center]}),gK=function(e){var n,t,r,i,o,a,l,c,u,s,d,p,h=e.replId,g=(0,aa.T)(),v=(0,ut.A)(),y=(n={variables:{replId:h}},t=(0,m._)({},gF,n),w.I(gG,t)),b=y.data,x=y.loading,Y=y.error,S=y.refetch,A=(null==b||null==(i=b.repl)?void 0:i.__typename)==="Repl"?b.repl:void 0,_=(null!=(s=null==A||null==(o=A.multiplayerStatus)?void 0:o.groups)?s:[]).filter(function(e){return"custom"!==e.group.type}),k=(null!=(d=null==A||null==(a=A.multiplayerStatus)?void 0:a.groups)?d:[]).filter(function(e){return"custom"===e.group.type}),C=null!=(p=null==A||null==(l=A.multiplayerStatus)?void 0:l.individuals)?p:[],I=_.map(function(e){return e.group}).concat(k.map(function(e){return e.group})).concat(C.map(function(e){return e.group})),D=(r=(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return[4,S()];case 1:return e.sent(),[2]}})}),function(){return r.apply(this,arguments)});return(null==Y?void 0:Y.message)?(0,f.Y)(i4.S,{gap:12,children:(0,f.Y)(pp.N,{colorway:"negative",text:Y.message})}):x||!A?(0,f.Y)(i4.S,{px:12,align:"center",justify:"center",children:(0,f.Y)(s5.A,{})}):(0,f.FD)(i4.S,{gap:12,children:[(0,f.FD)(i4.S,{tag:"header",px:12,gap:2,children:[(0,f.Y)(ac.EY,{variant:"subheadDefault",children:"Share App"}),(0,f.FD)(i4.S,{css:gV.subtitle,row:!0,gap:4,children:[A.org?(0,f.FD)(ac.EY,{variant:"small",color:"dimmer",children:[A.org.name," /"]}):null,(0,f.Y)(ac.EY,{variant:"small",children:A.title})]})]}),(null==(c=A.org)?void 0:c.id)&&A.authorizations.editPermissions.isAuthorized?(0,f.Y)(i4.S,{css:gV.sectionWithBorders,children:(0,f.Y)(g0,{orgId:A.org.id,selectedGroups:I,repl:A,onScopeChange:D})}):null,(0,f.FD)(i4.S,{css:gV.section,children:[(0,f.Y)(ac.EY,{variant:"small",css:gV.sectionTitle,children:"Groups with access"}),A.org?(0,f.Y)(gX,{org:A.org}):null,(0,f.Y)(i4.S,{pl:24,gap:12,children:_.map(function(e){var n=e.group,t=e.options;return(0,f.Y)(gQ,{repl:A,group:n,options:t,onScopeChange:D},n.id)})}),k.map(function(e){var n=e.group,t=e.options;return(0,f.Y)(gQ,{repl:A,group:n,options:t,onScopeChange:D},n.id)})]}),C.length>0?(0,f.FD)(i4.S,{css:gV.section,children:[(0,f.Y)(ac.EY,{variant:"small",css:gV.sectionTitle,children:"People with access"}),C.map(function(e){var n=e.group,t=e.user,r=e.options;return(0,f.Y)(gJ,{currentUserId:g,repl:A,group:n,user:t,options:r,onScopeChange:D},t.id)})]}):null,(0,f.Y)(i4.S,{css:gV.section,children:(0,f.Y)(gW.R,{type:"repl"})}),(null==(u=A.org)?void 0:u.id)?(0,f.Y)(i4.S,{css:gV.sectionWithBorders,children:(0,f.FD)(i4.S,{row:!0,justify:"space-between",children:[(0,f.Y)(g1,{repl:A,org:A.org}),v?null:(0,f.Y)(pL.v,(0,td._)((0,m._)({prefetch:!1},(0,pW.z9)(A)),{iconRight:(0,f.Y)(uD.A,{}),variant:"outlined",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}}))]})}):null]})},gJ=function(e){var n=e.user,t=e.currentUserId,r=e.repl,i=e.group,o=e.options,a=e.onScopeChange,l=t===n.id;return(0,f.FD)(i4.S,{css:gV.item,children:[(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(g$.e,{src:n.image,username:n.username,fullName:n.displayName,size:24}),(0,f.FD)(i4.S,{css:gV.groupName,children:[(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(ac.EY,{height:"singleLine",children:n.username}),l?(0,f.Y)(ac.EY,{height:"singleLine",color:"dimmest",children:"(You)"}):null]}),n.username!==n.displayName?(0,f.Y)(ac.EY,{variant:"small",color:"dimmest",height:"singleLine",children:n.displayName}):null]})]}),(0,f.Y)(i4.S,{children:(0,f.Y)(gj.A,{repl:r,group:i,options:o,onScopeChange:a})})]})},gQ=function(e){var n=e.repl,t=e.group,r=e.options,i=e.onScopeChange;return(0,f.FD)(i4.S,{css:gV.item,children:[(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(gH.A,{group:t}),(0,f.FD)(i4.S,{css:gV.groupName,children:[(0,f.Y)(ac.EY,{height:"singleLine",children:t.name}),(0,f.FD)(i4.S,{row:!0,gap:8,children:[t.isMember?(0,f.Y)(ac.EY,{variant:"small",color:"dimmest",height:"singleLine",children:"(you)"}):null,null!=t.memberCount?(0,f.Y)(ac.EY,{variant:"small",color:"dimmest",height:"singleLine",children:(0,si.A)("member",t.memberCount,!0)}):null]})]})]}),(0,f.Y)(i4.S,{children:(0,f.Y)(gj.A,{repl:n,group:t,options:r,onScopeChange:i})})]})},gX=function(e){var n,t=e.org;return(0,f.Y)(i4.S,{css:gV.item,children:(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(g$.e,{src:null!=(n=t.image)?n:null,username:t.name,size:32,layout:"responsive",isOrg:!0}),(0,f.FD)(i4.S,{css:gV.groupName,children:[(0,f.FD)(ac.EY,{height:"singleLine",children:["Everyone at ",t.name]}),(0,f.Y)(i4.S,{children:null!=t.membersCount?(0,f.Y)(ac.EY,{variant:"small",color:"dimmest",height:"singleLine",children:(0,si.A)("member",t.membersCount,!0)}):null})]})]})})},g0=function(e){var n,t,r,i,o,a,l,c,u=e.orgId,s=e.selectedGroups,d=e.repl,h=e.onScopeChange,m="group-search-".concat((0,g.useId)()),v=(0,p._)((0,g.useState)(),2),y=v[0],w=v[1],b=(0,p._)((0,g.useState)(""),2),x=b[0],Y=b[1],S=(0,p._)((0,gB.qO)(),2),A=S[0],_=S[1],k=_.data,C=_.error,I=_.loading,D=k&&(null==(r=k.currentUser)||null==(t=r.org)?void 0:t.__typename)==="Org"&&"OrgGroup"===k.currentUser.org.group.__typename&&(null==(i=k.currentUser.org.group.replScopeOptions)?void 0:i.__typename)==="OrgGroupReplScopeOptions"?k.currentUser.org.group.replScopeOptions.items[0].options:void 0,E=(null==k?void 0:k.currentUser)&&"Org"!==k.currentUser.org.__typename?k.currentUser.org.message:void 0,R=(null==k?void 0:k.currentUser)&&"Org"===k.currentUser.org.__typename&&"OrgGroup"!==k.currentUser.org.group.__typename?k.currentUser.org.group.message:void 0,U=(null==k?void 0:k.currentUser)&&"Org"===k.currentUser.org.__typename&&"OrgGroup"===k.currentUser.org.group.__typename&&(null==(o=k.currentUser.org.group.replScopeOptions)?void 0:o.__typename)!=="OrgGroupReplScopeOptions"?null==(a=k.currentUser.org.group.replScopeOptions)?void 0:a.message:void 0,F=null!=(c=null!=(l=null!=E?E:R)?l:U)?c:null==C?void 0:C.message,P=(n=(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return[4,h()];case 1:return e.sent(),Y(""),w(void 0),[2]}})}),function(){return n.apply(this,arguments)});return(0,f.FD)(f.FK,{children:[(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(i4.S,{grow:!0,shrink:!0,children:(0,f.Y)(gz.A,{inputId:m,orgId:u,types:[c9.Oi9.Custom,c9.Oi9.SystemIndividual],selectedGroups:s,value:x,setValue:Y,onSelect:function(e){w(e),Y(e.name),A({variables:{orgId:u,groupId:e.id,input:{replIds:[d.id]}}})},onClear:function(){return w(void 0)},placeholder:"Share with groups or other members"})}),y&&D||I?(0,f.FD)(i4.S,{pl:24,row:!0,align:"center",children:[y&&D&&!I?(0,f.Y)(gj.A,{group:y,repl:d,options:D,onScopeChange:P}):null,I?(0,f.Y)(s5.A,{size:24}):null]}):null]}),F?(0,f.Y)(pp.N,{colorway:"negative",text:F}):null]})},g1=function(e){var n,t,r,i=e.repl,o=e.org,a=(0,p._)((0,g.useState)(),2),l=a[0],c=a[1],u=(0,p._)((0,g.useState)(),2),s=u[0],d=u[1],h=(0,p._)((n={variables:{input:{id:i.id}},onError:function(e){d(e.message)}},t=(0,m._)({},gF,n),b.n(gN,t)),2),v=h[0],y=h[1].loading,w="repl-visibility-".concat((0,g.useId)()),x=i.authorizations.editVisibility.isAuthorized,Y=i.authorizations.editVisibility.message,S=[{id:"private",icon:(0,f.Y)(gq.A,{}),name:"Internal to ".concat(o.name),selected:i.isPrivate,description:"Only selected organization members can view or edit."},{id:"public",icon:(0,f.Y)(gZ.A,{}),name:"Public on Replit",selected:!i.isPrivate,description:"Anyone on Replit can see or fork. You choose who can edit."}],A=S.find(function(e){return e.selected}),_=A?(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",children:[A.icon," ",A.name]}):void 0;return r=s?(0,f.Y)(l3.m_,{tooltip:s,children:(0,f.Y)(f0.A,{size:24,color:ry.LU.accentNegativeDefault})}):y?(0,f.Y)(s5.A,{size:24}):l?(0,f.Y)(pj.A,{size:24,color:ry.LU.accentPositiveDefault}):null,(0,f.FD)(i4.S,{css:gV.visibilitySelector,grow:!0,shrink:!0,row:!0,gap:4,children:[(0,f.Y)(l3.m_,{tooltip:Y,isDisabled:x,children:(0,f.Y)(pN.in,{id:w,trigger:(0,f.Y)(al.$n,{iconRight:(0,f.Y)(dB.A,{}),text:null!=_?_:"Control Repl visibility",disabled:!x}),"aria-label":"Control ".concat(i.title," visibility"),onAction:function(e){var n="private"===e;n!==i.isPrivate&&(d(void 0),v({variables:{input:{id:i.id,isPrivate:n}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,td._)((0,m._)({},i),{isPrivate:n})}},onCompleted:function(e){"UpdateReplPayload"===e.updateRepl.__typename&&(c(!0),setTimeout(function(){return c(!1)},2e3))}}))},items:S,disallowEmptySelection:!0,isDisabled:!x,children:function(e){return(0,f.Y)(pN.Dr,{id:e.id,label:e.name,description:e.description,icon:e.icon},e.id)}})}),r?(0,f.Y)(i4.S,{children:r}):null]})},g2=t(7576),g4=t.n(g2),g5=t(49625);function g7(){var e=(0,v._)(["\n  query TeamMultiplayerManagerMultiplayers($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          type\n          permission\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n          inviteGuests {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            username\n            displayName\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n              availableSeats\n            }\n            members {\n              id\n              permissions\n              user {\n                id\n                ...MultiplayerUser\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return g7=function(){return e},e}var g3={},g6=(0,y.J1)(g7(),g5._9),g8=t(52454),g9=(0,rw.x)({root:[i2.wp.color.foregroundDefault,i2.wp.p(24),i2.wp.display.grid,{gap:ry.LU.space24}],controls:[i2.wp.display.grid,{gap:ry.LU.space8,gridAutoFlow:"column"}],message:[i2.wp.pb(16)],textContainer:[i2.wp.textAlign.center]});function me(e){var n=e.email,t=e.onInvite,r=e.onCancel;return(0,f.FD)("div",{css:g9.root,children:[(0,f.Y)(ac.Y9,{level:3,textAlign:"center",variant:"subheadBig",children:"Are you sure?"}),(0,f.Y)("div",{css:g9.textContainer,children:(0,f.FD)(ac.EY,{variant:"text",children:[(0,f.Y)("p",{css:g9.message,children:"Adding an external user as a guest to this repl will give the user read and write access. Please confirm the below email address before inviting the user as a guest."}),(0,f.Y)("p",{children:n})]})}),(0,f.FD)("div",{css:g9.controls,children:[(0,f.Y)(al.$n,{onClick:r,text:"Cancel"}),(0,f.Y)(al.$n,{colorway:"primary",onClick:t,text:"Invite"})]})]})}var mn=t(17337),mt=t(52874),mr=t(15493),mi=t(11011);function mo(e){var n,t,r,i,o,a,l,c,u,s,d,v,y=e.replId,b=(0,h.useRouter)(),x=(0,Q.Po)(b),Y=(0,rn.Q4)(),S=(0,p._)((0,g.useState)(null),2),A=S[0],_=S[1],k=(n={variables:{replId:y}},t=(0,m._)({},g3,n),w.I(g6,t)),C=k.data,I=k.loading,D=(null==C||null==(r=C.currentUser)?void 0:r.id)||null,E=(null==C?void 0:C.repl.__typename)==="Repl"?C.repl:null,R=(0,g8.A)({isMobileApp:x,isTeam:!0,replId:y}),U=R.addOrInviteReplMultiplayer,F=R.loadingAddMutation;if(E&&!E.owner)throw Error("Cannot manage members on anon repls");if((null==E?void 0:E.owner)&&(null==E?void 0:E.owner.__typename)!=="Team")throw Error("Expect repl owned by a team");var P=(null==E||null==(i=E.owner)?void 0:i.__typename)==="Team"?E.owner:null,O=!(null==P||null==(o=P.capabilities)?void 0:o.hasValidSubscription)&&!(null==P||null==(a=P.capabilities)?void 0:a.isBusinessPlan),T=(null!=(l=null==E?void 0:E.collaborators)?l:[]).reduce(function(e,n){var t=n.user.username;return -1===e.indexOf(t)&&e.push(),e},[]),L=null==E?void 0:E.multiplayerInvites,M=(null!=(c=null==E?void 0:E.collaborators)?c:[]).filter(function(e){return"guest"===e.type}).map(function(e){return e.user}),G=M.length,N=(null!=(u=null==E?void 0:E.collaborators)?u:[]).filter(function(e){return"member"===e.type}).map(function(e){return e.user}),B=(null!=(s=null==E?void 0:E.collaborators)?s:[]).filter(function(e){return"admin"===e.type}).map(function(e){return e.user}),H=B.some(function(e){return e.id===D}),z=N.filter(function(e){return Y.some(function(n){return n.id===e.id})}),W=N.filter(function(e){return!Y.some(function(n){return n.id===e.id})}),j=null!=(d=null==E?void 0:E.authorizations.editPermissions.isAuthorized)&&d,$=null!=(v=null==E?void 0:E.authorizations.inviteGuests.isAuthorized)&&v;return I?(0,f.Y)(o3.ui,{css:[gS.Nx.root],background:"default",children:(0,f.FD)(i4.S,{css:gS.Nx.loading,children:[(0,f.Y)(s5.A,{color:ry.LU.foregroundDimmer}),(0,f.Y)(ac.EY,{color:"dimmer",multiline:!1,children:"Loading..."})]})}):(0,f.FD)(o3.ui,{css:gS.Nx.root,background:"default",children:[(0,f.Y)(i4.S,{css:[gS.Nx.header,x&&gS.Nx.header_mobile],children:(0,f.Y)(i4.S,{css:gS.Nx.titleContainer,children:(0,f.Y)(ac.EY,{variant:"subheadDefault",multiline:!1,children:"Team Multiplayers"})})}),$?(0,f.Y)(i4.S,{css:gS.Nx.searchContainer,children:(0,f.Y)(mt.A,{existingUsernames:T,onSubmit:function(e){if(!F){if(g4()(e))return void _(e);U({variables:{input:{replId:y,target:{method:c9.LIG.Username,value:e},level:c9.Hy.Rw}}})}},isDisabled:I})}):null,!$&&O?(0,f.Y)(i4.S,{px:16,children:(0,f.Y)(mr.d,{iconLeft:(0,f.Y)(mi.A,{}),text:'You can add people to this App by inviting them to the "'.concat(null==P?void 0:P.displayName,'" Friends Team.'),href:"/teams/".concat(null==P?void 0:P.username),target:"_blank"})}):null,(0,f.Y)(o7.a,{isOpen:!!A,onRequestClose:function(){return _(null)},children:A?(0,f.Y)(me,{email:A,onInvite:function(){U({variables:{input:{replId:y,target:{method:c9.LIG.Email,value:A},level:c9.Hy.Rw}}}),_(null)},onCancel:function(){return _(null)}}):null}),(0,f.FD)(o3.ui,{css:gS.Nx.userList,children:[(null==L?void 0:L.length)?(0,f.FD)(i4.S,{css:gS.Nx.userGroup.root,children:[(0,f.Y)(gS.jl,{title:"Pending Invitations",color:ry.LU.outlineStrongest,count:G}),null==L?void 0:L.map(function(e){return(0,f.Y)(mn.A,{canEditMultiplayers:H||!1,email:e.email,isPendingInvitation:!0,replId:y},e.email)})]}):null,M.length?(0,f.FD)(i4.S,{css:gS.Nx.userGroup.root,children:[(0,f.Y)(gS.jl,{title:"External Guests",color:ry.LU.outlineStrongest,count:null==M?void 0:M.length,tooltip:"External Guests are not members of your team and were invited via a Join Link or by username."}),M.map(function(e){return(0,f.Y)(mn.A,{canEditMultiplayers:H||!1,isPendingInvitation:!1,replId:y,user:e},e.id)})]}):null,z.length?(0,f.FD)(i4.S,{css:gS.Nx.userGroup.root,children:[(0,f.Y)(gS.jl,{title:"Online Members",color:ry.LU.greenStrongest,count:null==z?void 0:z.length}),z.map(function(e){return(0,f.Y)(mn.A,{isPendingInvitation:!1,canEditMultiplayers:!!H,replId:y,user:e},e.id)})]}):null,W.length?(0,f.FD)(i4.S,{css:gS.Nx.userGroup.root,children:[(0,f.Y)(gS.jl,{title:"Offline Members",color:ry.LU.outlineStrongest,count:null==W?void 0:W.length}),W.map(function(e){return(0,f.Y)(mn.A,{isPendingInvitation:!1,canEditMultiplayers:!!H,replId:y,user:e},e.id)})]}):null,B.length?(0,f.FD)(i4.S,{css:gS.Nx.userGroup.root,children:[(0,f.Y)(gS.jl,{title:"Admins",color:ry.LU.accentPrimaryStronger,count:B.length}),B.map(function(e){return(0,f.Y)(mn.A,{canEditMultiplayers:!1,isPendingInvitation:!1,user:e,replId:y},e.id)})]}):null,j||I?null:(0,f.Y)(ac.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Only admins can add and remove members to multiplayer"})]})]})}var ma=function(){var e=(0,fw.A)(),n=e.showPrivateUpsell,t=e.refetch,r=(0,p._)((0,g.useState)(!1),2),i=r[0],o=r[1];return n?(0,f.FD)(i4.S,{px:12,children:[(0,f.Y)(i4.S,{tag:"button",css:ml.bannerWrapper,onClick:function(){return o(!0)},children:(0,f.Y)(pp.N,{icon:(0,f.Y)(cm.A,{}),colorway:"yellow",text:"This App is publicly visible. Upgrade for unlimited private Apps, better AI, more storage, speed, and more."})}),(0,f.Y)(fy.default,{isOpen:i,onClose:function(){return o(!1)},onPurchaseComplete:function(){return t()},reloadPageAfterPurchaseComplete:!0,type:"purchase",contextualUpsell:(0,f.FD)(f.FK,{children:[(0,f.Y)(ac.EY,{variant:"subheadBig",children:"Upgrade for private Apps"}),(0,f.Y)(ac.EY,{multiline:!0,children:"Keep your code secure and private"})]}),headingText:"Upgrade for private Apps",subHeadingText:"Keep your code secure and private",analyticsContext:{upgrade:{context:"workspace_multiplayer_header"}},highlightUpsell:"replLimit"})]}):null},ml=(0,rw.x)({bannerWrapper:[i2.wp.cursor.pointer,i2.wp.borderRadius(),i2.wp.textAlign.left]}),mc=t(83585),mu=(0,rw.x)({self:[i2.wp.borderRadius(8),i2.wp.align.stretch,i2.wp.flex.growAndShrink(1),i2.wp.maxHeight("calc(100vh - ".concat(mc.uF+12,"px)")),i2.wp.backgroundColor.backgroundDefault]});let ms=function(e){var n,t=e.replId,r=e.handleUpgradeTriggered,i=e.isTeamRepl,o=e.org;return n=o?(0,f.Y)(gK,{replId:t}):i?(0,f.Y)(mo,{replId:t}):(0,f.Y)(gS.Ay,{replId:t,handleUpgradeTriggered:r}),(0,f.FD)(i4.S,{css:mu.self,py:12,gap:12,children:[n,o&&"personal"!==o.type?null:(0,f.Y)(ma,{}),o?null:(0,f.FD)(f.FK,{children:[(0,f.Y)(pM.a,{}),(0,f.Y)(gY.A,{replId:t})]})]})};var md={owner:"Owner",editor:"Can edit"};function mp(){var e=(0,v._)(["\n  fragment UsersOnlineOverflowMenuUser on User {\n    id\n    username\n    image\n  }\n"]);return mp=function(){return e},e}function mf(){var e=(0,v._)(["\n  query UsersOnlineOverflowMenu($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        user {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n        multiplayers {\n          id\n          ...UsersOnlineOverflowMenuUser\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n  ","\n"]);return mf=function(){return e},e}var mh={},mg=(0,y.J1)(mp()),mm=(0,y.J1)(mf(),mg),mv=t(27469),my=(0,rw.x)({container:[i2.wp.pl(8),i2.wp.pr(16),i2.wp.py(4),i2.wp.flex.row,i2.wp.align.center,i2.wp.justify.start],button:[i2.wp.display.flex,i2.wp.align.center],img:[i2.wp.width(32),i2.wp.height(32),i2.wp.borderRadius("full"),i2.wp.backgroundColor.white,i2.wp.border({width:3,style:"solid"}),{objectFit:"cover"}],usernameContainer:[i2.wp.display.flex,i2.wp.flex.column,i2.wp.justify.center,i2.wp.ml(8),i2.wp.flex.growAndShrink(1),i2.wp.colWithGap(2)]});let mw=function(e){var n=e.id,t=e.username,r=e.image,i=e.isOwner,o=e.color,a=e.hideModal,l=e.canClickAvatar,c=e.isCurrentUser,u=e.onAvatarClick,s=function(){l&&(u({username:t,id:n}),a())};return(0,f.FD)("div",{css:[my.container,i&&pS.b.listItem],style:(0,m._)({cursor:l?"pointer":"auto"},l&&pS.b.listItem),role:"button",onClick:s,onKeyDown:s,tabIndex:0,children:[(0,f.FD)("div",{css:my.button,children:[(0,f.Y)(cT.A,{src:r,alt:"",css:my.img,style:{borderColor:o},width:32,height:32}),l?(0,f.FD)(mv.s,{children:["Observe ",t]}):null]}),(0,f.FD)("div",{css:my.usernameContainer,children:[(0,f.FD)(ac.EY,{multiline:!1,children:["@",t,c?" (you)":null]}),(0,f.Y)(ac.EY,{variant:"small",color:"dimmer",multiline:!1,children:i?md.owner:md.editor})]})]})};var mb=(0,rw.x)({loaded:[i2.wp.maxHeight(330),{overflowY:"auto"}]});let mx=function(e){var n,t,r=e.replId,i=e.activeUsers,o=e.hideModal,a=e.onAvatarClick,l=(n={variables:{replId:r}},t=(0,m._)({},mh,n),w.I(mm,t)),c=l.data,u=l.loading,s=l.error;if(u)return(0,f.Y)(i4.S,{p:32,row:!0,justify:"center",children:(0,f.Y)(s5.A,{})});if(s)return(0,f.Y)("div",{children:s.message});if((null==c?void 0:c.repl.__typename)==="Repl"){var d=c.repl,p=c.currentUser,h=d.user,g=h&&i.find(function(e){return e.username===h.username}),v=d.multiplayers.filter(function(e){var n;return e&&(n=e.id,i.some(function(e){return e.id===n}))}).slice(2);return(0,f.Y)(i4.S,{css:mb.loaded,py:8,gap:8,children:(0,f.FD)(i4.S,{children:[h?(0,f.Y)(mw,(0,td._)((0,m._)({},h),{color:g?g.color:"transparent",isOwner:!0,hideModal:o,isCurrentUser:h.id===(null==p?void 0:p.id),canClickAvatar:!!g&&h.id!==(null==p?void 0:p.id),onAvatarClick:a})):null,v.map(function(e){if(!e)throw Error("Expected user");var n=i.find(function(n){return n.username===e.username});if(!n)throw Error("Expected user online");var t=e.id!==(null==p?void 0:p.id);return(0,f.Y)(mw,(0,td._)((0,m._)({isCurrentUser:e.id===(null==p?void 0:p.id)},e),{canClickAvatar:t,color:n.color,hideModal:o,isOwner:!1,onAvatarClick:a}),"chat-user-list-".concat(e.username))})]})})}return(null==c?void 0:c.repl.__typename)==="ReplRedirect"?(0,f.FD)("div",{children:["This App has moved to"," ",(0,f.Y)("a",{href:c.repl.replUrl,children:c.repl.replUrl})]}):(null==c?void 0:c.repl.__typename)==="SubscriptionExpiredError"?(0,f.FD)("div",{children:["Your subscription has expired.",(0,f.Y)("a",{href:"/pricing",children:"Upgrade here"})]}):null};var mY=t(72457),mS=t(3480);let mA=function(e){var n=e.isOpen,t=e.hideModal,r=e.children,i=e.onAvatarClick,o=(0,ec.A)(),a=(0,mY.Q4)();return(0,f.FD)(mS.A,{isOpen:n,padding:0,onClickOutside:t,children:[r,(0,f.Y)(mx,{replId:o,activeUsers:a,hideModal:t,onAvatarClick:i})]})};var m_=t(17545),mk=(0,rw.x)({root:[i2.wp.backgroundColor.backgroundDefault],userStack:[(0,tg._)({},i2.$_.max(sm.LO.mobileMax+100),[i2.wp.display.none])],userStackListItem:{listStyleType:"none"},overflowContainer:{backgroundColor:"transparent"},overflowButton:[i2.wp.borderRadius("full"),i2.wp.minWidth(24),i2.wp.height(24),i2.wp.fontSize(10),i2.wp.border({color:ry.LU.outlineDefault})]});function mC(e){var n=(0,p._)((0,g.useState)(!1),2),t=n[0],r=n[1],i=(0,rn.Q4)();if(0===i.length)return null;var o=i.slice(0,2),a=i.length-2;return(0,f.Y)(i4.S,{css:mk.root,row:!0,align:"center",children:(0,f.FD)(i4.S,{tag:"ul",css:mk.userStack,px:8,py:4,row:!0,gap:4,align:"center","aria-live":"polite","aria-relevant":"additions removals","aria-label":"online users",children:[o.map(function(n){return(0,f.Y)("li",{css:mk.userStackListItem,children:(0,f.Y)(m_.A,{user:n,onClick:function(){return e.onAvatarClick(n)}})},n.id)}),a>0?(0,f.Y)("li",{css:mk.userStackListItem,children:(0,f.Y)(i4.S,{children:(0,f.Y)(mA,{isOpen:t,hideModal:function(){return r(!1)},onAvatarClick:e.onAvatarClick,children:(0,f.Y)(o3.ui,{background:"root",css:mk.overflowContainer,children:(0,f.Y)(al.$n,{size:"small",onClick:function(){return r(!t)},text:a.toString(),css:mk.overflowButton})})})})}):null]})})}function mI(){var e=o4(),n=(0,o0.Jn)(o8.id),t=n?"".concat(o2," (").concat(n,")"):o2;return(0,f.Y)(cf.K0,{alt:t,onClick:function(){return e()},size:32,children:(0,f.Y)(oT.A,{})})}var mD=t(30331),mE=t(22940),mR=t(48958),mU=t(5932),mF=t(62792),mP=t(43515),mO=t(8486),mT=(0,rw.x)({self:[i2.wp.position.relative,i2.wp.borderRadius(4,0,0,4)],dotWrapper:[i2.wp.position.absolute,i2.wp.top("-3px"),i2.wp.right("-3px"),i2.wp.width("10px"),i2.wp.height("10px"),i2.wp.borderRadius("full"),i2.wp.border({color:ry.LU.backgroundDefault,width:2})],dot:[i2.wp.width("100%"),i2.wp.height("100%"),i2.wp.borderRadius("full")]});function mL(e){var n=e.color;return(0,f.FD)(i4.S,{css:mT.self,children:[(0,f.Y)(mO.A,{}),(0,f.Y)(i4.S,{tag:"span",css:mT.dotWrapper,children:(0,f.Y)(i4.S,{tag:"span",css:mT.dot,style:{backgroundColor:n,boxShadow:"0 0 6px ".concat(n)}})})]})}var mM=(0,l7.AH)([i2.wp.flex.growAndShrink(1),i2.wp.borderRadius(4,0,0,4),(0,tg._)({},i2.$_.max("tabletMin"),{"div span":[i2.wp.display.none],"div svg":[i2.wp.mr(0)]})]),mG=(0,l7.AH)([mM,i2.wp.borderRadius()]),mN={base:{self:mM,loading:(0,l7.AH)([mM,pK.S.backgroundPulse()])},rounded:{self:mG,loading:(0,l7.AH)([mG,pK.S.backgroundPulse()])}};function mB(e){var n=e.text,t=e.icon,r=e.disabled,i=e.rounded,o=e.onClick,a=e.tooltip,l=e.loading,c=(0,f.Y)(al.$n,{text:n,iconLeft:t,css:mN[i?"rounded":"base"][l?"loading":"self"],disabled:r,onClick:o});return a?(0,f.Y)(l3.m_,{tooltip:a,children:c}):c}function mH(){var e,n,t,r,i,o,a=(0,mE.u)(),l=(0,mR.jp)(),c=!1,u=!1;switch(a){case mU.d.Ready:case mU.d.Suspended:case mU.d.ProcessingLifecycleCommand:i="Deploy",o=(0,f.Y)(mO.A,{});break;case mU.d.Loading:i="Deploy",o=(0,f.Y)(mO.A,{}),c=!0,u=!0;break;case mU.d.Preparing:i="Preparing",o=(0,f.Y)(mO.A,{}),c=!0,u=!0;break;case mU.d.PreparingDatabase:l?(i="Approve",o=(0,f.Y)(dW.A,{color:ry.LU.orangeStronger}),u=!0,c=!1):(i="Preparing",o=(0,f.Y)(s5.A,{}),u=!0,c=!0);break;case mU.d.Deploying:i="Deploying",o=(0,f.Y)(s5.A,{}),u=!0;break;default:(0,so.A)(a)}var s=oh(),d=!!(0,mP.Q)(),h=(e=(0,oM.A)().dotReplit,t=(n=(0,p._)((0,g.useState)(null),2))[0],r=n[1],(0,g.useEffect)(function(){return e.watch(function(e){var n;if(e.error)return r(null);r((null==(n=e.config.deployment)?void 0:n.target)||null)})},[e]),t);return(0,f.Y)(mB,{text:i,icon:o,onClick:function(){a===mU.d.Ready&&(0,oE.u4)(oE.AZ.DEPLOY_PROJECT_SELECTED,{source:"deploy_button",has_agent_session:d}),s({pane:{type:"deployments",flow:{skipIntro:null!==h&&d,isAgentDeployment:null!==h&&d}}})},disabled:c,loading:u,rounded:!0})}var mz={self:i2.wp.rowWithGap(1),open:(0,l7.AH)([i2.wp.borderRadius(0,4,4,0),i2.wp.px(4)])};function mW(){var e,n,t,r=(0,mE.u)(),i=(0,mD.Jz)(),o=(0,mD.GQ)(),a=oh(),l=(0,mD.Tp)({openDeploymentsPane:function(){a({pane:{type:"deployments"}})}}).redeployWithNoNewOptions,c=(0,ad.A)().showError,u=(0,mR.jp)(),s=(0,Z.jt)(),d=(e=(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:if(r===mU.d.Deploying||r===mU.d.Suspended||r===mU.d.ProcessingLifecycleCommand||r===mU.d.Preparing||r===mU.d.PreparingDatabase)return a({pane:{type:"deployments"}}),[2];if(m&&(v(void 0),m===c9.nHS.Failed)||i)return a({pane:{type:"deployments",data:{view:mF.P.Deployment}}}),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,l({hasAgentSession:s})];case 2:return e.sent(),[3,4];case 3:return c(e.sent().message),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),h=(0,p._)((0,g.useState)(void 0),2),m=h[0],v=h[1];(0,g.useEffect)(function(){if(o&&"HostingBuildDeployStatusAction"===o.__typename)switch(o.status){case c9.nHS.Success:case c9.nHS.Failed:v(o.status)}},[o]),(0,g.useEffect)(function(){r===mU.d.Deploying&&v(void 0)},[r]);var y=void 0,w=!1,b=!1;switch(r){case mU.d.Ready:n="Redeploy",t=(0,f.Y)(mO.A,{}),m&&(m===c9.nHS.Success?(t=(0,f.Y)(mL,{color:ry.LU.accentPositiveDefault}),y="Success"):(t=(0,f.Y)(mL,{color:ry.LU.accentNegativeDefault}),y="An error occurred"));break;case mU.d.Suspended:n="Redeploy",t=(0,f.Y)(mL,{color:ry.LU.greyDefault}),y="Deployment suspended";break;case mU.d.Loading:n="Redeploy",t=(0,f.Y)(mO.A,{}),w=!0,b=!0;break;case mU.d.ProcessingLifecycleCommand:n="Redeploy",t=(0,f.Y)(mL,{color:ry.LU.orangeStronger}),b=!0,y="Updating deployment";break;case mU.d.Preparing:n="Preparing",t=(0,f.Y)(s5.A,{}),b=!0,w=!0;break;case mU.d.PreparingDatabase:u?(n="Approve",t=(0,f.Y)(dW.A,{color:ry.LU.orangeStronger}),b=!0,w=!1):(n="Preparing",t=(0,f.Y)(s5.A,{}),b=!0,w=!0);break;case mU.d.Deploying:n="Deploying",t=(0,f.Y)(s5.A,{}),b=!0;break;default:(0,so.A)(r)}return i&&(n="Error",t=(0,f.Y)(mL,{color:ry.LU.accentNegativeDefault}),y=i),(0,f.FD)(i4.S,{css:mz.self,children:[(0,f.Y)(mB,{text:n,icon:t,tooltip:y,onClick:d,disabled:w,loading:b}),(0,f.Y)(l3.m_,{tooltip:"Open Deployments pane",children:(0,f.Y)(al.$n,{text:"",iconLeft:(0,f.Y)(uR.A,{}),onClick:function(){a({pane:{type:"deployments"}})},css:mz.open})})]})}var mj=function(){var e=oh();return(0,f.Y)(al.$n,{text:"Redeploy",iconLeft:(0,f.Y)(mO.A,{}),onClick:function(){e({pane:{type:"deployments"}})}})};function m$(){var e=(0,mD.i$)(),n=(0,mD.cF)(),t=(0,mD.mj)().deployability;return e&&n?t.deploy.isAuthorized||t.redeploy.isAuthorized?(0,f.Y)(mW,{}):(0,f.Y)(mj,{}):(0,f.Y)(mH,{})}var mZ=t(73677),mq=t.n(mZ),mV=t(7357),mK=t(55117),mJ=t(14245);function mQ(e){var n=e?1560:1400;return(0,rw.x)({desktopButton:(0,tg._)({},i2.$_.max(n),[i2.wp.display.none]),mobileButton:(0,tg._)({},i2.$_.min(n),[i2.wp.display.none])})}let mX=function(e){var n,r,i=e.lesson,o=(0,ad.A)().showError,a=(0,mK.mO)().fireCircularBurstFrom,l=(0,g.useRef)(null),c=(0,mV.j)(),u=(0,p._)((0,g.useState)(!1),2),s=u[0],d=u[1],h=(0,fw.A)().showPrivateUpsell,v=(0,p._)((n={onError:function(){return o("Something went wrong")},onCompleted:function(e){var n,t;(null==(n=e.completeUserCourseLesson)?void 0:n.__typename)!=="UpdatedUserCourseLesson"?o((null==(t=e.completeUserCourseLesson)?void 0:t.message)||"Something went wrong"):e.completeUserCourseLesson.userCourseLesson.id===i.id?(l.current&&!c&&a({element:l.current}),d(!0)):o("Something went wrong")}},r=(0,m._)({},dc,n),b.n(ds,r)),2),y=v[0],w=v[1].loading,x="Lesson completed \uD83C\uDF89",Y="Mark lesson completed",S=function(){(0,mJ._)({action:"completed",lessonSlug:i.lessonSlug,courseSlug:i.course.courseSlug}),y({variables:{input:{userLessonId:i.id}}})},A=mq()(function(){return Promise.all([t.e(3196),t.e(8787)]).then(t.bind(t,28787))},{loadableGenerated:{webpack:function(){return[28787]}},ssr:!1});return(0,f.FD)(f.FK,{children:[null!==i.timeCompleted?(0,f.FD)(f.FK,{children:[(0,f.Y)(al.$n,{ref:l,disabled:!0,text:x,colorway:"primary",css:mQ(h).desktopButton}),(0,f.Y)(l3.m_,{tooltip:x,css:mQ(h).mobileButton,children:(0,f.Y)(al.$n,{ref:l,disabled:!0,text:"\uD83C\uDF89",colorway:"primary"})})]}):(0,f.FD)(f.FK,{children:[(0,f.Y)(al.$n,{onClick:S,text:w?"Verifying":Y,colorway:"primary",loading:w,css:mQ(h).desktopButton}),(0,f.Y)(l3.m_,{tooltip:Y,css:mQ(h).mobileButton,children:(0,f.Y)(al.$n,{iconLeft:(0,f.Y)(pj.A,{}),onClick:S,text:"",colorway:"primary",loading:w})})]}),(0,f.Y)(o7.a,{isOpen:s,onRequestClose:function(){return d(!1)},children:(0,f.Y)(A,{lessonSlug:i.lessonSlug,courseSlug:i.course.courseSlug})})]})};var m0=t(4163);function m1(e){var n,t=e.lesson,r=(n="tutorial",ro((0,J.A)(function(){return(0,eu.eU)(function(e){return e(e7).find(function(t){return!t.isHidden&&e(t.dataAtom).type===n})})},[n]))),i=rl(ij),o=(0,fw.A)().showPrivateUpsell,a="Show tutorial",l=(0,f.Y)(m0.A,{}),c=function(){return i()};return r?(0,f.Y)(mX,{lesson:t}):(0,f.FD)(f.FK,{children:[(0,f.Y)(al.$n,{colorway:"primary",iconLeft:l,text:a,css:mQ(o).desktopButton,onClick:c}),(0,f.Y)(l3.m_,{tooltip:a,css:mQ(o).mobileButton,children:(0,f.Y)(al.$n,{colorway:"primary",iconLeft:l,text:"",onClick:c})})]})}var m2=t(79340),m4=t(20048),m5=t(11798);function m7(e){var n=e.repl,t=e.currentUser,r=e.hideRightActions;return(0,f.FD)(i4.S,{row:!0,gap:6,align:"center",justify:"end",css:i2.wp.noDragRegion,children:[(0,f.Y)(pa,{}),r?null:(0,f.FD)(f.FK,{children:[(0,f.Y)(mI,{}),(0,f.Y)(m6,{repl:n})]}),(0,f.Y)(m8,{currentUser:t,hideNotifications:r})]})}var m3={socialGroup:(0,l7.AH)([i2.wp.rowWithGap(1),i2.wp.align.stretch,i2.wp.borderRadius(),i2.wp.overflow("hidden")]),invitePopover:(0,l7.AH)([i2.wp.width(400)]),inviteButton:(0,l7.AH)([pS.b.filled,(i={borderTopLeftRadius:0,borderBottomLeftRadius:0},(0,tg._)(i,i2.$_.max("tabletMax"),{svg:[i2.wp.mr(0)],span:[i2.wp.display.none]}),(0,tg._)(i,'&[aria-expanded="true"]',{backgroundColor:ry.LU.interactiveBackgroundActive}),i)])};function m6(e){var n,t,r,i,o,a,l,c,u,s=e.repl,d=(0,p._)((0,g.useState)(!1),2),h=d[0],m=d[1],v=(0,p._)((0,g.useState)(!1),2),y=v[0],w=v[1],b=oh(),x=(n=ov(),t=(0,oM.A)().presence,r=(0,tG.w1)(),i=(0,iV.A)(n),(0,g.useCallback)(function(e){var n=e.username,o=e.id,a=t.getFollowedUser();if((null==a?void 0:a.username)===n)return void t.unfollowUser();t.followUser(n);var l=t.getActiveFileForUser(o),c=r();l&&l!==c&&i.current({path:l})},[i,r,t])),Y=(0,lL.oR)(),S=(null==(o=s.owner)?void 0:o.__typename)==="Team",A=s.authorizations.viewPermissions.isAuthorized,_=(null==(a=s.org)?void 0:a.type)==="team"?"Access":"Invite",k=(null==s||null==(c=s.authorizations)||null==(l=c.viewDeploymentConfig)?void 0:l.isAuthorized)&&!Y;(0,o0.SJ)(function(){return[uM.toggleInviteDialog.id,function(){return m(function(e){return!e})}]},[m]);var C=(0,o0.Jn)(uM.toggleInviteDialog.id);return o9({match:oU.G2,data:{type:"action",label:"Invite",icon:(0,f.Y)(mi.A,{}),description:"Open invite dialog",keyboardShortcut:C,run:function(){m(!0)}}}),(0,f.FD)(f.FK,{children:[(null==s?void 0:s.lesson)?(0,f.Y)(m1,{lesson:s.lesson}):null,(0,f.FD)(o3.ui,{css:m3.socialGroup,background:"root",children:[(0,f.Y)(mC,{onAvatarClick:x}),A?(0,f.Y)(f.FK,{children:(0,f.Y)(i4.S,{css:{"&:only-child .invite-button":[i2.wp.borderRadius()]},children:(0,f.FD)(dG.Wv,{isOpen:h,placement:"bottom end",label:_,css:m3.invitePopover,onOpenChange:function(e){if(h&&!y)return void m(!1);e&&(0,oE.u4)(oE.AZ.INVITE_MODAL_OPENED,{replId:s.id,source:"replEnvironment"}),m(e)},children:[(0,f.Y)(al.$n,{iconLeft:(0,f.Y)(m5.A,{}),css:m3.inviteButton,className:"invite-button",text:_,"aria-expanded":h}),(0,f.Y)(ms,{handleUpgradeTriggered:function(e){return w(e)},replId:s.id,isTeamRepl:S,org:null!=(u=s.org)?u:void 0})]})})}):null]}),k&&s?(0,f.Y)(i4.S,{children:(0,f.Y)(m$,{})}):null,Y?(0,f.Y)(al.$n,{text:"Extension Devtools",iconLeft:(0,f.Y)(lB.A,{}),onClick:function(){b({pane:{type:"extensionDevtools"}})}}):null]})}function m8(e){var n=e.currentUser,t=e.hideNotifications,r=(0,h.useRouter)(),i=(0,ut.A)();return(0,f.Y)(f.FK,{children:i?(0,f.Y)(gx.L,{}):(0,f.FD)(f.FK,{children:[t?null:(0,f.Y)(i4.S,{row:!0,children:(0,f.Y)(m4.A,{pathname:r.pathname,showCount:!1})}),(0,f.Y)(m2.Ay,{currentUser:n,hideTeamInHeader:!0})]})})}var m9=t(52980),ve=t.n(m9);let vn=(0,g.memo)(function(e){var n,t,r,i=e.isAgentOnboarding,o=void 0!==i&&i,a=(n={variables:{id:(0,ec.A)()},context:{noBatch:!0}},t=(0,m._)({},dh,n),w.I(dv,t)).data,l=(null==a?void 0:a.repl.__typename)==="Repl"?a.repl:null,c=null==a?void 0:a.currentUser,u=(0,ut.A)(),s=(0,dy.d0)(),d=oS(),p="centered"===d||"centeredVisualPlanner"===d,h=(0,Z.jt)()&&(null==l||null==(r=l.config)?void 0:r.isInPlanningPhase)===!0;return l&&c?(0,f.FD)(i4.S,{tag:"header",py:8,px:12,pl:8,clsx:[ve().root,(0,tg._)({},ve().desktopAppWindowsOs,u&&s)],children:[(0,f.Y)("div",{clsx:(0,tg._)({},ve().opaqueOnHover,p),children:(0,f.Y)(gs,{repl:l,currentUser:c,isAgentOnboarding:o,isAgentCentered:p})}),(0,f.Y)(vt,{isAgentCentered:p,isAgentOnboarding:o,isVisualPlanningLayout:h}),(0,f.Y)("div",{clsx:(0,tg._)({},ve().opaqueOnHover,p),children:(0,f.Y)(m7,{repl:l,currentUser:c,hideRightActions:p||o||h})})]}):null});function vt(e){var n=e.isAgentCentered,t=e.isAgentOnboarding,r=e.isVisualPlanningLayout,i=(0,Z.jt)(),o=(0,N._P)({controlName:"flag-dont-sue-us-tim",logFlagToAnalytics:!1}),a=(0,dw.A)();return r?(0,f.Y)(gw,{}):n||t?(0,f.Y)(i4.S,{}):(null==a?void 0:a.status)==="error"||(null==a?void 0:a.status)==="rebuilding-after-error"?(0,f.Y)(gh,{nixState:a}):i&&o?(0,f.Y)(pi,{}):(0,f.Y)(ga,{attachTourRefs:!0})}var vr=(0,rb.v)(["opacity","pointerEvents"]),vi=vr.cssVars,vo=vr.styleTokens,va=(0,l7.i7)({from:{transform:"translateY(-20%)"},to:{transform:"translateY(0)"}}),vl=(0,l7.i7)({from:{opacity:0},to:{opacity:1}}),vc={root:(0,l7.AH)([i2.wp.width("100%"),i2.wp.top(0),i2.wp.left(0),i2.wp.px(12),i2.wp.pl(8),i2.wp.pt(4),i2.wp.position.absolute,i2.wp.dragRegion,i2.wp.noSelect,i2.wp.flex.row,i2.wp.justify.spaceBetween,{alignItems:"center",pointerEvents:vo.pointerEvents,opacity:vo.opacity},{"@media(prefers-reduced-motion: no-preference)":{animation:"".concat(va," 0.2s ease-in-out, ").concat(vl," 0.2s ease-in-out")},animation:"".concat(vl," 0.2s ease-in-out")}]),left:(0,l7.AH)([i2.wp.minWidth(100),i2.wp.align.start]),right:(0,l7.AH)([i2.wp.minWidth(100),i2.wp.align.end])};let vu=(0,g.memo)(function(e){var n,t=e.doesBonsaiSupportWorkspace2,r=e.isAgentOnboarding,i=oS(),o="centered"===i||"centeredVisualPlanner"===i||void 0!==r&&r;return t?(0,f.FD)(i4.S,{style:(n={},(0,tg._)(n,vi.opacity,o?.5:1),(0,tg._)(n,vi.pointerEvents,o?"none":"all"),n),tag:"header",css:vc.root,children:[(0,f.Y)(i4.S,{css:vc.left}),o?(0,f.Y)(i4.S,{}):(0,f.Y)(ga,{attachTourRefs:!0}),(0,f.Y)(i4.S,{css:vc.right,children:o?null:(0,f.Y)(mI,{})})]}):null});var vs=t(31092);function vd(){var e=(0,v._)(["\n  query BrowserNotifications($username: String!) {\n    user: userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return vd=function(){return e},e}var vp=(0,y.J1)(vd());function vf(){return(vf=(0,tw._)(function(e){var n,t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:if(null===tx.V)return[2];return[4,tx.V.query({query:vp,variables:{username:e}})];case 1:return[2,null==(t=r.sent().data)||null==(n=t.user)?void 0:n.image]}})})).apply(this,arguments)}function vh(){return"Notification"in window?"true"===nu.A.get(vv,"string")?"dismissed":window.Notification.permission:"denied"}function vg(){return(vg=(0,tw._)(function(){return(0,tb.YH)(this,function(e){try{window.Notification.requestPermission().then()}catch(e){return[2,new Promise(function(e){window.Notification.requestPermission(function(n){e(n)})})]}return[2,window.Notification.requestPermission()]})})).apply(this,arguments)}function vm(){return(vm=(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return[4,function(){return vg.apply(this,arguments)}()];case 1:return e.sent(),vy(!1),[2]}})})).apply(this,arguments)}var vv="notifications/dismissedModal";function vy(e){nu.A.set(vv,String(e))}var vw={};function vb(e){return vx.apply(this,arguments)}function vx(){return(vx=(0,tw._)(function(e){var n,t,r,i,o,a,l,c,u,s,d;return(0,tb.YH)(this,function(p){switch(p.label){case 0:if(n=e.title,t=e.body,r=e.badge,i=e.icon,o=e.iconByUsername,a=e.tag,l=e.onClick,u=void 0===(c=e.cacheDuration)?0:c,!document.hidden&&document.hasFocus()||"granted"!==vh()||(s=Date.now(),a in vw&&vw[a]+u>s))return[2];if(!o)return[3,2];return[4,function(e){return vf.apply(this,arguments)}(o)];case 1:i=p.sent(),p.label=2;case 2:return d=new window.Notification(n,{body:t,badge:r||"/public/images/logo-grayscale.png",icon:i||"/public/images/icon-square.png",tag:a}),setTimeout(function(){d.close()},1e4),d.addEventListener("click",function(){window.focus(),d.close()}),l&&d.addEventListener("click",l),vw[a]=s,[2]}})})).apply(this,arguments)}var vY=t(64287),vS={base:(0,l7.AH)([i2.wp.position.absolute,i2.wp.borderRadius(8),{pointerEvents:"none",border:"1px solid",transitionProperty:"border, box-shadow",transitionDuration:sm.Ds.duration,transitionTimingFunction:sm.Ds.timingFunction}]),floating:(0,l7.AH)([{borderColor:ry.LU.outlineDimmest},i2.wp.shadow(2)]),dragging:(0,l7.AH)([{borderColor:ry.LU.outlineStronger},i2.wp.shadow(3)]),active:(0,l7.AH)([{borderColor:ry.LU.outlineDimmer}])};let vA=(0,g.memo)(function(e){var n=ox(e.paneId),t=(0,u4.A)(n.isFloating),r=(0,u4.A)(n.isActive),i=(0,u4.A)(n.isBeingDragged),o=(0,u4.A)(n.hasBorder),a=(0,u4.A)(n.headerHeight);return o&&t?(0,f.Y)(i4.S,{style:{width:"calc(100% + 2px)",left:-1,height:"calc(100% + ".concat(a,"px + 2px)"),top:-(a+1)},css:[vS.base,t&&vS.floating,r&&vS.active,i&&vS.dragging]}):null});var v_=i4.D.div,vk=(0,l7.AH)([i2.wp.width("100%"),i2.wp.position.absolute,i2.wp.left(0),{cursor:"ns-resize",zIndex:1,":hover":{transform:"scaleY(4)"}}]),vC=(0,l7.AH)([i2.wp.height("100%"),i2.wp.position.absolute,i2.wp.top(0),{cursor:"ew-resize",zIndex:1,":hover":{transform:"scaleX(4)"}}]),vI=(0,l7.AH)([i2.wp.position.absolute,{zIndex:2,transform:"scale(2)",":hover":{transform:"scale(4)"}}]);function vD(e){return{transformOrigin:"".concat("topLeft"===e||"bottomLeft"===e?"right":"left"," ").concat("topLeft"===e||"topRight"===e?"bottom":"top")}}var vE={topLeft:(0,l7.AH)([i2.wp.top(0),i2.wp.left(0),vD("topLeft")]),topRight:(0,l7.AH)([i2.wp.top(0),i2.wp.right(0),vD("topRight")]),bottomLeft:(0,l7.AH)([i2.wp.bottom(0),i2.wp.left(0),vD("bottomLeft")]),bottomRight:(0,l7.AH)([i2.wp.bottom(0),i2.wp.right(0),vD("bottomRight")])};function vR(e){var n=e.edge,t=e.size,r=e.onPointerDown;if("top"===n||"bottom"===n)return(0,f.Y)(v_,{onPointerDown:r,style:(0,tg._)({height:t},n,-t),css:vk});if("right"===n||"left"===n)return(0,f.Y)(v_,{onPointerDown:r,style:(0,tg._)({width:t},n,-t),css:vC});var i="topLeft"===n||"bottomRight"===n?"nwse-resize":"nesw-resize";return(0,f.Y)(v_,{onPointerDown:r,style:{height:t,width:t,cursor:i},css:[vI,vE[n]]})}var vU=["bottom","right","left","bottomRight","bottomLeft"],vF=(0,g.memo)(function(e){var n=rl(iL);return(0,f.Y)(f.FK,{children:vU.map(function(t){return(0,f.Y)(vR,{size:8,edge:t,onPointerDown:function(r){(0,l1.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),vP=["top","right","left","topRight","topLeft"],vO=(0,g.memo)(function(e){var n=rl(iL);return(0,f.Y)(f.FK,{children:vP.map(function(t){return(0,f.Y)(vR,{size:8,edge:t,onPointerDown:function(r){(0,l1.j)(r,{start:function(){n({type:"start",paneId:e.paneId,edge:t})},move:function(e){n({type:"update",moveDelta:e.delta})},end:function(){n({type:"end"})}})}},t)})})}),vT=t(87603),vL=t(98913),vM=t(95253),vG=t(62611),vN=t.n(vG),vB=(0,ry.CK)("index.module.css",["--fixed-position-offset-x","--fixed-position-offset-y","--transform-x","--transform-y","--scale","--transform-origin-x","--width","--height","--transition-duration","--transition-delay","--transition-property","--opacity","--interaction-blanket-display","--pointer-events","--user-select","--border-top-left-radius","--border-top-right-radius","--border-gap","--iframe-pointer-events"]),vH=(0,g.memo)(function(e){var n,t,r,i,o,a,l,c=e.paneId,u=(0,nr.Vv)().Content,s=ox(c),d=(0,u4.A)(s.isHidden),p=(0,u4.A)(s.data),h=(0,u4.A)(s.isActive),m=(0,u4.A)(s.isCommitted);(0,tG.a$)(c,p);var v=(n=ap(),t=rl(rZ),r=rl(tq),i=rl(na),o=rl(tU),(0,J.A)(function(){return function(e){switch(e.operation){case"commit":i(c);return;case"open":if(e.floating)return void t(e.pane,{commit:!0,location:"center"});n({pane:e.pane,activate:!0,placement:e.secondary?{type:"secondary",relativeTo:c}:{type:"after",paneId:c}});return;case"replace":r({paneId:c,pane:e.pane});return;case"remove":o(e.pane.id);return;case"openPip":return;default:(0,so.A)(e)}}},[i,c,r,o,n,t])),y=(a=(0,oM.A)().container,l=(0,vT.A)({container:a,service:"panetracker"}).channel,(0,g.useCallback)(function(e,n){l&&l.send({paneMetricsTracker:{pane:e,flow:n}})},[l]));return(0,f.Y)(u,{pane:p,options:{paneId:c,isHidden:d,performPaneOperation:v,isActive:h,isCommitted:m,emitPaneMetrics:y}})});let vz=(0,g.memo)(function(e){var n=e.paneId,t=of(),r=function(e){var n,t=e.paneId,r=(0,p._)((0,vY.H)({accept:[tZ.pt.File,vL.N.Pane,vL.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e,n){var r=n.getClientOffset();r&&a.drag({pageX:r.x,pageY:r.y,over:t})},drop:function(e,n){var r=n.getClientOffset();if(r){if(e.type===vL.N.Pane)return void a.drop({type:"pane",paneId:e.paneId,pageX:r.x,pageY:r.y,over:t});if("nodes"===e.type){var i=(0,nr.u9)(e.nodes);i.length>0&&a.drop({type:"newPaneGroup",panes:i,pageX:r.x,pageY:r.y,over:t})}if(e.type===vL.N.NewPane){var o=e.pane;a.drop({type:"newPaneGroup",panes:[o],pageX:r.x,pageY:r.y,over:t})}}}}),2),i=r[0].isOver,o=r[1],a=(n=rl(rx),(0,g.useEffect)(function(){i||n(null)},[i,n]),{drag:rl(im),drop:rl(iv)});return o}({paneId:n}),i=ox(n),o=(0,u4.A)(i.isActive),a=(0,u4.A)(i.isFloating),l=(0,u4.A)(i.isModal),c=(0,u4.A)(i.paneType),u=(0,ut.A)(),s=(0,dy.vm)(),d=(0,dy.d0)(),h=(s||d)&&u?mc.uF:0,m=(0,g.useRef)(null);(0,rm.d)(m,i.size,function(e){var n,t=e.width,r=e.height;return n={},(0,tg._)(n,vB.width,t+"px"),(0,tg._)(n,vB.height,r+"px"),n}),(0,rm.d)(m,i.position,function(e){var n,t=e.x,r=e.y;return n={},(0,tg._)(n,vB.transformX,Math.round(t)+"px"),(0,tg._)(n,vB.transformY,Math.round(r)+"px"),n}),(0,rm.d)(m,i.scale,function(e){return(0,tg._)({},vB.scale,e.toString())}),(0,rm.d)(m,i.transformOriginXAtom,function(e){return(0,tg._)({},vB.transformOriginX,e)}),(0,rm.d)(m,i.viewportInset,function(e){var n,t=e.x,r=e.y;return n={},(0,tg._)(n,vB.fixedPositionOffsetX,-t+"px"),(0,tg._)(n,vB.fixedPositionOffsetY,-r-h+"px"),n}),(0,rm.d)(m,i.isHidden,function(e){var n;return n={},(0,tg._)(n,vB.opacity,e?"0":"1"),(0,tg._)(n,vB.pointerEvents,e?"none":"auto"),n}),(0,rm.d)(m,i.transition,function(e){var n,t,r;return r={},(0,tg._)(r,vB.transitionDuration,(null!=(n=null==e?void 0:e.duration)?n:0)+"ms"),(0,tg._)(r,vB.transitionDelay,(null!=(t=null==e?void 0:e.delay)?t:0)+"ms"),(0,tg._)(r,vB.transitionProperty,e?"transform, width, height, background-color, opacity":"none"),r}),(0,rm.d)(m,i.zIndex,function(e){return{"z-index":e.toString()}}),(0,rm.d)(m,i.disableInteractions,function(e){var n;return n={},(0,tg._)(n,vB.interactionBlanketDisplay,e?"block":"none"),(0,tg._)(n,vB.userSelect,e?"none":"auto"),(0,tg._)(n,vB.iframePointerEvents,e?"none":"auto"),n});var v=o?void 0:function(){t(n,{commit:"codeEditor"!==c})},y=(0,oj.kg)(),w=oS(),b="agentChat"===c&&("centered"===w||"centeredVisualPlanner"===w),x=b&&"centered"===w,Y=x?(0,tg._)({borderTopLeftRadius:4,borderTopRightRadius:4},vB.borderGap,"".concat(4,"px")):(0,tg._)({},vB.borderGap,"".concat(4,"px")),S=(0,ax.S)([m,a?void 0:r],{breadcrumb:"client/replEnvironmentDesktop/Pane/index.tsx:324"});return(0,f.Y)(f.FK,{children:(0,f.Y)(oj.ph,{value:n,children:(0,f.Y)(o3.ui,{role:"tabpanel",id:n,"aria-labelledby":"tab-".concat(n),innerRef:S,clsx:vN().root,style:Y,elevated:!b,children:(0,f.FD)(vM.A,{origin:"ErrorBoundary: PaneContainer",bsod:!0,tags:(0,J.A)(function(){return{paneType:c}},[c]),children:[(0,f.Y)(vA,{paneId:n}),(0,f.FD)(i4.S,{clsx:vN().container,onMouseDown:v,onContextMenu:v,innerRef:function(e){return y(n,e)},style:"agentChat"===c?{overflowX:"hidden"}:void 0,children:[(0,f.Y)(i4.S,{tabIndex:-1}),(0,f.Y)(vH,{paneId:n})]}),a&&!l?(0,f.Y)(vF,{paneId:n}):null,x?(0,f.Y)(i4.S,{clsx:vN().border}):null,(0,f.Y)(i4.S,{clsx:vN().interactionBlanket})]},n)})})})});var vW=t(17523);let vj=(0,g.memo)(function(){var e=ro(nD),n=(0,vW.A)();return e&&n?(0,f.Y)("div",{css:[i2.wp.position.absolute,i2.wp.width(e.width),i2.wp.height(e.height),i2.wp.borderRadius(4),{boxShadow:"0 0 0 3px ".concat(n.color),pointerEvents:"none",zIndex:3,transform:"translate(".concat(Math.round(e.x),"px, ").concat(Math.round(e.y),"px)")}]}):null});var v$=(0,rb.v)(["opacity","pointerEvents"]),vZ=v$.styleTokens,vq=v$.cssVars,vV={opacity:vZ.opacity,pointerEvents:vZ.pointerEvents};function vK(e){(0,rm.d)(e,ra(nc),function(e){var n,t;switch(e){case"centered":case"centeredVisualPlanner":return n={},(0,tg._)(n,vq.pointerEvents,"none"),(0,tg._)(n,vq.opacity,"0"),n;default:return t={},(0,tg._)(t,vq.pointerEvents,"auto"),(0,tg._)(t,vq.opacity,"1"),t}})}function vJ(){var e=(0,oM.A)().presence,n=(0,p._)((0,g.useState)(e.getFollowingUsers()),2),t=n[0],r=n[1];return(0,g.useEffect)(function(){return r(e.getFollowingUsers()),e.onFollowingUsersChanged(function(e){r(e.followingUsers)})},[e]),t}function vQ(){var e=(0,v._)(["\n  query WorkspaceActiveUserImages($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return vQ=function(){return e},e}var vX={},v0=(0,y.J1)(vQ()),v1=t(28746);function v2(e){var n,t,r=(n={variables:{userIds:e.slice(0,v1.Ry)},skip:0===e.length},t=(0,m._)({},vX,n),w.I(v0,t)).data;return r?new Map(r.usersByIds.map(function(e){return[e.id,e.image]})):null}var v4={root:(0,l7.AH)([i2.wp.rowWithGap(4),i2.wp.align.center]),text:(0,l7.AH)([i2.wp.flex.shrink(1),i2.wp.align.center]),username:(0,l7.AH)([i2.wp.flex.shrink(2),i2.wp.maxWidth(140),i2.wp.truncate])};function v5(){var e=vJ();return 0===e.length?null:1===e.length?(0,f.Y)(v7,{user:e[0]}):(0,f.FD)(ac.EY,{variant:"small",color:"dimmest",css:v4.text,multiline:!1,children:[e.length," users are observing you"]})}function v7(e){var n=e.user,t=n.id,r=n.username,i=n.color,o=v2([t]),a={id:t,username:r,color:i,image:null==o?void 0:o.get(t)};return(0,f.FD)(i4.S,{css:v4.root,children:[(0,f.Y)(g$.e,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,f.Y)(ac.EY,{variant:"small",color:"dimmer",css:v4.username,multiline:!1,children:r}),(0,f.Y)(ac.EY,{variant:"small",color:"dimmest",css:v4.text,multiline:!1,children:"is observing you"})]})}var v3={root:(0,l7.AH)([i2.wp.rowWithGap(4),i2.wp.align.center]),text:(0,l7.AH)([i2.wp.flex.shrink(1),i2.wp.align.center]),username:(0,l7.AH)([i2.wp.flex.shrink(2),i2.wp.maxWidth(140),i2.wp.truncate])};function v6(e){var n=e.id,t=e.username,r=e.color,i=v2([n]),o=(0,oM.A)().presence,a={id:n,username:t,color:r,image:null==i?void 0:i.get(n)};return(0,f.FD)(i4.S,{css:v3.root,children:[(0,f.Y)(g$.e,{size:16,src:a.image||null,username:a.username,ringColor:a.color}),(0,f.Y)(ac.EY,{css:v3.text,variant:"small",color:"dimmest",multiline:!1,children:"Observing"}),(0,f.Y)(ac.EY,{css:v3.username,variant:"small",color:"dimmer",multiline:!1,children:t}),(0,f.Y)(cf.K0,{alt:"Stop observing",size:18,onClick:function(){o.unfollowUser()},children:(0,f.Y)(uJ.A,{})})]})}var v8=(0,rw.x)({root:[i2.wp.height("100%"),i2.wp.border({color:ry.LU.outlineDimmest,direction:"bottom"}),i2.wp.highRes({borderBottomWidth:.5}),i2.wp.align.center]});function v9(e){var n,t,r,i=e.paneId,o=os(i),a=(n=(0,vW.A)(),t=op({paneId:i}),n&&t?n:null),l=(r=vJ(),op({paneId:i})&&r.length>0?r:null),c=(0,nr.xS)(o)?o.data.path:null,u=null;return(a&&(u=(0,f.Y)(v6,{id:a.id,username:a.username,color:a.color})),null!==u||l)?(0,f.FD)(i4.S,{css:v8.root,px:4,row:!0,gap:8,children:[l&&c?(0,f.Y)(v5,{}):null,u]}):null}var ye=(0,rw.x)({handle:[i2.wp.flex.growAndShrink(1),i2.wp.minWidth(16),i2.wp.height("100%"),i2.wp.border({direction:"bottom",color:ry.LU.outlineDimmest}),i2.wp.highRes({borderBottomWidth:.5})]});function yn(e){var n=e.paneGroupId,t=e.activeTabPaneId,r=om({paneGroupId:n}),i=r.isDragging,o=r.dnd,a=oy().toggleMaximizedPaneGroup,l=oY(n),c=(0,u4.A)(l.isMaximized),u=of();return o?(0,f.Y)(i4.S,{onDoubleClick:function(){a({paneGroupId:n})},title:c?"Double click to restore.":"Double click to maximize. Drag to move.",css:ye.handle,style:{cursor:c?void 0:i?"grabbing":"grab"},onPointerDown:function(e){u(t),!c&&"button"in e&&0===e.button&&(0,l1.j)(e,{start:o.start,move:o.update,end:o.end})}}):null}function yt(){return(0,f.Y)(i4.S,{css:ye.handle})}var yr=(0,rw.x)({container:[i2.wp.width("100%"),i2.wp.height("100%")],iconAndTitle:[i2.wp.height("100%"),i2.wp.align.center,i2.wp.border({direction:"bottom",color:ry.LU.outlineDimmest}),i2.wp.highRes({borderBottomWidth:.5})],text:[i2.wp.fontSize(13)]});function yi(e){var n=e.headerId,t=e.paneId,r=e.disableDrag,i=os(t),o=(0,nr.Vv)(),a=o.getTitle(i),l=o.Icon({pane:i,size:16});return(0,f.FD)(i4.S,{css:yr.container,row:!0,children:[(0,f.FD)(i4.S,{css:yr.iconAndTitle,pl:6,row:!0,gap:6,children:[l,(0,f.Y)(ac.EY,{css:yr.text,children:a})]}),void 0!==r&&r?(0,f.Y)(yt,{}):(0,f.Y)(yn,{paneGroupId:n,activeTabPaneId:t})]})}var yo=t(59597),ya=t(93582),yl=t(13539),yc=t(22074),yu=t(52367),ys=(0,rb.v)(["fontStyle","iconOpacity","tabTitleContainerPaddingRight","closeButtonOpacity","unsavedChanges","closeIconDisplay"]),yd=ys.cssVars,yp=ys.styleTokens,yf=i4.D.div,yh=(0,l7.AH)([i2.wp.display.inlineFlex,i2.wp.height("100%"),i2.wp.flex.row,i2.wp.align.center,i2.wp.position.relative,i2.wp.minWidth(ry.LU.space96),{userSelect:"none","& > span":[{"& > *":i2.wp.height("100%")},i2.wp.display.flex,i2.wp.flex.grow(1),i2.wp.flex.row,i2.wp.align.center,i2.wp.height("100%")]}]),yg=(0,l7.AH)([i2.wp.position.relative,i2.wp.cursor.pointer,i2.wp.align.center,i2.wp.rowWithGap(6),i2.wp.px(6),i2.wp.focusRing,i2.wp.flex.growAndShrink(1),{backgroundColor:"transparent",border:"none",font:"inherit",lineHeight:"normal",color:"inherit"}]),ym=(0,rw.x)({rootDragging:[i2.wp.width(0),i2.wp.visibility.hidden],root:[i2.wp.border({direction:"bottom",color:ry.LU.outlineDimmest}),i2.wp.highRes({borderBottomWidth:.5}),(0,tg._)({":not(:last-of-type)":[i2.wp.border({direction:"right",color:ry.LU.outlineDimmest}),i2.wp.highRes({borderRightWidth:.5})],":first-of-type > div":{borderTopLeftRadius:4,"[data-pane-tab-primary-button]":{borderTopLeftRadius:4},"[data-active-pane-line]":[{clipPath:"polygon(100% 0%, 100% 100%, 2.35px 100%, 3px 55%, 4px 13%, 5px 0%)"},i2.wp.highRes({clipPath:"polygon(100% 0%, 100% 100%, 1.85px 100%, 2.5px 55%, 3.5px 13%, 4.5px 0%)"})]},":last-of-type [data-active-pane-line]":[{width:"calc(100% + 1px)"},i2.wp.highRes({width:"calc(100% + 0.5px)"})]},i2.$_.canHover,[(o={},(0,tg._)(o,yd.closeButtonOpacity,0),(0,tg._)(o,"&:hover",(0,tg._)({},yd.closeButtonOpacity,1)),o)])],notificationDot:[i2.wp.top(3),i2.wp.right(0)],tabBaseDefault:[yh,i2.wp.color.foregroundDimmer,{backgroundColor:"transparent"}],tabBaseActive:[yh,i2.wp.color.foregroundDefault,{boxShadow:"0 1px 0 0 "+ry.LU.surfaceBackground,"data-pane-tab-primary-button":[i2.wp.transition.none,i2.wp.hover({boxShadow:"0 1px 0 0 "+ry.LU.interactiveBackground})]}],tabTitleContainer:[i2.wp.align.baseline,i2.wp.position.relative,{paddingRight:yp.tabTitleContainerPaddingRight}],tabTitle:[i2.wp.truncate,i2.wp.maxWidth(180),i2.wp.display.inlineBlock,i2.wp.fontSize(13),{fontStyle:yp.fontStyle,"::after":{display:"block",content:"attr(title)",height:"0",fontStyle:"normal",color:"transparent",overflow:"hidden",visibility:"hidden"}}],uniquePath:[i2.wp.truncate,i2.wp.maxWidth(180),i2.wp.display.inlineBlock,i2.wp.fontSize(12),i2.wp.color.foregroundDimmest,{fontStyle:yp.fontStyle}],tabIcon:[i2.wp.width(16),i2.wp.height(16),i2.wp.position.relative,{opacity:yp.iconOpacity}],buttonDefault:[pS.b.listItem,yg],buttonActive:[yg],activeLine:[i2.wp.height(1),i2.wp.top(0),i2.wp.left(-1),{position:"absolute",pointerEvents:"none",width:"calc(100% + 2px)",backgroundColor:ry.LU.accentPrimaryDefault},i2.wp.highRes({left:-.5,width:"calc(100% + 1px)"})],closeWrapper:[i2.wp.height("100%"),{button:[i2.wp.width(20),i2.wp.height("100%"),i2.wp.borderRadius(0),i2.wp.color.foregroundDimmer,(c={},(0,tg._)(c,i2.$_.canHover,[(l={},(0,tg._)(l,yd.unsavedChanges,"block"),(0,tg._)(l,yd.closeIconDisplay,"none"),(0,tg._)(l,"&:hover",(a={},(0,tg._)(a,yd.unsavedChanges,"none"),(0,tg._)(a,yd.closeIconDisplay,"block"),a)),l)]),(0,tg._)(c,"paddingBottom",3),c)]}],displayBlock:[i2.wp.display.block]}),yv=(0,g.memo)(function(e){var n=e.paneId,t=e.paneGroupId,r=e.isActive,i=e.selectTab,o=e.removePane,a=e.dragGroup,l=ox(n),c=(0,u4.A)(l.isCommitted),u=rl(na),s=os(n),d=(0,nr.Vv)(),h=d.getTitle(s),m=d.Icon({pane:s,size:16}),v=(0,u4.A)(l.isActivePane),y=(0,rn.F9)({paneType:s.type}),w=(0,tG.WM)((0,nr.xS)(s)?s.data.path:null),b=void 0;(0,nr.xS)(s)&&s.data.path&&(b=s.data.path);var x=(0,mV.j)(),Y=(0,g.useRef)(null),S=(0,p._)((0,yl.i)({type:vL.N.Pane,item:function(){var e,t=(null==(e=Y.current)?void 0:e.getBoundingClientRect().width)||80;return{type:vL.N.Pane,paneId:n,width:t}},collect:function(e){return{isDragging:e.isDragging()}}}),2),A=S[0].isDragging,_=S[1],k=rl(t1);(0,g.useEffect)(function(){return k(A)},[k,A]);var C=om({paneGroupId:t}).dnd,I=(0,g.useCallback)(function(e){if(1!==e.button){if(R.current=r,C&&a)return void(0,l1.j)(e,{start:C.start,move:C.update,end:C.end});r||(sJ.ZQ({category:"pane",message:"Tab clicked: "+s.type}),(0,oE.u4)(oE.AZ.WS_TAB_OPENED,{paneType:s.type}),i(n))}},[s.type,C,a,r,n,i]);(0,g.useEffect)(function(){r&&Y.current&&(0,yc.A)(Y.current,{behavior:x?"auto":"smooth",scrollMode:"if-needed"},!0)},[r,x,Y]);var D=function(e){var n,t,r,i,o,a=e.paneId,l=e.paneGroupId,c=(0,oj.gB)(),u=od(),s=su({paneId:a}),d=u1({paneId:a,paneGroupId:l}),p=(n=od(),t=rl(tu),r=rl(tc),i=rc(to),o=(0,g.useCallback)(function(e){var n,t,r;return n=i(),t=n.primaryTools,r=n.secondaryTools,t.some(function(n){return ts(n)===ts(e)})||(0,nr.xS)(e)||"commands"===e.type?"notAllowed":r.some(function(n){return ts(n)===ts(e)})?"remove":"add"},[i]),(0,g.useCallback)(function(){var e=n(a).pane,i=o(e);switch(i){case"notAllowed":return null;case"add":return{match:oU.G2,data:{label:"Add to dock",type:"action",icon:(0,f.Y)(oV.A,{}),run:function(){t({pane:e})}}};case"remove":return{match:oU.G2,data:{label:"Remove from dock",type:"action",icon:(0,f.Y)(sa.A,{}),run:function(){r(e.type)}}};default:(0,so.A)(i)}},[a,o,n,t,r])),h=u2(),m=(0,nr.Vv)();return(0,g.useCallback)(function(){var e=u(a).pane,n=c(a),t=function(e){return!!e&&(void 0===e?"undefined":(0,eR._)(e))==="object"&&"data"in e};return{data:{type:"context",label:"Search actions",icon:(0,f.Y)(m.Icon,{pane:e})},commands:function(){return[{data:{type:"group",key:"pane-actions"},commands:function(){var e,r;return(null!=(r=null==n||null==(e=n.commands)?void 0:e.flatMap(function(e){return e.commands}))?r:[]).filter(t)}},{data:{type:"group",key:"secondary"},commands:function(){return[p(),h(a),s].concat((0,eE._)(d)).filter(t)}}]}}},[c,m,u,a,s,d,p,h])}({paneId:n,paneGroupId:t}),E=(0,cc.EF)().onContextMenu,R=(0,g.useRef)(!1),U=(0,g.useMemo)(function(){if(r&&!c)return function(){R.current&&u(n)}},[u,r,c,n]),F=function(e){void 0===e?sJ.ZQ({category:"pane",message:"Tab closed: "+s.type}):sJ.ZQ({category:"pane",message:"Tab closed: "+s.type,data:{reason:e}}),(0,oE.u4)(oE.AZ.WS_TAB_CLOSED,{paneType:s.type}),o(n)};return(0,f.Y)(f.FK,{children:(0,f.Y)(yf,{ref:Y,css:A?ym.rootDragging:ym.root,onMouseUp:function(e){1===e.button&&(e.preventDefault(),e.stopPropagation(),F("middle click"))},children:(0,f.Y)(yb,{innerRef:a?void 0:_,uniquePath:w,title:h,icon:"commands"!==s.type?m:void 0,isActive:r,isActivePane:v,italicizeTitle:!c&&"commands"!==s.type,tooltip:b,paneId:n,indicatorColor:y,onClick:U,onContextMenu:function(e){return E(e,{command:D()})},onPointerDown:I,onClose:function(){F()}})})})}),yy=i4.D.button;function yw(e){var n=e.onClick,t=e.tabIndex,r=ym.displayBlock;return(0,f.Y)(cf.K0,{onClick:n,alt:"Close tab",tabIndex:t,size:12,children:(0,f.Y)(i4.S,{css:r,children:(0,f.Y)(uJ.A,{})})})}function yb(e){var n=e.title,t=e.uniquePath,r=e.onClick,i=e.onContextMenu,o=e.onClose,a=e.isActive,l=e.isActivePane,c=e.italicizeTitle,u=e.innerRef,s=e.icon,d=e.onPointerDown,h=e.paneId,m=e.indicatorColor,v=e.tooltip,y=e.detailsPill,w=(0,rn.eg)(),b=(0,g.useRef)(null),x=(0,p._)((0,ya.A9)(b,!1),4),Y=x[0],S=x[1],A=x[2],_=x[3];return(0,ya.xK)(S,b),(0,f.FD)(o3.ui,{elevated:a,innerRef:u,css:a?ym.tabBaseActive:ym.tabBaseDefault,children:[(0,f.Y)(l3.m_,{isDisabled:!v,tooltip:v,maxWidth:600,delay:"long",closeDelay:"none",children:(0,f.FD)(yy,{role:"tab",ref:b,tabIndex:Y,onKeyDown:A,onClick:function(e){_(),null==r||r(e)},onPointerDown:d,onContextMenu:i,css:a?ym.buttonActive:ym.buttonDefault,"aria-selected":a,"aria-controls":h,id:"tab-".concat(h),"data-pane-tab-primary-button":!0,children:[s?(0,f.Y)(i4.S,{style:(0,tg._)({},yd.iconOpacity,a?"1":"0.6"),css:ym.tabIcon,children:s}):null,(0,f.FD)(i4.S,{style:(0,tg._)({},yd.tabTitleContainerPaddingRight,m?"12px":"0px"),css:ym.tabTitleContainer,row:!0,gap:8,children:[(0,f.Y)(ac.EY,{multiline:!1,css:ym.tabTitle,title:n,style:(0,tg._)({},yd.fontStyle,c?"italic":"inherit"),children:n}),t?(0,f.Y)(ac.EY,{multiline:!1,css:ym.uniquePath,style:(0,tg._)({},yd.fontStyle,c?"italic":"inherit"),children:t}):null,m?(0,f.Y)(yu.b,{css:ym.notificationDot,color:m}):null,y]})]})}),l?(0,f.Y)(i4.S,{css:ym.activeLine,"data-active-pane-line":!0}):null,w?null:(0,f.Y)(i4.S,{style:{opacity:a?1:yp.closeButtonOpacity},css:ym.closeWrapper,children:(0,f.Y)(yw,{onClick:o,tabIndex:S?0:-1})})]})}var yx=(0,rw.x)({container:[i2.wp.height("100%"),i2.wp.width("100%")],newTabContainer:[i2.wp.height("100%"),i2.wp.pl(4),i2.wp.justify.center,i2.wp.align.center,i2.wp.border({direction:"bottom",color:ry.LU.outlineDimmest}),i2.wp.border({direction:"left",color:ry.LU.outlineDimmest}),{"& > button":[i2.wp.height(24),i2.wp.width(24)]},i2.wp.highRes({borderBottomWidth:.5,borderLeftWidth:.5})],tabScrollAreaRoot:[i2.wp.flex.row,i2.wp.align.center,i2.wp.height("100%"),i2.wp.overflowX("hidden"),i2.wp.overflowY("hidden"),{"--scrollbar-size":"6px"}],tabScrollAreaViewport:[i2.wp.height("100%"),{"& > div":{height:"100%",width:"max-content",display:"block !important"}}],tabScrollAreaScrollbar:[i2.wp.display.flex,i2.wp.backgroundColor.backgroundOverlay,i2.wp.height("var(--scrollbar-size)"),i2.wp.flex.column,{touchAction:"none",transition:"background 160ms ease-out",userSelect:"none","&:hover":{backgroundColor:ry.LU.backgroundOverlay}}],tabScrollAreaThumb:[i2.wp.flex.grow(1),i2.wp.backgroundColor.outlineDimmest,i2.wp.borderRadius(4),i2.wp.position.relative,{"&::before":{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",height:"100%",minWidth:"44px",minHeight:"44px"}}],tabContainer:[i2.wp.height("100%")],tabPreview:[i2.wp.borderRadius(4),i2.wp.height("100%"),i2.wp.backgroundColor.accentPrimaryDimmest,{border:"1px dashed ".concat(ry.LU.accentPrimaryDimmer)}]});function yY(e){var n,t,r,i,o,a,l=e.headerId,c=rl(tV),u=rl(tj),s=rl(tX),d=rl(tU),h=(0,g.useRef)(null),m=ow(l),v=(0,u4.A)(m.activeIndex),y=(0,u4.A)(m.activeTabPaneId),w=(0,u4.A)(m.panes),b=(0,g.useCallback)(function(e){if(h.current&&0!==e.deltaY&&0===e.deltaX){e.preventDefault();var n=e.deltaY,t=h.current.scrollLeft,r=Math.max(0,Math.min(h.current.scrollWidth,t+n));h.current.scrollLeft=r}},[]),x=(0,p._)((0,vY.H)({accept:[tZ.pt.File,vL.N.Pane,vL.N.NewPane],hover:function(e,n){var t=n.getSourceClientOffset();t&&k({item:e,panes:w,sourceClientOffset:t.x})},collect:function(e){return{isOver:e.isOver()}},drop:function(e,n){if(!n.didDrop()){var t=(null==C?void 0:C.index)!==null?null==C?void 0:C.index:w.length;if("nodes"===e.type){var r=(0,nr.u9)(e.nodes);r.length>0&&u({activate:!0,commit:!0,paneGroupId:l,index:t,panes:r});return}if(e.type===vL.N.NewPane)return void u({activate:!0,paneGroupId:l,index:t,panes:[e.pane]});if("paneId"in e){var i=w.includes(e.paneId)?w.length-1:w.length;s({paneId:e.paneId,index:void 0!==t&&t<i?t:i,toPaneGroupId:l})}}}}),2),Y=x[0],S=x[1],A=(n=({isOver:Y.isOver}).isOver,r=(t=(0,p._)((0,g.useState)(null),2))[0],i=t[1],o=(0,g.useRef)(null),a=(0,g.useRef)([]),(0,g.useEffect)(function(){if(!n){a.current=[],i(null);return}o.current&&(a.current=(0,eE._)(o.current.children).map(function(e){var n=e.getBoundingClientRect();return n.x+n.width/2}))},[n]),{tabContainerRef:o,hover:(0,g.useCallback)(function(e){if(0!==a.current.length){var n=e.item.type===vL.N.Pane?e.item:null,t=(null==n?void 0:n.paneId)||null,r=t?e.panes.indexOf(t):-1,o=(null==n?void 0:n.width)||80,l=a.current.map(function(e,n){return -1===r||r>n?e:e+o/2}).findIndex(function(n){return n>e.sourceClientOffset}),c=-1===r?e.panes.length:e.panes.length-1;i({index:-1===l?c:Math.min(l,c),paneId:t,width:o})}},[]),dropState:r}),_=A.tabContainerRef,k=A.hover,C=A.dropState,I=C?C.index:null;if((null==C?void 0:C.paneId)&&null!==I){var D=w.indexOf(C.paneId);D>-1&&D<I&&I++}var E=C&&null!==I?(0,eE._)(w.slice(0,I)).concat([C],(0,eE._)(w.slice(I))):w;return(0,f.FD)(i4.S,{css:yx.container,row:!0,align:"center",innerRef:S,role:"tablist",children:[(0,f.FD)(ya.Se,{children:[(0,f.FD)(yo.bL,{css:yx.tabScrollAreaRoot,onWheel:b,children:[(0,f.Y)(yo.LM,{css:yx.tabScrollAreaViewport,ref:h,children:(0,f.Y)(i4.S,{innerRef:_,css:yx.tabContainer,row:!0,children:E.map(function(e,n){return"string"!=typeof e?(0,f.Y)(i4.S,{p:4,children:(0,f.Y)(i4.S,{style:{width:e.width},css:yx.tabPreview})},"preview"):(0,f.Y)(yv,{dragGroup:1===w.length,paneId:e,paneGroupId:l,isActive:v===n,selectTab:c,removePane:d},e)})})}),(0,f.Y)(yo.Ze,{css:yx.tabScrollAreaScrollbar,orientation:"horizontal",children:(0,f.Y)(yo.zi,{css:yx.tabScrollAreaThumb})})]}),(0,f.Y)(i4.S,{css:yx.newTabContainer,children:(0,f.Y)(cf.K0,{alt:"New tab",tooltipBehavior:"hidden",size:12,onClick:function(){u({paneGroupId:l,activate:!0,panes:[{type:"commands",data:{autoFocus:!0}}]})},children:(0,f.Y)(oV.A,{})})})]}),(0,f.Y)(yn,{paneGroupId:l,activeTabPaneId:y})]})}var yS=t(67057),yA=(0,rw.x)({left:[i2.wp.height("100%"),{border:"none"}],right:[i2.wp.border({direction:"bottom",color:ry.LU.outlineDimmest}),i2.wp.highRes({borderBottomWidth:.5})],rightActionsContainer:[i2.wp.height(31),i2.wp.highRes(i2.wp.highRes(i2.wp.height(31.5)))],moreActions:[i2.wp.color.foregroundDimmest]}),y_=(0,g.memo)(function(e){var n=e.headerId,t=(0,yS.eg)(),r=oY(n),i=(0,u4.A)(r.isMaximized),o=oy().restoreMaximizedPaneGroup,a=(0,u4.A)(r.isModal),l=(0,u4.A)(r.isFloating),c=rl(iM),u=rl(tU),s=ow(n),d=(0,u4.A)(s.activeTabPaneId),p=(0,u4.A)(s.panes),h=p.length>1,g=(0,u4.A)(r.isBeingDragged),m=rl(iC),v=(0,o0.Jn)(sk.id),y=(0,f.Y)(cf.K0,{css:yA.moreActions,onClick:function(){return m(d)},alt:"Pane actions",tooltipBehavior:void 0===v?"hidden":void 0,tooltipPlacement:"left",tooltipContents:v?(0,f.Y)(o0._y,{fontSize:12,keyCombo:v}):null,children:(0,f.Y)(cY.A,{color:ry.LU.foregroundDimmest})}),w=(0,f.Y)(cf.K0,{alt:"Close pane",onClick:function(){return p.forEach(u)},children:(0,f.Y)(uJ.A,{color:ry.LU.foregroundDimmest})}),b=g?null:(0,f.FD)(i4.S,{css:yA.rightActionsContainer,pr:4,row:!0,gap:4,align:"center",children:[l?(0,f.Y)(cf.K0,{alt:"Unfloat",onClick:function(){return c(d)},children:(0,f.Y)(i7,{color:ry.LU.foregroundDimmest})}):null,i?(0,f.Y)(cf.K0,{alt:"Restore pane",onClick:o,children:(0,f.Y)(st,{color:ry.LU.foregroundDimmest})}):null,a?w:y]});return(0,f.FD)(f.FK,{children:[(0,f.Y)(i4.S,{css:yA.left,grow:!0,shrink:!0,align:"center",row:!0,children:a&&!h||t?(0,f.Y)(yi,{headerId:n,paneId:d,disableDrag:t}):(0,f.Y)(yY,{headerId:n})}),(0,f.Y)(v9,{paneId:d}),(0,f.Y)(i4.S,{css:yA.right,row:!0,children:t?null:b})]})}),yk=(0,rb.v)(["left","top","scale","transformOriginX","width","height","zIndex","transitionDuration","transitionDelay","transitionProperty","transformX","transformY"]),yC=yk.cssVars,yI=yk.styleTokens,yD=(0,l7.AH)([i2.wp.borderRadius(4,4,0,0),i2.wp.position.absolute,i2.wp.flex.row,i2.wp.align.center,vV],(0,tg._)({transformOrigin:"".concat(yI.transformOriginX," bottom"),top:yI.top,left:yI.left,width:yI.width,height:yI.height,transform:"translate(".concat(yI.transformX,", ").concat(yI.transformY,") scale(").concat(yI.scale,")"),transitionDuration:yI.transitionDuration,transitionProperty:yI.transitionProperty,transitionDelay:yI.transitionDelay,transitionTimingFunction:"ease-out",backgroundColor:co.s,overflowX:"hidden"},i2.$_.prefersReducedMotion,{transitionProperty:"none"}));let yE=(0,g.memo)(function(e){var n=e.headerId,t=ow(n),r=(0,u4.A)(t.activeTabPaneId),i=oY(n),o=(0,u4.A)(i.isFloating),a=(0,u4.A)(i.isModal),l=(0,g.useRef)(null);return(0,rm.d)(l,i.size,function(e){var n,t=e.width,r=e.height;return n={},(0,tg._)(n,yC.width,t+"px"),(0,tg._)(n,yC.height,r+"px"),n}),(0,rm.d)(l,i.position,function(e){var n,t,r=e.x,i=e.y;return"transform"===e.positioning?(n={},(0,tg._)(n,yC.transformX,Math.round(r)+"px"),(0,tg._)(n,yC.transformY,Math.round(i)+"px"),(0,tg._)(n,yC.top,"0px"),(0,tg._)(n,yC.left,"0px"),n):(t={},(0,tg._)(t,yC.transformX,"0px"),(0,tg._)(t,yC.transformY,"0px"),(0,tg._)(t,yC.top,Math.round(i)+"px"),(0,tg._)(t,yC.left,Math.round(r)+"px"),t)}),(0,rm.d)(l,i.scale,function(e){return(0,tg._)({},yC.scale,e.toString())}),(0,rm.d)(l,i.transformOriginX,function(e){return(0,tg._)({},yC.transformOriginX,e)}),(0,rm.d)(l,i.transition,function(e){var n,t,r;return r={},(0,tg._)(r,yC.transitionDuration,(null!=(n=null==e?void 0:e.duration)?n:0)+"ms"),(0,tg._)(r,yC.transitionDelay,(null!=(t=null==e?void 0:e.delay)?t:0)+"ms"),(0,tg._)(r,yC.transitionProperty,e?"top, left, width, height, transform, opacity":"none"),r}),(0,rm.d)(l,i.zIndex,function(e){return{"z-index":e.toString()}}),vK(l),(0,f.FD)(o3.ui,{innerRef:l,css:yD,children:[(0,f.Y)(y_,{headerId:n}),o&&!a?(0,f.Y)(vO,{paneId:r}):null]})});var yR=t(37299),yU=t(39668),yF=t(35556),yP=t(90209),yO=t(15703),yT={Content:function(e){var n,t=(0,p._)((0,g.useState)(null),2),r=t[0],i=t[1];(0,oj.HP)(function(){return r},[r]),(0,oj.Qt)(function(){return{type:"agentChat",focusInput:function(){return null==r?void 0:r.focus()}}},[r]);var o=e.options.performPaneOperation,a=(0,g.useCallback)(function(e){return o({operation:"open",pane:e,secondary:"ghostwriterChat"!==e.type})},[o]),l=(0,g.useCallback)(function(e){o({operation:"openPip",data:e})},[o]),c=(0,yU.n)(null==(n=e.pane.data)?void 0:n.sessionId),u=c.session,s=c.setSession,d=(0,g.useCallback)(function(e){o({operation:"replace",pane:{type:"agentChat",data:{sessionId:e.id}}}),s(e)},[o,s]),h=oS(),m=rl(iq),v=null!==ro(nH),y=(0,oM.A)(),w=y.secrets,b=y.fs;return(0,f.Y)(yF.j,{secrets:w,readFile:b.readFile,session:u,setSession:d,inputRef:i,openPane:a,onPlanApproval:function(){return m("tilingLayout")},isDesktopOrTabletAgentPresentationCentered:"centered"===h||"centeredVisualPlanner"===h,isDesktopLayoutTransitionInProgress:v,openPip:l})},Icon:function(e){var n=e.size;return(0,f.Y)(yP.l,{size:n})},getTitle:function(){return"Agent"},description:ue.RB,category:nr.bY.WorkspaceFeatures,decode:function(e){return yR.T(yO.V,e)}},yL=t(10527);function yM(){var e=(0,v._)(["\n  query Threads2Inbox {\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n"]);return yM=function(){return e},e}var yG={},yN=(0,y.J1)(yM()),yB=t(96202),yH=t(52771);function yz(e,n){var t=n.onReceiveAnnotationUpdate,r=void 0===t?function(){}:t,i=(0,ad.A)().showError,o=(0,p._)((0,g.useState)(null),2),a=o[0],l=o[1],c=(0,yB.d1)({variables:{replId:e}}),u=function(){var e,n=null==(e=c.data)?void 0:e.currentUser;return n?{user:{__typename:"User",id:n.id,username:n.username,fullName:n.fullName,image:n.image}}:null},s=function(n,t){var r=n.readQuery({query:yB.FL,variables:{replId:e}});if(!r)throw Error("expected data");if("Repl"!==r.repl.__typename)throw Error("expected repl");var i=[],o=r.repl.annotationAnchors,a=o.findIndex(function(e){return e.id===t.id});i=-1===a?(0,eE._)(o).concat([t]):(0,eE._)(o.slice(0,a)).concat([t],(0,eE._)(o.slice(a+1))),n.writeQuery({query:yB.FL,variables:{replId:e},data:(0,td._)((0,m._)({},r),{repl:(0,td._)((0,m._)({},r.repl),{annotationAnchors:i})})})},d=(0,p._)((0,yB.tD)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return i(e.message)});var t,r=null==(t=n.data)?void 0:t.createAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&s(e,r))}}),1)[0],f=(0,p._)((0,yB.lb)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return i(e.message)});var t,r=null==(t=n.data)?void 0:t.createAnnotationMessage;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&s(e,r))}}),1)[0],h=(0,p._)((0,yB.CX)({onError:function(e){return i(e.message)},update:function(e,n){if(n.errors)return void n.errors.forEach(function(e){return i(e.message)});var t,r=null==(t=n.data)?void 0:t.updateAnnotationAnchor;r&&("UserError"===r.__typename?i(r.message):"AnnotationAnchor"===r.__typename&&s(e,r))}}),1)[0],v=(0,p._)((0,yH.F)(),1)[0],y=(0,p._)((0,yB.CY)(),1)[0];(0,yB.oh)({variables:{replId:e},onData:function(e){var n=e.data.data,t=e.client,i=null==n?void 0:n.updatedAnnotation;i&&(s(t,i),r(i))}});var w=(0,p._)((0,g.useState)([]),2),b=w[0],x=w[1];(0,g.useEffect)(function(){var e,n=[];(null==(e=c.data)?void 0:e.repl.__typename)==="Repl"&&n.push.apply(n,(0,eE._)(c.data.repl.annotationAnchors)),a&&n.push((0,td._)((0,m._)({},a),{isGeneral:!!a.isGeneral,messages:[],isResolved:!1,__typename:"AnnotationAnchor"})),x(n)},[c,a]);var Y=(0,g.useMemo)(function(){return b.find(function(e){return e.isGeneral})},[b]),S=(0,g.useMemo)(function(){return b.reduce(function(e,n){return n.isResolved?e:n.messages.some(function(e){return!1===e.seen})?e+1:e},0)},[b]),A=function(e){var n=e.annotationAnchor,t=e.annotationMessage;d({variables:{annotationAnchor:n,annotationMessage:t,highlight:e.highlight},optimisticResponse:{__typename:"RootMutationType",createAnnotationAnchor:(0,td._)((0,m._)({},u(),n),{isGeneral:!!n.isGeneral,__typename:"AnnotationAnchor",messages:t?[(0,td._)((0,m._)({},u(),t),{content:{text:t.text,__typename:"TextMessageContentType"},anchor:{id:n.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})]:[],isResolved:!1})}})},_=(0,J.A)(function(){return c8()(y,1e3,{trailing:!1})},[y]);return{annotations:b,loading:c.loading,generalThread:Y,unreadThreadCount:S,placeholderAnchorId:null==a?void 0:a.id,createAnnotationAnchorPlaceholder:function(e){l(e.annotationAnchor)},deleteAnnotationAnchorPlaceholder:function(){l(null)},createAnnotationAnchor:A,createAnnotationMessage:function(n){var t=n.anchor,r=n.annotationMessage,i=n.highlight;(null==a?void 0:a.id)===t.id?(l(null),A({annotationAnchor:(0,m._)({},a),annotationMessage:r,highlight:i})):f({variables:{replId:e,anchorId:t.id,annotationMessage:r,highlight:i},optimisticResponse:{__typename:"RootMutationType",createAnnotationMessage:(0,td._)((0,m._)({},t),{messages:(0,eE._)(t.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,td._)((0,m._)({},u(),r),{content:{text:r.text,__typename:"TextMessageContentType"},anchor:{id:t.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},updateAnnotationAnchor:function(e){var n=e.annotationAnchor,t=e.changes;h({variables:{id:n.id,changes:t},optimisticResponse:{__typename:"RootMutationType",updateAnnotationAnchor:(0,td._)((0,m._)({},n,t),{isResolved:"boolean"==typeof t.isResolved?t.isResolved:n.isResolved})}})},updateThreadPreview:function(e){_({variables:{threadId:e.threadId,messageId:e.messageId}})},markAllMessagesInReplAsSeenByUser:function(){v({variables:{replId:e}})}}}var yW=t(86550),yj=t(19807),y$=["TextMessageContentType","PreviewMessageContentType"],yZ=t(3520),yq=t(76334),yV=t(89589),yK=t(52447);function yJ(e){var n=e.message,t=(0,g.useMemo)(function(){var e=n.timeCreated;return e?(0,yq.A)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,f.Y)("div",{className:"resolved-message",children:(0,f.FD)(yV.z,{align:"center",spacing:1,children:[r?(0,f.Y)(yK.A,{url:r.image,size:"m",username:r.username,fullName:r.fullName}):null,(0,f.Y)(pj.A,{color:ry.LU.foregroundDefault,size:24}),(0,f.FD)(ac.EY,{variant:"small",multiline:!1,children:["Resolved ",t]})]})})}var yQ=t(63951),yX=(0,l7.i7)({"0%":[i2.wp.backgroundColor.foregroundDimmest],"50%":[i2.wp.backgroundColor.foregroundDimmest],"100%":[i2.wp.backgroundColor.foregroundDimmest]}),y0=(0,rw.x)({message:[i2.wp.backgroundColor.backgroundHigher,i2.wp.py(4),i2.wp.px(8),i2.wp.borderRadius(8),i2.wp.fontSize("default"),i2.wp.width("fit-content"),i2.wp.maxWidth("100%"),{overflowWrap:"break-word",whiteSpace:"pre-wrap","&.userhighlight":{background:"transparent"}}],typingIndicator:[i2.wp.minHeight("1em"),i2.wp.display.grid,i2.wp.align.center,{gridAutoFlow:"column",gridGap:ry.LU.space8}],dot:[i2.wp.width(6),i2.wp.height(6),i2.wp.borderRadius(6),i2.wp.display.inlineBlock,i2.wp.backgroundColor.foregroundDimmest,{animation:"".concat(yX," 0.6s infinite"),"&:nth-child(1)":{animationDelay:"0s"},"&:nth-child(2)":{animationDelay:"0.2s"},"&:nth-child(3)":{animationDelay:"0.4s"}}]});function y1(e){var n=e.message,t=e.messageStyle,r=(0,g.useMemo)(function(){return"TextMessageContentType"===n.content.__typename?(0,yQ.vY)(n.content.text,{}):"PreviewMessageContentType"===n.content.__typename&&"string"==typeof n.content.preview?(0,yQ.vY)(n.content.preview,{}):null},[n.content]),i="PreviewMessageContentType"===n.content.__typename&&"string"!=typeof n.content.preview;return n.user&&(r||i)?(0,f.Y)("div",{children:(0,f.FD)("div",{className:t,css:y0.message,children:[r?(0,f.Y)(yQ.JX,{message:r,codeStyles:{color:ry.LU.orangeStronger,background:ry.LU.backgroundHighest}}):null,i?(0,f.FD)("span",{css:y0.typingIndicator,children:[(0,f.Y)("span",{css:y0.dot}),(0,f.Y)("span",{css:y0.dot}),(0,f.Y)("span",{css:y0.dot})]}):null]})}):null}function y2(e){var n=e.message,t=(0,g.useMemo)(function(){var e=n.timeCreated;return e?(0,yq.A)(new Date(e),"do MMM, hh:mm a"):""},[n]),r=n.user;return(0,f.Y)("div",{className:"resolved-message",children:(0,f.FD)(yV.z,{align:"center",spacing:1,children:[r?(0,f.Y)(yK.A,{url:r.image,username:r.username,fullName:r.fullName,size:"m"}):null,(0,f.Y)(pj.A,{size:24,color:ry.LU.foregroundDimmest}),(0,f.FD)(ac.EY,{variant:"small",multiline:!1,children:["Unresolved ",t]})]})})}var y4=function(e){var n=new Date(e),t=new Date;return 60>(0,yZ.A)(t,n)?"now":(0,us.K)(n,!0)},y5=(0,rw.x)({root:[i2.wp.display.grid,i2.wp.backgroundColor.backgroundDefault,i2.wp.color.foregroundDefault,i2.wp.position.relative,{gridTemplateRows:"auto auto",gridRowGap:ry.LU.space8,gridTemplateColumns:"minmax(0, 1fr)"}],messageInfo:[i2.wp.display.flex,i2.wp.align.center,i2.wp.fontSize("small")],messages:[i2.wp.display.grid,{gridRowGap:ry.LU.space4,gridTemplateColumns:"minmax(0, 1fr)"}],avatar:{marginRight:"5px"},username:[i2.wp.color.foregroundDimmer,{marginRight:"3px"}],time:[i2.wp.color.foregroundDimmest]});function y7(e){var n=e.messageGroup,t=n.messages,r=n.user,i=n.timeCreated;return r?(0,f.FD)("div",{css:y5.root,children:[(0,f.FD)("div",{css:y5.messageInfo,children:[(0,f.Y)("div",{css:y5.avatar,children:(0,f.Y)(yK.A,{username:r.username,fullName:r.fullName,url:r.image,size:"xs",style:{minHeight:"15px",minWidth:"15px",height:"15px",width:"15px"}})}),(0,f.Y)("div",{css:y5.username,children:r.username}),(0,f.Y)("div",{css:y5.time,children:y4(i)})]}),(0,f.Y)("div",{css:y5.messages,children:t.map(function(e){return(0,f.Y)(y1,{message:e},e.id)})})]}):null}function y3(e){var n=e.messageGroup;if("TextMessageContentType"===n.messageType||"PreviewMessageContentType"===n.messageType)return(0,f.Y)(y7,{messageGroup:n});if("StatusMessageContentType"===n.messageType){var t=n.messages[0];if("StatusMessageContentType"===t.content.__typename&&"resolved"===t.content.status)return(0,f.Y)(yJ,{message:t});if("StatusMessageContentType"===t.content.__typename&&"unresolved"===t.content.status)return(0,f.Y)(y2,{message:t})}return null}var y6=t(11071),y8=t(39695);function y9(){var e=(0,v._)(["\n  query AnnotationThreadInput {\n    currentUser {\n      id\n    }\n  }\n"]);return y9=function(){return e},e}var we={},wn=(0,y.J1)(y9());let wt=function(e){var n={},t=!0,r=!1,i=void 0;try{for(var o,a=e.messages[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;l.user&&(n[l.user.id]=l.user)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return Object.values(n)};var wr=t(67856),wi=t(60093),wo=(0,rw.x)({inputGroup:{display:"grid",gridTemplateColumns:"1fr min-content",gridGap:"10px",alignItems:"center",justifyContent:"start"},inputBox:[i2.wp.backgroundColor.backgroundHigher,i2.wp.color.foregroundDefault,i2.wp.borderRadius(8),i2.wp.p(8),i2.wp.fontSize("default"),i2.wp.font.default,i2.wp.overflowY("auto"),i2.wp.maxHeight("calc(".concat(ry.LU.fontSizeDefault," * 18)")),{border:"none",outline:"none",resize:"none",lineHeight:"16px","&::placeholder":{whiteSpace:"pre"},"&:not(:empty)":{borderRadius:"6px"}}],mentionSuggestionsContainer:[i2.wp.display.grid,i2.wp.overflow("hidden"),{paddingTop:"1em",gridRowGap:ry.LU.space4}],mentionSuggestion:[i2.wp.display.grid,i2.wp.align.center,i2.wp.py(8),i2.wp.cursor.pointer,i2.wp.color.foregroundDefault,{gridTemplateColumns:"min-content max-content",gridColumnGap:ry.LU.space8,'&[data-selected="true"]':[i2.wp.backgroundColor.backgroundRoot,{"& > *":{transform:"scale(1.1)"}}]}]}),wa=(0,g.forwardRef)(function(e,n){var t,r,i,o,a=e.annote,l=e.placeholder,c=e.onChangeMessage,u=e.onFinalizeMessage,s=function(){""!==v.trim()&&(u({messageId:_||(0,tm.A)(),message:v.trim()}),k(null),y(""))},d=null==(o=(t=(0,m._)({},we,void 0),w.I(wn,t)).data)||null==(i=o.currentUser)?void 0:i.id,h=(0,p._)((0,g.useState)(""),2),v=h[0],y=h[1],b=(0,p._)((0,g.useState)(!1),2),x=b[0],Y=b[1],S=(0,g.useRef)(null),A=(0,p._)((0,g.useState)(null),2),_=A[0],k=A[1],C=(0,yW.A)(),I=(0,wr.A)().ref,D=(0,p._)((0,wi.A)({"@":(r=(0,tw._)(function(e){var n,t;return(0,tb.YH)(this,function(r){return n=C.filter(function(e){return e.id!==d}),e&&(t=e.toLowerCase(),n=n.filter(function(e){return e.username.toLowerCase().startsWith(t)})),[2,n.slice(0,5).map(function(e){return{icon:(0,f.Y)(yK.A,{fullName:e.fullName,username:e.username,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return r.apply(this,arguments)})}),2),E=D[0].suggestions,R=D[1],U=(0,y8.Bp)({items:(null==E?void 0:E.results)||[],defaultHighlightedIndex:0,isOpen:!!(null==E?void 0:E.results.length),onSelectedItemChange:function(e){var n=e.selectedItem;if(E&&n){var t=E.applySuggestion({targetValue:v,suggestionValue:n.value}),r=t.fullValue,i=t.cursorIndex;y(r),setTimeout(function(){S.current&&(S.current.setSelectionRange(i,i),S.current.focus())})}}}),F=U.isOpen,P=U.getInputProps,O=U.getMenuProps,T=U.getItemProps,L=U.highlightedIndex,M=U.getComboboxProps;(0,g.useEffect)(function(){var e="threads/drafts/".concat(a.id),n=nu.A.get(e,"string");n&&y(n);var t=S.current;return function(){if(t){var n=t.value;if(0===n.length)return void nu.A.remove(e);nu.A.set(e,n)}}},[]),(0,g.useEffect)(function(){setTimeout(function(){S.current&&S.current.focus()})},[S]);var G=wt(a).filter(function(e){return e.id!==d}),N="Add a comment";return 1===G.length?N="Reply to @".concat(G[0].username):G.length>1&&(N="Reply"),a.isResolved&&(N="Reply to unresolve this thread"),l&&(N=l),(0,f.FD)("div",{children:[(0,f.FD)("div",(0,td._)((0,m._)({css:wo.inputGroup},M()),{children:[(0,f.Y)("textarea",(0,m._)({css:wo.inputBox},P({autoFocus:!0,placeholder:N,value:v,onCompositionStart:function(){return Y(!0)},onCompositionEnd:function(){return Y(!1)},onChange:function(e){var n=e.target.value,t=_||(0,tm.A)();_||k(t),y(n),c({messageId:t,message:n})},onKeyDown:function(e){e.stopPropagation(),!F&&(e.nativeEvent.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||x||(e.preventDefault(),s()))},rows:1,ref:function(e){S.current=e,n&&(void 0===n?"undefined":(0,eR._)(n))==="object"&&(n.current=e),R(e),I(e)}}))),(0,f.Y)(cf.K0,{alt:"Send message",onClick:s,disabled:0===v.length,children:(0,f.Y)(d$.A,{})})]})),(0,f.Y)("div",(0,td._)((0,m._)({},O({})),{children:F&&E?(0,f.Y)("div",{css:wo.mentionSuggestionsContainer,children:E.results.map(function(e,n){return(0,y6.n)("div",(0,td._)((0,m._)({css:wo.mentionSuggestion,"data-selected":L===n},T({item:e,index:n})),{key:e.value,children:[e.icon,(0,f.Y)("div",{children:e.value})]}))})}):null}))]})});wa.displayName="ThreadInputForwarded";var wl=t(49316),wc=(0,rw.x)({generalThread:[i2.wp.pt(0),i2.wp.borderRadius(8,8,0,0),i2.wp.backgroundColor.backgroundDefault,i2.wp.flex.column,i2.wp.flex.growAndShrink(1),i2.wp.overflow("hidden"),i2.wp.height("100%"),{gridTemplateRows:"min-content 1fr min-content",gridGap:ry.LU.space8}],messageGroupContainerContainer:[i2.wp.scrollbar.thin,i2.wp.flex.column,i2.wp.height(0),i2.wp.flex.grow(1),i2.wp.overflow("hidden")],messageGroupContainer:[i2.wp.p(12),i2.wp.display.grid,i2.wp.overflowY("auto"),{gridRowGap:ry.LU.space16}],threadInputContainer:[i2.wp.width("100%"),i2.wp.border({color:ry.LU.outlineDimmer,width:1,direction:"top"}),i2.wp.py(8),i2.wp.px(12)]});function wu(e){var n=e.generalThreadsOpen,t=e.setGeneralThreadsOpen,r=e.generalThread,i=e.handleChangeMessage,o=void 0===i?function(){}:i,a=e.handleFinalizeMessage,l=void 0===a?function(){}:a,c=e.createAnnotationAnchorPlaceholder,u=void 0===c?function(){}:c,s=(0,ec.A)(),d=(0,g.useMemo)(function(){return r?function(e){var n=[],t=null,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,u,s,d,p=a.value;!t||(null==p||null==(c=p.user)?void 0:c.id)!==(null==t||null==(u=t.user)?void 0:u.id)||(null==p||null==(s=p.anchor)?void 0:s.id)!==(null==t?void 0:t.anchorId)||!y$.includes(t.messageType)||!y$.includes(p.content.__typename)||new Date(p.timeCreated).getTime()-new Date(t.timeCreated).getTime()>6e5?(t&&n.push(t),t={user:p.user,timeCreated:p.timeCreated,anchorId:null==p||null==(d=p.anchor)?void 0:d.id,messages:[p],messageType:p.content.__typename}):t.messages.push(p)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t&&n.push(t),n}((0,eE._)(r.messages).sort(function(e,n){return new Date(e.timeCreated).getTime()-new Date(n.timeCreated).getTime()})):[]},[r]);(0,g.useEffect)(function(){r||u({annotationAnchor:{id:(0,tm.A)(),replId:s,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,s,u]),(0,g.useEffect)(function(){r||u({annotationAnchor:{id:(0,tm.A)(),replId:s,isGeneral:!0,indexStart:null,indexEnd:null,isResolved:!1,otVersion:null,path:null}})},[r,s,u]);var p=(0,g.useRef)(null);(0,wl.A)(n&&r||null);var h=function(){p.current&&(p.current.scrollTop=p.current.scrollHeight)};return((0,g.useEffect)(function(){h()},[p,r]),r)?(0,f.FD)("div",{css:wc.generalThread,onClick:function(){return t(!0)},children:[(0,f.Y)("div",{css:wc.messageGroupContainerContainer,children:(0,f.Y)("div",{css:wc.messageGroupContainer,ref:p,children:d.map(function(e){return(0,f.Y)(y3,{messageGroup:e},e.messages[0].id)})})}),(0,f.Y)("div",{css:wc.threadInputContainer,children:(0,f.Y)(wa,{placeholder:"Send message",annote:r,onChangeMessage:function(e){o({anchor:r,message:e.message,messageId:e.messageId}),t(!0)},onFinalizeMessage:function(e){l({anchor:r,message:e.message,messageId:e.messageId}),t(!0),(0,oE.u4)(oE.AZ.MESSAGE_SENT,{replId:s,source:"chat",newThread:0===r.messages.length})}})})]}):null}var ws=t(28711),wd=t(57356),wp=t(45623),wf={title:"Threads",filters:{inbox:{key:"toggle-inbox",label:"Inbox",icon:(0,f.Y)(wd.A,{})},unread:{key:"toggle-unread",label:"Unread",icon:(0,f.Y)(ws.A,{})},participating:{key:"toggle-participating",label:"Participating",icon:(0,f.Y)(wp.A,{})},resolved:{key:"toggle-resolved",label:"Resolved",icon:(0,f.Y)(pj.A,{})}},sorts:{chronological:{key:"toggle-chronological",label:"Chronological",icon:(0,f.Y)(sl.A,{})},codeOrder:{key:"toggle-codeOrder",label:"Code order",icon:(0,f.Y)(function(e){return(0,f.Y)(i5.Ay,(0,td._)((0,m._)({},e),{children:(0,f.Y)("path",{fillRule:"evenodd",d:"M19 9.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Zm-3.675 1.5a3.751 3.751 0 0 1 7.425.75 3.75 3.75 0 0 1-7.425.75h-4.678a2.751 2.751 0 0 1-5.293 0H2a.75.75 0 0 1 0-1.5h3.354a2.751 2.751 0 0 1 5.292 0h4.679ZM8 10.75a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5Z",clipRule:"evenodd"})}))},{})}},search:{placeholder:"Search threads"},markAsRead:"Mark as read",empty:{image:{alt:"an illustration of an escape key that resembles a sunny beach, with an umbrella and palm tree"},noThreadsCreated:{text:{primary:"You havent started any threads yet.",secondary:function(e){return(0,f.FD)(f.FK,{children:["Select code and press ",(0,f.Y)(o0._y,{keyCombo:e,small:!0})," ","to get started."]})}}},noThreadsFound:{text:{primary:"No threads found.",secondary:"Try adjusting your search or filters."}}}},wh=t(491),wg=t(50022),wm=t(53075),wv=t(80712),wy=t(68135),ww=t(77252);let wb=function(e){var n=(0,ww.A)(e,null,null).updateThread;return{handleToggleResolved:function(e){return n({changes:{isResolved:e}})}}};var wx=t(96075),wY=t(17767);let wS=function(e){var n,t=e.thread,r=e.onClick,i=t.messages.filter(function(e){return!e.seen}).length,o=null==(n=(0,wm.zn)(t.path?t:null))?void 0:n.snippet,a=(0,ww.A)(t.id,null,null).thread,l=(0,wx.Ln)(),c=wb(t.id).handleToggleResolved,u={jumpToCode:"Jump to code",resolveThread:"Resolve this thread",unresolveThread:"Re-open",replyCount:function(e,n){var t=function(e){return 1===e?"reply":"replies"};return e<=1?"View ".concat(1===n?"unread":""," thread"):n?"View ".concat(n," unread ").concat(t(n)):"View ".concat(e-1," ").concat(t(e-1))},threadOpened:function(e,n){return"Opened ".concat(e," by ").concat(n)}},s=t.messages[0],d=(0,g.useMemo)(function(){return(null==s?void 0:s.timeCreated)?(0,wy.G)(s.timeCreated):"some time ago"},[s]);return t.user?(0,f.FD)(o3.ui,{css:[pS.b.filled,i2.wp.overflow("hidden"),l===t.id&&{borderColor:ry.LU.accentPrimaryDefault}],onClick:function(){r(t)},children:[(0,f.FD)(o3.ui,{elevated:!0,grow:!0,px:8,py:8,row:!0,align:"center",justify:"space-between",children:[(0,f.Y)(i4.S,{row:!0,align:"center",gap:4,children:(0,f.Y)(ac.EY,{color:"dimmer",variant:"small",multiline:!1,children:u.threadOpened(d,t.user.username)})}),(0,f.FD)(i4.S,{row:!0,align:"center",gap:4,children:[o&&t.path?(0,f.Y)(cf.K0,{alt:u.jumpToCode,onClick:function(){return r(t)},children:(0,f.Y)(wY.A,{})}):null,t.isResolved?(0,f.Y)(al.$n,{text:u.unresolveThread,size:"small",colorway:"primary",onClick:function(){c(!1)}}):(0,f.Y)(cf.K0,{alt:u.resolveThread,onClick:function(){c(!0)},children:(0,f.Y)(pj.A,{})})]})]}),o&&t.path?(0,f.Y)(wh.f,{elevation:"root",path:t.path,initialDoc:o.lines.join("\n"),startLineNumber:o.startLineNumber,fontSize:12,maxHeight:"42px",minHeight:"42px",allowScroll:!1}):null,s?(0,f.Y)(i4.S,{p:8,py:12,children:(0,f.Y)(wv.A,{thread:a,message:s},s.id)}):null,t.messages.length>1&&(0,f.FD)(i4.S,{css:[i2.wp.color.foregroundDimmer],pb:12,px:8,row:!0,align:"center",gap:4,children:[(0,f.Y)(i4.S,{css:[i2.wp.position.relative],children:(0,f.Y)(wg.A,{unreadDot:i>0})}),(0,f.Y)(ac.EY,{variant:"small",multiline:!1,children:u.replyCount(t.messages.length,i)})]})]}):null};var wA=t(38692);let w_=function(e){var n=e.path,t=e.threads,r=e.onThreadClick,i=t.some(function(e){return e.messages.some(function(e){return!e.seen})});return(0,f.Y)(i4.S,{pb:8,children:(0,f.Y)(wA.A,{css:[ry.LU.singleLine,i2.wp.px(8)],headerContent:(0,f.FD)(i4.S,{css:[i2.wp.mr(8)],grow:!0,shrink:!0,row:!0,align:"center",justify:"space-between",children:[(0,f.FD)(i4.S,{grow:!0,shrink:!0,row:!0,align:"center",gap:8,children:[(0,f.Y)(oZ.A,{path:n,size:20}),(0,f.Y)(ac.EY,{css:[i2.wp.flex.shrink(1)],multiline:!1,children:n})]}),i?(0,f.Y)("div",{css:[i2.wp.flex.shrink(0),i2.wp.width(8),i2.wp.height(8),i2.wp.backgroundColor.redStronger,i2.wp.borderRadius("full")]}):null]}),children:(0,f.Y)("div",{css:[i2.wp.mt(8),i2.wp.colWithGap(8)],children:t.map(function(e){return(0,f.Y)(wS,{thread:e,onClick:r},e.id)})})})})};var wk=t(40259),wC=t(1132),wI=function(e){return e.CHRONOLOGICAL="chronological",e.CODE_ORDER="codeOrder",e}(wI||{}),wD=function(e){return e.PARTICIPATING="participating",e.RESOLVED="resolved",e.UNREAD="unread",e.INBOX="inbox",e}(wD||{});let wE=function(e){var n,t,r,i=e.isChatOnly,o=e.openFile,a=(0,ec.A)(),l=yz(a,{onReceiveAnnotationUpdate:function(){}}),c=l.annotations,u=l.loading,s=l.generalThread,d=l.createAnnotationAnchorPlaceholder,h=l.createAnnotationMessage,v=l.updateThreadPreview,y=(n=(0,m._)({},yG,void 0),w.I(yN,n)),b=y.data,x=y.loading,Y=u||x,S=(0,p._)((0,g.useState)(!1),2),A=S[0],_=S[1],k=(0,wx.li)(),C=(0,p._)((0,g.useState)(""),2),I=C[0],D=C[1],E=(0,p._)((0,g.useState)("INBOX"),2),R=E[0],U=E[1],F=(0,p._)((0,g.useState)("CHRONOLOGICAL"),2),P=F[0],O=F[1],T=(0,g.useMemo)(function(){var e,n=null==b||null==(e=b.currentUser)?void 0:e.id;return c.filter(function(e){if("INBOX"===R)return!e.isResolved;if("RESOLVED"===R)return e.isResolved;if("PARTICIPATING"===R){var t;return!n||(null==(t=e.user)?void 0:t.id)===n||e.messages.some(function(e){var t=e.user;return(null==t?void 0:t.id)===n})}return"UNREAD"!==R||e.messages.some(function(e){return!e.seen})})},[b,c,R]),L=(0,g.useMemo)(function(){return T.filter(function(e){var n,t;return 0===I.length||null!=(t=null==(n=e.path)?void 0:n.toLowerCase().includes(I.toLowerCase()))&&t})},[I,T]),M=(0,g.useMemo)(function(){return(0,eE._)(L).sort(function(e,n){if("CHRONOLOGICAL"===P){var t,r,i=new Date(null==(t=e.messages[0])?void 0:t.timeCreated),o=new Date(null==(r=n.messages[0])?void 0:r.timeCreated);return i&&o?i<o?1:-1:0}return"CODE_ORDER"===P?(0,iu.yh)(e.path,n.path):0}).reduce(function(e,n){var t=n.path;return t&&void 0!==t&&(e[t]=e[t]||[],e[t].push(n)),e},{})},[L,P]),G=(0,g.useMemo)(function(){return Object.values((0,m._)({},M)).map(function(e){return(0,eE._)(e).sort(function(e,n){if("CHRONOLOGICAL"===P){var t,r,i,o,a,l,c=new Date(null==(a=e.messages[0])?void 0:a.timeCreated),u=new Date(null==(l=n.messages[0])?void 0:l.timeCreated);if(c&&u)return c<u?1:-1}else if("CODE_ORDER"===P)return(null!=(r=null!=(t=e.indexStart)?t:e.indexEnd)?r:0)<(null!=(o=null!=(i=n.indexStart)?i:n.indexEnd)?o:0)?-1:1;return 0})}).reduce(function(e,n,t){return e[Object.keys(M)[t]]=n,e},{})},[M,P]),N=(0,yW.A)().map(function(e){return e.username}),B=(t=(0,p._)((0,yH.F)(),1)[0],function(){t({variables:{replId:a}})}),H=(r=(0,tw._)(function(e){return(0,tb.YH)(this,function(n){return e.path&&(o(e.path),k(e.id)),[2]})}),function(e){return r.apply(this,arguments)}),z=(0,o0.Jn)("editor.action.startThread");return i?(0,f.Y)(wu,{generalThreadsOpen:A,setGeneralThreadsOpen:_,generalThread:s,handleChangeMessage:function(e){var n=e.anchor,t=e.messageId;v({threadId:n.id,messageId:t})},handleFinalizeMessage:function(e){var n=e.anchor,t=e.message,r=e.messageId,i=(0,yQ.vY)(t,{users:(0,eE._)(N).concat(["everyone"])});h({anchor:n,annotationMessage:{id:r,text:t,mentions:i.mentions}})},createAnnotationAnchorPlaceholder:d}):(0,f.Y)(o3.ui,{className:"threads-inbox",css:[i2.wp.height("100%"),i2.wp.width("100%"),i2.wp.overflow("hidden"),i2.wp.position.relative],"aria-busy":Y,children:Y?(0,f.Y)(i4.S,{css:[i2.wp.display.flex,i2.wp.align.center,i2.wp.justify.center,i2.wp.height("100%")],children:(0,f.Y)(s5.A,{size:24})}):(0,f.FD)(f.FK,{children:[(0,f.Y)(i4.S,{className:"threads-inbox-header",css:[i2.wp.position.sticky,i2.wp.top(0),i2.wp.backgroundColor.backgroundDefault,{zIndex:10}],py:12,px:8,children:(0,f.FD)(i4.S,{css:[i2.wp.flex.wrap,{gap:8}],row:!0,align:"center",children:[(0,f.Y)(wk.pd,{placeholder:wf.search.placeholder,value:I,onChange:function(e){return D(e.target.value)},css:[i2.wp.flex.grow(1)]}),(0,f.FD)(i4.S,{css:[i2.wp.maxWidth("100%"),{gap:8}],row:!0,children:[(0,f.Y)(i4.S,{shrink:!0,children:(0,f.Y)(wC.in,{cssProps:[i2.wp.flex.shrink(1),{span:i2.wp.flex.shrink(1)}],icon:wf.filters[wD[R]].icon,suffix:(0,f.Y)(dB.A,{}),label:wf.filters[wD[R]].label,onAction:function(e){switch(e){case"toggle-inbox":U("INBOX");break;case"toggle-unread":U("UNREAD");break;case"toggle-participating":U("PARTICIPATING");break;case"toggle-resolved":U("RESOLVED")}},children:Object.entries(wf.filters).map(function(e){var n=(0,p._)(e,2),t=(n[0],n[1]);return(0,f.Y)(yL.q,{"aria-label":t.label,children:(0,f.FD)(i4.S,{row:!0,gap:8,children:[t.icon,(0,f.Y)(ac.EY,{multiline:!1,children:t.label})]})},t.key)})})}),(0,f.Y)(i4.S,{shrink:!0,children:(0,f.Y)(wC.in,{cssProps:[i2.wp.flex.shrink(1),{span:i2.wp.flex.shrink(1)}],icon:wf.sorts[wI[P]].icon,suffix:(0,f.Y)(dB.A,{}),label:wf.sorts[wI[P]].label,onAction:function(e){switch(e){case wf.sorts.chronological.key:O("CHRONOLOGICAL");break;case wf.sorts.codeOrder.key:O("CODE_ORDER")}},children:Object.entries(wf.sorts).map(function(e){var n=(0,p._)(e,2),t=(n[0],n[1]);return(0,f.Y)(yL.q,{"aria-label":t.label,children:(0,f.FD)(i4.S,{row:!0,gap:8,children:[t.icon,(0,f.Y)(ac.EY,{multiline:!1,children:t.label})]})},t.key)})})}),(0,f.Y)(i4.S,{shrink:!0,children:(0,f.Y)(al.$n,{iconLeft:(0,f.Y)(pj.A,{}),text:wf.markAsRead,onClick:B,css:{span:i2.wp.flex.shrink(1)}})})]})]})}),0===c.length?(0,f.Y)(yj.A,{pane:{type:"threadInbox"},maxWidth:450,bodyText:(0,f.FD)(f.FK,{children:[wf.empty.noThreadsCreated.text.primary,z?(0,f.FD)(f.FK,{children:[(0,f.Y)("br",{}),wf.empty.noThreadsCreated.text.secondary(z)]}):void 0]})}):(0,f.Y)(f.FK,{children:Object.keys(G).length>0?(0,f.Y)(i4.S,{css:[i2.wp.overflowY("auto"),i2.wp.scrollbar.thin],grow:!0,shrink:!0,children:Object.keys(G).map(function(e,n){return(0,f.Y)(w_,{path:e||"-",threads:Object.values(G)[n],onThreadClick:function(e){var n=window.getSelection();(null==n?void 0:n.type)!=="Range"&&H(e)}},e)})}):(0,f.Y)(yj.A,{pane:{type:"threadInbox"},maxWidth:450,asciiArt:"Binoculars",headerText:wf.empty.noThreadsFound.text.primary,bodyText:wf.empty.noThreadsFound.text.secondary})})]})})};var wR=eh.ZU.Object({type:eh.ZU.Literal("chat")}),wU=(0,l7.AH)([i2.wp.flex.growAndShrink(1)]),wF={Content:function(e){var n=e.options;return(0,f.Y)(o3.ui,{background:"default",css:wU,children:(0,f.Y)(wE,{isChatOnly:!0,openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})})},Icon:function(e){var n=e.size;return(0,f.Y)(i5.Vx.Provider,{value:{color:ry.LU.blueStronger,size:n},children:(0,f.Y)(dN.A,{})})},getTitle:function(){return"Chat"},description:"Chat with collaborators in this Repl",category:nr.bY.Collaboration,decode:function(e){return yR.T(wR,e)}},wP=t(61002),wO={Content:function(e){var n=e.options,t=n.performPaneOperation,r=n.paneId,i=e.pane.data.autoFocus,o=rl(na),a=(0,g.useRef)(null);(0,oj.HP)(function(){return{focus:function(){var e;return null==(e=a.current)?void 0:e.call(a)}}},[]);var l=(0,g.useCallback)(function(e){t({operation:"replace",pane:e.pane}),o(r),(0,oE.u4)(oE.AZ.TOOL_OPENED,{source:"New Tab",tool:e.pane.type})},[t,r,o]),c=oX({currentPaneId:r,openPane:l});return(0,f.Y)(o6.r,{autoFocus:i,command:c,focusRef:a,showToolDescriptions:!0})},Icon:function(){return null},getTitle:function(){return"New tab"},category:nr.bY.Other,decode:wP.D},wT=t(29240),wL=t(38993),wM=t(24247),wG={Content:function(e){var n=e.options,t=n.paneId,r=n.performPaneOperation,i=e.pane.flow,o=oA(),a=o.isOpen,l=o.toggle,c=(0,g.useCallback)(function(){a.current||l()},[a,l]);return(0,f.Y)(wL.A,{flow:i,closeConfigPane:function(){return r({operation:"remove",pane:{id:t}})},useReadFile:wT.A,openSidebar:c,onNewPaneSelected:function(e){return r({operation:"open",pane:e})},openConsole:function(){return r({operation:"open",pane:{type:"runnerOutput"}})}})},Icon:function(){return(0,f.Y)(ux.A,{})},getTitle:function(){return"Configure Repl"},category:nr.bY.WorkspaceFeatures,decode:wM.D},wN=t(71469),wB=(0,l7.AH)([i2.wp.border({color:ry.LU.outlineDimmest,width:1,style:"solid"}),i2.wp.width("100%"),i2.wp.height("100%"),i2.wp.overflow("hidden"),{borderBottomLeftRadius:"4px",borderBottomRightRadius:"4px",borderTop:"none"}]),wH={Content:function(e){var n,t=e.pane;return(0,f.Y)(o3.ui,{css:wB,children:(0,f.Y)("iframe",{title:"Replit Docs",src:(null==t||null==(n=t.data)?void 0:n.url)||tv.ik.HOME,width:"100%",height:"100%",frameBorder:"0"})})},Icon:function(e){var n=e.size;return(0,f.Y)(i5.Vx.Provider,{value:{color:ry.LU.yellowStrongest,size:n},children:(0,f.Y)(lN.A,{})})},getTitle:function(){return"Docs"},description:"View Replit Documentation to learn about workspace features, AI, Deployments, and more",category:nr.bY.Other,decode:wN.D},wz=t(22089),wW=(0,l7.AH)([i2.wp.backgroundColor.backgroundDefault,i2.wp.height("100%"),i2.wp.borderRadius(4),{overflow:"hidden"}]),wj=(0,l7.AH)([i2.wp.width("100%"),i2.wp.height("100%"),i2.wp.justify.center,i2.wp.align.center,i2.wp.display.flex]);function w$(e){var n=e.paneId,t=e.extensionPaneData,r=e.environmentAPIs,i=(0,am.Z_)(t.installationId),o=(0,am.X_)(t.installationId),a=lO({extension:i,environmentAPIs:r,sandboxTitle:t.name,sandboxUrl:(0,ay.sU)(t.baseUrl,t.path),paneId:n,filePath:t.filePath||null}),l=a.didConnectOnce,c=a.isValidExtensionPaneUrl,u=a.getIframeProps,s=a.reloadSandbox;return(0,oj.Qt)(function(){return{type:"extension",commands:[{name:"Actions",commands:[{match:oU.G2,data:{icon:(0,f.Y)(uF.A,{}),label:"Refresh",type:"action",description:"Refresh extension",key:"refresh",run:function(){s()}}}]}]}},[s]),(0,f.Y)(i4.S,{className:"extension-pane",css:wW,children:o&&l?(0,f.Y)(f.FK,{children:c()?(0,f.Y)("iframe",(0,m._)({},u({css:{width:"100%",height:"100%",border:"none"}}))):(0,f.Y)(i4.S,{p:12,children:(0,f.FD)(ac.EY,{children:["Invalid url:"," ",(0,f.Y)(wz.R,{children:t.baseUrl+t.path}),". Please contact the extension author, or Replit support."]})})}):(0,f.Y)(i4.S,{css:wj,children:(0,f.Y)(s5.A,{})})})}var wZ=eh.ZU.Object({extensionId:eh.ZU.Unsafe(eh.ZU.String()),installationId:eh.ZU.Unsafe(eh.ZU.String()),baseUrl:eh.ZU.String(),path:eh.ZU.String(),name:eh.ZU.String(),filePath:eh.ZU.Optional(eh.ZU.Union([eh.ZU.String(),eh.ZU.Null(),eh.ZU.Undefined()])),icon:eh.ZU.Optional(eh.ZU.Union([eh.ZU.String(),eh.ZU.Null(),eh.ZU.Undefined()]))}),wq=eh.ZU.Object({type:eh.ZU.Literal("extension"),data:wZ}),wV={Content:function(e){var n=e.pane,t=e.options,r=ah();return(0,f.Y)(w$,{extensionPaneData:n.data,paneId:t.paneId,environmentAPIs:r})},Icon:function(e){var n=e.pane,t=e.size;return n.data.icon?(0,f.Y)(cT.A,{src:(0,ay.sU)(n.data.baseUrl,n.data.icon),layout:"fill",alt:""}):(0,f.Y)(lB.A,{size:t})},getTitle:function(e){return e.data.filePath?e.data.filePath+"  "+e.data.name:e.data.name},category:nr.bY.WorkspaceExtensions,decode:function(e){return yR.T(wq,e)}},wK=t(65744),wJ=t(45731),wQ=t(26968),wX=t(99784),w0=t(38249);function w1(){var e=(0,v._)(["\n  query ExtensionOwnerDetails($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n          username\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return w1=function(){return e},e}function w2(){var e=(0,v._)(["\n  query currentExtensionStatus($id: String!) {\n    extension(id: $id) {\n      ... on Extension {\n        id\n        isListed\n        user {\n          id\n        }\n      }\n    }\n  }\n"]);return w2=function(){return e},e}var w4={},w5=(w1(),(0,y.J1)(w2())),w7=t(28290),w3=t(48604),w6=(0,rw.x)({codeBlock:[i2.wp.borderRadius(8),i2.wp.position.relative],codeBlockCopyButton:[i2.wp.position.absolute,i2.wp.top(4),i2.wp.right(4)],selectionContainer:[i2.wp.maxHeight(400),i2.wp.overflowY("scroll")],fsNode:[i2.wp.flex.row,i2.wp.rowWithGap(8),i2.wp.align.center,i2.wp.px(4),i2.wp.py(2),i2.wp.borderRadius(8),i2.wp.cursor.pointer],fsNodeActive:[i2.wp.backgroundColor.backgroundHigher]});function w8(e){var n=e.content,t=(0,ad.A)().showConfirm;return(0,f.FD)(o3.ui,{tag:"code",elevated:!0,css:w6.codeBlock,p:8,children:[n,(0,f.Y)(cf.K0,{alt:"Copy",tooltipBehavior:"hidden",css:w6.codeBlockCopyButton,onClick:function(){return navigator.clipboard.writeText(n).then(function(){return t("Copied")})},children:(0,f.Y)(cM.A,{})})]})}function w9(e){var n,t=e.glob,r=e.openFile,i=e.children,o=(0,p._)((0,g.useState)([]),2),a=o[0],l=o[1],c=(0,p._)((0,g.useState)(""),2),u=c[0],s=c[1],d=(0,w7.c)(),h=(0,oM.A)().fs,v=(0,lL.s_)(),y=(0,g.useMemo)(function(){return(0,cE.tL)(t)},[t]);return((0,g.useEffect)(function(){y&&h.listFiles().then(function(e){e.files&&l(e.files.filter(function(e){return e.match(y)}).map(function(e){var n=e.split("/");return{path:e,dir:n.slice(0,n.length-1).join("/"),filename:n[n.length-1]||""}}))})},[y,v]),y)?(0,f.FD)(i4.S,{css:w6.selectionContainer,gap:16,children:[(0,f.Y)(ac.EY,{variant:"subheadDefault",children:(0,f.FD)(i4.S,{gap:12,children:[(0,f.Y)(ac.EY,{variant:"subheadDefault",children:"Choose an image"}),v?(0,f.Y)(pp.N,{icon:(0,f.Y)(w3.A,{}),colorway:"primary",text:(0,f.FD)(i4.S,{gap:2,children:[(0,f.FD)(ac.EY,{children:["Images must be served from"," ",(0,f.Y)("span",{css:[i2.wp.font.code,i2.wp.backgroundColor.accentPrimaryDimmer,i2.wp.borderRadius(4),i2.wp.px(4),i2.wp.py(2),i2.wp.mr(2),i2.wp.border({color:ry.LU.accentPrimaryDefault})],children:v.path}),"."]}),(0,f.Y)(ac.EY,{css:[i2.wp.fontWeight.normal],children:"You can change your extension's static directory in the .replit file."})]})}):null,(0,f.FD)(ac.EY,{css:[i2.wp.fontWeight.normal],color:"dimmer",children:["Supported file types:"," ",(0,f.Y)("span",{css:[i2.wp.font.code,i2.wp.fontSize("small"),i2.wp.backgroundColor.backgroundHigher,i2.wp.borderRadius(4),i2.wp.px(4),i2.wp.py(2),i2.wp.mr(2),i2.wp.border({color:ry.LU.outlineDefault})],children:null==(n=t.match(/\{(.*)\}/))?void 0:n[1].split(",").map(function(e){return e.replace(".","")}).join(", ")})]})]})}),i,(0,f.Y)(y8.Ay,{onChange:function(e){return r(e.path)},initialHighlightedIndex:0,defaultHighlightedIndex:0,itemToString:function(e){return(null==e?void 0:e.path)||""},children:function(e){var n=e.getInputProps,r=e.getItemProps,i=e.highlightedIndex,o=e.getRootProps,l=e.getMenuProps;return(0,f.FD)(i4.S,(0,td._)((0,m._)({},o({refKey:"innerRef"})),{gap:16,children:[(0,f.Y)(i4.S,{css:[i2.wp.position.relative],children:(0,f.Y)(wk.pd,(0,m._)({id:d("file-search")},n({ref:null,value:u,onChange:function(e){return s(e.currentTarget.value)},placeholder:"Find a file",autoComplete:"off",autoFocus:!0})))}),(0,f.Y)(i4.S,{children:a&&a.length?(0,f.Y)(i4.S,(0,td._)((0,m._)({elevated:!0,tag:"ul",css:(i2.wp.pt(8),i2.wp.colWithGap(8))},l({refKey:"innerRef"})),{children:a.filter(function(e){return e.path.includes(u)}).filter(function(e){return!v||e.path.startsWith(v.relativePath)||e.path.startsWith("public")}).map(function(e,n){return(0,f.FD)(i4.S,(0,td._)((0,m._)({tag:"li",css:[w6.fsNode,n===i&&w6.fsNodeActive]},r({item:e,index:n,disabled:!!v&&!e.path.startsWith(v.relativePath)})),{children:[(0,f.Y)(oZ.A,{path:e.path,size:16}),(0,f.Y)(ac.EY,{children:e.filename}),(0,f.Y)(ac.EY,{variant:"small",color:"dimmest",children:e.dir})]}),n)})})):(0,f.Y)(i4.S,{pt:8,children:(0,f.Y)(ac.EY,{color:"dimmer",children:(0,f.FD)("em",{children:["No files found matching ",(0,f.Y)("code",{children:t})]})})})})]}))}})]}):(0,f.FD)(i4.S,{css:[i2.wp.flex.column,i2.wp.colWithGap(16)],children:[(0,f.Y)(ac.EY,{variant:"subheadDefault",children:"Invalid Glob Pattern"}),(0,f.FD)(ac.EY,{children:["The glob pattern ",(0,f.Y)("code",{children:t})," could not be parsed."]}),(0,f.Y)(i4.S,{css:i2.wp.border({direction:"bottom",color:ry.LU.backgroundHigher})}),(0,f.FD)(i4.S,{gap:8,children:[(0,f.Y)(ac.EY,{children:(0,f.Y)("strong",{children:"Match all Javascript Files"})}),(0,f.Y)(w8,{content:"**/*.js"})]}),(0,f.FD)(i4.S,{gap:8,children:[(0,f.Y)(ac.EY,{children:(0,f.Y)("strong",{children:"Match JSON files at root level"})}),(0,f.Y)(w8,{content:"*.json"})]}),(0,f.FD)(i4.S,{gap:8,children:[(0,f.Y)(ac.EY,{children:(0,f.Y)("strong",{children:"Match specified file extensions"})}),(0,f.Y)(w8,{content:"**/*.{js,ts,jsx,tsx}"})]})]})}var be=t(50746),bn=t(27959),bt=function(e){return e.Installing="Installing",e.Loading="Loading",e.Failed="Failed",e.Success="Success",e}(bt||{}),br={Installing:"Installing Extension...",Loading:"Loading Asset...",Failed:"Failed to load asset from Extension URL",Success:"Asset loaded successfully"};function bi(e){var n,t=e.isOpen,r=e.close,i=e.onSubmit,o=(0,lM.mN)(),a=(0,lM.FS)(),l=(0,p._)((0,g.useState)(null),2),c=l[0],u=l[1],s=(0,p._)((0,g.useState)(!0),2),d=s[0],h=s[1],m=(0,p._)((0,g.useState)(null),2),v=m[0],y=m[1],w=(0,p._)((0,g.useState)(null),2),b=w[0],x=w[1],Y=(0,g.useRef)(null),S=(0,p._)((0,g.useState)(null),2),A=S[0],_=S[1],k=(0,p._)((0,g.useState)(null),2),C=k[0],I=k[1],D=(b||C||"").startsWith("/")?b||C:"/"+(b||C),E=(0,p._)((0,g.useState)(null),2),R=E[0],U=E[1],F=function(){I(null),u(null),x(null),_(null),U(null),y(null)},P=function(){h(!0),u(null)};(0,g.useEffect)(function(){x(C)},[C]);var O=(0,g.useCallback)((n=(0,tw._)(function(e){var n,t,r,i;return(0,tb.YH)(this,function(l){switch(l.label){case 0:var s;if(!D||!d||"Success"===c||"Failed"===c)return[2];if(s=(0,tw._)(function(e,n){var t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:return u("Loading"),y(t=(0,ay.sU)(e.baseUrl,n)),[4,fetch(t)];case 1:if(r.sent().ok)return U(n),u("Success"),h(!1),[2,!0];return[2,!1]}})}),n=function(e,n){return s.apply(this,arguments)},t=e||a)return[3,8];u("Installing"),l.label=1;case 1:return l.trys.push([1,5,,8]),[4,o()];case 2:if(!(r=l.sent()))return[3,4];return[4,O(r)];case 3:case 6:return l.sent(),[2];case 4:case 7:return[3,8];case 5:if(l.sent(),!a)return[3,7];return[4,O(a)];case 8:if(!t)return[3,11];return i=D.replace(/^(\/public|\/static)/,""),[4,n(t,i.slice(1))];case 9:if(l.sent())return[3,11];return[4,n(t,D)];case 10:l.sent(),l.label=11;case 11:return[2]}})}),function(e){return n.apply(this,arguments)}),[a,D,o,c,d]);(0,g.useEffect)(function(){if(A){var e=A.split("/"),n=e.pop(),t=e.findIndex(function(e){return["public","static"].includes(e)});I((-1!==t?"/".concat(A):"/".concat(e.slice(t+1).join("/"),"/").concat(n))||A),h(!0),O()}},[O,A]);var T=A?A.split("/"):[],L=T[T.length-1];return(0,f.Y)(o7.a,{isOpen:t,onRequestClose:r,children:A?(0,f.FD)(i4.S,{css:[i2.wp.flex.column,i2.wp.colWithGap(16)],children:[(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(al.$n,{text:"Back",size:"small",iconLeft:(0,f.Y)(be.A,{}),onClick:function(){_(null),F()}}),(0,f.FD)(i4.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(bn.A,{}),(0,f.Y)(ac.EY,{color:"dimmer",children:L||""})]})]}),(0,f.Y)(ac.EY,{multiline:!0,children:"Extension assets should be stored in the public asset directory. Move the image or modify the file path, or try again."}),(0,f.FD)(i4.S,{gap:4,children:[(0,f.Y)(wk.pd,{defaultValue:b||"",ref:Y,placeholder:"/icon.png",onChange:function(e){return x(e.target.value)},autoFocus:!0,disabled:"Loading"===c||"Installing"===c||"Success"===c}),v&&("Loading"===c||"Success"===c||"Failed"===c)?(0,f.Y)("a",{href:v,target:"_blank",children:(0,f.FD)(ac.EY,{color:"dimmer",variant:"small",css:[i2.wp.rowWithGap(4),i2.wp.display.flex,{fontStyle:"italic"}],children:[(0,f.FD)("span",{css:[i2.wp.truncate],children:["Loading"===c?"Checking ":null,"Success"===c?"Found at ":null,"Failed"===c?"Failed to load ":null,v]}),(0,f.Y)(i4.S,{css:[i2.wp.display.inlineBlock],children:(0,f.Y)(uD.A,{})})]})}):null]}),(0,f.FD)(i4.S,{row:!0,justify:"space-between",align:"center",children:[(0,f.Y)(i4.S,{row:!0,gap:4,align:"center",children:c?(0,f.Y)(f.FK,{children:"Loading"===c?(0,f.Y)(s5.A,{}):(0,f.Y)(pp.N,{text:br[c],colorway:"Failed"===c?"negative":"positive",icon:"Failed"===c?(0,f.Y)(f0.A,{}):(0,f.Y)(pj.A,{})})}):null}),"Failed"===c?(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(al.$n,{text:"Add Anyways",onClick:function(){var e=C||A;null!==e&&i(e),F(),r()},size:"small"}),(0,f.Y)(al.$n,{text:"Try Again",onClick:function(){P()},size:"small"})]}):null,R&&"Success"===c?(0,f.Y)(al.$n,{text:"Continue",iconLeft:(0,f.Y)(pj.A,{}),colorway:"primary",onClick:function(){i(R),F(),r()}}):null]})]}):(0,f.Y)(w9,{openFile:_,glob:"**/*.{png,jpg,jpeg,webp,svg,gif}"})})}var bo=t(15864),ba=(0,rw.x)({centerRowGap8:[i2.wp.rowWithGap(8),i2.wp.align.center],featureContainer:[i2.wp.flex.column,i2.wp.borderRadius(8),{overflow:"hidden"}],noFeaturesPlaceholder:[i2.wp.border({style:"dashed"}),i2.wp.borderRadius(8),i2.wp.p(16),i2.wp.colWithGap(8),i2.wp.center],featureDetails:[i2.wp.flex.column,i2.wp.colWithGap(4),i2.wp.flex.growAndShrink(1)],newFeatureFieldWrapper:[i2.wp.border({direction:"bottom",color:ry.LU.backgroundHighest})],inputCounterFlex:[i2.wp.flex.row,i2.wp.justify.spaceBetween,i2.wp.align.center]});function bl(e){var n=e.features,t=e.onCreate,r=e.onUpdate,i=e.onDelete,o=(0,p._)((0,g.useState)([]),2),a=o[0],l=o[1],c=(0,p._)((0,g.useState)(!1),2),u=c[0],s=c[1];return(0,f.FD)(i4.S,{children:[(0,f.FD)(i4.S,{pb:12,children:[(0,f.FD)(i4.S,{css:ba.centerRowGap8,children:[(0,f.FD)(i4.S,{css:ba.centerRowGap8,children:[(0,f.Y)(bo.A,{}),(0,f.Y)(ac.EY,{variant:"subheadDefault",children:"Feature Descriptions"})]}),(0,f.Y)(cf.K0,{onClick:function(){s(!u)},alt:"Add a new Feature",tooltipBehavior:u?"hidden":"default",disabled:u,children:(0,f.Y)(oV.A,{})})]}),(0,f.Y)(ac.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Describe what your extension can do. Descriptions will appear on the store listing page."})]}),(0,f.FD)(i4.S,{gap:8,children:[u?(0,f.Y)(bu,{onSubmit:function(e){t(e),s(!1)},onCancel:function(){return s(!1)}}):null,(0,f.Y)(i4.S,{css:ba.featureContainer,children:n.length>0?n.map(function(e,t){return a.includes(t)?(0,f.Y)(bu,{feature:e,isLast:t===n.length-1,onSubmit:function(e){r(e,t),l(function(e){return e.filter(function(e){return e!==t})})},onCancel:function(){return l(function(e){return e.filter(function(e){return e!==t})})}},t):(0,f.Y)(bc,{isLast:t===n.length-1,feature:e,onEdit:function(){return l(function(e){return(0,eE._)(e).concat([t])})},onDelete:function(){i(t)}},t)}):(0,f.Y)(f.FK,{children:u?null:(0,f.FD)(i4.S,{css:ba.noFeaturesPlaceholder,children:[(0,f.Y)(ac.EY,{color:"dimmest",multiline:!0,children:"You haven't added any features yet"}),(0,f.Y)(al.$n,{variant:"outlined",text:"New Feature",iconLeft:(0,f.Y)(oV.A,{}),onClick:function(){return s(!0)}})]})})})]})]})}function bc(e){var n=e.feature,t=e.onEdit,r=e.onDelete,i=e.isLast;return(0,f.FD)(o3.ui,{elevated:!0,css:[i2.wp.flex.row,i2.wp.rowWithGap(8),i2.wp.align.center,i2.wp.p(8),i?null:i2.wp.border({direction:"bottom",color:ry.LU.backgroundHighest})],children:[(0,f.Y)(bs,{size:64,icon:n.image}),(0,f.FD)(i4.S,{css:ba.featureDetails,children:[(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(ac.EY,{children:n.title}),(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(cf.K0,{alt:"Delete",tooltipBehavior:"hidden",onClick:r,children:(0,f.Y)(cz.A,{color:ry.LU.accentNegativeStronger})}),(0,f.Y)(cf.K0,{alt:"Edit",tooltipBehavior:"hidden",onClick:t,children:(0,f.Y)(cG.A,{})})]})]}),(0,f.Y)(ac.EY,{color:"dimmest",multiline:!0,maxLines:1,children:n.body})]})]})}function bu(e){var n=e.onSubmit,t=e.onCancel,r=e.feature,i=e.isLast,o=(0,p._)((0,g.useState)((null==r?void 0:r.title)||""),2),a=o[0],l=o[1],c=(0,p._)((0,g.useState)((null==r?void 0:r.body)||""),2),u=c[0],s=c[1],d=(0,p._)((0,g.useState)((null==r?void 0:r.image)||null),2),h=d[0],m=d[1],v=a.length>=3&&u.length>=16;return(0,f.FD)(o3.ui,{css:[i2.wp.flex.column,i||r?null:i2.wp.borderRadius(8),r?i2.wp.border({color:ry.LU.outlineDefault}):[i?null:i2.wp.border({direction:"bottom",color:ry.LU.backgroundHighest})]],elevated:!0,children:[(0,f.FD)(i4.S,{css:ba.newFeatureFieldWrapper,p:8,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,f.Y)(ac.EY,{children:a||"New Feature"}),(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(al.$n,{text:"Cancel",onClick:t}),(0,f.Y)(al.$n,{text:r?"Save":"Create",colorway:"primary",onClick:function(){return n({title:a,body:u,image:h})},disabled:!v})]})]}),(0,f.FD)(i4.S,{p:8,gap:8,children:[(0,f.FD)(i4.S,{gap:4,children:[(0,f.FD)(i4.S,{css:ba.inputCounterFlex,children:[(0,f.Y)(ac.EY,{color:"dimmer",children:"Title"}),(0,f.Y)(bd,{value:a.length,min:3})]}),(0,f.Y)(wk.pd,{value:a,onChange:function(e){return l(e.target.value)},placeholder:"Seamless Editing",maxLength:60})]}),(0,f.FD)(i4.S,{gap:4,children:[(0,f.FD)(i4.S,{css:ba.inputCounterFlex,children:[(0,f.Y)(ac.EY,{color:"dimmer",children:"Body"}),(0,f.Y)(bd,{value:u.length,min:16})]}),(0,f.Y)(wk.ov,{value:u,onChange:function(e){return s(e.target.value)},placeholder:"Describe what this feature does and how to use it (Markdown supported)",autoSize:!0,maxLength:2e3})]}),(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.FD)(i4.S,{gap:4,grow:!0,shrink:!0,children:[(0,f.Y)(ac.EY,{color:"dimmer",children:"Image (Recommended)"}),(0,f.Y)(ac.EY,{color:"dimmest",multiline:!0,children:"Choose a statically-served image from your App. The Recommended aspect ratio for a cover image is 800x600."})]}),(0,f.Y)(bs,{size:100,icon:h,editable:!0,onSubmit:function(e){m(e)}})]})]})]})}function bs(e){var n=e.size,t=e.icon,r=e.editable,i=void 0!==r&&r,o=e.onSubmit,a=(0,oM.A)().container,l=(0,ag.A)(a).url,c=l&&t?(0,ay.sU)(l,t):null,u=(0,p._)((0,g.useState)(!1),2),s=u[0],d=u[1];return(0,f.FD)(f.FK,{children:[(0,f.Y)(o3.ui,{background:"default",css:[i?pS.b.filledAndOutlined:null,i2.wp.flex.row,i2.wp.center,i2.wp.width(n),i2.wp.height(.75*n),i2.wp.maxWidth(n),i2.wp.maxHeight(.75*n),i2.wp.borderRadius(4),i2.wp.border({color:ry.LU.backgroundHighest}),i2.wp.flex.grow(1),{background:c?"".concat(ry.LU.backgroundDefault," url(").concat(c,") no-repeat center center / cover"):ry.LU.backgroundDefault}],onClick:function(){return d(!0)},children:c?null:(0,f.Y)(bn.A,{color:ry.LU.foregroundDimmest,size:24})}),i?(0,f.Y)(bi,{isOpen:s,close:function(){return d(!1)},onSubmit:function(e){null==o||o(e)}}):null]})}function bd(e){var n=e.value,t=e.min;return(0,f.FD)(ac.EY,{css:{color:n>=t?ry.LU.accentPositiveStronger:ry.LU.foregroundDimmest},children:[n,"/",t]})}function bp(e,n){let t=0;for(let n=e.length-1;n>=0;n--){let r=e[n];"."===r?e.splice(n,1):".."===r?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(n)for(;t--;)e.unshift("..");return e}let bf=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;var bh=function(){var e=(0,tw._)(function(e){return(0,tb.YH)(this,function(n){switch(n.label){case 0:return[4,e.writeFile("extension.json",JSON.stringify({name:"My Extension",description:"My Extension Description",version:"0"},null,2))];case 1:return n.sent(),[2]}})});return function(n){return e.apply(this,arguments)}}(),bg={readFile:"Failed to read manifest file, please try again",noManifest:"No extension.json found",parseManifest:"Failed to parse manifest file",removedManifest:"extension.json was moved or deleted, please re-create it in your static directory",stateUndefined:"State should be defined"},bm=function(){var e=(0,p._)((0,g.useState)(null),2),n=e[0],t=e[1],r=(0,g.useCallback)(function(e){t(function(n){if(!n)throw Error(bg.stateUndefined);return(0,td._)((0,m._)({},n),{manifestStr:e})})},[]);return{state:n,setState:t,updateString:r}},bv=function(){var e=(0,oM.A)(),n=e.fs,t=e.dotReplit,r=bm(),i=r.state,o=r.setState,a=r.updateString,l=(0,p._)((0,g.useState)(0),2),c=l[0],u=l[1],s=(0,p._)((0,g.useState)(!1),2),d=s[0],f=s[1],h=(0,g.useCallback)((0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return[4,bh(n)];case 1:return e.sent(),[2]}})}),[n]);(0,g.useEffect)(function(){o(null);var e=!1,r=function(){};function i(){return(i=(0,tw._)(function(){var i,l,c,u,s,d,f;return(0,tb.YH)(this,function(h){switch(h.label){case 0:return[4,Promise.all([n.listFiles(),t.getConfig()])];case 1:if(c=(l=p._.apply(void 0,[h.sent(),2]))[0],u=l[1],e)return[2];if(!c.files||u.error)return o({fileReadError:bg.readFile}),[2];if(d=(0,lC.me)(function(e){let n="/"===e.charAt(0),t="/"===e.slice(-1),r=bp(e.split("/").filter(e=>!!e),!n).join("/");return r||n||(r="."),r&&t&&(r+="/"),(n?"/":"")+r}(null!=(s=null==(i=u.config.extension)?void 0:i.outputDirectory)?s:"dist")),!(f=function(e){var n,t=e.filePaths,r=e.outputDir,i=[],o=!0,a=!1,l=void 0;try{for(var c,u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var s=c.value;if("extension.json"===s)return s;s.endsWith("/extension.json")&&i.push(s)}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=!0,p=!1,f=void 0;try{for(var h,g=i[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var m=h.value;if(!m.startsWith(r))return m}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}return null!=(n=i[0])?n:null}({filePaths:c.files,outputDir:d})))return o({fileReadError:bg.noManifest}),[2];return r=n.watchTextFile(f,{onReady:function(e){o({fileReadError:null,writeChange:e.writeChange,manifestStr:e.initialContent,manifestPath:f})},onChange:function(e){a(e.latestContent)},onMoveOrDelete:function(){o({fileReadError:bg.removedManifest})},onError:function(){o({fileReadError:bg.readFile})}}),[2]}})})).apply(this,arguments)}return!function(){i.apply(this,arguments)}(),function(){r(),e=!0}},[n,a,t,c,o]);var v=(0,g.useMemo)(function(){if(!i||null!==i.fileReadError)return null;try{var e=wJ._3(i.manifestStr);return(0,ay.Kf)(e)}catch(e){return{error:e,manifest:null}}},[i]),y=(0,g.useCallback)(function(e){if(!i||(null==v?void 0:v.error)||null!==i.fileReadError)throw Error(bg.parseManifest);var n=wJ.F6(i.manifestStr,e);i.writeChange((0,wQ.s)(i.manifestStr,n)),a(n)},[i,v,a]),w={retry:function(){u(function(e){return e+1})},creatingExtensionJson:d,setCreatingExtensionJson:f,createExtensionJson:h,updateString:a,updateManifest:y};return i?"string"==typeof i.fileReadError?(0,td._)((0,m._)({},w),{__status:"fileReadError",state:{fileReadError:i.fileReadError},parsed:null}):v?v.manifest?(0,td._)((0,m._)({},w),{__status:"success",state:{fileReadError:null,writeChange:i.writeChange,manifestStr:i.manifestStr,manifestPath:i.manifestPath},parsed:v}):(0,td._)((0,m._)({},w),{__status:"fileParseError",state:i,parsed:{manifest:null,error:v.error}}):(0,td._)((0,m._)({},w),{__status:"fileReadError",state:{fileReadError:bg.noManifest},parsed:null}):(0,td._)((0,m._)({},w),{__status:"loading",state:null,parsed:null})},by=function(e){return e.loading="loading",e.fileReadError="fileReadError",e.fileParseError="fileParseError",e.success="success",e}({}),bw=function(){return(0,f.Y)(i4.S,{css:[i2.wp.display.flex,i2.wp.width("100%"),i2.wp.height("100%")],justify:"center",align:"center",children:(0,f.Y)(s5.A,{})})},bb=t(53351);function bx(e){var n=e.children;return(0,f.Y)(i4.S,{gap:12,p:16,children:(0,f.Y)(o3.ui,{elevated:!0,css:[i2.wp.borderRadius(8),i2.wp.colWithGap(8)],p:16,children:n})})}var bY=function(e){var n=e.error,t=e.performPaneOperation,r=e.manifestPath;return(0,f.Y)(bx,{children:(0,f.FD)(i4.S,{gap:16,p:8,children:[(0,f.FD)(i4.S,{row:!0,gap:8,css:[i2.wp.display.flex,i2.wp.align.center],children:[(0,f.Y)(f0.A,{}),(0,f.Y)(ac.EY,{variant:"headerDefault",children:"Error parsing extension.json"})]}),(0,f.Y)(ac.EY,{variant:"subheadDefault",children:"Details:"}),(0,f.Y)(i4.S,{gap:8,children:n instanceof bb.yk?n.issues.map(function(e,n){var t=e.path,r=e.message;return(0,f.FD)(i4.S,{css:[i2.wp.display.flex,i2.wp.flex.row,i2.wp.rowWithGap(4)],children:[(0,f.Y)(ac.EY,{css:[i2.wp.font.code,i2.wp.color.orangeStrongest,i2.wp.backgroundColor.orangeDimmest],children:t}),(0,f.Y)(ac.EY,{children:r})]},n)}):(0,f.Y)(i4.S,{tag:"pre",children:n.message})}),(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(al.$n,{colorway:"primary",text:"Open extension.json",onClick:function(){t({operation:"open",secondary:!0,pane:(0,cP.af)(r)})}}),(0,f.Y)(al.$n,{iconLeft:(0,f.Y)(m0.A,{}),text:"Read extension.json docs",onClick:function(){window.open("https://docs.replit.com/extensions/api/manifest","_blank")}})]})]})})},bS=function(e){var n=e.message,t=bv(),r=t.createExtensionJson,i=t.creatingExtensionJson,o=t.retry,a=t.setCreatingExtensionJson;return(0,f.FD)(bx,{children:[(0,f.FD)(i4.S,{row:!0,gap:8,css:[i2.wp.display.flex,i2.wp.align.center],children:[(0,f.Y)(f0.A,{}),(0,f.Y)(ac.EY,{variant:"subheadDefault",children:n})]}),(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(al.$n,{colorway:"primary",text:"Create extension.json",loading:i,iconLeft:i?(0,f.Y)(s5.A,{}):(0,f.Y)(oV.A,{}),onClick:(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return a(!0),[4,r()];case 1:return e.sent(),o(),a(!1),[2]}})})}),(0,f.Y)(al.$n,{text:"Retry",iconLeft:(0,f.Y)(uF.A,{}),onClick:function(){o()}})]})]})},bA=t(37582),b_=t(66283),bk=t(48238),bC=t(76804),bI=(0,rw.x)({iconContainer:[i2.wp.position.relative,i2.wp.width(64),i2.wp.height(64),{"&:hover .edit-overlay":{opacity:1}}],iconWrapper:[i2.wp.flex.column,i2.wp.position.absolute,i2.wp.top(0),i2.wp.left(0)],iconOverlay:[i2.wp.flex.column,i2.wp.colWithGap(4),i2.wp.center,i2.wp.position.absolute,i2.wp.top(0),i2.wp.left(0),i2.wp.width("100%"),i2.wp.height("100%"),i2.wp.backgroundColor.backgroundOverlay,i2.wp.borderRadius(12),{transition:"0.25s",opacity:0,cursor:"pointer"}]});function bD(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,lM.FS)(),i=(0,lM.mN)(),o=(0,lM.WB)(),a=(0,lM.EF)(),l=(0,lL.HG)(),c=(0,p._)((0,g.useState)(!1),2),u=c[0],s=c[1],d=(0,p._)((0,g.useState)(!1),2),h=d[0],m=d[1];return(0,f.Y)(i4.S,{css:[i2.wp.flex.wrap,{rowGap:8}],row:!0,gap:8,children:(0,f.FD)(i4.S,{row:!0,gap:8,children:[r||h?(0,f.FD)(f.FK,{children:[(0,f.Y)(al.$n,{size:"small",text:"Reload",iconLeft:h?(0,f.Y)(s5.A,{}):(0,f.Y)(uF.A,{}),disabled:h,onClick:(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:if(!r)return[2];return m(!0),[4,o(r.installationId)];case 1:return e.sent(),m(!1),[2]}})})}),(0,f.Y)(al.$n,{size:"small",text:"Unload",iconLeft:(0,f.Y)(sa.A,{}),disabled:!r,onClick:function(){r&&a(r.installationId)}})]}):(0,f.Y)(al.$n,{size:"small",text:"Load locally",colorway:"primary",iconLeft:u?(0,f.Y)(s5.A,{}):(0,f.Y)(cg.A,{}),loading:u,onClick:(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return s(!0),[4,i()];case 1:return e.sent(),s(!1),[2]}})})}),l?(0,f.Y)(al.$n,{size:"small",text:"View on Store",iconLeft:(0,f.Y)(bC.A,{}),onClick:function(){return n({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:l}}})}}):null,(0,f.Y)(al.$n,{size:"small",text:"Edit Store Listing",onClick:function(){t(1)},iconLeft:(0,f.Y)(cG.A,{})})]})})}function bE(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,oM.A)().container,i=(0,ag.A)(r).url,o=bv(),a=o.parsed,l=o.state,c=o.__status;if(c===by.loading)return(0,f.Y)(bw,{});if(c===by.fileReadError)return(0,f.Y)(bS,{message:l.fileReadError});var u=a.manifest,s=a.error;return s?(0,f.Y)(bY,{performPaneOperation:n,manifestPath:l.manifestPath,error:s}):(0,f.Y)(i4.S,{gap:16,css:[i2.wp.width("100%")],children:(0,f.FD)(o3.ui,{elevated:!0,css:[i2.wp.borderRadius(8),i2.wp.colWithGap(8)],p:12,children:[(0,f.FD)(i4.S,{row:!0,gap:16,align:"center",children:[(0,f.Y)(i4.S,{css:[i2.wp.display.flex,i2.wp.flex.row],grow:0,children:(0,f.Y)(b_.B,{size:64,baseUrl:null!=i?i:null,icon:u.icon})}),(0,f.FD)(i4.S,{grow:!0,shrink:!0,children:[(0,f.Y)(yV.z,{align:"center",justify:"space-between",children:(0,f.Y)(ac.EY,{variant:"subheadDefault",children:u.name})}),(0,f.Y)(ac.EY,{variant:"text",color:"dimmest",children:u.description})]})]}),(0,f.Y)(bD,{setSelectedTab:t,performPaneOperation:n})]})})}function bR(e){var n,t,r,i,o,a,l,c,u,s,d=e.manifest,h=e.onSubmit,v=e.updateManifest,y=(0,lL.HG)(),b=(0,aa.T)(),x=(0,w7.c)(),Y=(0,p._)((0,g.useState)(null!=(l=d.name)?l:""),2),S=Y[0],A=Y[1],_=(0,p._)((0,g.useState)(null!=(c=d.description)?c:""),2),k=_[0],C=_[1],I=(0,p._)((0,g.useState)(null!=(u=d.longDescription)?u:void 0),2),D=I[0],E=I[1],R=(0,p._)((0,g.useState)(!1),2),U=R[0],F=R[1],P=(0,oM.A)().container,O=(0,ag.A)(P).url,T=(n={variables:{id:y||""},skip:!y},t=(0,m._)({},w4,n),w.I(w5,t)),L=T.data,M=T.loading,G=T.refetch,N=(0,p._)((0,w0.$I)(),2),B=N[0],H=N[1].loading,z=(null==L||null==(r=L.extension)?void 0:r.__typename)==="Extension"&&(null==L||null==(i=L.extension)?void 0:i.user.id)===b,W=(null==L||null==(o=L.extension)?void 0:o.__typename)==="Extension"&&(null==L||null==(a=L.extension)?void 0:a.isListed);return(0,f.FD)(i4.S,{tag:"form",gap:16,onSubmit:function(e){e.preventDefault(),h({name:S,description:k,longDescription:D})},children:[(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:4,children:[(0,f.Y)(ac.EY,{css:[i2.wp.fontWeight.medium],children:"Do you want to publish your extension on the store?"}),M||H?(0,f.Y)(s5.A,{}):(0,f.FD)(bA.z,{css:i2.wp.colWithGap(8),name:"extensionListingStatus",value:W?"listed":"unlisted",disabled:!z,onChange:function(e){B({variables:{extensionId:y||"",isListed:"listed"===e.target.value}}).then(function(){return G()})},children:[z?null:(0,f.Y)(i4.S,{css:[i2.wp.width("fit-content")],children:(0,f.Y)(pp.N,{text:"You need to release this extension before listing it.",icon:(0,f.Y)(w3.A,{}),colorway:"yellow"})}),(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(bA.s,{id:x("listed"),value:"listed"}),(0,f.Y)("label",{htmlFor:x("listed"),children:"Yes, list my extension publicly on the Store"})]},"listed"),(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(bA.s,{id:x("unlisted"),value:"unlisted"}),(0,f.Y)("label",{htmlFor:x("unlisted"),children:"No, I want to keep my listing page private"})]},"unlisted")]})]}),(0,f.Y)(pM.a,{}),(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("name"),children:[(0,f.Y)(ac.EY,{children:"Extension Name"}),(0,f.Y)(wk.pd,{id:x("name"),placeholder:"Give your extension a name",value:S,onChange:function(e){A(e.currentTarget.value)},required:!0})]}),(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:4,children:[(0,f.Y)(ac.EY,{children:"Extension Icon"}),(0,f.FD)(i4.S,{row:!0,gap:12,align:"center",children:[(0,f.FD)(i4.S,{css:bI.iconContainer,children:[(0,f.Y)(i4.S,{css:bI.iconWrapper,children:(0,f.Y)(b_.B,{size:64,baseUrl:null!=O?O:null,icon:d.icon})}),(0,f.FD)(i4.S,{css:bI.iconOverlay,className:"edit-overlay",tag:"label",onClick:function(){return F(!0)},children:[(0,f.Y)(cG.A,{}),(0,f.Y)(ac.EY,{variant:"small",children:"Edit"})]})]}),(0,f.Y)(al.$n,{text:"Choose from file system",iconLeft:(0,f.Y)(bk.A,{}),onClick:function(){return F(!0)}})]})]}),(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("tagline"),children:[(0,f.FD)(i4.S,{gap:0,children:[(0,f.Y)(ac.EY,{children:"Tagline"}),(0,f.Y)(ac.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Provide a short description of what your Extension is for."})]}),(0,f.Y)(wk.pd,{id:x("tagline"),placeholder:"Give your extension a short tagline",value:k,onChange:function(e){C(e.currentTarget.value)},required:!0})]}),(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:4,tag:"label",htmlFor:x("longDescription"),children:[(0,f.FD)(i4.S,{gap:0,children:[(0,f.Y)(ac.EY,{children:"Description"}),(0,f.Y)(ac.EY,{color:"dimmer",variant:"small",multiline:!0,children:"Add more detail about the usage of your extension."})]}),(0,f.Y)(wk.ov,{id:x("longDescription"),placeholder:"Give your extension a long description, markdown formatting is supported",value:null!=D?D:"",onChange:function(e){E(e.currentTarget.value||void 0)},css:{resize:"vertical"},autoSize:!0})]}),(0,f.Y)(pM.a,{}),(0,f.Y)(bl,{features:null!=(s=d.features)?s:[],onDelete:function(e){if((null==(n=d.features)?void 0:n.length)===1&&0===e){var n,t,r=(0,m._)({},d);delete r.features,v(r)}else v((0,td._)((0,m._)({},d),{features:null==(t=d.features)?void 0:t.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;v((0,td._)((0,m._)({},d),{features:(0,eE._)(null!=(i=null==(t=d.features)?void 0:t.slice(0,n))?i:[]).concat([e],(0,eE._)(null!=(o=null==(r=d.features)?void 0:r.slice(n+1))?o:[]))}))},onCreate:function(e){var n;v((0,td._)((0,m._)({},d),{features:(0,eE._)(null!=(n=d.features)?n:[]).concat([e])}))}}),(0,f.Y)(i4.S,{row:!0,gap:12,css:[{alignSelf:"end"},i2.wp.pt(8)],children:(0,f.Y)(al.$n,{text:"Continue",iconRight:(0,f.Y)(uw.A,{}),colorway:"primary",type:"submit",disabled:!S||!k||!D})}),(0,f.Y)(bi,{isOpen:U,close:function(){return F(!1)},onSubmit:function(e){v((0,td._)((0,m._)({},d),{icon:e}))}})]})}function bU(e){var n=e.fileHandlers,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,p._)((0,g.useState)([]),2),l=a[0],c=a[1],u=(0,p._)((0,g.useState)(!1),2),s=u[0],d=u[1];return(0,f.FD)(i4.S,{children:[(0,f.FD)(i4.S,{pb:12,children:[(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",children:[(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(lj.A,{}),(0,f.Y)(ac.EY,{variant:"subheadDefault",multiline:!1,children:"File Handlers"})]}),(0,f.Y)(cf.K0,{onClick:function(){return d(!s)},alt:"Add a new File Handler",tooltipBehavior:s?"hidden":"default",disabled:s,children:(0,f.Y)(oV.A,{})})]}),(0,f.Y)(ac.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom file viewers and editors"})]}),(0,f.FD)(i4.S,{gap:8,children:[s?(0,f.Y)(bF,{onSubmit:function(e){t(e),d(!1)},onCancel:function(){d(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,f.Y)(bF,{initialFileHandler:e,onSubmit:function(e){r(e,n),c(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){c(function(e){return e.filter(function(e){return e!==n})})}},n):(0,f.FD)(o3.ui,{css:[i2.wp.borderRadius(8),i2.wp.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,f.Y)(ac.EY,{multiline:!1,children:null!=(t=e.name)?t:"Unnamed"}),(0,f.FD)(i4.S,{row:!0,gap:12,align:"center",children:[(0,f.Y)(cf.K0,{alt:"Remove ".concat(e.name||"this file handler"),colorway:"red",onClick:function(){o(n)},children:(0,f.Y)(cz.A,{})}),(0,f.Y)(cf.K0,{alt:"Edit ".concat(e.name||"this file handler"),onClick:function(){c(function(e){return(0,eE._)(e).concat([n])})},children:(0,f.Y)(cG.A,{})}),(0,f.Y)(al.$n,{iconLeft:(0,f.Y)(bk.A,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,f.Y)(f.FK,{children:s?null:(0,f.FD)(i4.S,{css:[i2.wp.border({style:"dashed"}),i2.wp.borderRadius(8),i2.wp.p(16),i2.wp.colWithGap(8),i2.wp.center],children:[(0,f.Y)(ac.EY,{color:"dimmest",children:"You haven't added a file handler yet"}),(0,f.Y)(al.$n,{variant:"outlined",text:"New File Handler",iconLeft:(0,f.Y)(oV.A,{}),onClick:function(){return d(!0)}})]})})]})]})}function bF(e){var n,t,r,i,o=e.onSubmit,a=e.onCancel,l=e.initialFileHandler,c=(0,p._)((0,g.useState)(null!=(n=null==l?void 0:l.name)?n:""),2),u=c[0],s=c[1],d=(0,p._)((0,g.useState)(null!=(t=null==l?void 0:l.icon)?t:""),2),h=d[0],m=d[1],v=(0,p._)((0,g.useState)(null!=(r=null==l?void 0:l.handler)?r:""),2),y=v[0],w=v[1],b=(0,p._)((0,g.useState)(null!=(i=null==l?void 0:l.glob)?i:""),2),x=b[0],Y=b[1],S=(0,w7.c)();return(0,f.FD)(o3.ui,{css:[i2.wp.borderRadius(8),i2.wp.border({color:ry.LU.outlineDimmest}),i2.wp.p(8),i2.wp.colWithGap(8)],tag:"form",onSubmit:function(e){e.preventDefault(),o({name:u,icon:h,handler:y,glob:x})},elevated:!0,children:[(0,f.FD)(i4.S,{css:[i2.wp.border({color:ry.LU.outlineDimmest,direction:"bottom"}),i2.wp.align.center,i2.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,f.Y)(ac.EY,{multiline:!1,children:u||"New File Viewer"}),(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(al.$n,{text:"Cancel",onClick:function(){a()}}),(0,f.Y)(al.$n,{colorway:"primary",iconLeft:(0,f.Y)(pj.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,f.FD)(i4.S,{gap:8,children:[(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("name"),children:[(0,f.Y)(ac.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,f.Y)(wk.pd,{id:S("name"),placeholder:"SVG Editor",value:u,onChange:function(e){s(e.currentTarget.value)},required:!0})]}),(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("handler"),children:[(0,f.Y)(ac.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,f.Y)(wk.pd,{id:S("handler"),placeholder:"/svg-editor",value:y,onChange:function(e){w(e.currentTarget.value)},required:!0})]}),(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("glob"),children:[(0,f.Y)(ac.EY,{color:"dimmer",multiline:!1,children:"Glob Pattern"}),(0,f.Y)(wk.pd,{id:S("glob"),placeholder:"*.svg",value:x,onChange:function(e){Y(e.currentTarget.value)},required:!0})]}),(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:S("icon"),children:[(0,f.Y)(ac.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,f.Y)(wk.pd,{id:S("icon"),placeholder:"/svg-editor-logo.png",value:h,onChange:function(e){m(e.currentTarget.value)},required:!0})]})]})]})}function bP(e){var n=e.tools,t=e.onCreate,r=e.onUpdate,i=e.onOpen,o=e.onDelete,a=(0,p._)((0,g.useState)([]),2),l=a[0],c=a[1],u=(0,p._)((0,g.useState)(!1),2),s=u[0],d=u[1];return(0,f.FD)(i4.S,{children:[(0,f.FD)(i4.S,{pb:12,children:[(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",children:[(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(oK.A,{}),(0,f.Y)(ac.EY,{variant:"subheadDefault",multiline:!1,children:"Tools"})]}),(0,f.Y)(cf.K0,{onClick:function(){return d(!s)},alt:"Add a new tool",disabled:s,tooltipBehavior:s?"hidden":"default",children:(0,f.Y)(oV.A,{})})]}),(0,f.Y)(ac.EY,{color:"dimmer",variant:"small",multiline:!1,children:"Custom user interfaces as a Pane"})]}),(0,f.FD)(i4.S,{gap:8,children:[s?(0,f.Y)(bO,{onSubmit:function(e){t(e),d(!1)},onCancel:function(){d(!1)}}):null,n.length?n.map(function(e,n){var t;return l.includes(n)?(0,f.Y)(bO,{initialTool:e,onSubmit:function(e){r(e,n),c(function(e){return e.filter(function(e){return e!==n})})},onCancel:function(){c(function(e){return e.filter(function(e){return e!==n})})}},n):(0,f.FD)(o3.ui,{css:[i2.wp.borderRadius(8),i2.wp.flex.wrap,{rowGap:8}],p:8,row:!0,justify:"space-between",align:"center",elevated:!0,children:[(0,f.Y)(ac.EY,{multiline:!1,children:null!=(t=e.name)?t:"Unnamed"}),(0,f.FD)(i4.S,{row:!0,gap:12,align:"center",children:[(0,f.Y)(cf.K0,{alt:"Remove ".concat(e.name||"this tool"),colorway:"red",onClick:function(){o(n)},children:(0,f.Y)(cz.A,{})}),(0,f.Y)(cf.K0,{alt:"Remove ".concat(e.name||"this tool"),onClick:function(){c(function(e){return(0,eE._)(e).concat([n])})},children:(0,f.Y)(cG.A,{})}),(0,f.Y)(al.$n,{iconLeft:(0,f.Y)(u3,{}),variant:"outlined",text:"Preview",onClick:function(){i(e)}})]})]},n)}):(0,f.Y)(f.FK,{children:s?null:(0,f.FD)(i4.S,{css:[i2.wp.border({style:"dashed"}),i2.wp.borderRadius(8),i2.wp.p(16),i2.wp.colWithGap(8),i2.wp.center],children:[(0,f.Y)(ac.EY,{color:"dimmest",children:"You haven't added any tools"}),(0,f.Y)(al.$n,{variant:"outlined",text:"New Tool",iconLeft:(0,f.Y)(oV.A,{}),onClick:function(){return d(!0)}})]})})]})]})}function bO(e){var n,t,r,i=e.onSubmit,o=e.onCancel,a=e.initialTool,l=(0,p._)((0,g.useState)(null!=(n=null==a?void 0:a.name)?n:""),2),c=l[0],u=l[1],s=(0,p._)((0,g.useState)(null!=(t=null==a?void 0:a.icon)?t:null),2),d=s[0],h=s[1],m=(0,p._)((0,g.useState)(null!=(r=null==a?void 0:a.handler)?r:""),2),v=m[0],y=m[1],w=(0,w7.c)();return(0,f.FD)(o3.ui,{tag:"form",css:[i2.wp.borderRadius(8),i2.wp.border({color:ry.LU.outlineDimmest}),i2.wp.p(8)],elevated:!0,onSubmit:function(e){e.preventDefault(),i({name:c,icon:d,handler:v})},children:[(0,f.FD)(i4.S,{css:[i2.wp.border({color:ry.LU.outlineDimmest,direction:"bottom"}),i2.wp.align.center,i2.wp.flex.wrap,{rowGap:8}],row:!0,gap:2,justify:"space-between",children:[(0,f.Y)(ac.EY,{multiline:!1,children:c||"New Tool"}),(0,f.FD)(i4.S,{row:!0,gap:8,children:[(0,f.Y)(al.$n,{text:"Cancel",onClick:function(){o()}}),(0,f.Y)(al.$n,{colorway:"primary",iconLeft:(0,f.Y)(pj.A,{}),text:"Save Changes",type:"submit"})]})]}),(0,f.FD)(i4.S,{gap:8,children:[(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:w("name"),children:[(0,f.Y)(ac.EY,{color:"dimmer",multiline:!1,children:"Name"}),(0,f.Y)(wk.pd,{id:w("name"),placeholder:"SQL Viewer",value:c,onChange:function(e){u(e.currentTarget.value)},required:!0})]}),(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:w("handler"),children:[(0,f.Y)(ac.EY,{color:"dimmer",multiline:!1,children:"URL Path"}),(0,f.Y)(wk.pd,{id:w("handler"),placeholder:"/sql",value:v,onChange:function(e){y(e.currentTarget.value)},required:!0})]}),(0,f.FD)(i4.S,{grow:!0,shrink:!0,gap:2,tag:"label",htmlFor:w("icon"),children:[(0,f.Y)(ac.EY,{color:"dimmer",multiline:!1,children:"Icon (path)"}),(0,f.Y)(wk.pd,{id:w("icon"),placeholder:"/sql-logo.png",value:null!=d?d:"",onChange:function(e){h(e.currentTarget.value||null)},required:!0})]})]})]})}function bT(e){var n,t,r,i,o,a=e.manifest,l=e.performPaneOperation,c=e.update,u=(0,lM.FS)(),s=(0,lM.mN)(),d=(0,p._)((0,g.useState)(null),2),h=d[0],v=d[1];return(0,f.FD)(i4.S,{gap:24,css:[i2.wp.width("100%")],children:[(0,f.Y)(bU,{onOpen:(n=(0,tw._)(function(e){return(0,tb.YH)(this,function(n){return v(e),[2]})}),function(e){return n.apply(this,arguments)}),onDelete:function(e){var n;c((0,td._)((0,m._)({},a),{fileHandlers:null==(n=a.fileHandlers)?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;c((0,td._)((0,m._)({},a),{fileHandlers:(0,eE._)(null!=(i=null==(t=a.fileHandlers)?void 0:t.slice(0,n))?i:[]).concat([e],(0,eE._)(null!=(o=null==(r=a.fileHandlers)?void 0:r.slice(n+1))?o:[]))}))},onCreate:function(e){var n;c((0,td._)((0,m._)({},a),{fileHandlers:(0,eE._)(null!=(n=a.fileHandlers)?n:[]).concat([e])}))},fileHandlers:null!=(i=a.fileHandlers)?i:[]}),(0,f.Y)(bP,{onOpen:(t=(0,tw._)(function(e){var n,t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:if(n=u)return[3,2];return[4,s()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!=(t=e.name)?t:n.manifest.name,baseUrl:n.baseUrl,icon:e.icon,path:e.handler}}}),[2]}})}),function(e){return t.apply(this,arguments)}),onDelete:function(e){var n;c((0,td._)((0,m._)({},a),{tools:null==(n=a.tools)?void 0:n.filter(function(n,t){return t!==e})}))},onUpdate:function(e,n){var t,r,i,o;c((0,td._)((0,m._)({},a),{tools:(0,eE._)(null!=(i=null==(t=a.tools)?void 0:t.slice(0,n))?i:[]).concat([e],(0,eE._)(null!=(o=null==(r=a.tools)?void 0:r.slice(n+1))?o:[]))}))},onCreate:function(e){var n;c((0,td._)((0,m._)({},a),{tools:(0,eE._)(null!=(n=a.tools)?n:[]).concat([e])}))},tools:null!=(o=a.tools)?o:[]}),(0,f.Y)(o7.a,{isOpen:!!h,onRequestClose:function(){return v(null)},children:h?(0,f.Y)(w9,{glob:h.glob,openFile:(r=(0,tw._)(function(e){var n,t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:if(!h)throw Error("Expected pending file handler");if(n=u)return[3,2];return[4,s()];case 1:n=r.sent(),r.label=2;case 2:if(!n)throw Error("Expected current repl to be installed as an extension");return l({operation:"open",pane:{type:"extension",data:{extensionId:n.extensionId,installationId:n.installationId,name:null!=(t=h.name)?t:n.manifest.name,baseUrl:n.baseUrl,path:(0,ay.sU)(n.baseUrl,h.handler),filePath:e}}}),v(null),[2]}})}),function(e){return r.apply(this,arguments)})}):null})]})}var bL=t(82839),bM=t(55549),bG=t(81785),bN=(0,l7.AH)(pS.b.filled,i2.wp.position.relative,i2.wp.p(4),i2.wp.border({color:ry.LU.outlineDimmer}),i2.wp.backgroundColor.backgroundHigher,{"&[data-complete]":[i2.wp.backgroundColor.backgroundDefault,{pointerEvents:"none"}],button:{overflow:"hidden",margin:-1,borderWidth:0,padding:0,width:1,height:1,background:"none",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",cursor:"pointer","&::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",cursor:"pointer",zIndex:1}}}),bB=function(e){var n=e.complete,t=e.onClick,r=e.description,i=e.title,o=e.icon;return(0,f.Y)(i4.S,{tag:"li",css:bN,"data-complete":n,children:(0,f.FD)(i4.S,{p:4,children:[(0,f.FD)(i4.S,{row:!0,gap:6,align:"center",children:[n?(0,f.Y)(pj.A,{color:ry.LU.accentPositiveStrongest,size:16,css:[i2.wp.mr(4)]}):null!=o?o:null,(0,f.Y)(ac.EY,{variant:"small",color:n?"dimmer":"default",css:[i2.wp.fontWeight.medium],children:i})]}),r?(0,f.Y)(ac.EY,{color:"dimmer",variant:"small",children:r}):null,(0,f.Y)(i4.S,{children:(0,f.Y)("button",{onClick:function(){t&&"function"==typeof t&&t()},type:"button",children:"Start"})})]})})};let bH=function(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=(0,bL.g)("extensions-onboarding-checklist"),i=r.isDone,o=r.setAsDone,a=(0,bL.g)("extensions-onboarding-checklist-create"),l=a.isDone,c=a.setAsDone,u=(0,bL.g)("extensions-onboarding-checklist-concepts"),s=u.isDone,d=u.setAsDone,p=(0,bL.g)("extensions-onboarding-checklist-api"),h=p.isDone,v=p.setAsDone,y=(0,bL.g)("extensions-onboarding-checklist-publish").isDone;if((0,g.useEffect)(function(){c()},[]),void 0===i||!0===i)return null;var w=[l,s,h,y].filter(Boolean).length,b=[{name:"create",title:"Create an Extension",complete:!!l,icon:(0,f.Y)(lB.A,{})},{name:"concepts",title:"Learn key concepts",complete:!!s,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:tv.ik.EXTENSIONS}}}),(0,oE.u4)(oE.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"concepts"}),d()},icon:(0,f.Y)(bM.A,{})},{name:"learn",title:"Use the API",complete:!!h,onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:tv.ik.EXTENSIONS}}}),(0,oE.u4)(oE.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"learn"}),v()},icon:(0,f.Y)(wY.A,{})},{name:"publish",title:"Publish your Extension",complete:!!y,onClick:function(){t(1)},icon:(0,f.Y)(bG.A,{})}];return(0,f.Y)("section",{css:[i2.wp.width("100%")],children:(0,f.FD)(i4.S,{gap:12,children:[(0,f.Y)(i4.S,{gap:2,children:(0,f.FD)(i4.S,{row:!0,gap:12,css:[i2.wp.flex.wrap],align:"center",children:[(0,f.Y)(ac.EY,{variant:"subheadDefault",children:"Get started with Extensions"}),(0,f.FD)(i4.S,{row:!0,gap:12,align:"center",children:[(0,f.Y)(i4.S,{row:!0,gap:2,align:"center",justify:"center",children:Array.from({length:b.length}).map(function(e,n){return(0,f.Y)(i4.S,{css:[i2.wp.borderRadius(8),i2.wp.width(12),i2.wp.height(4),n<w?i2.wp.backgroundColor.accentPositiveDefault:i2.wp.backgroundColor.backgroundHighest]},n)})}),(0,f.Y)(ac.EY,{multiline:!1,variant:"small",color:"dimmer",children:"".concat(w,"/").concat(b.length)}),(0,f.Y)(cf.K0,{alt:"Hide section",onClick:o,children:(0,f.Y)(uJ.A,{})})]})]})}),(0,f.Y)(i4.S,{tag:"ul",css:[i2.wp.flex.wrap,{listStyleType:"none",gap:ry.LU.space8}],row:!0,children:b.map(function(e,n){return(0,f.Y)(bB,(0,m._)({},e),n)})})]})})};function bz(e){var n=e.performPaneOperation,t=e.setSelectedTab,r=bv(),i=r.__status,o=r.parsed,a=r.state,l=r.updateString;if("loading"===i)return(0,f.Y)(bw,{});if("fileReadError"===i)return(0,f.Y)(bS,{message:(null==a?void 0:a.fileReadError)||"Unknown error"});if("fileParseError"===i){var c=o.error;return(0,f.Y)(bY,{performPaneOperation:n,manifestPath:a.manifestPath,error:c})}var u=o.manifest;return"success"===i&&u?(0,f.FD)(i4.S,{css:[i2.wp.width("100%")],pt:12,gap:24,align:"center",children:[(0,f.Y)(bE,{performPaneOperation:n,setSelectedTab:t}),(0,f.Y)(bH,{performPaneOperation:n,setSelectedTab:t}),(0,f.Y)(i4.S,{css:[i2.wp.border({direction:"bottom",width:4,color:ry.LU.outlineDimmest}),i2.wp.width("100%")]}),(0,f.FD)(i4.S,{gap:8,css:[i2.wp.width("100%")],children:[(0,f.FD)(i4.S,{gap:2,children:[(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(dH.A,{}),(0,f.Y)(ac.EY,{variant:"subheadDefault",multiline:!1,children:"Permission Scopes"})]}),(0,f.FD)(ac.EY,{variant:"small",color:"dimmer",children:["Let users know what your Extension can do with their data. For more information,"," ",(0,f.Y)("a",{onClick:function(){return n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:tv.ik.EXTENSIONS+"/api/manifest#scopetype"}}})},children:"read the docs"}),"."]})]}),(0,f.Y)(i4.S,{css:[i2.wp.borderRadius(4),i2.wp.border({color:ry.LU.outlineDimmest,width:1}),i2.wp.flex.row,i2.wp.align.center,i2.wp.p(8),i2.wp.flex.wrap,{gap:12},i2.wp.width("fit-content")],children:wX.W.map(function(e){var n;return(0,f.FD)(i4.S,{row:!0,gap:6,align:"center",children:[(0,f.Y)(lz.S,{id:e.key,checked:null==(n=u.scopes)?void 0:n.some(function(n){return n.name===e.key}),onChange:function(n){var t,r,i,o=(null==(t=u.scopes)?void 0:t.some(function(n){return n.name===e.key}))&&!n?wJ.F6(a.manifestStr,(0,td._)((0,m._)({},u),{scopes:null==(r=u.scopes)?void 0:r.filter(function(n){return n.name!==e.key})})):wJ.F6(a.manifestStr,(0,td._)((0,m._)({},u),{scopes:(0,eE._)(null!=(i=u.scopes)?i:[]).concat([{name:e.key,reason:e.description}])}));a.writeChange((0,wQ.s)(a.manifestStr,o)),l(o)}}),(0,f.Y)("label",{htmlFor:e.key,css:[i2.wp.fontSize(12),i2.wp.cursor.pointer],children:(0,f.Y)("abbr",{title:e.description,css:[{textDecorationColor:ry.LU.foregroundDimmest}],children:e.friendlyName})})]},e.key)})})]}),(0,f.Y)(bT,{performPaneOperation:n,manifest:u,update:function(e){var n=wJ.F6(a.manifestStr,e);a.writeChange((0,wQ.s)(a.manifestStr,n)),l(n)}})]}):(0,f.Y)("div",{children:"unknown state"})}var bW=t(47701),bj=t(57762),b$=t(45950),bZ=t(47434),bq=(0,rw.x)({logViewerTopLevel:[i2.wp.height("100%")],logsContainer:[i2.wp.scrollbar.thin,i2.wp.backgroundColor.backgroundDefault,i2.wp.overflowY("scroll"),i2.wp.flex.growAndShrink(1)],logViewerHeader:[i2.wp.border({direction:"bottom",width:ry.LU.borderWidthDefault}),i2.wp.display.flex,i2.wp.flex.row,i2.wp.rowWithGap(8),i2.wp.align.center],logViewerHeaderControl:[i2.wp.flex.row,i2.wp.rowWithGap(4),i2.wp.align.center],logLine:[i2.wp.font.code,pS.b.listItem,i2.wp.rowWithGap(2),i2.wp.align.center],logLineIcon:[{alignSelf:"flex-start"}],logMessage:{flex:"1 1 0"}});function bV(e){var n=e.log,t=e.prevLevel,r=e.isLast,i=e.isFirst,o=(0,p._)((0,g.useState)(!1),2),a=o[0],l=o[1],c=(0,d_.A)().ref;return(0,f.FD)(i4.S,{css:[i2.wp.flex.column,function(e){if(e===b$.$.warn)return{color:ry.LU.yellowStronger,background:"rgba(150, 125, 0, 0.2)",borderTop:i?void 0:"1px solid rgba(150, 125, 0, 0.5)",borderBottom:r?"1px solid rgba(150, 125, 0, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(150, 125, 0, 0.2)"}};if(e===b$.$.error)return{color:ry.LU.accentNegativeStronger,backgroundColor:"rgba(229, 34, 34, 0.2)",borderTop:i?void 0:"1px solid rgba(229, 34, 34, 0.5)",borderBottom:r?"1px solid rgba(229, 34, 34, 0.5)":void 0,"& .cm-gutter":{backgroundColor:"rgba(229, 34, 34, 0.2)"}};var n=ry.LU.backgroundHigher;return t===b$.$.warn?n="rgba(150, 125, 0, 0.5)":t===b$.$.error&&(n="rgba(229, 34, 34, 0.5)"),{color:ry.LU.foregroundDefault,borderTop:i?void 0:"1px solid ".concat(n),borderBottom:r?"1px solid ".concat(n):void 0}}(n.logLevel)],children:[(0,f.FD)(i4.S,{css:bq.logLine,p:2,onClick:function(){return l(function(e){return!e})},children:[(0,f.Y)(i4.S,{css:bq.logLineIcon,p:4,children:(0,f.Y)(function(){return n.logLevel===b$.$.warn?(0,f.Y)(f0.A,{size:16}):n.logLevel===b$.$.error?(0,f.Y)(bZ.A,{size:16}):(0,f.Y)(w3.A,{size:16,css:{opacity:0}})},{})}),(0,f.Y)(ac.EY,{maxLines:10,css:bq.logMessage,variant:"small",children:n.message}),a?(0,f.Y)(dB.A,{size:16}):(0,f.Y)(pX.A,{size:16})]}),a?(0,f.Y)(i4.S,{children:(0,f.Y)(bW.Ay,{ref:c,css:bj.$1,noHistory:!0,readOnly:!0,lineWrapping:!0,language:"json",fontSize:12,initialDoc:JSON.stringify(n,null,2)})}):null]})}let bK=function(){var e=(0,lF.Du)(aB.MN),n=(0,lF.Ol)(aB.KO),t=(0,p._)((0,lF.Cj)(aB.gT),2),r=t[0],i=t[1],o=(0,g.useRef)(null);return(0,g.useEffect)(function(){var e,n=o.current;n&&(null==(e=n.children[n.children.length-1])||e.scrollIntoView({behavior:"smooth"}))},[e]),(0,f.FD)(i4.S,{css:bq.logViewerTopLevel,children:[(0,f.FD)(i4.S,{className:"log-viewer-header",css:bq.logViewerHeader,p:8,children:[(0,f.Y)(i4.S,{css:bq.logViewerHeaderControl,style:{flexGrow:1},children:(0,f.Y)(wk.pd,{type:"search",placeholder:"Filter logs",value:null!=r?r:"",onChange:function(e){return i(e.target.value)}})}),(0,f.FD)(i4.S,{css:bq.logViewerHeaderControl,children:[(0,f.Y)(cf.K0,{alt:"Clear logs",onClick:function(){return n()},children:(0,f.Y)(uJ.A,{id:"clear-logs"})}),(0,f.Y)("label",{htmlFor:"clear-logs",children:"Clear logs"})]})]}),(0,f.Y)(i4.S,{css:bq.logsContainer,innerRef:o,children:e.map(function(n,t){var r;return(0,f.Y)(bV,{log:n,prevLevel:null==(r=e[t-1])?void 0:r.logLevel,isFirst:0===t,isLast:t===e.length-1},n.index)})})]})};var bJ=t(68197),bQ=t(51026);function bX(){var e=(0,v._)(["\n  subscription ExtensionBuildLogs($extensionId: String!) {\n    extensionBuildDeployActionUpdates(input: { extensionId: $extensionId }) {\n      ... on ExtensionBuildDeployLogAction {\n        log\n      }\n      ... on ExtensionBuildDeployStatusAction {\n        status\n        message\n        build {\n          id\n        }\n      }\n    }\n  }\n"]);return bX=function(){return e},e}function b0(){var e=(0,v._)(["\n  mutation DeployExtension2(\n    $extensionId: String!\n    $replId: String!\n    $outputDirectory: String!\n    $buildCommand: String!\n  ) {\n    deployExtension2(\n      extensionId: $extensionId\n      replId: $replId\n      outputDirectory: $outputDirectory\n      buildCommand: $buildCommand\n    ) {\n      ... on Extension {\n        ...TopLevelExtension\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return b0=function(){return e},e}function b1(){var e=(0,v._)(["\n  query Publish2Extension($extensionId: String!) {\n    extension(id: $extensionId) {\n      ... on Extension {\n        id\n        user {\n          id\n          username\n        }\n        name\n        description\n        canDeployExtension\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return b1=function(){return e},e}function b2(){var e=(0,v._)(["\n  mutation CreateExtension($name: String!, $description: String!) {\n    createExtension(name: $name, description: $description) {\n      ... on Extension {\n        id\n        url\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return b2=function(){return e},e}function b4(){var e=(0,v._)(["\n  mutation UpdateExtension(\n    $extensionId: String!\n    $name: String\n    $description: String\n  ) {\n    updateExtension(\n      extensionId: $extensionId\n      name: $name\n      description: $description\n    ) {\n      ... on Extension {\n        id\n        name\n        description\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return b4=function(){return e},e}var b5={},b7=(0,y.J1)(bX()),b3=(0,y.J1)(b0(),at.Fz),b6=(0,y.J1)(b1()),b8=(0,y.J1)(b2()),b9=(0,y.J1)(b4()),xe=t(76554),xn=i4.D.button,xt=function(e){return e.Pending="pending",e.Active="active",e.Complete="complete",e.Error="error",e}({}),xr=function(){return(0,f.Y)(i4.S,{css:[i2.wp.border({color:ry.LU.outlineDimmest,direction:"top"})],grow:!0,row:!0})},xi=function(e){var n=e.text,t=e.size,r=void 0===t?"default":t,i=e.state,o=e.onClick,a=e.disabled,l=e.hideLoadingIcon,c=(0,al.J)(r),u=(0,al.Jt)(r);return(0,f.Y)(xn,{type:"button",css:[i2.wp.reset.button,i2.wp.position.relative,o&&pS.b.nofill,i2.wp.px(8),i2.wp.py(2),i2.wp.borderRadius(4),i2.wp.rowWithGap(4),i2.wp.align.center,{borderRadius:ry.LU.borderRadiusRound}].concat((0,eE._)("error"===i?[i2.wp.color.accentNegativeStronger]:"active"===i?[i2.wp.backgroundColor.accentPrimaryDimmer,i2.wp.color.accentPrimaryStrongest]:"complete"===i?[i2.wp.color.accentPositiveStronger]:[i2.wp.color.foregroundDimmest])),onClick:o,disabled:a,children:(0,f.Y)(al.EE,{text:n,iconSize:u,textVariant:c,iconRight:function(){if("error"===i)return(0,f.Y)(f0.A,{});if("active"===i){if(l)return;return(0,f.Y)(s5.A,{})}return"complete"===i?(0,f.Y)(pj.A,{}):(0,f.Y)(dH.A,{})}()})})},xo=t(76982),xa=t(66147),xl=t(72419),xc=t(63599),xu=t(38524),xs=function(e){return e.Details="Details",e.Init="Init",e.CreatingExtension="CreatingExtension",e.CreatingExtensionError="CreatingExtensionError",e.Queued="Queued",e.Deploying="Deploying",e.DeployError="DeployError",e.Success="Success",e}(xs||{}),xd=["CreatingExtension","Deploying"],xp=function(e){return e.Details="Details",e.Init="Configure",e.Create="Create",e.Deploy="Deploy",e}(xp||{}),xf=["Details","Configure","Deploy"];function xh(e){var n,t,r,i,o,a,l,c,u=e.performPaneOperation,s=(0,oM.A)(),d=s.container,h=s.fs,v=s.dotReplit,y=(0,p._)((n=(0,m._)({},b5,void 0),bQ._(b6,n)),1)[0],w=(0,bL.g)("extensions-onboarding-checklist-".concat("publish")).setAsDone,x=(0,p._)((0,g.useState)(null),2),Y=x[0],S=x[1],A=(0,p._)((0,g.useState)("Details"),2),_=A[0],k=A[1],C=(0,p._)((0,g.useState)(null),2),I=C[0],D=C[1],E=bv(),R=E.__status,U=E.parsed,F=E.state,P=E.updateManifest,O=(0,xe.W)("",function(e){return e?e.startsWith("/")?{message:'Folder must be relative to the root of your project (e.g. "extension" or "./extension")',severity:"error"}:null:{message:"Output folder is required",severity:"error"}}),T=O.value,L=O.setValue,M=O.error,G=O.validate,N=(0,p._)((0,g.useState)([]),2),B=N[0],H=N[1],z=(0,g.useCallback)(function(e){return u({operation:"open",secondary:!0,pane:{type:(0,nr.QY)(e),data:e}})},[u]),W=(0,p._)((0,xo.A)({openFile:z,listFiles:h.listFiles}),2),j=W[0],$=W[1],Z=(0,xa.V)();t=(0,m._)({},b5,{variables:{extensionId:null!=Y?Y:""},onData:function(e){var n=e.data;if(n.data&&!n.error){var t=n.data.extensionBuildDeployActionUpdates;"ExtensionBuildDeployLogAction"===t.__typename&&H(function(e){return(0,eE._)(e).concat((0,eE._)(t.log))}),"ExtensionBuildDeployStatusAction"===t.__typename&&(t.status===c9.nHS.Success?k("Success"):t.status===c9.nHS.Failed&&k("DeployError"))}},skip:"Deploying"!==_||!Y}),bJ.R(b7,t),(0,g.useEffect)(function(){j&&(j.clear(),B.forEach(function(e){j.write(e.replaceAll("\n","\r\n"))}))},[B,j]);var q=(0,g.useCallback)(function(e){if(null==e?void 0:e.config){var n=e.config.extension;if(!n||!1===n.isExtension){S(null),D(null),L(null);return}n.buildCommand&&D(n.buildCommand),n.outputDirectory&&L(n.outputDirectory),n.extensionID&&S(n.extensionID)}},[L]);(0,g.useEffect)(function(){var e=!1;return(0,tw._)(function(){var n;return(0,tb.YH)(this,function(t){switch(t.label){case 0:return[4,v.getConfig()];case 1:if(n=t.sent(),e)return[2];return q(n),[2]}})})(),function(){e=!0}},[v,q]);var V=(0,g.useCallback)((r=(0,tw._)(function(e){return(0,tb.YH)(this,function(n){switch(n.label){case 0:return S(e),[4,v.updateDotReplit([{op:"add",path:"extension/extensionID",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return r.apply(this,arguments)}),[v]),K=(0,g.useCallback)((i=(0,tw._)(function(e){return(0,tb.YH)(this,function(n){switch(n.label){case 0:return D(e),[4,v.updateDotReplit([{op:"add",path:"extension/buildCommand",value:JSON.stringify(e)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])];case 1:return n.sent(),[2]}})}),function(e){return i.apply(this,arguments)}),[v]),J=(0,p._)((0,g.useState)(null),2),Q=J[0],X=J[1],ee=(0,p._)((0,g.useState)(null),2),en=ee[0],et=ee[1],er=(0,p._)((0,g.useState)(null),2),ei=er[0],eo=er[1],ea=(0,p._)((0,g.useState)(null),2),el=ea[0],eu=ea[1],es=(0,p._)((0,g.useState)(null),2),ed=es[0],ep=es[1],ef=(0,p._)((o=(0,m._)({},b5,void 0),b.n(b3,o)),1)[0],eh=(0,ec.A)(),eg=(0,p._)((a=(0,m._)({},b5,void 0),b.n(b8,a)),1)[0],em=(0,p._)((0,g.useState)(null),2),ev=em[0],ey=em[1],ew=(0,g.useCallback)((l=(0,tw._)(function(e){var n,t,r;return(0,tb.YH)(this,function(i){switch(i.label){case 0:return[4,eg({variables:{name:e.name,description:e.description}})];case 1:if((t=i.sent()).errors)return[2,{error:t.errors.map(function(e){return e.message}).join(", "),result:null}];if(!(r=null==(n=t.data)?void 0:n.createExtension))return[2,{error:"Failed to create extension",result:null}];if("TooManyRequestsError"===r.__typename||"UserError"===r.__typename||"UnauthorizedError"===r.__typename)return[2,{error:"Failed to create extension: "+r.message,result:null}];if("Extension"===r.__typename)return[2,{error:null,result:r}];throw Error("Unexpected response from createExtension mutation")}})}),function(e){return l.apply(this,arguments)}),[eg]),eb=(0,p._)((c=(0,m._)({},b5,void 0),b.n(b9,c)),1)[0],ex=(0,g.useCallback)((0,tw._)(function(){var e,n,t,r,i,o,a,l,c,u,s,p,f,g,m,v,b,x;return(0,tb.YH)(this,function(S){switch(S.label){case 0:return e=Y,[4,G()];case 1:if(null==(n=S.sent())?void 0:n.message)return eo(null==n?void 0:n.message),[2];if(!T)throw Error("expected output folder");return t=(0,lC.Fd)(T),(r=function(){k("Init"),H([]),ep(null),eo(null),et(null),X(null)})(),[4,h.flush()];case 2:if(S.sent(),!e)return[3,11];return[4,y({variables:{extensionId:e}})];case 3:if((i=S.sent()).error||!i.data)throw Error("Encountered an unknown error. Please contact support.");if((null==(o=i.data.extension)?void 0:o.__typename)!=="NotFoundError")return[3,5];return[4,new Promise(function(n){ey({message:"The extension referenced in .replit (".concat(e,") does not exist. Would you like to create a new extension?"),callback:function(e){ey(null),n(e)}})})];case 4:case 6:if(!S.sent())return r(),[2];return e=null,[3,11];case 5:if(!((null==o?void 0:o.__typename)==="Extension"&&!o.canDeployExtension))return[3,7];return[4,new Promise(function(n){ey({message:"You do not have the permissions to deploy the extension referenced in .replit (".concat(e,"). Would you like to create a new extension?"),callback:function(e){ey(null),n(e)}})})];case 7:if(!((null==o?void 0:o.__typename)==="Extension"&&o.canDeployExtension))return[3,10];if(c=null==U||null==(a=U.manifest)?void 0:a.name,u=null==U||null==(l=U.manifest)?void 0:l.description,!(c&&c!==o.name||u&&u!==o.description))return[3,9];return[4,eb({variables:{extensionId:e,description:null!=u?u:void 0,name:null!=c?c:void 0}})];case 8:S.sent(),S.label=9;case 9:return[3,11];case 10:throw Error("Encountered an unknown error. Please contact support.");case 11:if(e)return[3,13];return k("CreatingExtension"),[4,ew({name:null!=(f=null==U||null==(s=U.manifest)?void 0:s.name)?f:"My extension",description:null!=(g=null==U||null==(p=U.manifest)?void 0:p.description)?g:"My extension's description"})];case 12:if(null!==(m=S.sent()).error)return k("CreatingExtensionError"),eu(m.error),[2];V(e=m.result.id),S.label=13;case 13:var A;if(!e)throw Error("expected extension id to be set");return[4,(A=t,new Promise(function(e){var n=d.openChannel({service:"gcsfiles"},function(t){return t.channel.request({persistMirror:{path:A}}).then(function(t){t.ok,n(),e()}),function(e){e.willReconnect&&n()}})}))];case 14:S.sent(),k("Queued"),S.label=15;case 15:return S.trys.push([15,17,,18]),[4,ef({variables:{extensionId:e,replId:eh,outputDirectory:t,buildCommand:null!=I?I:""}})];case 16:return v=S.sent(),[3,18];case 17:if(b=S.sent(),k("DeployError"),b.message.includes("received message larger than max"))return ep("Your extension's size is too large. Please compress assets or remove files, and try again."),[2];return ep(b.message),[2];case 18:if(v.errors)return k("DeployError"),ep("Internal error. Please contact support: "+v.errors.map(function(e){return e.message}).join(", ")),[2];if(!v.data)return k("DeployError"),ep("Encountered an unknown error. Please contact support."),[2];if("Extension"===(x=v.data.deployExtension2).__typename)return k("Deploying"),w(),(0,oE.u4)(oE.AZ.EXTENSION_DEVELOPER_ONBOARDING_COMPLETED,{step:"publish"}),X(x),[2];if("message"in x)return k("DeployError"),ep(x.message),[2];return k("DeployError"),ep("Encountered an unknown error. Please contact support."),[2]}})}),[I,d,T,G,eh,h,k,ef,y,eb,Y,ew,V,w,U]),eY=function(e){switch(e){case"Details":default:return"Details";case"Init":return"Configure";case"CreatingExtension":case"CreatingExtensionError":return"Create";case"Queued":case"Deploying":case"DeployError":return"Deploy"}}(_),eS=xf.indexOf(eY);function eA(){return en?"Build error: ".concat(en):ei?"Validation error: ".concat(ei):ei?"Create extension error: ".concat(el):ed?"Deploy error: ".concat(ed):void 0}var e_=(0,am.Ot)().find(function(e){return e.extensionId===Y}),ek=(0,p._)((0,g.useState)(!1),2),eC=ek[0],eI=ek[1],eD=(0,am.Sc)(),eR=(0,g.useMemo)(function(){return eC?(0,f.Y)(s5.A,{}):e_?(0,f.Y)(pj.A,{}):(0,f.Y)(cg.A,{})},[eC,e_]),eU=(0,lP.D)().values.global,eF=(0,mK.mO)().fireBurst,eP=(0,p._)((0,g.useState)(!1),2),eO=eP[0],eT=eP[1],eL=(0,g.useRef)(null);if((0,g.useEffect)(function(){eL.current&&!eO&&"Success"===_&&(eF({x:eL.current.getBoundingClientRect().left,y:eL.current.getBoundingClientRect().top,heading:-45,numParticles:160,lifetime:1,spread:80,velocity:function(){return(0,mK.Im)(300,5e3)},size:function(){return{width:(0,mK.Im)(8,16),height:(0,mK.Im)(8,16)}},color:[eU.tealStronger,eU.blurpleStronger,eU.yellowStronger]}),eF({x:eL.current.getBoundingClientRect().right,y:eL.current.getBoundingClientRect().top,heading:225,numParticles:160,lifetime:1,velocity:function(){return(0,mK.Im)(300,5e3)},size:function(){return{width:(0,mK.Im)(8,16),height:(0,mK.Im)(8,16)}},color:[eU.blueStronger,eU.greenStronger,eU.pinkStronger]}),eT(!0))},[_,eU,eF,eO]),R===by.loading)return(0,f.Y)(bw,{});if(R===by.fileReadError)return(0,f.Y)(bS,{message:F.fileReadError});var eM=U.manifest,eG=U.error;return eG?(0,f.Y)(bY,{performPaneOperation:u,manifestPath:F.manifestPath,error:eG}):(0,f.FD)(i4.S,{css:[i2.wp.flex.column,i2.wp.display.flex,i2.wp.height("100%"),i2.wp.justify.center,i2.wp.align.center,i2.wp.position.relative],children:[(0,f.Y)(i4.S,{css:[i2.wp.position.absolute,i2.wp.top(0),i2.wp.left(0),i2.wp.right(0)],className:"Confetti",innerRef:eL}),(0,f.FD)(i4.S,{css:[i2.wp.width("100%"),i2.wp.maxWidth(wK.R)],grow:!0,shrink:!0,p:12,pt:16,gap:24,children:["Success"!==_?(0,f.FD)(f.FK,{children:[(0,f.FD)(i4.S,{gap:16,children:[(0,f.Y)(ac.EY,{variant:"subheadBig",multiline:!0,children:"Create a new release"}),(0,f.Y)(i4.S,{row:!0,gap:4,align:"center",children:xf.map(function(e,n){var t;return(0,f.FD)(g.Fragment,{children:[0!==n&&(0,f.Y)(xr,{}),(0,f.Y)(xi,{state:(t=n)<eS?xt.Complete:t!==eS?xt.Pending:["CreatingExtensionError","DeployError"].includes(_)?xt.Error:xt.Active,text:e,hideLoadingIcon:"Configure"===e||"Details"===e})]},e)})})]}),"Details"===_?(0,f.Y)(i4.S,{css:[i2.wp.flex.column,i2.wp.colWithGap(8),i2.wp.width("100%")],children:(0,f.Y)(bR,{manifest:eM,updateManifest:P,onSubmit:function(e){P((0,m._)({},eM,e)),k("Init")}})}):null,"Details"!==_?(0,f.FD)(f.FK,{children:[(0,f.FD)(i4.S,{gap:16,children:[(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(xu.A,{}),(0,f.Y)(ac.EY,{variant:"subheadDefault",children:"Build settings"}),(0,f.Y)(i4.S,{css:[i2.wp.border({color:ry.LU.backgroundHighest,direction:"y"})],grow:!0})]}),(0,f.FD)(i4.S,{gap:4,children:[(0,f.FD)("label",{htmlFor:"buildCommand",css:[i2.wp.display.flex,i2.wp.rowWithGap(4),i2.wp.align.center],children:[(0,f.Y)(ac.EY,{color:"dimmer",variant:"small",children:"Build command (optional)"}),(0,f.Y)(l3.m_,{tooltip:"This is the command that compiles your app at build time. Leave it blank if you don't need to build your app.",children:(0,f.Y)(w3.A,{size:12})})]}),(0,f.Y)(wk.pd,{value:null!=I?I:"",onChange:function(e){return K(e.target.value)},placeholder:"Example: npm run build",disabled:"Init"!==_&&xd.includes(_)})]}),(0,f.FD)(i4.S,{gap:4,children:[(0,f.FD)("label",{htmlFor:"outputFolder",css:[i2.wp.display.flex,i2.wp.rowWithGap(4),i2.wp.align.center],children:[(0,f.Y)(ac.EY,{color:"dimmer",variant:"small",children:"Output folder"}),(0,f.Y)(l3.m_,{tooltip:"This is where your build will live. There must be an extension.json file in this folder.",children:(0,f.Y)(w3.A,{size:12})})]}),(0,f.Y)(wk.pd,{id:"outputFolder",value:null!=T?T:"",disabled:"Init"!==_&&xd.includes(_),onChange:function(e){L(e.currentTarget.value),v.updateDotReplit([{op:"add",path:"extension/outputDirectory",value:JSON.stringify(e.currentTarget.value)},{op:"add",path:"extension/isExtension",value:JSON.stringify(!0)}])},placeholder:"./extension"}),M?(0,f.Y)(ac.EY,{css:[i2.wp.color.accentNegativeStronger],children:M.message}):null]}),(0,f.Y)(al.$n,{text:"Init"===_||_.endsWith("Error")?"Deploy and Release":"Deploying",iconLeft:"Init"===_||_.endsWith("Error")?(0,f.Y)(mO.A,{}):(0,f.Y)(s5.A,{}),onClick:ex,disabled:"Init"!==_&&xd.includes(_),colorway:"primary"}),(0,f.FD)(ac.EY,{multiline:!0,variant:"small",color:"dimmer",children:["By releasing an Extension, you agree to the"," ",(0,f.Y)("a",{href:tv.aC.EXTENSIONS_DEVELOPER_TERMS,children:"Developer Terms"})]})]}),B.length>0?(0,f.FD)(i4.S,{gap:8,children:[(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(xc.A,{}),(0,f.Y)(ac.EY,{variant:"subheadDefault",children:"Build logs"}),(0,f.Y)(i4.S,{css:[i2.wp.border({color:ry.LU.backgroundHighest,direction:"y"})],grow:!0})]}),eA()?(0,f.Y)(pp.N,{text:eA(),colorway:"red",icon:(0,f.Y)(bZ.A,{})}):null,(0,f.Y)(i4.S,{css:[i2.wp.display.flex,i2.wp.py(12),i2.wp.pl(16),i2.wp.borderRadius(8),i2.wp.overflow("hidden"),{border:"1px solid ".concat(ry.LU.outlineDimmest),backgroundColor:null==Z?void 0:Z.background}],children:(0,f.Y)(i4.D.div,{css:[i2.wp.width("100%"),i2.wp.maxWidth("100%")],ref:$})})]}):null,ev?(0,f.FD)(o3.ui,{elevated:!0,css:[i2.wp.borderRadius(8)],p:8,gap:8,children:[(0,f.Y)(ac.EY,{variant:"text",multiline:!0,maxLines:3,children:ev.message}),(0,f.FD)(i4.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(al.$n,{text:"No",css:[i2.wp.flex.grow(1)],onClick:function(){return ev.callback(!1)}}),(0,f.Y)(al.$n,{text:"Yes",colorway:"primary",css:[i2.wp.flex.grow(1)],onClick:function(){return ev.callback(!0)}})]})]}):null]}):null]}):null,Q&&"Success"===_?(0,f.FD)(i4.S,{gap:16,children:[(0,f.FD)(i4.S,{gap:4,children:[(0,f.Y)(ac.EY,{variant:"subheadBig",multiline:!1,children:"Congratulations!"}),(0,f.Y)(ac.EY,{color:"dimmer",multiline:!1,children:"You just published a new release to the Extensions Store."})]}),(0,f.Y)(i4.S,{py:8,children:(0,f.Y)(xl.q,{showMetadata:!1,extension:Q,onClick:function(){u({operation:"open",pane:{type:"extensionStore",data:{page:"cover",coverPageExtensionId:(0,ao.PM)(Q.id)}}})}})}),(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(bM.A,{}),(0,f.Y)(ac.EY,{variant:"subheadDefault",multiline:!1,children:"Next steps"}),(0,f.Y)(i4.S,{css:[i2.wp.border({color:ry.LU.backgroundHighest,direction:"y"})],grow:!0})]}),(0,f.FD)(i4.S,{css:[i2.wp.border({color:ry.LU.outlineDimmest}),i2.wp.borderRadius(8)],p:12,gap:8,children:[(0,f.Y)(ac.EY,{variant:"subheadDefault",children:"Install your Extension"}),(0,f.Y)(ac.EY,{color:"dimmer",children:"Once installed, you can use the extension in any of your Apps."}),(0,f.Y)(al.$n,{text:e_?"Already installed":"Install Extension",colorway:e_?"green":"primary",disabled:eC||!!e_,iconLeft:eR,loading:eC,onClick:(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return eI(!0),[4,eD({extensionId:(0,ao.PM)(Q.id),replId:null})];case 1:return e.sent(),eI(!1),[2]}})})})]})]}):null]})]})}var xg=t(98661),xm=t(82356);function xv(e){var n=e.performPaneOperation,t=(0,p._)((0,g.useState)(0),2),r=t[0],i=t[1];return(0,f.Y)(i4.S,{css:[i2.wp.flex.column,i2.wp.height("100%"),i2.wp.position.relative],children:(0,f.FD)(xg.tU,{css:[i2.wp.flex.grow(1),i2.wp.flex.column,i2.wp.align.center,i2.wp.display.flex,i2.wp.overflow("hidden")],selectedIndex:r,onSelectionChange:function(e){return i(e)},children:[(0,f.Y)(o3.ui,{css:[i2.wp.top(0),i2.wp.width("100%"),i2.wp.zIndex(1)],align:"center",children:(0,f.FD)(xg.wb,{css:[i2.wp.align.center,i2.wp.width("100%"),i2.wp.pb(0),i2.wp.maxWidth(wK.R)],children:[(0,f.Y)(xg.oz,{css:[i2.wp.p(12),i2.wp.height("100%"),i2.wp.borderRadius(0)],iconLeft:(0,f.Y)(gq.A,{}),children:"Home"}),(0,f.Y)(xg.oz,{css:[i2.wp.p(12),i2.wp.height("100%"),i2.wp.borderRadius(0)],iconLeft:(0,f.Y)(xm.A,{}),children:"Releases"}),(0,f.Y)(xg.oz,{css:[i2.wp.p(12),i2.wp.height("100%"),i2.wp.borderRadius(0)],iconLeft:(0,f.Y)(bZ.A,{}),children:"Logs"}),(0,f.Y)(i4.S,{grow:!0}),(0,f.Y)(o3.ui,{css:[{boxShadow:"inset 0 -1px 0 ".concat(ry.LU.outlineDimmest)}],p:8,children:(0,f.Y)(al.$n,{text:"Docs",onClick:function(){n({operation:"open",secondary:!0,pane:{type:"docs",data:{url:tv.ik.EXTENSIONS}}})},variant:"outlined",size:"small",iconLeft:(0,f.Y)(m0.A,{}),css:[i2.wp.display.inlineFlex]})})]})}),(0,f.FD)(xg.T2,{css:[i2.wp.flex.grow(1),i2.wp.align.center,i2.wp.justify.center,i2.wp.width("100%"),i2.wp.display.flex,i2.wp.overflow("hidden")],children:[(0,f.Y)(xg.Kp,{css:[i2.wp.height("100%"),i2.wp.p(12),i2.wp.maxWidth(wK.R),i2.wp.display.flex,i2.wp.width("100%"),i2.wp.justify.center,i2.wp.overflowY("scroll")],children:(0,f.Y)(bz,{performPaneOperation:n,setSelectedTab:i})}),(0,f.Y)(xg.Kp,{css:[i2.wp.height("100%"),i2.wp.width("100%"),i2.wp.overflowY("scroll")],children:(0,f.Y)(xh,{performPaneOperation:n})}),(0,f.Y)(xg.Kp,{css:[i2.wp.height("100%"),i2.wp.width("100%")],children:(0,f.Y)(bK,{})})]})]})})}var xy=eh.ZU.Object({type:eh.ZU.Literal("extensionDevtools")}),xw={Content:function(e){var n=e.options.performPaneOperation;return(0,f.Y)(xv,{performPaneOperation:n})},Icon:function(e){var n=e.size;return(0,f.Y)(lB.A,{size:n})},getTitle:function(){return"Extensions Devtools"},description:"Manage and debug workspace extensions",category:nr.bY.WorkspaceExtensions,decode:function(e){return yR.T(xy,e)}},xb=t(53248),xx=t(27627);function xY(e){var n=rl(tq),t=(0,am.Sc)(),r=(0,am.l$)(),i=(0,am.Ot)(),o=(0,g.useCallback)(function(t,r){if("cover"===t){if(null===r)return void o("store",null);n({paneId:e.paneId,pane:{type:"extensionStore",data:{coverPageExtensionId:null!=r?r:null,page:"cover"}}})}else n({paneId:e.paneId,pane:{type:"extensionStore",data:{page:t}}})},[n,e.paneId]);if("cover"===e.page){var a,l,c,u=null!=(c=null==(l=i.find(function(n){return n.extensionId===e.coverPageExtensionId}))?void 0:l.installationId)?c:null;return(0,f.Y)(xb.G,{existingInstallationId:u,extensionId:e.coverPageExtensionId,goBackToStore:function(){return o("store",null)},installExtension:(0,tw._)(function(){var n;return(0,tb.YH)(this,function(r){switch(r.label){case 0:return[4,t({extensionId:e.coverPageExtensionId,replId:null})];case 1:if(!(n=r.sent()))throw Error("Failed to install extension");return[2,(0,ao.qq)(n.id)]}})}),uninstallExtension:(a=(0,tw._)(function(e){return(0,tb.YH)(this,function(n){switch(n.label){case 0:return[4,r({installationId:e,replId:null})];case 1:return n.sent(),[2]}})}),function(e){return a.apply(this,arguments)})})}return(0,f.Y)(xx.A,{storeMode:"pane",openExtensionCover:function(e){return o("cover",e)},setPage:function(e){return o(e,null)},page:e.page})}var xS=eh.ZU.Union([eh.ZU.Object({page:eh.ZU.Union([eh.ZU.Literal("store"),eh.ZU.Literal("manage")])}),eh.ZU.Object({page:eh.ZU.Literal("cover"),coverPageExtensionId:eh.ZU.Unsafe(eh.ZU.String())})]),xA=eh.ZU.Object({type:eh.ZU.Literal("extensionStore"),data:xS}),x_={Content:function(e){return(0,f.Y)(xY,(0,td._)((0,m._)({},e.pane.data),{paneId:e.options.paneId}))},Icon:function(e){var n=e.size;return(0,f.Y)(i5.Vx.Provider,{value:{color:ry.LU.yellowStronger,size:n},children:(0,f.Y)(lB.A,{})})},getTitle:function(){return"Extension Store"},description:"Find and install workspace extensions",category:nr.bY.WorkspaceExtensions,decode:function(e){return yR.T(xA,e)}},xk=t(97039),xC=t(99482),xI=(0,rw.x)({container:[i2.wp.width("100%"),i2.wp.maxWidth(640),i2.wp.overflow("auto"),{marginRight:"auto",marginLeft:"auto"}],content:[{backgroundColor:"transparent"}]}),xD={Content:function(){var e,n,t,r,i,o,a,l,c,u,s,d=(n=(e=(0,p._)((0,g.useState)(!1),2))[0],t=e[1],r=(0,ec.A)(),o=(i=(0,oM.A)()).dotReplit,a=i.fs,l=rl(iP),c=(0,K.g)("isLayoutStacked").preferences.isLayoutStacked,u=(0,lL.oR)(),s=ro(np),{reset:(0,g.useCallback)((0,tw._)(function(){var e;return(0,tb.YH)(this,function(n){switch(n.label){case 0:return t(!0),[4,(0,sN.o)({fs:a,dotReplit:o})];case 1:return e=n.sent().entrypoint,t(!0),l({replId:r,isStacked:c,isExtension:u,isInPopup:s,entrypoint:e}),[2]}})}),[a,o,l,r,c,u,s]),resetting:n});return(0,f.Y)(i4.S,{css:xI.container,children:(0,f.Y)(xk.A,{resetLayout:d,css:xI.content})})},Icon:function(e){var n=e.size;return(0,f.Y)(i5.Vx.Provider,{value:{color:ry.LU.greyStrongest,size:n},children:(0,f.Y)(ux.A,{})})},getTitle:function(){return"User Settings"},description:"Configure personal editor preferences and workspace settings which apply to all Apps",category:nr.bY.Other,decode:xC.D},xE=t(40144),xR=eh.ZU.Object({type:eh.ZU.Literal("replAuth")}),xU=t(33616),xF={Content:xE.A,Icon:function(e){var n=e.size;return(0,f.Y)(i5.Vx.Provider,{value:{color:ry.LU.orangeStrongest,size:n},children:(0,f.Y)(xU.A,{})})},getTitle:function(){return"Authentication"},description:"Let users log in to your App using a prebuilt login page or customize your own button",category:nr.bY.CloudServices,decode:function(e){return yR.T(xR,e)}},xP=function(e){var n;null==(n=e.focus)||n.call(e)};function xO(e){var n=e.isValid,t=e.move,r=e.focus,i=void 0===r?xP:r,o=e.wrap,a=void 0!==o&&o,l=e.selector,c=e.boundary,u=(0,g.useRef)(null);return(0,g.useEffect)(function(){if(u.current){var e=u.current,r=function(r){if(!n(r))return;if(l)f=(0,eE._)(e.querySelectorAll(l));else{var o;o=e.querySelectorAll('a[href],button,input,textarea,select,details,[tabindex]:not([tabindex="-1"])'),f=(0,eE._)(o)}if(0!==f.length){var u,s=document.activeElement;if(e.contains(s)){if(l)if(c){var d=null==s?void 0:s.closest(c),p=null==s?void 0:s.closest(l);s=p||(null==d?void 0:d.querySelector(l))}else s=null==s?void 0:s.closest(l);if(l&&(!s||!e.contains(document.activeElement))){r.preventDefault(),r.stopPropagation();var f,h,g=null==(h=document.activeElement)?void 0:h.querySelector(l);g?i(g):i(f[0]);return}if(!s){r.preventDefault(),r.stopPropagation(),i(f[0]);return}var m=f.findIndex(function(e){return e===s});if(-1===m){r.preventDefault(),r.stopPropagation(),i(f[0]);return}var v=t({event:r,children:f,activeIndex:m,activeElement:s});!a&&(v<0||v>f.length-1)||(i(v<0?f[f.length-1]:v>f.length-1?f[0]:f[v]),r.stopPropagation(),r.preventDefault())}}};return e.addEventListener("keydown",r),function(){e.removeEventListener("keydown",r)}}},[c,n,t,i,u,l,a]),u}var xT=t(74),xL=(0,rw.x)({queryPill:[i2.wp.display.inline,i2.wp.fontSize(ry.LU.fontSizeDefault)],popover:[{"& > .popover-control-container":i2.wp.mr(0)}]});function xM(e){var n=e.text;return(0,f.Y)(hS.a,{css:xL.queryPill,text:0===n.length?"":n})}function xG(e){var n=e.query,t=e.replacement,r=e.numMatches,i=e.onCancel,o=e.onConfirm;return(0,f.FD)(i4.S,{gap:24,children:[(0,f.FD)(ac.EY,{children:["Replace ",(0,f.Y)(xM,{text:n})," with ",(0,f.Y)(xM,{text:t})," ","in ",(0,si.A)("match",r,!0),"?"]}),(0,f.Y)(ac.EY,{children:"This operation cannot be undone!"}),(0,f.FD)(i4.S,{row:!0,gap:12,justify:"end",children:[(0,f.Y)(al.$n,{onClick:function(){return i()},text:"Cancel"}),(0,f.Y)(al.$n,{colorway:"negative",onClick:function(){return o()},text:"Yes, replace ".concat((0,si.A)("match",r,!0)),iconLeft:(0,f.Y)(xT.A,{})})]})]})}function xN(e){var n,t=e.disabled,r=e.loading,i=e.query,o=e.replacement,a=e.results,l=e.replace,c=e.onReplace,u=e.buttonProps,s=(0,p._)((0,g.useState)(!1),2),d=s[0],h=s[1],v=(n=(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return h(!1),(0,oE.u4)(oE.AZ.SEARCH_PANE_USED,{action:"replace"}),[4,l()];case 1:return e.sent().success&&c(),[2]}})}),function(){return n.apply(this,arguments)}),y=(0,g.useMemo)(function(){return a.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[a]);return(0,f.Y)(i4.S,{css:xL.popover,children:(0,f.FD)(mS.A,{isOpen:d,maxWidth:400,showArrow:!0,children:[(0,f.Y)(al.$n,(0,td._)((0,m._)({},u),{text:"Replace all",disabled:t||r,onClick:function(){h(function(e){return!e})}})),(0,f.Y)(xG,{query:i,replacement:o,numMatches:y,onCancel:function(){return h(!1)},onConfirm:v})]})})}var xB=t(89925),xH=(0,rw.x)({self:[i2.wp.position.relative,i2.wp.flex.shrink(1),i2.wp.width("100%")],iconWrapper:[i2.wp.position.absolute,i2.wp.top(0),i2.wp.right(0),i2.wp.height("100%"),i2.wp.p(4)]}),xz=(0,g.forwardRef)(function(e,n){var t,r=e.onClear,i=(0,uK._)(e,["onClear"]);return(0,f.FD)(i4.S,{css:xH.self,children:[(0,f.Y)(xB.O,(0,m._)({ref:n},i)),((null==(t=i.value)?void 0:t.length)||0)>0?(0,f.Y)(i4.S,{css:xH.iconWrapper,children:(0,f.Y)(cf.K0,{alt:"Clear search query",tooltipBehavior:"hidden",onClick:r,css:{"&:hover":{backgroundColor:"".concat(ry.LU.backgroundHighest," !important")}},children:(0,f.Y)(uJ.A,{})})}):null]})});xz.displayName="SearchInput";var xW=t(5479),xj=t(42672),x$=t(4880),xZ=(0,rw.x)({self:[i2.wp.width("fit-content"),i2.wp.display.inlineBlock,i2.wp.color.accentNegativeDefault,i2.wp.fontWeight.bold]});function xq(e){var n=e.content;return(0,f.Y)(f.FK,{children:n.split("\n").reduce(function(e,n,t){return null===e?[n]:(0,eE._)(e).concat([(0,f.Y)(i4.D.span,{css:xZ.self,children:"\\n"},"".concat(n,"-").concat(t)),n])},null)})}var xV=t(29267),xK=i4.D.span,xJ="SearchMatch",xQ=function(e){return e.HIGHLIGHT="highlight",e.REMOVE="remove",e.ADD="add",e.TEXT="text",e}(xQ||{});function xX(e){return{outlineColor:e,outlineWidth:"1px",outlineStyle:"solid"}}var x0=(0,rw.x)((u={self:[i2.wp.width("fit-content"),i2.wp.display.inline,i2.wp.cursor.pointer,{"&:focus-visible":[i2.wp.focusRing]},i2.wp.mx(1),i2.wp.px(2),i2.wp.borderRadius(4)]},(0,tg._)(u,"highlight",[i2.wp.backgroundColor.accentPrimaryDimmest,xX(ry.LU.accentPrimaryDimmer)]),(0,tg._)(u,"remove",[i2.wp.backgroundColor.accentNegativeDimmest,xX(ry.LU.accentNegativeDimmer),{textDecoration:"line-through"}]),(0,tg._)(u,"add",[i2.wp.backgroundColor.accentPositiveDimmest,xX(ry.LU.accentPositiveDimmer)]),(0,tg._)(u,"hiddenTextWrapper",[i2.wp.display.inlineBlock,i2.wp.mx(2),{"& > div":[i2.wp.display.inlineBlock],transform:"translateY(12.5%)"}]),(0,tg._)(u,"firstHiddenTextWrapper",[i2.wp.ml(0)]),(0,tg._)(u,"lastHiddenTextWrapper",[i2.wp.mr(0)]),u));function x1(e){var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=e.isRegex,a=e.query,l=e.onOpenAtPosition;return(0,f.Y)(f.FK,{children:(function(e){for(var n=e.content,t=e.matches,r=e.dedentBy,i=e.replacement,o=[],a=r,l=0;l<t.length;l++){var c=t[l],u=c.start+c.length;o.push({start:a,end:c.start,type:"text"});var s=n.substring(c.start,u);i.length>0&&i!==s?(o.push({start:c.start,end:u,type:"remove"}),o.push({start:-1,end:u,type:"add"})):o.push({start:c.start,end:u,type:"highlight",matchIndex:l}),a=u}return o.push({start:a,end:n.length,type:"text"}),o})({content:n,matches:t,dedentBy:r,replacement:i}).map(function(e,t,r){var c=e.start,u=e.end,s=e.type,d="".concat(c,"-").concat(u),p=u-c;if("text"===s){var h=r[t+1];if(0===t&&p>50)return(0,f.FD)(g.Fragment,{children:[(0,f.Y)(xK,{css:[x0.hiddenTextWrapper,x0.firstHiddenTextWrapper],children:(0,f.Y)(cf.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(u-50)},children:(0,f.Y)(xV.A,{})})},d),(0,f.Y)("span",{children:n.substring(u-50,u)})]},d);if(t===r.length-1&&p>50)return(0,f.FD)(g.Fragment,{children:[(0,f.Y)("span",{children:n.substring(c,c+50)}),(0,f.Y)(xK,{css:[x0.hiddenTextWrapper,x0.lastHiddenTextWrapper],children:(0,f.Y)(cf.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(c+50)},children:(0,f.Y)(xV.A,{})})},d)]},d);if(h&&p>100)return(0,f.FD)(g.Fragment,{children:[(0,f.Y)("span",{children:n.substring(c,c+50)}),(0,f.Y)(xK,{css:x0.hiddenTextWrapper,children:(0,f.Y)(cf.K0,{size:18,alt:"Jump to hidden text",onClick:function(){l(c+50)},children:(0,f.Y)(xV.A,{})})},d),(0,f.Y)("span",{children:n.substring(u-50,u)})]},d)}var m=-1===c?i:n.substring(c,u);if("text"===s)return(0,f.Y)(g.Fragment,{children:m},d);var v=null,y=r[t-1];return"add"===s&&(null==y?void 0:y.type)==="remove"&&(v=n.substring(y.start,y.end)),(0,f.Y)(x2,{content:m,type:s,isRegex:o,query:a,replacement:i,removedText:v,onClick:function(e){e.stopPropagation(),l(u)}},d)})})}function x2(e){var n=e.content,t=e.type,r=e.isRegex,i=e.replacement,o=e.query,a=e.removedText,l=(0,uK._)(e,["content","type","isRegex","replacement","query","removedText"]),c=n,u=void 0;switch(t){case"highlight":u="Matched text ".concat(c);break;case"remove":u="Removed text ".concat(c);break;case"add":if(u="Added text ".concat(c),r&&null!==a)try{c=a.replace(new RegExp(o),i.replaceAll(/\$[&`']/g,"$$$&"))}catch(e){}}return(0,f.Y)(i4.D.span,(0,td._)((0,m._)({css:[x0.self,x0[t]],tabIndex:0,"aria-label":u,role:"button","data-nav":xJ},l),{children:"add"===t?(0,f.Y)(xq,{content:c}):c}))}var x4=(0,rw.x)({self:[i2.wp.width("100%"),i2.wp.flex.wrap],text:[i2.wp.display.block,i2.wp.textAlign.center,{overflow:"visible",whiteSpace:"normal"}]});function x5(e){var n=e.error;return(0,f.FD)(i4.S,{css:x4.self,pt:8,pb:8,row:!0,gap:4,align:"center",justify:"center",children:[(0,f.Y)(f0.A,{}),(0,f.Y)(ac.EY,{css:x4.text,multiline:!1,children:n})]})}var x7=t(337),x3=t(70633),x6="SearchLine",x8="--search-line-number-width",x9=(0,rw.x)({self:[i2.wp.overflow("hidden"),i2.wp.cursor.pointer,i2.wp.borderRadius(4),{"&:focus-visible":[i2.wp.focusRing],"&:hover, &:focus-visible":[i2.wp.backgroundColor.backgroundHighest]}],content:[i2.wp.font.code,i2.wp.maxWidth("100%"),i2.wp.width("fit-content"),{whiteSpace:"pre-wrap",overflowWrap:"break-word"}],lineNumberWrapper:[i2.wp.display.inlineBlock,i2.wp.color.foregroundDimmest,i2.wp.mr(8),i2.wp.pl(8)],lineNumber:[i2.wp.display.inlineBlock,i2.wp.textAlign.right,{width:"var(".concat(x8,")")}]});function Ye(e){var n=e.lineNumber,t=e.content,r=e.matches,i=e.path,o=e.dedentBy,a=e.onFileLineClicked,l=(0,uK._)(e,["lineNumber","content","matches","path","dedentBy","onFileLineClicked"]),c=(0,J.A)(function(){return function(e){(0,oE.u4)(oE.AZ.SEARCH_PANE_RESULT_CLICKED,(0,m._)({},l)),a({path:i,lineNumber:n,columnNumber:e})}},[n,l,i,a]),u=(0,J.A)(function(){return function(){var e=r.length>0?r[0]:null;c(e?e.start+e.length:0)}},[r,c]);return(0,f.FD)(i4.S,{tabIndex:0,css:x9.self,row:!0,gap:8,align:"stretch","data-nav":x6,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),u())},onClick:u,children:[(0,f.Y)(i4.S,{css:x9.lineNumberWrapper,children:(0,f.Y)(i4.S,{tag:"span",css:x9.lineNumber,"aria-label":"Line ".concat(n),children:n})}),(0,f.Y)("pre",{css:x9.content,children:(0,f.Y)(x1,{isRegex:l.isRegex,content:t,matches:r,dedentBy:o,query:l.query,replacement:l.replacement,onOpenAtPosition:c})})]})}var Yn="SearchFileNav",Yt="SearchFileHeaderNav",Yr="SearchQueryNav",Yi="SearchQueryTogglesNav",Yo=parseInt(ry.zu.space24,10)+10,Ya=(0,rw.x)({header:[i2.wp.rowWithGap(4),i2.wp.align.center,i2.wp.rowWithGap(6),i2.wp.flex.growAndShrink(1),i2.wp.overflow("hidden")],headerParentPathText:[i2.wp.flex.shrink(1e7)],headerFileNameText:[i2.wp.flex.shrink(1)],headerMatchesCountPill:[i2.wp.height(20),i2.wp.flex.shrink(0)],accordionWrapper:[i2.wp.mx(4),i2.wp.border({direction:"top",color:ry.LU.outlineDimmest})],accordionChildren:[i2.wp.p(4)],linesWrapper:[i2.wp.overflow("hidden"),i2.wp.borderRadius(4),i2.wp.font.code]});function Yl(e){var n=e.path,t=e.lines,r=e.dedentBy,i=e.isFirst,o=e.expanded,a=e.onClick,l=e.scrollOffset,c=e.onFileLineClicked,u=e.searchResultBackgroundColor,s=(0,uK._)(e,["path","lines","dedentBy","isFirst","expanded","onClick","scrollOffset","onFileLineClicked","searchResultBackgroundColor"]),d=(0,K.g)("fontSize").preferences.fontSize,p=(0,g.useRef)(null),h=(0,J.A)(function(){return t.reduce(function(e,n){return e+n.matches.length},0)},[t]),v=(0,J.A)(function(){var e=t[t.length-1];if(!e)return{};var n=(0,x3.V)(e.lineNumber),r=(0,x7.s)(d);return(0,tg._)({fontSize:d,lineHeight:r},x8,"".concat(n,"ch"))},[t,d]);return(0,f.Y)(o3.ui,{css:Ya.accordionWrapper,style:v,"data-nav":Yn,innerRef:p,children:(0,f.Y)(wA.A,{expanded:void 0===o||o,onClick:function(){a(p.current)},headerProps:{"data-nav":"".concat(Yt," ").concat(x6," ").concat(i?"".concat(Yr," ").concat(Yi):""),style:{position:"sticky",zIndex:1,insetBlockStart:"-".concat(void 0===l?0:l,"px"),borderRadius:0,backgroundColor:u}},headerContent:(0,f.FD)(i4.S,{css:Ya.header,children:[(0,f.Y)(oZ.A,{path:n,size:16}),(0,f.Y)(ac.EY,{css:Ya.headerFileNameText,multiline:!1,children:(0,iu.WP)(n)}),(0,f.Y)(ac.EY,{color:"dimmest",css:Ya.headerParentPathText,multiline:!1,children:(0,iu._6)(n).replace(/^\.\//,"")}),(0,f.Y)(hS.a,{variant:"muted",text:"".concat(h," ").concat((0,si.A)("match",h)),css:Ya.headerMatchesCountPill})]}),children:(0,f.Y)(i4.S,{css:Ya.accordionChildren,children:(0,f.Y)(i4.S,{css:Ya.linesWrapper,children:t.map(function(e){return(0,f.Y)(Ye,(0,td._)((0,m._)({},e,s),{path:n,dedentBy:r,onFileLineClicked:c}),e.lineNumber)})})})})})}var Yc=t(73806),Yu=(0,rw.x)({container:[i2.wp.border({direction:"bottom",color:ry.LU.outlineDimmest})],actions:[i2.wp.display.flex,i2.wp.rowWithGap(4)]});function Ys(e){var n="collapse"===e.collapseExpandAllState;return(0,f.FD)(i4.S,{css:Yu.container,p:4,row:!0,align:"center",justify:"space-between",children:[(0,f.FD)(ac.EY,{color:"dimmer",children:[e.totalCount," results in ",(0,si.A)("file",e.fileCount,!0)]}),(0,f.FD)(i4.S,{css:Yu.actions,children:[(0,f.Y)(cf.K0,{alt:"Open New Search",onClick:e.onStartNewSearch,children:(0,f.Y)(cy.A,{})}),(0,f.Y)(cf.K0,{alt:n?"Collapse All":"Expand All",onClick:e.onToggleCollapseExpandAll,children:n?(0,f.Y)(ch.A,{}):(0,f.Y)(Yc.A,{})})]})]})}var Yd=t(4180),Yp=(0,l7.i7)({from:{opacity:0},to:{opacity:1}}),Yf=(0,rw.x)({listWrapper:[i2.wp.overflowY("auto"),i2.wp.flex.grow(1),{contain:"strict"}],list:[i2.wp.width("100%"),i2.wp.position.relative],listItem:[i2.wp.position.absolute,i2.wp.top(0),i2.wp.left(0),i2.wp.width("100%")],resultRow:[{animation:"".concat(Yp," 120ms linear forwards")}]});function Yh(e){var n,t,r,i,o,a,l,c,u,s,d=e.results,h=e.error,v=e.paneRef,y=e.onFileLineClicked,w=e.onOpenSearchPane,b=e.searchResultBackgroundColor,x=(0,uK._)(e,["results","error","paneRef","onFileLineClicked","onOpenSearchPane","searchResultBackgroundColor"]),Y=(0,J.A)(function(){return d.filter(function(e){return e.lines.length>0})},[d]),S=(0,J.A)(function(){return Y.reduce(function(e,n){return e+n.lines.reduce(function(e,n){return e+n.matches.length},0)},0)},[Y]),A=(0,p._)((0,g.useState)({}),2),_=A[0],k=A[1],C=(0,g.useRef)(null),I=(0,x$.Te)({count:Y.length,getScrollElement:function(){return C.current},estimateSize:function(e){var n;return function(e,n){var t=e.length;if(n)for(var r=n-24,i=0;i<e.length;i++){var o=e[i],a=9*(0,x3.V)(i)+9*o.content.length+4*o.matches.length;a>r&&(t+=Math.floor(r/a)+1)}return Yo+20+24.39*t+2*t}(Y[e].lines,null==v||null==(n=v.current)?void 0:n.offsetWidth)},overscan:3}),D=I.getVirtualItems(),E=(0,g.useRef)(null),R=(0,g.useCallback)(function(e){var n=C.current;if(n&&E.current!==e){if(e.matches('[data-nav*="'.concat(Yt,'"]')))return void e.focus();var t=e.closest('[data-nav="'.concat(Yn,'"]')),r=null==t?void 0:t.querySelector('[data-nav*="'.concat(Yt,'"]'));if(!r)return void e.focus();var i=r.getBoundingClientRect();if(r.offsetTop+i.height>e.offsetTop){var o=e.offsetTop-i.height;E.current=e;var a=function(){n.scrollTop===o&&(n.removeEventListener("scroll",a),E.current===e&&(e.focus(),E.current=null))};n.addEventListener("scroll",a),n.scrollTo({top:o})}else e.focus()}},[]),U=(n={selector:'[data-nav*="'.concat(Yt,'"]'),boundary:'[data-nav*="'.concat(Yn,'"]')},t=(0,g.useCallback)(function(e){return"Tab"===e.key},[]),r=(0,g.useCallback)(function(e){var n=e.event,t=e.activeIndex;return n.shiftKey?t-1:t+1},[]),xO((0,td._)((0,m._)({},n),{isValid:t,move:r}))),F=(i={selector:'[data-nav*="'.concat(x6,'"]'),focus:R},o=(0,g.useCallback)(function(e){return"ArrowUp"===e.key||"ArrowDown"===e.key},[]),a=(0,g.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowUp"===n.key?t-1:t+1},[]),xO((0,td._)((0,m._)({},i),{isValid:o,move:a}))),P=(l={selector:'[data-nav*="'.concat(xJ,'"]'),focus:R},c=(0,g.useCallback)(function(e){return"ArrowLeft"===e.key||"ArrowRight"===e.key},[]),u=(0,g.useCallback)(function(e){var n=e.event,t=e.activeIndex;return"ArrowLeft"===n.key?t-1:t+1},[]),xO((0,td._)((0,m._)({},l),{isValid:c,move:u}))),O=(0,xj.P)(U,F,P),T=(0,J.A)(function(){return Y.length===Object.keys(_).length&&Object.values(_).every(Boolean)},[_,Y.length]),L=null;return Y.length>0?L=(0,f.FD)(f.FK,{children:[(0,f.Y)(Ys,{fileCount:Y.length,totalCount:S,collapseExpandAllState:T?"expand":"collapse",onToggleCollapseExpandAll:function(){T?k({}):k(Y.reduce(function(e,n){return(0,td._)((0,m._)({},e),(0,tg._)({},n.path,!0))},{}))},onStartNewSearch:w}),(0,f.Y)(i4.D.div,{ref:C,css:Yf.listWrapper,children:(0,f.Y)(i4.S,{css:Yf.list,style:{height:I.getTotalSize()},children:(0,f.Y)(i4.S,{css:Yf.listItem,style:{transform:"translateY(".concat(null==(s=D[0])?void 0:s.start,"px)")},innerRef:O,children:D.map(function(e){var n,t=Y[e.index],r=t.path;return(0,f.Y)(i4.D.div,{"data-index":e.index,ref:I.measureElement,css:Yf.resultRow,children:(0,f.Y)(Yl,(0,td._)((0,m._)({},t,x),{scrollOffset:null==(n=D[0])?void 0:n.start,onFileLineClicked:y,isFirst:0===e.index,expanded:!0!==_[r],searchResultBackgroundColor:b,onClick:function(e){if(k(function(e){return(0,td._)((0,m._)({},e),(0,tg._)({},r,!(r in e)||!e[r]))}),C.current&&e){var n,t,i=Math.floor(null!=(t=null==(n=D[0])?void 0:n.start)?t:0),o=Math.floor(C.current.scrollTop),a=e.offsetTop+i;a>o||C.current.scrollTo({top:a-1})}}}))},e.key.toString())})})})})]}):h===Yd.F.EMPTY_RESULTS&&(L=(0,f.Y)(yj.A,{pane:{type:"searchReplace"},headerText:h})),(0,f.FD)(f.FK,{children:[h&&h!==Yd.F.EMPTY_RESULTS?(0,f.Y)(x5,{error:h}):null,L]})}var Yg=t(3674);function Ym(e){return(0,g.useMemo)(function(){return(0,eE._)((0,Yg.l0)(e,",")).map(function(e){return e.trim()}).filter(function(e){return e.length>0})},[e])}var Yv=function(e){return e.QUERY_EMPTY="The query is empty",e.QUERY_SAME="The query is the same as replacement",e.NO_MATCHES="No matches were found to replace",e.RG_EMPTY="Ripgrep didn't return a response",e.NOT_MOUNTED="Component wasn't mounted",e}({}),Yy=t(69406);function Yw(){return(Yw=(0,tw._)(function(e){var n,t,r,i,o,a,l,c,u;return(0,tb.YH)(this,function(s){switch(s.label){case 0:if(t=e.container,r=e.fileList,0===(i=(0,uK._)(e,["container","fileList"])).query.length)return[2,{success:!1,errorOn:"exit",errorMessage:Yv.QUERY_EMPTY}];if(i.query===i.replacement)return[2,{success:!1,errorOn:"exit",errorMessage:Yv.QUERY_SAME}];if(!(r&&r.length>0))return[3,1];return o=r,[3,3];case 1:return[4,(a=t).exec.apply(a,(0,eE._)((0,Yy.Qq)((0,td._)((0,m._)({},i),{context:1,mode:"files"}))))];case 2:if((c=s.sent()).error)return[2,{success:!1,errorOn:"rg",errorMessage:"exit status 1"===c.error?Yv.NO_MATCHES:c.error}];o=(null==(l=c.output)?void 0:l.split("\n").filter(function(e){return e.trim().length>0}))||[],s.label=3;case 3:var d,p,f,h,g,v,y,w;if(0===o.length)return[2,{success:!1,errorOn:"rg",errorMessage:Yv.NO_MATCHES}];return[4,(n=t).exec.apply(n,(0,eE._)((p=(d=i).replacement,f=d.query,h=d.isRegex,g=d.isCaseSensitive,v=d.isMatchingWholeWords,y=["sd"],w=[f.indexOf("\n")>=0?"m":"e",g?"c":"i"],v&&w.push("w"),y.push("--flags",w.join("")),!h&&y.push("--string-mode"),f.startsWith("-")&&(f="\\"+f),y.push(f,p),y)).concat((0,eE._)(o)))];case 4:if((u=s.sent()).error)return[2,{success:!1,errorOn:"sd",errorMessage:u.error}];return[2,{success:!0}]}})})).apply(this,arguments)}var Yb=t(95707),Yx=t(86139),YY=t(33231),YS=t(85363),YA=t(96213),Y_=t(17168),Yk="SearchQueryControlsNav",YC="SearchQueryExcludeNav",YI="SearchQueryControlsColumnNav",YD=(0,l7.i7)({from:{transform:"scaleX(0)"},to:{transform:"scaleX(0.9)"}}),YE=i2.kL.min(360),YR=(0,rw.x)({self:[i2.wp.height("100%"),i2.wp.width("100%"),i2.wp.overflow("hidden"),i2.wp.px(4),i2.wp.container()],filesIncludeExcludeWrapper:[i2.wp.mt(6),i2.wp.border({direction:"top",color:ry.LU.outlineDimmest}),(0,tg._)({},YE,[i2.wp.rowWithGap(6),i2.wp.align.start,i2.wp.mt(0),{border:"none"}])],inputWithLabel:[i2.wp.flex.growAndShrink(1),i2.wp.colWithGap(1)],inputLabelText:[{userSelect:"none"},i2.wp.color.foregroundDimmest,i2.wp.truncate,{fontSize:ry.LU.fontSizeSmall}],inputLabel:[i2.wp.flex.shrink(1),i2.wp.m(0),{lineHeight:1}],input:[i2.wp.viewStyle,i2.wp.border(),{blockSize:ry.LU.space32,"::placeholder":{color:ry.LU.foregroundDimmest},"&:hover::placeholder":{color:ry.LU.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:ry.LU.foregroundDimmest},":not([disabled])":{cursor:"text",":focus":{boxShadow:"none"}}}],optionsWrapper:[i2.wp.rowWithGap(2),i2.wp.align.center,(0,tg._)({order:2},YE,[{order:1," > *":i2.wp.height("100%")}])],closeWrapper:[(0,tg._)({order:1},YE,{order:2," > *":i2.wp.height("100%")})],results:[i2.wp.position.relative,{flex:"1 1 auto"}],searchWrapper:[{flex:"0 1 auto"}],expandCollapseButton:[i2.wp.height(32)],searchInputAndOptionsWrapper:(0,tg._)({flex:1,display:"grid",gap:4,gridTemplateColumns:"1fr max-content"},YE,{gridTemplateColumns:"1fr max-content max-content"}),replacementWrapper:[i2.wp.ml(24),i2.wp.pl(4),i2.wp.pb(6)],replaceInputWrapper:[i2.wp.border({direction:"top",color:ry.LU.outlineDimmest}),(0,tg._)({},YE,[i2.wp.rowWithGap(4),i2.wp.pt(0),i2.wp.align.center,{border:"none"}])],loadingBar:[i2.wp.position.absolute,i2.wp.mt(2),i2.wp.height(1),i2.wp.borderRadius(2),i2.wp.width("100%"),i2.wp.backgroundColor.accentPrimaryDimmer,{animation:"".concat(YD," 20s 1s ease forwards"),transformOrigin:"center left",transform:"scaleX(0)"}]});function YU(e){var n=e.updateData,t=e.query,r=e.setQuery,i=e.isRegex,o=e.setIsRegex,a=e.isCaseSensitive,l=e.setIsCaseSensitive,c=e.isMatchingWholeWords,u=e.setIsMatchingWholeWords,s=e.isCollapsed,d=e.setIsCollapsed,p=e.executeSearch,h=e.searchInputRef,g=e.onCloseRequested;return(0,f.FD)(i4.S,{css:YR.searchWrapper,pb:4,row:!0,gap:4,children:[(0,f.Y)(cf.K0,{onClick:function(){return d(function(e){return!e})},alt:s?"Show replacement options":"Hide replacement options",css:YR.expandCollapseButton,children:s?(0,f.Y)(pX.A,{}):(0,f.Y)(dB.A,{})}),(0,f.FD)(i4.S,{css:YR.searchInputAndOptionsWrapper,children:[(0,f.Y)(xz,{"data-nav":"".concat(Yr," ").concat(Yk),ref:h,autoSize:!0,placeholder:"Search",value:t,css:YR.input,onChange:function(e){r(e),n({initialQuery:e})},onClear:function(){r(""),n({initialQuery:""})},onKeyDown:function(e){"Enter"!==e.key||(0,cD.T$)(e)||e.shiftKey||(e.preventDefault(),e.stopPropagation(),p())}}),(0,f.FD)(i4.S,{css:YR.optionsWrapper,children:[(0,f.Y)(xW.A,{alt:"case sensitive","data-nav":"".concat(Yk," ").concat(YI),icon:(0,f.Y)(YS.A,{}),checked:a,onClick:function(){return l(function(e){return!e})}}),(0,f.Y)(xW.A,{alt:"regular expressions","data-nav":"".concat(Yk," ").concat(YI),icon:(0,f.Y)(YA.A,{}),checked:i,onClick:function(){return o(function(e){return!e})}}),(0,f.Y)(xW.A,{alt:"whole words","data-nav":"".concat(Yk," ").concat(YI),icon:(0,f.Y)(Y_.A,{}),checked:c,onClick:function(){return u(function(e){return!e})}})]}),(0,f.Y)(i4.S,{css:YR.closeWrapper,row:!0,gap:2,align:"center",children:g?(0,f.Y)(cf.K0,{onClick:g,alt:"Close",children:(0,f.Y)(uJ.A,{})}):null})]})]})}function YF(e){var n=e.updateData,t=e.replacement,r=e.setReplacement,i=e.query,o=e.replaceLoading,a=e.search,l=e.includeGlob,c=e.setIncludeGlob,u=e.excludeGlob,s=e.setExcludeGlob,d=e.replace,p=e.results;return(0,f.FD)(i4.S,{css:YR.replacementWrapper,children:[(0,f.FD)(i4.S,{css:YR.replaceInputWrapper,pt:8,gap:6,children:[(0,f.Y)(xz,{"data-nav":"".concat(Yr," ").concat(Yk," ").concat(YC),autoSize:!0,placeholder:"Replacement",value:t,css:YR.input,onChange:function(e){r(e),n({initialReplacement:e})},onClear:function(){r(""),n({initialReplacement:""})}}),(0,f.Y)(i4.S,{css:YR.optionsWrapper,children:(0,f.Y)(xN,{query:i,replacement:t,results:p,disabled:0===i.length,loading:o,replace:d,onReplace:a,buttonProps:{"data-nav":"".concat(Yk," ").concat(Yi," ").concat(YI)}})})]}),(0,f.FD)(i4.S,{css:YR.filesIncludeExcludeWrapper,pt:8,gap:8,children:[(0,f.FD)(i4.S,{css:YR.inputWithLabel,id:"filesToInclude",children:[(0,f.Y)("label",{htmlFor:"filesToIncludeInput",css:YR.inputLabel,children:(0,f.Y)(ac.EY,{css:YR.inputLabelText,color:"dimmer",multiline:!1,children:"Files to include"})}),(0,f.Y)(xz,{id:"filesToIncludeInput","data-nav":"".concat(Yr," ").concat(Yk),autoSize:!0,value:l,css:YR.input,placeholder:"e.g. **.js, src/**, app/",onChange:function(e){c(e),n({initialIncludeGlob:e})},onClear:function(){c(""),n({initialIncludeGlob:""})}})]}),(0,f.FD)(i4.S,{css:YR.inputWithLabel,id:"filesToExclude",children:[(0,f.Y)("label",{htmlFor:"filesToExcludeInput",css:YR.inputLabel,children:(0,f.Y)(ac.EY,{css:YR.inputLabelText,color:"dimmer",multiline:!1,children:"Files to exclude"})}),(0,f.Y)(xz,{id:"filesToExcludeInput","data-nav":"".concat(Yk," ").concat(YC),autoSize:!0,value:u,css:YR.input,onChange:function(e){s(e),n({initialExcludeGlob:e})},onClear:function(){s(""),n({initialExcludeGlob:""})}})]})]})]})}function YP(e){var n,t,r,i,o,a,l,c,u,s,d,h,v,y,w,b,x,Y,S,A,_,k,C,I,D,E,R,U,F,P,O,T,L,M,G,B,H,z,W,j,$,Z=e.isActive,q=e.initialQuery,V=void 0===q?"":q,K=e.initialReplacement,Q=void 0===K?"":K,X=e.initialIncludeGlob,ee=void 0===X?"":X,en=e.initialExcludeGlob,et=void 0===en?"":en,er=e.searchInputRef,ei=e.onDataChanged,eo=e.onFileLineClicked,ea=e.onOpenSearchPane,el=e.onCloseRequested,ec=e.searchResultBackgroundColor,eu=(0,p._)((0,g.useState)(V),2),es=eu[0],ed=eu[1],ep=(0,p._)((0,g.useState)(Q),2),ef=ep[0],eh=ep[1],eg=(0,p._)((0,g.useState)(!1),2),em=eg[0],ev=eg[1],ey=(0,p._)((0,g.useState)(!1),2),ew=ey[0],eb=ey[1],ex=(0,p._)((0,g.useState)(!1),2),eY=ex[0],eS=ex[1],eA=(0,p._)((0,g.useState)(!0),2),e_=eA[0],ek=eA[1],eC=(0,p._)((0,g.useState)(et),2),eI=eC[0],eD=eC[1],eR=(0,p._)((0,g.useState)(ee),2),eU=eR[0],eF=eR[1],eP=Ym(eI),eO=Ym(eU),eT=(0,g.useRef)(null),eL=(t=(n={query:es,isRegex:em,isCaseSensitive:ew,isMatchingWholeWords:eY,excludeGlobs:eP,includeGlobs:eO}).query,r=n.isRegex,i=n.isCaseSensitive,o=n.isMatchingWholeWords,l=void 0===(a=n.includeGlobs)?[]:a,u=void 0===(c=n.excludeGlobs)?[]:c,d=(s=(0,oM.A)()).container,h=s.dotReplit,v=(0,Yx.o)(h),y=(0,N._P)({controlName:"flag-code-search-latency-metrics",logFlagToAnalytics:!1}),b=(w=(0,p._)((0,g.useState)([]),2))[0],x=w[1],S=(Y=(0,p._)((0,g.useState)(null),2))[0],A=Y[1],k=(_=(0,p._)((0,g.useState)(t.length>0),2))[0],C=_[1],I=(0,J.A)(function(){return(0,eE._)(u).concat((0,eE._)(v||[]),(0,eE._)(Yb.TJ))},[u,v]),D=d.getConnectionState(),E=(0,g.useMemo)(function(){return(0,YY.A)({container:d,onError:function(e){return A(e)},onUpdate:function(e){return x(e)},onLoadingStateChange:function(e){return C(e)},isStreaming:!0,trackLatency:y})},[]),(0,g.useEffect)(function(){D===aw.KN.CONNECTED&&E({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:I})},[D,E,t,r,i,o,l,I,v]),{loading:k,error:S,data:b,search:function(){return E({query:t,isRegex:r,isCaseSensitive:i,isMatchingWholeWords:o,includeGlobs:l,excludeGlobs:I})}}),eM=eL.loading,eG=eL.error,eN=eL.data,eB=eL.search;(0,pR.A)(function(){""!==es&&(0,oE.u4)(oE.AZ.SEARCH_PANE_USED,{action:"search",isRegex:em,isCaseSensitive:ew,hasIncludes:eO.length>0,hasExcludes:eP.length>0})},[es,eO,eP,em,ew],1e3);var eH=(U=(R={replacement:ef,query:es,isRegex:em,isCaseSensitive:ew,isMatchingWholeWords:eY,excludeGlobs:eP,includeGlobs:eO,fileList:eG?void 0:eN}).query,F=R.replacement,P=R.fileList,O=(0,uK._)(R,["query","replacement","fileList"]),T=(0,oM.A)().container,M=(L=(0,p._)((0,g.useState)(!1),2))[0],G=L[1],H=(B=(0,p._)((0,g.useState)(null),2))[0],z=B[1],j=(W=(0,p._)((0,g.useState)(!1),2))[0],$=W[1],{replace:(0,g.useCallback)((0,tw._)(function(){var e;return(0,tb.YH)(this,function(n){switch(n.label){case 0:return $(!0),z(null),[4,function(e){return Yw.apply(this,arguments)}((0,m._)({container:T,query:U,replacement:F,fileList:null==P?void 0:P.map(function(e){return e.path})},O))];case 1:return(e=n.sent()).success||z(e.errorMessage),$(!1),G(e.success),[2,e]}})}),[T,U,F,P,O]),loading:j,error:H,data:M}),ez=eH.loading,eW=eH.replace,ej=(0,g.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null==ei||ei({initialQuery:es,initialReplacement:ef,initialIncludeGlob:eU,initialExcludeGlob:eI},e)},[ei,es,ef,eI,eU]);(0,g.useLayoutEffect)(function(){ed(V),eh(Q),eF(ee),eD(et)},[V,Q,ee,et]);var e$=xO({selector:'[data-nav*="'.concat(Yr,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(Yr,'"]')),r=e.target.matches("[data-nav*=".concat(Yt,"]"));return n&&t&&(e.altKey||r)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eZ=xO({selector:'[data-nav*="'.concat(Yi,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(Yi,'"]')),r=e.target.matches("[data-nav*=".concat(Yt,"]"));return n&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eq=xO({selector:'[data-nav*="'.concat(YI,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key;if(e.target.matches('[data-nav*="'.concat(Yi,'"]'))&&"ArrowDown"===e.key)return!1;var t=e.target.matches('[data-nav*="'.concat(YI,'"]'));return n&&t},move:function(e){var n=e.event,t=e.activeIndex,r=e.children,i=n.target.matches('[data-nav*="'.concat(Yi,'"]'));return(n.preventDefault(),n.stopPropagation(),i)?0:0===t&&"ArrowUp"===n.key?-1:r.length-1}}),eV=xO({selector:'[data-nav*="'.concat(YC,'"]'),isValid:function(e){var n="ArrowUp"===e.key||"ArrowDown"===e.key,t=e.target.matches('[data-nav*="'.concat(YC,'"]')),r=e.target.matches("[data-nav*=".concat(Yr,"]"));return n&&e.altKey&&t&&!r},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowUp"===n.key?t-1:t+1}}),eK=xO({selector:'[data-nav*="'.concat(Yk,'"]'),isValid:function(e){var n="ArrowLeft"===e.key||"ArrowRight"===e.key,t=e.target.matches('[data-nav*="'.concat(YI,'"]'));return n&&(e.altKey||t)},move:function(e){var n=e.event,t=e.activeIndex;return n.preventDefault(),n.stopPropagation(),"ArrowLeft"===n.key?t-1:t+1}}),eJ=(0,ax.S)([e$,eZ,eq,eV,eK],{breadcrumb:"client/workspace/components/SearchReplace/index.tsx:661"}),eQ=(0,g.useCallback)(function(e){"Escape"===e.key&&(null==el||el())},[el]);return(0,f.FD)(i4.S,{css:YR.self,innerRef:eJ,onKeyDown:eQ,children:[(0,f.Y)(YU,{isActive:Z,query:es,setQuery:ed,updateData:ej,isRegex:em,isCaseSensitive:ew,isMatchingWholeWords:eY,setIsRegex:ev,setIsCaseSensitive:eb,setIsMatchingWholeWords:eS,isCollapsed:e_,setIsCollapsed:ek,executeSearch:eB,searchInputRef:er,onCloseRequested:el}),e_?null:(0,f.Y)(YF,{replacement:ef,setReplacement:eh,updateData:ej,query:es,replaceLoading:ez,search:eB,includeGlob:eU,setIncludeGlob:eF,excludeGlob:eI,setExcludeGlob:eD,replace:eW,results:eN}),(0,f.FD)(i4.S,{css:YR.results,children:[eM?(0,f.Y)(i4.S,{css:YR.loadingBar},es):null,0===es.length&&0===eN.length?(0,f.Y)(yj.A,{pane:{type:"searchReplace"},bodyText:"Enter a search query above to see results."}):(0,f.Y)(Yh,{isRegex:em,query:es,replacement:ef,include:eU,exclude:eI,results:eN,error:eG,paneRef:eT,onOpenSearchPane:ea,onFileLineClicked:eo,searchResultBackgroundColor:ec})]})]})}var YO=eh.ZU.Object({type:eh.ZU.Literal("searchReplace"),data:eh.ZU.Optional(eh.ZU.Object({initialQuery:eh.ZU.Optional(eh.ZU.String()),initialReplacement:eh.ZU.Optional(eh.ZU.String()),initialIncludeGlob:eh.ZU.Optional(eh.ZU.String()),initialExcludeGlob:eh.ZU.Optional(eh.ZU.String())}))}),YT={Content:function(e){var n=e.pane,t=e.options;return(0,f.Y)(YM,{paneData:(null==n?void 0:n.data)||{},isActive:t.isActive,performPaneOperation:t.performPaneOperation})},Icon:function(e){var n=e.size;return(0,f.Y)(oT.A,{size:n})},getTitle:function(e){var n,t=null==e||null==(n=e.data)?void 0:n.initialQuery;return t&&t.length>0?"Code Search: ".concat(t):"Code Search"},description:"Search through the text contents of your App",category:nr.bY.WorkspaceFeatures,decode:function(e){return yR.T(YO,e)}},YL=(0,rw.x)({wrapper:[i2.wp.height("100%"),i2.wp.width("100%")]});function YM(e){var n=e.paneData,t=e.isActive,r=e.performPaneOperation,i=(0,g.useRef)(null),o=(0,g.useCallback)(function(){var e,n;null==(e=i.current)||e.select(),null==(n=i.current)||n.focus()},[]);(0,oj.Qt)(function(){return{type:"searchReplace",focusSearchInput:o}},[o]),(0,oj.HP)(function(){return{focus:o}},[o]);var a=(0,g.useCallback)(function(e){r({operation:"open",pane:{type:"codeEditor",data:{path:e.path,line:e.lineNumber,col:e.columnNumber}},secondary:!0})},[r]),l=(0,g.useCallback)(function(){r({operation:"commit"}),r({operation:"open",pane:{type:"searchReplace"}})},[r]),c=(0,g.useCallback)(function(e,n){r({operation:"replace",pane:{type:"searchReplace",data:(0,m._)({},e,n)}})},[r]);return(0,f.Y)(i4.S,{css:YL.wrapper,pt:6,children:(0,f.Y)(YP,(0,td._)((0,m._)({},n),{isActive:t,searchInputRef:i,onFileLineClicked:a,onOpenSearchPane:l,onDataChanged:c,searchResultBackgroundColor:ry.LU.backgroundDefault}))})}var YG=eh.ZU.Object({type:eh.ZU.Literal("threadInbox")}),YN={Content:function(e){var n=e.options;return(0,f.Y)(wE,{openFile:function(e){n.performPaneOperation({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:e}}})}})},Icon:function(e){var n=e.size;return(0,f.Y)(i5.Vx.Provider,{value:{color:ry.LU.blueStronger,size:n},children:(0,f.Y)(wd.A,{})})},getTitle:function(){return"Threads"},description:"Comment and discuss topics with collaborators directly inside code or text files",category:nr.bY.Collaboration,decode:function(e){return yR.T(YG,e)}},YB=t(35812),YH=t(51623),Yz=t(77694),YW=t(69961),Yj=t(53829),Y$=t(75973),YZ=function(e){return e.Ready="READY",e.Loading="LOADING",e.Error="ERROR",e}(YZ||{}),Yq=function(e){var n=e.progress;return(0,f.Y)(l3.m_,{tooltip:"Progress: ".concat(Math.round(100*n*10)/10,"%"),children:(0,f.Y)(i4.S,{css:[i2.wp.width("100%"),i2.wp.height(4),i2.wp.backgroundColor.backgroundHigher],children:(0,f.Y)(i4.S,{css:[i2.wp.width("".concat(100*n,"%")),i2.wp.height("100%"),i2.wp.backgroundColor.purpleDefault]})})})},YV=eh.ZU.Object({type:eh.ZU.Literal("tutorial")}),YK={Content:function(){var e,n,t,r,i=(0,oM.A)().fs,o=(e=ro(iG),n=ro(iB),t=rl(iz),n||!e?null:t),a=(0,pT.Jw)(YH.C.id,YH.j.Sidepane),l=(0,p._)((0,g.useState)([]),2),c=l[0],u=l[1],s=(0,p._)((0,g.useState)("LOADING"),2),d=s[0],h=s[1],m=(0,ec.A)(),v=(0,p._)((0,YB.A)("tutorialProgress--".concat(m),0),2),y=v[0],w=v[1],b=(0,p._)((0,g.useState)(!1),2),x=b[0],Y=b[1],S=(0,g.useRef)(null),A=(0,aa.T)(),_=A?A.toString():"",k=(0,rn.vO)(),C=(0,rn.rM)(),I=(0,YW.A)(C),D=(0,J.A)(function(){return I?function(e){var n,t;return I({code:e,insertAt:null!=(t=null==(n=k())?void 0:n.position.offset)?t:"end"})}:void 0},[I,k]),E=(0,Y$.wp)(_,m),R=E?(0,f.Y)(Y$.Q9,{challenge:E}):null,U=(0,g.useCallback)(function(){S.current&&(S.current.scrollTop=0)},[S]);return((0,g.useEffect)(function(){var e,n=!1;return(e=(0,tw._)(function(){var e,t,r,o,a,l,c,s,d,f,g,m,v,y;return(0,tb.YH)(this,function(w){switch(w.label){case 0:return h("LOADING"),[4,i.readDir(Yj.T)];case 1:if(e=w.sent(),n)return[2];if(e.error)return h("ERROR"),[2];return t=[],[4,Promise.all(e.children.filter(function(e){var n;return e.type===tZ.pt.File&&(null==(n=Yb.Jh.from(e.filename))?void 0:n.id)==="markdown"}).map(function(e){var n="".concat(Yj.T,"/").concat(e.filename);return Promise.all([n,i.readFile(n)])}))];case 2:if(r=w.sent(),n)return[2];o=!0,a=!1,l=void 0;try{for(c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)f=(d=(0,p._)(s.value,2))[0],(g=d[1]).error?h("ERROR"):(v=g.content.toString(),y=RegExp("^#\\s(?<title>.*)").exec(v),t.push({title:null==y||null==(m=y.groups)?void 0:m.title,content:v,path:f}))}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return u(t),h("READY"),[2]}})}),function(){return e.apply(this,arguments)})(),function(){n=!0}},[i]),(0,g.useEffect)(function(){c[y]||w(0)},[y,w,c]),"LOADING"===d)?(0,f.Y)(i4.S,{css:[i2.wp.center],grow:!0,shrink:!0,children:(0,f.Y)(s5.A,{})}):"ERROR"===d?(0,f.Y)(i4.S,{css:[i2.wp.center],grow:!0,shrink:!0,children:(0,f.FD)(i4.S,{css:[i2.wp.center,i2.wp.colWithGap(4)],children:[(0,f.Y)(uJ.A,{color:ry.LU.accentNegativeDefault}),(0,f.Y)(ac.EY,{color:"dimmer",multiline:!1,children:"Failed to load tutorial"})]})}):0===c.length?(0,f.Y)(i4.S,{css:[i2.wp.center],grow:!0,shrink:!0,children:(0,f.FD)(i4.S,{css:[i2.wp.center,i2.wp.colWithGap(4)],children:[(0,f.Y)(uJ.A,{color:ry.LU.accentNegativeDefault}),(0,f.Y)(ac.EY,{color:"dimmer",multiline:!1,children:"No tutorials found!"})]})}):x?(0,f.FD)(i4.S,{css:[i2.wp.overflowY("scroll"),i2.wp.flex.growAndShrink(1),i2.wp.p(8),i2.wp.colWithGap(16)],children:[(0,f.Y)(ac.EY,{variant:"headerDefault",multiline:!1,children:"Table of Contents"}),(0,f.Y)(i4.S,{grow:!0,shrink:!0,gap:8,children:c.map(function(e,n){return(0,f.FD)(i4.S,{css:[y===n?i2.wp.backgroundColor.backgroundHighest:i2.wp.backgroundColor.backgroundHigher,i2.wp.borderRadius(4),i2.wp.rowWithGap(8),i2.wp.align.center,i2.wp.cursor.pointer,y===n?{outline:"solid 2px ".concat(ry.LU.outlineDimmest)}:{},{":hover":{outline:"solid 2px ".concat(ry.LU.outlineDimmest)}}],p:8,onClick:function(){w(n),Y(!1)},children:[(0,f.Y)(i4.S,{css:[i2.wp.backgroundColor.backgroundHighest,i2.wp.width(20),i2.wp.height(20),i2.wp.borderRadius("full"),i2.wp.center,{outline:"solid 1px ".concat(ry.LU.outlineDimmest)}],children:(0,f.Y)(ac.EY,{variant:"small",color:"dimmest",multiline:!1,children:n+1})}),(0,f.Y)(ac.EY,{css:[i2.wp.maxWidth("80%")],multiline:!1,children:e.title})]},e.title)})})]}):(0,f.Y)(i4.S,{innerRef:a,css:[i2.wp.height("100%")],children:(0,f.FD)(i4.S,{dataCy:"tutorial-viewer-content",innerRef:S,css:[i2.wp.overflowY("scroll"),i2.wp.flex.growAndShrink(1),i2.wp.p(16),i2.wp.pb(48),i2.wp.colWithGap(16)],children:[o?(0,f.Y)(al.$n,{text:"Show tutorial video",iconLeft:(0,f.Y)(uU.A,{}),onClick:function(){return o()}}):null,R,c.length>1&&(0,f.Y)(al.$n,{text:"Table of Contents",iconLeft:(0,f.Y)(xc.A,{}),onClick:function(){return Y(!0)}}),(0,f.Y)(Yz.A,{fs:i,path:c[y].path,source:c[y].content,sourcePos:!1,onCodeInsert:D}),c.length>1&&(0,f.FD)(i4.S,{css:[i2.wp.position.absolute,i2.wp.width("100%"),i2.wp.left(0),i2.wp.bottom(0),i2.wp.overflow("hidden")],children:[(0,f.Y)(Yq,{progress:(y+1)/c.length}),(0,f.FD)(i4.S,{css:[i2.wp.width("100%"),i2.wp.height(40),i2.wp.align.center,i2.wp.flex.row],children:[(0,f.Y)(i4.S,{tag:"button",css:[i2.wp.backgroundColor.backgroundHigher,i2.wp.cursor.pointer,i2.wp.width(40),i2.wp.height("100%")],p:8,justify:"center",onClick:function(){y>0&&(w(function(e){return e-1}),U())},children:y>0&&(0,f.Y)(be.A,{size:24})}),(0,f.Y)(i4.S,{tag:"button",css:[i2.wp.height("100%"),i2.wp.justify.spaceBetween,i2.wp.backgroundColor.backgroundHighest,i2.wp.align.center,i2.wp.p(8),i2.wp.cursor.pointer,{userSelect:"none"}],grow:!0,shrink:!0,row:!0,gap:8,onClick:function(){y<c.length-1&&(w(function(e){return e+1}),U())},children:y<c.length-1&&(0,f.FD)(f.FK,{children:[(0,f.FD)(ac.EY,{multiline:!1,css:[i2.wp.flex.growAndShrink(1),i2.wp.textAlign.left,i2.wp.fontSize(ry.LU.fontSizeSubheadDefault)],children:[(0,f.FD)("span",{css:[i2.wp.color.foregroundDimmer],children:["Next",c[y+1].title?": ":" page"]}),(0,f.Y)("b",{children:null!=(r=c[y+1].title)?r:""})]}),(0,f.Y)(pX.A,{size:24})]})})]})]})]})})},Icon:function(e){var n=e.size;return(0,f.Y)(m0.A,{size:n})},getTitle:function(){return"Tutorial"},category:nr.bY.Other,decode:function(e){return yR.T(YV,e)}},YJ=t(90342),YQ=t(77271),YX=t(3232),Y0=t(28177),Y1=t(8782),Y2=t(74741),Y4=t(59146),Y5=t(23959),Y7=t(67197),Y3={Content:function(e){var n,t,r=e.pane.data,i=e.options.performPaneOperation,o=(0,g.useRef)(null),a=(0,Z.jt)(),l=(0,oM.A)(),c=l.ports,u=l.container,s=(0,YJ.w)(c),d=(0,g.useMemo)(function(){var e;return null!=(e=(0,Y1.E)(r,s))?e:80},[r,s]),p=(0,Y2.X)(d),h=(0,fd.A)(),v=h.didConnectOnce,y=h.didDisconnect,w=(0,g.useCallback)(function(e){i({operation:"open",secondary:!1,pane:e})},[i]),b=(0,g.useCallback)(function(){return w({type:"networking"})},[w]),x=(0,g.useCallback)(function(){return w({type:"deployments"})},[w]),Y=null==r?void 0:r.previewScreenSize,S=(0,g.useCallback)(function(e){i({operation:"replace",pane:{type:"webview",data:{previewScreenSize:e}}})},[i]),A=(0,Y5.xQ)({openDeploymentsPane:x,includeSharing:!0}).getCommandGroups;return((0,oj.Qt)(function(){var e={type:"webview",refresh:function(){var e;null==(e=o.current)||e.refresh()},navigate:function(e,n){var t;null==(t=o.current)||t.navigateTo(e,n)}},n=A();return n.length>0?(0,td._)((0,m._)({},e),{commands:n}):e},[A]),a)?(0,f.Y)(Y6,{ref:o,initialPort:d,initialPath:null==r||null==(t=r.ports)?void 0:t.path,openPane:w,previewScreenSize:Y,setPreviewScreenSize:S}):p?(0,f.Y)(Y4.A,{openNetworkingTool:b,didConnectOnce:v,didDisconnect:y}):(0,f.Y)(Y1.Q,{ref:o,initialPort:d,initialPath:null==r||null==(n=r.ports)?void 0:n.path,openPane:w,ports:c,container:u,previewScreenSize:Y,setPreviewScreenSize:S})},Icon:function(e){var n=e.size;return(0,f.Y)(i5.Vx.Provider,{value:{size:n},children:(0,f.Y)(uE.A,{})})},getTitle:function(){return"Preview"},description:"Preview your App",category:nr.bY.WorkspaceFeatures,decode:Y7.D4},Y6=(0,g.forwardRef)(function(e,n){var t=e.initialPort,r=e.initialPath,i=e.openPane,o=e.previewScreenSize,a=e.setPreviewScreenSize,l=(0,Y0.X5)(),c=(0,oM.A)(),u=c.ports,s=c.container;if(l.state!==Y0.J4.READY&&l.state!==Y0.J4.LAST_RESORT_READY)return(0,f.Y)(YQ.j,{webviewState:l,openPane:i});var d=l.state===Y0.J4.READY?l.presentPort:l.externalPort,p=l.state===Y0.J4.READY?l.presentRoute:r;return(0,f.FD)(f.FK,{children:[(0,f.Y)(Y1.Q,{ref:n,initialPort:null!=d?d:t,initialPath:null!=p?p:r,ports:u,container:s,openPane:i,previewScreenSize:o,setPreviewScreenSize:a}),l.state===Y0.J4.READY&&l.showTipsOverlay?(0,f.Y)(YX.x,{}):null]})}),Y8=t(70374),Y9=t(49126),Se=t(76546),Sn=t(79107),St=t(58565),Sr=t(37565),Si=(0,rb.v)(["transformX","transformY","hoverScaleX","hoverScaleY","width","height","zIndex","cursor","gripVisibility","gripColor","gripWidth","gripHeight","transitionDuration","rotation"]),So=Si.cssVars,Sa=Si.styleTokens,Sl=(0,rw.x)({root:[i2.wp.center,i2.wp.position.absolute,i2.wp.top(0),i2.wp.left(0),vV,(s={transform:"translate(".concat(Sa.transformX,", ").concat(Sa.transformY,")"),width:Sa.width,height:Sa.height,cursor:Sa.cursor,zIndex:Sa.zIndex},(0,tg._)(s,i2.$_.canHover,[{"&:hover":{zIndex:rv.W.gutterHovered}}]),(0,tg._)(s,"&:hover .blanket",{transform:"scale(".concat(Sa.hoverScaleX,", ").concat(Sa.hoverScaleY,")")}),(0,tg._)(s,"& .icon",{transform:"rotate(".concat(Sa.rotation,")")}),(0,tg._)(s,"&:active .blanket",[i2.wp.height("200vh"),i2.wp.width("200vw"),{transform:"translate(-50%, -50%)"}]),(0,tg._)(s,"&:not(:active):hover > .grip",(0,tg._)({},So.gripColor,ry.LU.foregroundDefault)),s)],blanket:i2.wp.coverContainer,grip:[i2.wp.borderRadius(4),{width:Sa.gripWidth,height:Sa.gripHeight,visibility:Sa.gripVisibility,background:Sa.gripColor,transitionProperty:"opacity, width, height, background-color",transitionTimingFunction:"ease-out"}]}),Sc=(0,g.memo)(function(e){var n,t,r,i,o=function(e){var n,t,r,i,o,a,l,c,u,s=rJ(e),d=rQ(e),p=nK(d),f=nJ(d),h=rX(e),g=(n=rJ(e),(0,J.A)(function(){return(0,eQ.mg)(n,function(e){return!!e.snapped})},[n])),m=r0(e),v=(t=nK(rQ(e)),r=r0(e),(0,J.A)(function(){return(0,eu.eU)(function(e){var n=e(t),i=n.width,o=n.height;return e(r)?i:o})},[t,r])),y=(i=rJ(e),(0,J.A)(function(){return(0,eu.eU)(function(e){var n=e(i),t=n.snapped,r=n.stacked;return"right"===t?r?180:90:"left"===t?270*!r:0})},[i])),w=(o=r0(e),a=rX(e),l=nK(rQ(e)),(0,J.A)(function(){return(0,eu.eU)(function(e){var n=e(l),t=n.width,r=n.height,i=e(a),c=e(o),u=e(nv);return c?{width:i?t:24,height:u?6:2}:{height:i?r:24,width:u?6:2}})},[l,o,a])),b=(c=nK(rQ(e)),u=r0(e),(0,J.A)(function(){return(0,eu.eU)(function(e){var n=e(c),t=n.width,r=n.height;return(e(u)?t:r)<24})},[c,u]));return{handle:ra(s),size:ra(p),position:ra(f),isActive:ra(h),isSnapped:ra(g),isStacked:ra(m),length:ra(v),rotation:ra(y),gripSize:ra(w),gripIsHidden:ra(b)}}(e.handleId),a=(n=(0,g.useRef)(null),t=(0,mV.j)(),r=ro(nv),(0,rm.d)(n,o.size,function(e){var n,t=e.width,r=e.height;return n={},(0,tg._)(n,So.width,t+"px"),(0,tg._)(n,So.height,r+"px"),n}),(0,rm.d)(n,o.position,function(e){var n,t=e.x,r=e.y;return n={},(0,tg._)(n,So.transformX,Math.round(t)+"px"),(0,tg._)(n,So.transformY,Math.round(r)+"px"),n}),(0,rm.d)(n,o.rotation,function(e){return(0,tg._)({},So.rotation,e+"deg")}),(0,rm.d)(n,o.gripIsHidden,function(e){return(0,tg._)({},So.gripVisibility,e?"hidden":"visible")}),(0,rm.d)(n,o.length,function(e){return(0,tg._)({},So.transitionDuration,(t?0:Math.min(Math.max(100/e*1,.08),.12))+"ms")}),vK(n),i=r?3:2,(0,rm.d)(n,o.isStacked,function(e){var n;return n={},(0,tg._)(n,So.cursor,e?"row-resize":"col-resize"),(0,tg._)(n,So.hoverScaleX,(e?1:i).toString()),(0,tg._)(n,So.hoverScaleY,(e?i:1).toString()),n}),(0,rm.d)(n,o.isActive,function(e){var n;return n={},(0,tg._)(n,So.gripColor,e?"radial-gradient(circle, ".concat(ry.LU.accentPrimaryDefault," calc(100% - 48px), transparent)"):ry.LU.outlineDimmest),(0,tg._)(n,So.zIndex,(e?rv.W.gutterActive:rv.W.gutter).toString()),n}),(0,rm.d)(n,o.gripSize,function(e){var n,t=e.width,r=e.height;return n={},(0,tg._)(n,So.gripWidth,t+"px"),(0,tg._)(n,So.gripHeight,r+"px"),n}),n),l=rl(rK),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,g.useRef)(e),t=rl(tM),r=rc(ny);return(0,g.useCallback)(function(i){if(i.snapped)return void t({leftPath:i.leftPath,percent:n.current});Promise.resolve(r()).then(function(r){var o=eU(r,i.leftPath);if(!o||!eI(o))throw Error("Expected split or paneGroup");n.current=o.percent,t({leftPath:i.leftPath,percent:e})})},[e,t,r])}(),u=(0,g.useRef)(null),s=(0,u4.A)(o.isSnapped);return(0,f.FD)(i4.S,{innerRef:a,css:Sl.root,onDoubleClick:function(){c(o.handle.current)},onPointerDown:function(e){(0,l1.j)(e,{start:function(){var e=o.handle.current;u.current=document.activeElement,l({type:"start",leftPath:e.leftPath,stacked:e.stacked})},move:function(e){l({type:"update",moveDelta:e.delta})},end:function(){var e,n;l({type:"end"}),null==(n=u.current)||null==(e=n.focus)||e.call(n)}})},onContextMenu:function(e){e.preventDefault(),e.stopPropagation()},children:[(0,f.Y)(i4.S,{className:"blanket",css:Sl.blanket}),s?(0,f.Y)(Sr.A,{className:"icon"}):(0,f.Y)(i4.S,{className:"grip",css:Sl.grip})]})}),Su=t(92557),Ss=t(99866);function Sd(){var e=(0,v._)(["\n  subscription ThreadUpdates($replId: String!) {\n    updatedThread: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return Sd=function(){return e},e}var Sp={},Sf=(0,y.J1)(Sd(),yB.A9),Sh=t(44781),Sg=t(82057),Sm=t(93088),Sv=t(71666),Sy="video.json",Sw=(0,Sv.join)(Yj.T,Sy);function Sb(){return(Sb=(0,tw._)(function(e,n){var t;return(0,tb.YH)(this,function(r){switch(r.label){case 0:if(!n.find(function(e){return e.type===tZ.pt.File&&e.filename===Sy}))return[2,null];return[4,e.readFile(Sw)];case 1:if((t=r.sent()).error)return[2,null];return[2,t.content.toString()]}})})).apply(this,arguments)}var Sx=t(3175);let SY=function(e){var n=yz(e,{onReceiveAnnotationUpdate:function(){}}).generalThread;return(0,g.useMemo)(function(){return n?n.messages.filter(function(e){return!1===e.seen}).length:0},[n])};var SS=t(74671);function SA(){var e=(0,v._)(["\n  mutation HandlePortOpenedUpdateReplConfig($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          isVnc\n          isServer\n        }\n      }\n    }\n  }\n"]);return SA=function(){return e},e}var S_={},Sk=(0,y.J1)(SA()),SC=t(47848),SI=t(10752);function SD(){var e=(0,v._)(["\n  subscription RegisterReplConnection($replId: String!) {\n    replConnection(replId: $replId)\n  }\n"]);return SD=function(){return e},e}var SE={},SR=(0,y.J1)(SD()),SU=t(93188),SF={direction:"reverse",state:{isExecutingPlan:!1},reducer:function(e,n){if(e.sender.type!==ep.utd.AI)return!1;var t=e.contents.contents;switch(null==t?void 0:t.$kind){case"agentPlanEventContents":var r=t.agentPlanEventContents;if(!r)break;if(!0===r.requiresApproval)return n.notification={id:r.planId,text:"Plan is waiting for approval"},n.isExecutingPlan=!0,!1;if(n.isExecutingPlan&&r.step.subSteps.every(function(e){return e.status===ep.jhd.STEP_COMPLETE}))return n.notification={id:r.planId,text:"Plan has been completed!"},n.isExecutingPlan=!1,!1;break;case"agentAskUserForActionRequest":var i=t.agentAskUserForActionRequest.request;if((null==i?void 0:i.$kind)==="userSecretsRequest")return n.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;return n.notification={id:e.id,text:"Agent has an update for you"},!1;case"agentTimelineEventContents":var o,a=t.agentTimelineEventContents,l=a.toolData,c=a.toolName;if((null==l?void 0:l.$kind)==="messageData"){switch(null==(o=l.messageData.agentAction.optionType)?void 0:o.$kind){case"messageButtonAction":return n.notification={id:e.id,text:"Agent has a question for you"},!1;case"secretRequestAction":return n.notification={id:e.id,text:"Agent needs secrets to proceed"},!1;case"deployRequestAction":return n.notification={id:e.id,text:"Agent needs your permission to deploy the application"},!1}if("user_response"===c)return n.notification={id:e.id,text:"Agent has a question for you"},!1}}n.notification=void 0}};function SP(){var e=(0,v._)(["\n  query ReplEnvironmentNotifyUserJoin($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return SP=function(){return e},e}var SO=(0,y.J1)(SP());function ST(){return(ST=(0,tw._)(function(e){var n;return(0,tb.YH)(this,function(t){switch(t.label){case 0:if(!tx.V)throw Error("Expected Apollo client");return[4,tx.V.query({query:SO,variables:{id:e}})];case 1:return[2,(null==(n=t.sent().data)?void 0:n.repl.__typename)==="Repl"?n.repl.title:null]}})})).apply(this,arguments)}var SL=t(22799),SM={direction:"reverse",state:{createdDatabase:!1},reducer:function(e,n){if(e.sender.type!==ep.utd.AI)return!1;var t=e.contents.contents;if((null==t?void 0:t.$kind)!=="agentTimelineEventContents")return!1;var r=t.agentTimelineEventContents.toolData;return(null==r?void 0:r.$kind)==="createPostgresqlDatabaseData"&&(n.lastCreationEventId!==e.id&&(n.createdDatabase=!0,n.lastCreationEventId=e.id),!1)}},SG=t(3677),SN=t(71983);function SB(){return(SB=(0,tw._)(function(e){return(0,tb.YH)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){return setTimeout(function(){return n()},e)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function SH(){var e=(0,v._)(["\n  query TrackMultiplayer($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        multiplayers {\n          id\n        }\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return SH=function(){return e},e}var Sz={},SW=(0,y.J1)(SH());function Sj(){var e=oh(),n=(0,lL.oR)(),t=rc(n_),r=rl(tW);return(0,g.useCallback)(function(i){var o=!!i&&i.reveal;if(n)return void e({pane:{type:"runnerOutput"},activate:!1,commit:!0});var a=t().find(function(e){var n=(0,p._)(e,2);return"runnerOutput"===(n[0],n[1]).type});a||e({pane:{type:"runnerOutput"},activate:!1,commit:!0}),o&&a&&r({paneId:a[0],activate:!0})},[n,t,e,r])}function S$(e,n,t){var r=ro(nR),i=rl(t$),o=rl(tW),a=rc(n_);(0,o0.SJ)(function(){if(r)return[e,function(){var e=a().find(function(e){return(0,p._)(e,2)[1].type===n.type});if(e)return void o({paneId:e[0],activate:!0});i((0,td._)((0,m._)({},t),{pane:n,activate:!0,placement:{type:"secondary"}}))}]},[r,i,o])}var SZ=t(41007),Sq=t(54928),SV=t(13880),SK=t(53478),SJ=t(71355),SQ={direction:"forward",state:{hasNonEmptyAgentCheckpoint:!1},reducer:function(e,n){var t=e.contents.contents;if((0,SJ.VF)(t,"agentTimelineEventContents")){var r=(0,SJ.QN)(t).toolData;if((0,SJ.VF)(r,"commitData")&&(0,SJ.QN)(r).billingRate===ep.pSr.NORMAL)return n.hasNonEmptyAgentCheckpoint=!0,!1}},map:function(e){return e.hasNonEmptyAgentCheckpoint}},SX=t(71866),S0=t(32398),S1=t(77425),S2=t(37853),S4=t(18329),S5=t(51312),S7=t(3652),S3=t(28079);function S6(){var e=(0,v._)(["\n  query WorkspaceShowHiddenFiles($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return S6=function(){return e},e}var S8={},S9=(0,y.J1)(S6()),Ae=t(32055),An=t(84829),At=t(4015),Ar=t(67244),Ai=t(94398),Ao=t(10806);function Aa(e){var n,t,r,i,o,a,l,c,u,s,d,h,v,y,x,Y,S,A,_,k,C,I,D,E,R,U,F,P,O,T,L,M,G,B,H,W,j,$,q,V,Q,X,ee,en,et,er,ei,eo,ea,el,eu,es,eh,eg,em,ev,ey,ew,eb,ex,eY,eS,eA,e_,ek,eC,eI,eD,eE,eU,eF,eP,eO,eT,eL,eM,eG,eN,eB,eH,ez,eW,ej,e$,eZ,eq,eV,eK,eQ,eX,e0,e1,e2,e4,e5,e7,e3,e6,e8,e9,ne,nn,nt,nr,no,na,nc,nu,ns,nd,np,nf,nh,ng,ny,nw,nb,nx,nS,nA,n_,nk,nC,nD,nE,nU,nF,nP,nO,nT,nL,nM,nG,nN,nB,nH,nz,nW,nj,n$,nZ,nq,nV,nK,nJ,nX,n0=e.repl,n1=e.currentUser,n2=(0,oM.A)(),n4=n2.replspaceApi,n5=n2.dotReplit,n7=n2.container,n3=n2.ports;l=(0,oM.A)().lspnix,c=(0,K.g)("codeIntelligence").preferences.codeIntelligence,u=(0,N._P)({controlName:"flag-download-more-ram"}),s=(0,tG.L2)().length>0,(0,g.useEffect)(function(){if(u&&!s||!c)return void l.disable();l.enable()},[l,c,s,u]),d=(0,p._)((0,SI.eY)(),1)[0],h=rl(tC),v=(0,J.A)(function(){return ed()(h,1e3)},[h]),y=(0,ec.A)(),(0,g.useEffect)(function(){var e=function(){v({replId:y,force:!1}),v.flush()};if(!d)return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}},[v,y,d]),(0,g.useEffect)(function(){var e=function(){"hidden"===document.visibilityState&&v({replId:y,force:!1})};if(!d)return document.addEventListener("visibilitychange",e),function(){document.removeEventListener("visibilitychange",e)}},[v,y,d]),(0,g.useEffect)(function(){if(!d){var e=null;return function n(){e=setTimeout(function(){v({replId:y,force:!1}),n()},6e4)}(),function(){e&&clearTimeout(e)}}},[v,y,d]),(0,g.useEffect)(function(){return function(){v({replId:y,force:!1}),v.flush()}},[v,y,d]),(0,Ss.A)(),(0,An.A)(),(0,Ar.A)({workspaceType:"desktop"}),(0,g.useEffect)(function(){var e=function(e){"s"===e.key&&(0,cD.T$)(e)&&e.preventDefault()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[]),Y=(x=(0,oM.A)()).container,S=x.presence,(0,g.useEffect)(function(){var e=S.onUserJoin(function(n){var t,r=null==(t=Y.getContext())?void 0:t.repl;if(r){var i=n.username;return(function(e){return ST.apply(this,arguments)})(r.id).then(function(e){e&&vb({title:"",body:"".concat(i," joined ").concat(e),tag:"".concat(r.id,"-").concat(i,"-joined"),iconByUsername:i,cacheDuration:9e5})}),function(){e()}}})},[S,Y]),A=(0,ec.A)(),_=(0,K.g)("agentAudioNotification").preferences.agentAudioNotification,k=(0,g.useCallback)(function(e,n){if(_&&document.hidden)try{new Audio("/public/sounds/pop.mp3").play()}catch(e){}vb({title:"Agent Update",body:n,tag:"".concat(A,"-").concat(e),icon:"/public/images/ai/agent/AgentIconStandard.png",cacheDuration:3e5})},[_,A]),C=(0,Z.NC)(),I=(0,ef.J2)(C.sessions.agent.current),D=(0,g.useMemo)(function(){return null==I?void 0:I.reduce(SF,1)},[I]),E=null==I?void 0:I.agent.state,R=(0,g.useMemo)(function(){return E&&D?SU.cP.combine(E,D):null},[E,D]),(0,ef.q3)(R,{next:function(e){var n=(0,p._)(e,2),t=n[0],r=n[1].notification;r&&(null==t?void 0:t.state)===ep.g32.AGENT_STATE_PAUSED&&k(r.id,r.text)}}),U=(0,SL.Jo)("development").refetch,F=(0,Z.NC)(),P=(0,ef.J2)(F.sessions.agent.current),O=(0,g.useMemo)(function(){return null==P?void 0:P.reduce(SM,1)},[P]),T=null==P?void 0:P.agent.state,L=(0,g.useMemo)(function(){return T&&O?SU.cP.combine(T,O):null},[T,O]),M=(0,g.useCallback)(function(e){var n=(0,p._)(e,2),t=n[0];n[1].createdDatabase&&(null==t?void 0:t.state)===ep.g32.AGENT_STATE_RUNNING&&U()},[U]),(0,ef.q3)(L,{next:M}),G=(0,ec.A)(),B=(0,oM.A)().container,H={variables:{replId:G},skip:(0,aY.A)(B)!==SS.KN.CONNECTED},W=(0,m._)({},SE,H),bJ.R(SR,W),j=(0,oM.A)().presence,(0,g.useEffect)(function(){return j.onFollowingUsersChanged(function(e){var n=e.followingUsers,t=e.type,r=n.length;"follow"===t?(0,oE.u4)(SN.AZ.REMOTE_USER_CURSOR_FOLLOWED,{numFollowers:r}):(0,oE.u4)(SN.AZ.REMOTE_USER_CURSOR_UNFOLLOWED,{numFollowers:r})})},[j]),(0,Ai.A)(),$=(0,oM.A)().presence,q=ro(nl),(0,g.useEffect)(function(){$.updateOpenFile(q)},[$,q]),Q=(V=(0,ad.A)()).showConfirm,X=V.showNotice,ee=V.hideMessage,en=V.showError,et=(0,oM.A)().container,er=(0,g.useRef)(!1),(0,g.useEffect)(function(){var e=et.onToast(function(e){e.startsWith("PANIC")||X(e,Math.max(1e4,e.length/.025+1e3))}),n=null,t=!1,r=et.onConnectionStateChanged(function(e){if(n&&(ee(n),n=null),e===SS.KN.CONNECTED){t&&er.current&&(n=Q("Connected",1500),er.current=!1),t=!0;return}if(t){if(e===SS.KN.CONNECTING){n=X("Reconnecting");return}if(e===SS.KN.DISCONNECTED){n=en("Disconnected"),er.current=!0;return}}});return function(){n&&ee(n),e(),r()}},[et,Q,X,en,ee]),ei=(0,ad.A)().showConfirm,eo=(0,oM.A)().fs,(0,g.useEffect)(function(){var e=eo.registerOnFlushSuccess(function(e,n){if(n===tZ.sT.MANUAL_SAVE){var t="Saved ".concat(e);ei(t,Math.max(1e4,t.length/.025+1e3))}});return function(){e()}},[eo,ei]),el=(ea=(0,ad.A)()).showNotice,eu=ea.showError,(0,s0.b)((es=(0,tw._)(function(e,n){var t,r,i;return(0,tb.YH)(this,function(o){switch(o.label){case 0:return t=n.signal,[4,e.pythonMigration.detectLegacyPython.rpc({},{signal:t})];case 1:if(!(r=o.sent()).ok||!r.payload.oldVenvDetected)return[2];return[4,e.pythonMigration.migratePython.rpc({},{signal:t})];case 2:if(!(i=o.sent()).ok)return"NOP"!==i.payload.code&&eu((0,f.FD)(f.FK,{children:[(0,f.Y)("div",{children:"Failed to migrate legacy Python configuration."}),(0,f.Y)("div",{children:"You may need to reinstall your Python packages, or contact support."})]}),1e4),[2];return el((0,f.FD)(f.FK,{children:[(0,f.Y)("div",{children:"This Repl contained legacy Python configuration"}),(0,f.Y)("div",{children:"and has been automatically migrated."})]}),1e4),[2]}})}),function(e,n){return es.apply(this,arguments)}),[eu,el]),eh=ro(nR),eg=Sj(),em=(0,pT.Os)(YH.C.id,YH.j.Output),(0,g.useEffect)(function(){if(eh&&(null==em?void 0:em.isActive)){var e=setInterval(function(){eg()},200);return function(){clearInterval(e)}}},[null==em?void 0:em.isActive,eg,eh]),S$(uM.showShell.id,{type:"shell"}),S$(uM.showDocs.id,{type:"docs"}),S$(uM.showGit.id,{type:"git"}),S$(uM.showSettings.id,{type:"preferences"}),S$(uM.showConsole.id,{type:"runnerOutput"}),S$(uM.showReplitAi.id,{type:"ghostwriterChat"},{commit:!0}),(0,Sq.A)(),ev=(0,oM.A)().presence,ey=ov(),(0,g.useEffect)(function(){return ev.onUserOpenedFile(function(e){var n=e.user,t=e.file,r=ev.getFollowedUser();r&&r.id===n.id&&t&&ey({path:t})})},[ev,ey]),eb=(ew=(0,p._)((0,g.useState)(null),2))[0],ex=ew[1],(0,g.useEffect)(function(){return ev.onFollowedUserChanged(ex)},[ev]),(0,g.useEffect)(function(){if(eb){var e=setTimeout(function(){document.addEventListener("click",n)},0);return function(){clearTimeout(e),document.removeEventListener("click",n)}}function n(){ev.unfollowUser()}},[eb]),eY=(0,rn.xu)(),ek=(null==(e_=(eS={variables:{replId:(0,ec.A)()}},eA=(0,m._)({},S8,eS),w.I(S9,eA)).data)?void 0:e_.repl.__typename)==="Repl"?e_.repl:null,(0,g.useEffect)(function(){var e;ek&&(null==(e=ek.templateInfo)?void 0:e.label.includes("Blank Repl"))&&eY(!0)},[eY,ek]),eC=rl(iH),eI=(0,oM.A)().fs,eD=(0,Yj.A)().isTutorial,eE=(0,iV.A)(eC),(0,g.useEffect)(function(){if(eD){var e=!1,n=eI.watchDir(Yj.T,{onChange:function(n){(function(e,n){return Sb.apply(this,arguments)})(eI,n).then(function(n){if(!e){if(!n)return void eE.current(null);var t=null;try{t=wJ._3(n)}catch(e){}var r=(void 0===t?"undefined":(0,eR._)(t))==="object"&&"string"==typeof t.embedUrl?t.embedUrl:null;eE.current(r?{embedUrl:r}:null)}})},onMoveOrDelete:function(){eE.current(null)},onError:function(){eE.current(null)}});return function(){e=!0,n()}}},[eI,eD,eE]),eU=(0,Yj.A)().isTutorial,eF=rl(ij),(0,g.useEffect)(function(){eU&&eF()},[eF,eU]),r=SY(t=(0,ec.A)()),i=(n=yz(t,{onReceiveAnnotationUpdate:function(){}}).annotations,(0,g.useMemo)(function(){return n.reduce(function(e,n){return n.isGeneral?e:e+n.messages.filter(function(e){return!1===e.seen}).length},0)},[n])),o=(0,SG.A)(),a=(0,rn.RF)(),(0,g.useEffect)(function(){a({paneType:"chat",indicatorType:r>0?ry.LU.redStronger:void 0})},[a,r]),(0,g.useEffect)(function(){a({paneType:"threadInbox",indicatorType:i>0?ry.LU.redStronger:void 0})},[a,i]),(0,g.useEffect)(function(){a({paneType:"envEditor",indicatorType:o?ry.LU.redStronger:void 0})},[o,a]),(0,S4.R)({onOpenEnvEditor:function(){n6({pane:{type:"envEditor"},activate:!0,placement:{type:"secondary"}})}}),eO={variables:{replId:eP=n0.id},onData:function(e){var n,t,r=null==(t=e.data)||null==(n=t.data)?void 0:n.updatedThread;r&&"AnnotationAnchor"===r.__typename&&(e.client.cache.updateQuery({query:yB.FL,variables:{replId:eP}},function(e){return(0,eJ.jM)(e,function(e){null!==e&&"Repl"===e.repl.__typename&&(e.repl.annotationAnchors.find(function(e){return e.id===r.id})||e.repl.annotationAnchors.push(r))})}),e.client.cache.updateQuery({query:Sh.FZ,variables:{replId:eP,path:r.path}},function(e){return(0,eJ.jM)(e,function(e){var n;e&&(null==(n=e.threadsByFile)?void 0:n.__typename)==="ThreadsByFileResult"&&(e.threadsByFile.threads.find(function(e){return e.id===r.id})||e.threadsByFile.threads.push((0,td._)((0,m._)({},r),{messageCount:r.messages.length,unreadCount:r.messages.filter(function(e){return!e.seen}).length,participants:r.messages.filter(function(e){return!!e.user}).map(function(e){return e.user})})))})}))}},eT=(0,m._)({},Sp,eO),bJ.R(Sf,eT),eL=ro(ni),eM=(0,tG.T_)(),eG=(0,tG.nF)(),(0,g.useEffect)(function(){eL?eM(eL):eG()},[eM,eG,eL]),eN=(0,oj.eZ)(),eB=ra(i1),eH=rc(ni),ez=(0,iV.A)(eN),(0,g.useEffect)(function(){var e=function(e){e&&(null!==n&&clearTimeout(n),n=setTimeout(function(){var e=eH();e&&ez.current(e)}))},n=null;e(eB.current);var t=eB.subscribe(e);return function(){null!==n&&clearTimeout(n),t()}},[eB,ez,eH]),eW=ro(t1),ej=rl(og),(0,g.useEffect)(function(){var e=function(){ej()};if(eW)return document.addEventListener("dragend",e),function(){document.removeEventListener("dragend",e)}},[eW,ej]),(0,S2.A)(),e$=SY((0,ec.A)()),eZ=(0,g.useRef)(0),eq=(0,K.g)("chatAudioNotification").preferences,(0,g.useEffect)(function(){eq.chatAudioNotification&&e$>eZ.current&&new Audio("/public/sounds/pop.mp3").play(),eZ.current=e$},[e$,eZ,eq]),eV=ro(nR),eK=(0,oj.gB)(),eQ=rc(nY),(0,o0.SJ)(function(){if(eV)return[uM.webviewRefresh.id,function(){var e=eQ().filter(function(e){return"webview"===(0,p._)(e,2)[1].type}),n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,p._)(i.value,1)[0],l=eK(a);l&&"webview"===l.type&&l.refresh()}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}]},[eV,eK,eQ]),(0,S5.A)(),(0,Sm.i)(!(null==(nX=n0.org)?void 0:nX.id));var n6=ap(),n8=(0,Z.jt)();(0,g.useEffect)(function(){return sJ.NA("replId",n0.id),function(){sJ.NA("replId",void 0)}},[n0.id]),(0,g.useEffect)(function(){return sJ.NA("agent",n8),(0,lR.$Y)(n8),function(){sJ.NA("agent",void 0),(0,lR.qh)()}},[n8]),(0,SZ.A)({repl:n0,currentUser:n1,container:n7}),eX=(0,ec.A)(),e1=(e0=(0,oM.A)()).container,e2=e0.ports,e5=(0,p._)((e4=(0,m._)({},S_,void 0),b.n(Sk,e4)),1)[0],e7=(0,K.g)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,e3=(0,lL.oR)(),e6=(0,Z.jt)(),e8=oh(),e9=(0,g.useCallback)(function(e){e.isForwarded&&!e6&&(e3||e8({pane:{type:"vnc"}}),e5({variables:{input:{id:eX,isVnc:!0}}}))},[e6,e3,e5,eX,e8]),ne=(0,g.useCallback)(function(e){var n=e.isForwarded,t=e.isOpen,r=e.data;n&&(void 0===t||t)&&!e6&&(e7&&!e3&&e8({pane:{type:"webview",data:r}}),e5({variables:{input:{id:eX,isServer:!0}}}))},[e3,e6,eX,e5,e7,e8]),(0,g.useEffect)(function(){return e2.portsState.subscribe(ed()(function(e){if(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=i.value,l=a.configuration,c=a.isOpen;if(l.isVnc)return void e9({isForwarded:c});var u=l.type===SC.gH.FORWARDED;ne({isForwarded:u,isOpen:c,data:{ports:function(e){var n=e.configuration;if(n.localPort)return{type:"local",path:"/",port:n.localPort};var t=(0,SC.Zd)(n);if(t)return{type:"external",path:"/",port:t}}(a)}})}}catch(e){t=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}},500,{leading:!0}))},[e1,e2.portsState,ne,e9]),(0,At.A)(),nn=(0,N._P)({controlName:"flag-open-telemetry-tracing"}),nh=(nr=(nt=(0,p._)((0,g.useState)(!1),2))[0],no=nt[1],nc=(na=(0,p._)((0,g.useState)(Date.now()),2))[0],nu=na[1],nd=(ns=(0,p._)((0,g.useState)(Date.now()),2))[0],np=ns[1],(0,g.useEffect)(function(){var e=function(){no(!document.hidden),document.hidden?np(Date.now()):nu(Date.now())};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),nf={visibility:nr,visibleTime:nc,hiddenTime:nd}).visibility,ng=nf.visibleTime,ny=nf.hiddenTime,(0,g.useEffect)(function(){nn&&nh&&(ng-ny)/1e3>60&&(0,z.O)(S3.rA)},[nn,nh,ny,ng]),nw=(0,oM.A)().ports,nb=(0,K.g)("forwardPortsAutomatically").preferences,(0,g.useEffect)(function(){nw.setForwardPortsAutomatically(nb.forwardPortsAutomatically)},[nb.forwardPortsAutomatically,nw]),(0,Sg.A)(n0,n1);var n9=rl(nm),te=(0,mV.j)();(0,g.useEffect)(function(){n9(!te)},[te,n9]);var tn=rl(nv),tt=(0,Su.A)();(0,g.useEffect)(function(){tn(tt)},[tt,tn]),nS=(0,oM.A)().presence,nA=(0,ec.A)(),n_=(0,g.useRef)(!1),nE=(nk={variables:{replId:nA}},nC=(0,m._)({},Sz,nk),nD=w.I(SW,nC)).data,nU=nD.loading,nF=0,(null==nE?void 0:nE.repl.__typename)==="Repl"&&(nF=nE.repl.multiplayers.length,(null==(nx=nE.repl.owner)?void 0:nx.__typename)==="User"&&(nF+=1)),(0,g.useEffect)(function(){if(!nU&&!n_.current){var e=nS.onActiveUsersChange(function(){n_.current=!0,e(),(0,oE.u4)(oE.AZ.MULTIPLAYER_REPL_OPENED,{replId:nA,participantsCount:nF,usersOnlineCount:nS.getActiveUsers().length})});return e}},[nA,nU,nF,nS]);var tr=(0,tG.c_)();(0,g.useEffect)(function(){n4.setWaitForFileClose(tr)},[n4,tr]);var ti=(0,SI.iO)(),to=ro(nI);(0,g.useEffect)(function(){to&&ti(to)},[ti,to]),nO=(nP=(0,oM.A)()).packager,nT=nP.toolchain,(0,g.useEffect)(function(){var e=setTimeout(function(){!function(){n.apply(this,arguments)}()},(10+5*Math.random())*1e3);function n(){return(n=(0,tw._)(function(){var e,n,t,r,i,o,a,l,c,u;return(0,tb.YH)(this,function(s){switch(s.label){case 0:if(!nT.configs.current||!nO)return[2];e=nT.configs.current.packagers,n=!0,t=!1,r=void 0,s.label=1;case 1:s.trys.push([1,7,8,9]),i=e[Symbol.iterator](),s.label=2;case 2:if(n=(o=i.next()).done)return[3,6];return a=o.value,[4,nO.listSpecfile(a.id)];case 3:return(l=s.sent()).packages&&l.packages.length>0&&(c=l.packages.map(function(e){return e.name||""})||[],lR.vF.info("packager installed packages",{packagerId:a.id,language:a.language,packages:c}),(0,oE.u4)(SN.AZ.PACKAGER_PACKAGES_INSTALLED,{packages:c})),[4,function(e){return SB.apply(this,arguments)}((5+5*Math.random())*1e3)];case 4:s.sent(),s.label=5;case 5:return n=!0,[3,2];case 6:return[3,9];case 7:return u=s.sent(),t=!0,r=u,[3,9];case 8:try{n||null==i.return||i.return()}finally{if(t)throw r}return[7];case 9:return[2]}})})).apply(this,arguments)}return function(){clearTimeout(e)}},[nO,nT.configs.current]),nL=(0,tG.RG)(),nM=(0,oj.eZ)(),(0,g.useEffect)(function(){var e=function(){var e=nL();e&&nM(e)},n=function(){"visible"===document.visibilityState&&document.activeElement===document.body&&e()};return window.addEventListener("focus",e),document.addEventListener("visibilitychange",n),function(){window.removeEventListener("focus",e),document.removeEventListener("visibilitychange",n)}},[nM,nL]),(0,SX.A)();var ta=rl(ih),tl=rl(ig),tc=(0,oM.A)().fs;(0,S7.A)({fs:tc,openMultipleFiles:ta,openMultipleURLs:tl,waitForFileClose:tr,isMobileWorkspace:!1}),(0,o$.Pt)({supportsAgent:n8}),(0,uC.I7)({dotReplit:n5}),nG=(0,f_.ob)(fG),nN=(0,f_.ob)(fH),nB=(0,g.useRef)(!0),nH=(0,g.useCallback)(function(e){nN(e),nB.current?nB.current=!1:nG(!1)},[nN,nG]),(0,s0.b)((nz=(0,tw._)(function(e,n){var t,r,i,o,a,l,c,u,s;return(0,tb.YH)(this,function(d){switch(d.label){case 0:t=n.signal,r=e.resources.monitor.subscribe({},{signal:t}).resReadable,i=!1,o=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),l=(0,sK._)(r),d.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(c=d.sent()).done))return[3,5];if(!(u=c.value).ok)return[2];nH(u.payload),d.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return s=d.sent(),o=!0,a=s,[3,12];case 7:if(d.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(o)throw a;return[7];case 11:return[7];case 12:return[2]}})}),function(e,n){return nz.apply(this,arguments)}),[nH]);var tu=oh();return(0,pT.Os)(pO.X.id,pO.F.ProjectPane,{onEnter:function(){return tu({pane:{type:"project"},commit:!0,activate:!0})}}),(0,Ao.A)(n3),nW=Sj(),nj=(0,g.useCallback)(function(){nW({reveal:!1})},[nW]),(0,uC.bD)(nj,[nj]),(0,SV.u)(),n$=rl(nQ),(0,ef.q3)((0,Sx.S)(),{next:n$}),nZ=(0,rn.eg)(),nq=(0,rn.gp)(),nV=(0,Z.NC)(),nK=(0,ef.J2)(nV.sessions.agent.current),nJ=(0,ef.Rj)(function(){return null==nK?void 0:nK.reduce(SQ,"global")},[nK]),(0,g.useEffect)(function(){nZ&&nJ&&nq()},[nZ,nJ,nq]),(0,SK.M)(),(0,Ae.H)(),(0,S0.k)(),(0,S1.t)(),null}var Al=t(7589);function Ac(e){var n=e.children,t=e.tour,r=e.userId;if(!t)return(0,f.Y)(f.FK,{children:n});var i="workspace-desktop-new-user-tour"===t.id||"workspace-desktop-tour-2024"===t.id;function o(e){i&&t&&(0,oE.ls)({id:r.toString(),workspaceTourId:t.id,workspaceTourStatus:e===t.steps[t.steps.length-1].id?"completed":e.toLowerCase()})}return(0,f.Y)(Al.f,{tour:t,onStep:function(e){t&&((0,oE.u4)(oE.AZ.WORKSPACE_TOUR_STEP_VIEWED,{tour:t.id,stepId:e.toLowerCase()}),o(e))},onDone:function(e){(0,oE.u4)(oE.AZ.WORKSPACE_TOUR_DISMISSED,{tour:t.id,stepId:e.toLowerCase(),didComplete:e===t.steps[t.steps.length-1].id}),o(e)},children:n})}var Au=t(52609),As=t(47456),Ad=t(42683),Ap=t(90882),Af=t.n(Ap),Ah=t(33564),Ag=t(57847);function Am(){var e=(0,ef.J2)((0,Sx.S)()),n=(0,ef.J2)((0,Ag.e)()),t=Ah.O.prompt;return e?t=Ah.O.agentWorking:n&&(t=Ah.O.agentWaiting),t?(0,f.Y)(Af(),{children:(0,f.Y)("link",{rel:"shortcut icon",href:t,sizes:"192x192",type:"image/png"})}):null}var Av=t(99403),Ay=t(69341),Aw=t(84550),Ab=t(74645);function Ax(){var e=(0,v._)(["\n  query PublishedAs($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        publishedAs\n      }\n    }\n  }\n"]);return Ax=function(){return e},e}var AY={},AS=(0,y.J1)(Ax()),AA=t(35651),A_=t(95570),Ak=".replit-dynamic-template",AC=t(63030),AI=t(56578),AD=t(40953);function AE(){var e,n,t,r,i,o,a,l,c,u,s,d,h,v,y,b,x,Y,S,A=(0,p._)((0,g.useState)(!1),2),_=A[0],k=A[1],C=(0,g.useCallback)(function(e){switch(e){case"starting":return void k(!0);case"none":return void k(!1);case"running":if(!_)throw Error("expected repl not to need dynamic template initialization")}},[k,_]),I=(0,p._)((0,g.useState)([]),2),D=I[0],E=I[1],R=(0,w7.c)();n=(e={handleRPC:(0,g.useCallback)(function(e){switch(e.type){case"progress":case"failed":return E(function(n){return(0,eE._)(n).concat([(0,m._)({key:R(n.length)},e)])}),null;case"query":case"prompt":case"confirm":var n=(0,Ab.A)();return E(function(t){return(0,eE._)(t).concat([(0,m._)({respond:n,key:R(t.length)},e)])}),n.promise;default:throw Error("unhandled request type: "+JSON.stringify(e))}},[R]),onConnStateChange:C}).handleRPC,t=e.onConnStateChange,r=(0,N._P)({controlName:"octopus-smokescreen"}),l=(i={variables:{id:(0,ec.A)()}},o=(0,m._)({},AY,i),a=w.I(AS,o)).loading,c=a.data,u=(0,J.A)(function(){if(l)return!1;var e=null==c?void 0:c.repl;return(null==e?void 0:e.__typename)==="Repl"&&e.publishedAs===c9.Q_w.Template},[l,c]),d=(s=(0,oM.A)()).container,h=s.fs,y=(v=(0,p._)((0,g.useState)(!1),2))[0],b=v[1],Y=(x=(0,vT.A)({container:d,service:"exec",skip:!y})).channel,S=x.isConnecting,(0,g.useEffect)(function(){function e(){return(e=(0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return[4,h.stat(Ak)];case 1:return b(e.sent().exists),[2]}})})).apply(this,arguments)}!r||u||l||function(){e.apply(this,arguments)}()},[h,r,u,l,b]),(0,g.useEffect)(function(){if(!S){if(!Y)throw Error("exec channel is not open");var e=(0,Ab.A)();e.promise.then((0,tw._)(function(){var e;return(0,tb.YH)(this,function(n){switch(n.label){case 0:return[4,Y.request({input:JSON.stringify({type:"start"})+"\n"})];case 1:if(!(e=n.sent()).ok)throw Error((e.error,": "+e.error));return[2]}})}));var r=Y.onCommand(function(r){switch(r.body){case"state":r.state===AA.api.State.Running?(t("starting"),e.resolve()):t("none");return;case"output":var i,o,a=r.output;if(!a)return;try{o=JSON.parse(a)}catch(e){throw Error("failed to parse dynamic template output: ".concat(e))}null==(i=n(o))||i.then(function(e){return Y.send({input:JSON.stringify(e)+"\n"})});return;case"stderr":A_.warn("got dynamic template generator stderr:",r.stderr);return;case"error":A_.error("got dynamic template generator error:",r.error);return;case"ok":return;default:throw Error("unhandled exec channel body: ".concat(r.body))}});return Y.send({exec:{args:["sh",Ak],lifecycle:AA.api.Exec.Lifecycle.STDIN}}),function(){r()}}},[Y,n,S,t,y]);var U=D.map(function(e){switch(e.type){case"progress":return(0,f.Y)(AR,(0,m._)({},e));case"failed":return(0,f.Y)(AU,(0,m._)({},e));case"query":return(0,f.Y)(AF,(0,m._)({},e));case"prompt":return(0,f.Y)(AP,(0,m._)({},e));case"confirm":return(0,f.Y)(AO,(0,m._)({},e))}});return(0,f.Y)(o7.a,{isOpen:_,onRequestClose:function(){return k(!1)},children:(0,f.Y)(i4.S,{gap:8,children:U})})}function AR(e){var n=e.progress,t=(0,uK._)(e,["progress"]);return(0,f.FD)(i4.S,(0,td._)((0,m._)({},t),{children:["progress: ",n]}))}function AU(e){var n=e.error,t=(0,uK._)(e,["error"]);return(0,f.FD)(i4.S,(0,td._)((0,m._)({},t),{children:["error: ",n]}))}function AF(e){var n=e.query,t=e.options,r=e.respond,i=(0,uK._)(e,["query","options","respond"]),o=(0,p._)((0,g.useState)(null),2),a=o[0],l=o[1],c=(0,p._)((0,g.useState)(!1),2),u=c[0],s=c[1],d=(0,w7.c)(),h=(0,g.useCallback)(function(){null!==a&&(s(!0),r.resolve({type:"answer",answer:t[a]}))},[a,t,r]);return(0,f.FD)(i4.S,(0,td._)((0,m._)({},i),{children:["query: ",n,t.map(function(e,t){return(0,f.FD)("label",{children:[(0,f.Y)("input",{type:"radio",name:n,value:t,checked:a===t,onChange:function(){u||l(t)}}),e]},d(t))}),(0,f.Y)(al.$n,{text:"submit",onClick:h})]}))}function AP(e){var n=e.prompt,t=e.respond,r=(0,uK._)(e,["prompt","respond"]),i=(0,p._)((0,g.useState)(""),2),o=i[0],a=i[1],l=(0,p._)((0,g.useState)(!1),2),c=l[0],u=l[1],s=(0,g.useCallback)(function(){u(!0),t.resolve({type:"answer",answer:o})},[o,t]);return(0,f.FD)(i4.S,(0,td._)((0,m._)({},r),{children:["prompt: ",n,(0,f.Y)(wk.pd,{disabled:c,inputMode:"text",title:n,onChange:function(e){return a(e.currentTarget.value)}}),(0,f.Y)(al.$n,{text:"submit",onClick:s})]}))}function AO(e){var n=e.confirm,t=e.dataConfirmation,r=e.respond,i=(0,uK._)(e,["confirm","dataConfirmation","respond"]),o=Object.keys(t),a=Object.values(t);return(0,f.FD)(i4.S,(0,td._)((0,m._)({},i),{children:["confirm: ",n,(0,f.FD)(AC.A,{"aria-label":"the data to be used to generate your App",children:[(0,f.Y)(AD.A,{children:o.map(function(e){return(0,f.Y)(Aw.VP,{isRowHeader:!0,children:e},e)})}),(0,f.Y)(AI.A,{children:(0,f.Y)(Aw.fI,{children:a.map(function(e,n){return(0,f.Y)(Aw.fh,{children:e},o[n])})})})]}),(0,f.Y)(al.$n,{text:"yes",onClick:function(){return r.resolve({type:"answer",answer:"yes"})}}),(0,f.Y)(al.$n,{text:"no",onClick:function(){return r.resolve({type:"answer",answer:"no"})}})]}))}var AT=t(66682),AL=t(20341);let AM=function(e){return(0,f.Y)(o7.a,{preventClose:!0,isOpen:!0,onRequestClose:e.onCancel,children:(0,f.FD)(i4.S,{gap:24,children:[(0,f.Y)(ac.Y9,{variant:"headerDefault",level:2,css:i2.wp.maxWidth("100%"),children:"Replit needs your permission to enable notifications."}),(0,f.Y)(ac.EY,{children:"Never miss messages from your collaborators if youre in another tab or window."}),(0,f.FD)(i4.S,{row:!0,gap:12,justify:"end",children:[(0,f.Y)(al.$n,{onClick:e.onCancel,text:"Deny",iconLeft:(0,f.Y)(uJ.A,{})}),(0,f.Y)(al.$n,{text:"Allow notifications",colorway:"positive",iconLeft:(0,f.Y)(pj.A,{}),onClick:e.onConfirm})]})]})})};var AG=t(40036),AN=t(51207),AB=t(9453),AH=(0,rb.v)(["transform","width","height","opacity"]),Az=AH.cssVars,AW=AH.styleTokens,Aj=(0,l7.i7)({from:{borderColor:ry.LU.blurpleDimmest},to:{borderColor:ry.LU.blurpleDefault}}),A$=(0,rw.x)({root:[i2.wp.borderRadius(),i2.wp.border({color:ry.LU.blurpleDimmest}),{position:"absolute",top:0,left:0,transform:AW.transform,width:AW.width,height:AW.height,opacity:AW.opacity,zIndex:rv.W.overlay,transition:"opacity 0.2s",animation:"".concat(Aj," 800ms alternate infinite"),pointerEvents:"none"}]});function AZ(){var e=(0,g.useRef)(null);return(0,rm.d)(e,ra(nX),function(e){var n,t,r,i,o;return o={},(0,tg._)(o,Az.transform,"translate(".concat(null!=(n=null==e?void 0:e.x)?n:0,"px, ").concat(null!=(t=null==e?void 0:e.y)?t:0,"px)")),(0,tg._)(o,Az.width,"".concat(null!=(r=null==e?void 0:e.width)?r:0,"px")),(0,tg._)(o,Az.height,"".concat(null!=(i=null==e?void 0:e.height)?i:0,"px")),(0,tg._)(o,Az.opacity,(null==e?void 0:e.show)?"1":"0"),o}),(0,f.Y)(i4.S,{innerRef:e,css:A$.root})}var Aq=t(87265);function AV(){var e=(0,v._)(["\n  query ReplEnvironmentDesktopSidebarUpgradeCta {\n    currentUser {\n      id\n      ...UserPlanStateCurrentUser\n    }\n  }\n  ","\n"]);return AV=function(){return e},e}var AK={},AJ=(0,y.J1)(AV(),Aq.o),AQ=t(83603),AX=t(32620),A0=t(96590);function A1(e){var n,t,r,i=e.iconButton,o=(n=(0,m._)({},AK,void 0),w.I(AJ,n)),a=o.data,l=o.loading,c=(0,AQ.ET)().orgId;if(l||!(null==a?void 0:a.currentUser))return null;var u=(0,A0.q)({user:a.currentUser}),s=u.plan,d=u.showUpgradeCta;if(void 0!==c||!d)return null;function p(){window.location.reload()}if(s.name!==pc.en)return(0,f.Y)(i4.S,{dataCy:"workspace-sidebar-upgrade-cta",children:(0,f.Y)(pu.A,{onPlanCheckoutComplete:p,size:"small",context:"workspace_sidebar",variant:"default",colorway:"primary",iconButton:i,stretch:!0})});if(null==(t=s.trial)?void 0:t.cancelsAt){var h=new Date;if(h.setMonth(h.getMonth()+1),new Date(s.trial.cancelsAt)>h)return null}var g=(null==(r=s.trial)?void 0:r.cancelsAt)?"Trial ends ".concat((0,AX.g)(s.trial.cancelsAt)):void 0;return(0,f.Y)(pu.A,{onPlanCheckoutComplete:p,variant:"default",context:"workspace_sidebar",text:g,iconButton:i,stretch:!0})}var A2={38:20,36:16,32:16,20:14},A4=(0,rb.v)(["toolIconButtonSize","toolIconBorderRadius"]),A5=A4.cssVars,A7=A4.styleTokens,A3=[i2.wp.position.relative,i2.wp.center,{borderRadius:A7.toolIconBorderRadius}],A6=(0,eE._)(A3).concat([i2.wp.reset.button,{width:A7.toolIconButtonSize,height:A7.toolIconButtonSize,borderRadius:A7.toolIconBorderRadius}]),A8=(0,rw.x)({static:A3,buttonFilled:[i2.wp.display.inlineFlex,{button:(0,eE._)(A6).concat([pS.b.filled])}],button:[i2.wp.display.inlineFlex,{button:(0,eE._)(A6).concat([pS.b.nofill])}]});function A9(e){var n=e.indicator,t=e.children,r=e.size;return(0,f.FD)(f.FK,{children:[(0,g.cloneElement)(t,{size:A2[void 0===r?38:r]}),n?(0,f.Y)(yu.b,{color:n}):null]})}function _e(e){var n=e.indicator,t=e.children,r=e.className,i=e.size,o=void 0===i?38:i,a=e.backgroundColor;return(0,f.Y)(o3.ui,{elevated:!0,className:r,css:A8.static,style:(0,tg._)({width:o,height:o,backgroundColor:a},A5.toolIconBorderRadius,20===o?"4px":"8px"),children:(0,f.Y)(A9,{indicator:n,size:o,children:t})})}var _n=(0,g.forwardRef)(function(e,n){var t,r=e.children,i=e.alt,o=e.size,a=void 0===o?38:o,l=e.filled,c=e.indicator,u=e.backgroundColor,s=e.tooltipContents,d=(0,uK._)(e,["children","alt","size","filled","indicator","backgroundColor","tooltipContents"]);return(0,f.Y)(i4.S,{css:void 0===l||l?A8.buttonFilled:A8.button,style:(t={},(0,tg._)(t,A5.toolIconButtonSize,a+"px"),(0,tg._)(t,A5.toolIconBorderRadius,20===a?"4px":"8px"),t),children:(0,f.Y)(cf.K0,(0,td._)((0,m._)({},d),{alt:i,ref:n,style:{backgroundColor:u},isTooltipOpen:d.isTooltipOpen,tooltipContents:(0,f.Y)(i4.S,{grow:!0,shrink:!0,children:null!=s?s:i}),children:(0,f.Y)(A9,{indicator:c,size:a,children:r})}))})}),_t=t(58219),_r={searchReplace:uM.searchFileContents,shell:uM.showShell,runnerOutput:uM.showConsole,docs:uM.showDocs,ghostwriterChat:uM.showReplitAi,preferences:uM.showSettings,git:uM.showGit},_i=(d={},(0,tg._)(d,nr.bY.CloudServices,"Replit-native and third-party services which your App can interact with"),(0,tg._)(d,nr.bY.WorkspaceFeatures,"Everything you need to write, run, debug, and maintain your code"),(0,tg._)(d,nr.bY.Collaboration,"Communication tools for working with collaborators"),(0,tg._)(d,nr.bY.WorkspaceExtensions,"Make your workspace more powerful with new tools, commands, and integrations"),d),_o=(0,rw.x)({tooltipTitle:[i2.wp.flex.growAndShrink(1)]});function _a(e){var n=e.title,t=e.subtitle,r=e.description,i=e.icon,o=e.titleInfoIcon;return(0,f.FD)(i4.S,{grow:!0,shrink:!0,p:2,gap:4,children:[(0,f.FD)(i4.S,{row:!0,gap:4,align:"center",children:[(0,f.Y)(_e,{size:20,children:i}),(0,f.Y)(ac.EY,{css:_o.tooltipTitle,children:n}),o]}),t?(0,f.Y)(ac.EY,{children:(0,f.Y)("strong",{children:t})}):null,r]})}function _l(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).onDragStart,t=rl(og),r=(0,p._)((0,yl.i)({type:vL.N.NewPane,item:function(){return{type:vL.N.NewPane,pane:e,grid:!0}},end:function(){t()},collect:function(e){return{isDragging:e.isDragging()}}}),3),i=r[0],o=r[1],a=r[2],l=i.isDragging;return(0,g.useEffect)(function(){l&&(null==n||n())},[l,n]),{dragRef:o,dragPreview:a}}function _c(e){var n,t=e.panes,r=e.dismissPopover,i=(n=(0,nr.Vv)(),(0,g.useMemo)(function(){return function(e,n){var t=(a={},(0,tg._)(a,nr.bY.CloudServices,[]),(0,tg._)(a,nr.bY.Collaboration,[]),(0,tg._)(a,nr.bY.WorkspaceFeatures,[]),(0,tg._)(a,nr.bY.WorkspaceExtensions,[]),(0,tg._)(a,nr.bY.Other,[]),a),r=!0,i=!1,o=void 0;try{for(var a,l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,s=n.getCategory(u);["extensionStore","extensionDevtools","integrations"].includes(u.type)?t[s].unshift(u):t[s].push(u)}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t}(t,n)},[t,n])),o=(0,nr.Vv)(),a=oh(),l=(0,g.useMemo)(function(){var e,n,t,l,c,u;return n=(e={categorizedPanes:i,ui:o,openPane:function(e){r(),a({pane:e,activate:!0})},dismissPopover:r}).categorizedPanes,t=e.ui,l=e.openPane,c=e.dismissPopover,u=Object.entries(n).map(function(e){var n=(0,p._)(e,2),r=n[0],i=n[1];return{data:{type:"context",label:r,icon:(0,f.Y)(oT.A,{}),tooltip:_i[r]},commands:function(){return i.map(function(e){var n,r,i,o,a;return{match:(r=(n={pane:e,aliases:oz.f.get(e.type),dismissPopover:c}).pane,o=void 0===(i=n.aliases)?[]:i,a=n.dismissPopover,function(e){var n=e.searchQuery,t=e.data,i=e.active;if("group"===t.type)return null;if(!n)return{score:1,render:{content:(0,f.Y)(_u,{pane:r,dismissPopover:a,toolItemProps:{pane:r,active:i}})}};var l=(0,_t.w2)(n,t.label,{filterLowMatchScores:!0});if(null!=l)return{score:null!=(d=null==l?void 0:l.score)?d:0,render:{content:(0,f.Y)(_u,{pane:r,dismissPopover:a,toolItemProps:{pane:r,labelHighlights:null!=(p=null==l?void 0:l.ranges)?p:[],active:i}})}};var c=!0,u=!1,s=void 0;try{for(var d,p,h,g=o[Symbol.iterator]();!(c=(h=g.next()).done);c=!0){var m=h.value,v="string"==typeof m?{alias:m,prefix:void 0}:m,y=v.alias,w=v.prefix,b=(0,_t.w2)(n,y,{filterLowMatchScores:!0});if(b)return{score:b.score,render:{content:(0,f.Y)(_u,{pane:r,dismissPopover:a,toolItemProps:{active:i,alias:y,aliasPrefix:w,pane:r}})}}}}catch(e){u=!0,s=e}finally{try{c||null==g.return||g.return()}finally{if(u)throw s}}return null}),data:{key:"extension"===e.type?"extension-".concat(e.data.installationId):e.type,type:"action",label:t.getTitle(e),icon:t.Icon({pane:e}),run:function(){return l(e)}}}})}}}),{data:{type:"context",label:"Search actions",description:"Search tools",icon:(0,f.Y)(oT.A,{})},commands:function(){return u}}},[i,o,r,a]),c=(0,g.useRef)(null);return(0,g.useEffect)(function(){c.current&&c.current()},[c]),(0,f.Y)(o6.r,{focusRef:c,command:l})}function _u(e){var n=e.pane,t=e.dismissPopover,r=e.toolItemProps,i=_l(n,{onDragStart:t}).dragRef,o=(0,nr.qo)(n,{short:!0}),a=(0,nr.Vv)(),l=a.Icon({pane:n}),c=a.getTitle(n),u=_r[n.type];return(0,f.Y)(l3.m_,{tooltip:o?(0,f.Y)(_a,{description:o,title:c,icon:l}):null,placement:"right-start",isDisabled:!o,maxWidth:300,children:function(e,n){return(0,f.Y)(i4.S,(0,td._)((0,m._)({innerRef:n},e),{style:{height:"100%"},children:(0,f.Y)(i4.S,{style:{height:"100%"},innerRef:i,justify:"center",children:(0,f.Y)(oH.k,(0,td._)((0,m._)({},r),{shortcutCommand:u}))})}))}})}var _s=t(68188),_d=t.n(_s);function _p(){var e=(0,p._)((0,g.useState)(!1),2),n=e[0],t=e[1],r=(0,g.useCallback)(function(){return t(!1)},[]);return(0,f.FD)(dG.Wv,{isOpen:n,onOpenChange:t,label:"All tools",placement:"right",children:[(0,f.Y)(_n,{filled:!1,alt:"All tools",onClick:function(){return t(!0)},tooltipPlacement:"right-end",size:32,children:(0,f.Y)(u5.A,{})}),(0,f.Y)(_f,{dismissPopover:r})]})}function _f(e){var n=e.dismissPopover,t=(0,o$.Tb)();return(0,f.Y)(i4.S,{clsx:_d().toolsListPopover,children:(0,f.Y)(_c,{panes:t,dismissPopover:n})})}function _h(e){var n=e.isInLayout,t=(0,uK._)(e,["isInLayout"]),r=(0,ef.J2)((0,Sx.S)()),i=(0,ef.J2)((0,Ag.e)()),o=(0,p._)((0,g.useState)(!1),2),a=o[0],l=o[1];(0,g.useEffect)(function(){if(!i||r||n)return void l(!1);var e=setTimeout(function(){return l(!a)},a?1e3:5e3);return function(){clearTimeout(e)}},[a,i,r,n]);var c=!n&&r||a;return(0,f.Y)(yP.l,(0,m._)({loading:c},t))}var _g=(0,rw.x)({dockItem:[i2.wp.position.relative,i2.wp.width(36)],inLayoutIndicator:[i2.wp.position.absolute,i2.wp.top("50%"),i2.wp.left(4),i2.wp.width(3),i2.wp.height(3),i2.wp.borderRadius("full"),i2.wp.shadow(1),{transform:"translate(0, -50%)",backgroundColor:ry.LU.foregroundDimmest,pointerEvents:"none"}]});function _m(e){var n,t,r,i,o,a,l=e.pane,c=(t=(n=(0,nr.Vv)()).Icon({pane:l}),r=n.getTitle(l),i=(0,nr.qo)(l),o=(0,rn.F9)({paneType:l.type}),a=oh(),{icon:t,title:r,description:i,indicator:o,onClick:function(){a({pane:l,commit:!0,reveal:!0})}}),u=c.title,s=c.description,d=c.indicator,p=c.onClick,h=c.icon,g=ob(l.type),m=_l(l).dragRef,v=s?(0,f.Y)(_a,{title:u,icon:h,description:(0,f.Y)(ac.EY,{multiline:!0,children:s})}):null,y=(0,pT.Jw)(h2,hZ.Assistant),w=(0,pT.Jw)(h2,hZ.Agent);return(0,f.FD)(i4.S,{css:_g.dockItem,innerRef:(0,nr.GN)(l)?w:(0,nr.N5)(l)?y:void 0,children:[(0,f.Y)(_n,{ref:m,filled:!1,alt:u,indicator:d,size:36,onClick:p,tooltipContents:v,tooltipPlacement:"right-start",children:"agentChat"===l.type?(0,f.Y)(_h,{isInLayout:g}):h}),g?(0,f.Y)(i4.S,{css:_g.inLayoutIndicator}):null]})}function _v(e){return(0,f.FD)(i5.Ay,(0,td._)((0,m._)({},e),{children:[(0,f.Y)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.126.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v2.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h5a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,f.Y)("path",{fillRule:"evenodd",d:"M12.472 17.646a.854.854 0 0 0 0 1.208l3.696 3.696a.854.854 0 0 0 1.208-1.209l-3.092-3.091 3.092-3.091a.855.855 0 0 0-1.208-1.209l-3.696 3.696Z",clipRule:"evenodd"}),(0,f.Y)("path",{fillRule:"evenodd",d:"m17.646 18.854 3.695 3.696a.854.854 0 0 0 1.209-1.209l-3.092-3.091 3.092-3.091a.854.854 0 1 0-1.209-1.209l-3.695 3.696a.854.854 0 0 0 0 1.208Z",clipRule:"evenodd"})]}))}function _y(e){return(0,f.FD)(i5.Ay,(0,td._)((0,m._)({},e),{children:[(0,f.Y)("path",{fillRule:"evenodd",d:"M1.25 5A2.75 2.75 0 0 1 4 2.25h4.999c.251 0 .485.126.625.334L11.4 5.25H20A2.75 2.75 0 0 1 22.75 8v4.5a.75.75 0 0 1-1.5 0V8c0-.69-.56-1.25-1.25-1.25h-9a.751.751 0 0 1-.625-.335L8.598 3.75H4c-.69 0-1.25.56-1.25 1.25v14c0 .69.56 1.25 1.25 1.25h4a.75.75 0 0 1 0 1.5H4A2.75 2.75 0 0 1 1.25 19V5Z",clipRule:"evenodd"}),(0,f.Y)("path",{fillRule:"evenodd",d:"M22.55 17.646a.854.854 0 0 1 0 1.208l-3.696 3.696a.855.855 0 0 1-1.208-1.209l3.091-3.091-3.091-3.091a.855.855 0 0 1 1.208-1.209l3.696 3.696Z",clipRule:"evenodd"}),(0,f.Y)("path",{fillRule:"evenodd",d:"M17.376 18.854 13.68 22.55a.854.854 0 0 1-1.208-1.209l3.092-3.091-3.092-3.091a.855.855 0 0 1 1.208-1.209l3.696 3.696a.854.854 0 0 1 0 1.208Z",clipRule:"evenodd"})]}))}var _w=(0,rw.x)({files:{transitionProperty:"opacity",transitionDuration:sm.Ds.duration,transitionTimingFunction:sm.Ds.timingFunction,"&& button":[i2.wp.border({color:ry.LU.outlineDimmest}),{backgroundColor:co.s}]}});function _b(){var e=oA(),n=(0,u4.A)(e.isOpen),t=(0,o0.Jn)(c1.id),r=e.toggle;return(0,o0.SJ)(function(){return[c1.id,function(){return r()}]},[r]),(0,f.Y)(_x,{onClick:function(){return e.toggle(!n)},shortcut:t,isOpen:n})}function _x(e){var n=e.isOpen,t=e.shortcut,r=e.onClick,i=(n?"Close":"Open")+" files",o=t?(0,f.Y)(_Y,{shortcut:t,text:i}):i;return(0,f.Y)(i4.S,{css:_w.files,children:(0,f.Y)(_n,{dataCy:"toggle-files-sidebar",filled:!1,alt:i,tooltipContents:o,onClick:r,tooltipPlacement:"right",size:32,children:n?(0,f.Y)(_v,{}):(0,f.Y)(_y,{})})})}function _Y(e){return(0,f.FD)(i4.S,{row:!0,gap:8,align:"center",children:[(0,f.Y)(ac.EY,{multiline:!1,variant:"small",children:e.text}),(0,f.Y)(o0._y,{fontSize:10,keyCombo:e.shortcut})]})}var _S=t(70308),_A=t.n(_S);function __(e){var n,t,r,i=(n=(0,g.useRef)(null),t=(0,g.useRef)(null),r=(0,g.useRef)(null),(0,g.useEffect)(function(){var e=n.current;if(e){var i=!1,o=null,a=null,l=function(){if(n.current){var e=n.current,i=e.scrollTop,l=e.scrollHeight,c=e.clientHeight,u=i<=0,s=1>=Math.abs(l-c-i);u!==o&&t.current&&(t.current.style.setProperty("opacity",u?"0":"1"),o=u),s!==a&&r.current&&(r.current.style.setProperty("opacity",s?"0":"1"),a=s)}},c=function(){i||(i=!0,requestAnimationFrame(function(){i=!1,l()}))};return c(),e.addEventListener("scroll",c),function(){e.removeEventListener("scroll",c)}}},[]),{scrollRef:n,topRef:t,bottomRef:r}),o=i.scrollRef,a=i.topRef,l=i.bottomRef;return(0,f.FD)(i4.S,{style:{width:e.width},innerRef:e.innerRef,clsx:_A().root,align:"stretch",justify:"space-between",gap:6,children:[(0,f.Y)(i4.S,{align:"center",children:e.filesButton}),(0,f.FD)(i4.S,{clsx:_A().middle,align:"center",children:[(0,f.Y)(i4.S,{clsx:_A().primaryTools,children:e.primaryTools}),(0,f.Y)(i4.S,{clsx:_A().divider}),(0,f.FD)(i4.S,{clsx:_A().secondarySection,align:"stretch",children:[(0,f.FD)(i4.S,{clsx:_A().secondaryTools,align:"center",children:[(0,f.Y)(i4.S,{clsx:[_A().fade,_A().fadeTop],innerRef:a}),(0,f.Y)(i4.S,{clsx:_A().secondaryToolsScroll,innerRef:o,children:e.secondaryTools}),(0,f.Y)(i4.S,{clsx:[_A().fade,_A().fadeBottom],innerRef:l,align:"center",justify:"end"})]}),(0,f.Y)(i4.S,{align:"center",children:e.allToolsButton})]})]}),(0,f.Y)(i4.S,{align:"center",children:e.footer})]})}var _k=t(35865);function _C(e){return(0,f.FD)(dG.Wv,{placement:"right",label:"Tool added",isOpen:e.isOpen,onOpenChange:function(n){!1===n&&e.dismissOnOutsideClick&&e.dismiss()},children:[function(n){var t=n.ref,r=(0,uK._)(n,["ref"]);return(0,f.Y)(i4.S,(0,td._)((0,m._)({},r),{innerRef:t,children:e.children}))},(0,f.FD)(i4.S,{gap:8,style:{padding:8},children:[e.callout,(0,f.FD)(i4.S,{row:!0,gap:4,children:[e.action,(0,f.Y)(al.$n,{colorway:"primary",text:"Got it",onClick:e.dismiss,style:{marginLeft:"auto"}})]})]})]})}var _I=t(87277);function _D(e){return"extension"===e.type?e.data.installationId:e.type}function _E(e){var n,t,r,i,o,a,l,c,u,s,d,h,m,v,y,w,b,x,Y,S,A,_,k,C,I,D,E=oS(),R=0===(0,o$.Tb)().length,U=o_((0,o$.No)()),F=(t=(n=(0,yS.Cv)("neon")).toolState,r=n.dismissCallout,i=n.showCallout,o=n.setToolState,a=rl(tu),l=(0,SL.GK)().database,c=(0,_k.ex)(),u=(0,dP.C9)().agentState,s=(0,ef.G9)((0,g.useMemo)(function(){return null==u?void 0:u.select(function(e){return null==e?void 0:e.state})},[u])),d=(0,g.useRef)(!1),h=void 0!==l,m=null==l?void 0:l.isEphemeral,(0,g.useEffect)(function(){"callout-dismissed"!==t&&h&&!d.current&&s.current===ep.g32.AGENT_STATE_RUNNING&&(d.current=!0,a({pane:{type:"neon"}}),o("was-added-by-agent"))},[t,h,a,o,s]),y=(v=l&&m&&c)?(0,f.Y)(i4.S,{children:(0,f.Y)(_k.Bt,{isFrozen:l.isFrozen,scheduledFreezeTime:l.scheduledFreezeTime,scheduledDeletionTime:l.scheduledDeletionTime})}):(0,f.FD)(ac.EY,{children:["We created a database for you,",(0,f.Y)("br",{}),"manage it here"]}),{action:v?(0,f.Y)(pu.A,{context:"workspace_ephemeral_postgres_database_banner",text:"Upgrade to Replit ".concat(pc.en),colorway:"brand",variant:"outlined",style:{flex:"1 1 auto"}}):null,callout:i?y:null,dismissCallout:r,isActive:i}),P=(b=(w=(0,yS.Cv)("replitAuth")).toolState,x=w.dismissCallout,Y=w.showCallout,S=w.setToolState,A=(0,p._)((0,yS.Ne)(),1)[0],_=o_((0,o$.No)()),k=rl(tu),I=(C=(0,p._)((0,g.useState)(!1),2))[0],D=C[1],(0,g.useEffect)(function(){if(_.secondaryTools){D(A);var e=_.secondaryTools.some(function(e){return"replitAuth"===e.type});A&&!e&&"was-added-by-agent"!==b&&"callout-dismissed"!==b&&(k({pane:{type:"replitAuth"}}),S("was-added-by-agent"))}},[A,b,k,S,_]),{callout:Y?(0,f.FD)(ac.EY,{children:["Manage users and log in settings",(0,f.Y)("br",{}),"from the Authentication pane"]}):null,dismissCallout:x,isActive:Y,showFlag:I}),O=(0,pT.Jw)(h2,hZ.SidebarDock);return!U.visible||"centered"===E||"centeredVisualPlanner"===E||R?null:(0,f.Y)(f.FK,{children:(0,f.Y)(__,{innerRef:O,width:48,filesButton:(0,f.Y)(_b,{}),primaryTools:U.primaryTools.map(function(e){return(0,f.Y)(_m,{pane:e},_D(e))}),secondaryTools:U.secondaryTools.map(function(n){var t={neon:{callout:F.callout,action:F.action,dismiss:F.dismissCallout,isActive:F.isActive},replitAuth:{callout:P.callout,dismiss:P.dismissCallout,isActive:P.isActive,showFlag:P.showFlag}}[n.type]||{};if(t){var r=t.callout,i=t.action,o=t.dismiss,a=t.isActive,l=t.showFlag;return(0,f.Y)(_C,{callout:r,action:i,dismiss:o,isOpen:(!!r||!!l)&&!e.isWorkspaceTourActive&&!1!==a,dismissOnOutsideClick:!0,children:(0,f.Y)(_m,{pane:n})},_D(n))}return(0,f.Y)(_m,{pane:n},_D(n))}),allToolsButton:(0,f.Y)(_p,{}),footer:(0,f.FD)(i4.S,{gap:4,align:"center",children:[(0,f.Y)(A1,{iconButton:!0}),(0,f.Y)(_I.A,{})]})})})}var _R=(0,rw.x)({root:[i2.wp.position.absolute,i2.wp.borderRadius(8),i2.wp.backgroundColor.backgroundRoot,i2.wp.pt(16),i2.wp.align.center,{border:"1px solid",borderColor:ry.LU.outlineDimmest}],content:[i2.wp.width("100%"),i2.wp.flex.growAndShrink(1)]});function _U(){var e=ro(rL),n=ro(np),t=rl(tH),r=function(){var e,n=(0,p._)((0,vY.H)({accept:[tZ.pt.File,vL.N.NewPane],collect:function(e){return{isOver:e.isOver()}},hover:function(e){i.drag()},drop:function(e){if("nodes"===e.type){var n=(0,nr.u9)(e.nodes);n.length>0&&i.drop({panes:n})}if(e.type===vL.N.NewPane){var t=e.pane;i.drop({panes:[t]})}}}),2),t=n[0].isOver,r=n[1],i=(e=rl(rx),(0,g.useEffect)(function(){t||e(null)},[t,e]),{drag:rl(rO),drop:rl(rT)});return r}(),i=oX({openPane:(0,g.useCallback)(function(e){(0,oE.u4)(oE.AZ.TOOL_OPENED,{source:"Empty Layout",tool:e.pane.type}),t({pane:e.pane,edge:"left"})},[t])});return(0,f.Y)(i4.S,{style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)"),zIndex:n?100:void 0},css:_R.root,innerRef:r,children:(0,f.Y)(i4.S,{css:_R.content,children:(0,f.Y)(o6.r,{autoFocus:!0,command:i,showToolDescriptions:!0})})})}var _F=eh.ZU.Number({minimum:0,exclusiveMaximum:100}),_P=eh.ZU.Object({layout:eS,isActive:eh.ZU.Boolean(),sidebarPercent:eh.ZU.Optional(_F)}),_O=eh.ZU.Object({sidebarPercent:eh.ZU.Optional(_F),sidebar:eh.ZU.Optional(n4),layout:eS,agentMode:eh.ZU.Optional(_P),data:eh.ZU.Record(eh.ZU.String(),eh.ZU.Object({type:eh.ZU.String()})),dock:eh.ZU.Optional(ti)});function _T(e,n,t){var r=null;try{r=yR.T(_O,e)}catch(e){}if(null===r)return null;var i={layout:r.layout,agentMode:r.agentMode,data:{},type:"saved",sidebarPercent:null!=(d=r.sidebarPercent)?d:15,sidebar:null!=(f=r.sidebar)?f:{width:180,isOpen:!1},dock:r.dock?function(e,n,t){var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=e.secondaryTools[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value,s=n(u.type,u);s&&r.push(s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(t.isAgentChatEnabled){var d="webview";r.some(function(e){return e.type===d})||r.unshift({type:d})}if(r.length)return{visible:e.visible,primaryTools:[{type:"agentChat"},{type:"ghostwriterChat"}],secondaryTools:r}}(r.dock,n,t):void 0},o=new Set,a=eK(i.layout),l=i.agentMode?eK(i.agentMode.layout):null,c=!0,u=!1,s=void 0;try{for(var d,f,h,g=Object.entries(r.data)[Symbol.iterator]();!(c=(h=g.next()).done);c=!0){var m=(0,p._)(h.value,2),v=m[0],y=m[1];if(a.has(v)||null!==l&&l.has(v)){var w=n(y.type,y);if(!w){o.add(v);continue}i.data[v]=w}}}catch(e){u=!0,s=e}finally{try{c||null==g.return||g.return()}finally{if(u)throw s}}return(0,eJ.jM)(i,function(e){var n=function(n){if(a.has(n))return void ej(e.layout,n);e.agentMode&&(null==l?void 0:l.has(n))&&ej(e.agentMode.layout,n)},t=!0,r=!1,i=void 0;try{for(var c,u=o[Symbol.iterator]();!(t=(c=u.next()).done);t=!0){var s=c.value;n(s)}}catch(e){r=!0,i=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}var d=!0,f=!1,h=void 0;try{for(var g,m=Object.entries(e.data)[Symbol.iterator]();!(d=(g=m.next()).done);d=!0){var v=(0,p._)(g.value,2),y=v[0],w=v[1];"commands"!==w.type&&("codeEditor"!==w.type||w.data.path)&&"agentProgress"!==w.type||(delete e.data[y],n(y))}}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}})}var _L=t(37311),_M=t(84037),_G=t(96207),_N=t.n(_G);function _B(e){var n,t,r,i,o,a,l,c,u,s,d,v,y,w=e.repl,b=e.currentUser,x=(0,h.useRouter)(),Y=(0,X.pE)("enterInAgentMode","boolean"),S=(0,X.pE)("agent","boolean"),A=(0,X.pE)("agentOnboarding","boolean"),_=(0,X.pE)("popupId","string"),k=(0,Q.Po)(x),C=(0,Q.ME)(x,"workspace2"),I=(0,p._)((0,g.useState)(function(){var e;return(0,nr.HJ)({config:(e=(0,Y8.P)(),(0,td._)((0,m._)({},e),{webview:Y3,commands:wO,docs:wH,chat:wF,threadInbox:YN,tutorial:YK,extension:wV,extensionStore:x_,replAuth:xF,searchReplace:YT,deployments:Se.B,config:wG,preferences:xD,integrations:Sn.u,extensionDevtools:xw,csvPreview:Y9.J,agentChat:yT,agentProgress:St.M,multiplayer:St.M}))})}),1)[0],D=(0,K.g)("isLayoutStacked").preferences,E=null,R=(0,X.pE)("gitImport","boolean"),U=!!w.config.isAgentRepl,F=Y||U;_?E=_T(!(s=nu.A.get(ng(_)))||"string"==typeof s&&parseInt(s,10)<Date.now()?null:nu.A.get(nh(_)),I.decode,{isAgentChatEnabled:F}):w.layoutState?E=_T(w.layoutState,I.decode,{isAgentChatEnabled:F}):R&&(E={sidebarPercent:0,type:"default",data:Object.values(d={config:{paneId:(0,tm.A)(),pane:{type:"config",flow:"githubImport"}},codeEditor:{paneId:(0,tm.A)(),pane:{type:"codeEditor",data:{path:""}}},output:{paneId:(0,tm.A)(),pane:{type:"runnerOutput"}},shell:{paneId:(0,tm.A)(),pane:{type:"shell"}}}).reduce(function(e,n){var t=n.pane;return e[n.paneId]=t,e},{}),layout:{floating:[],tiling:{type:"split",percent:100,stacked:!1,children:[{id:(0,tm.A)(),type:"paneGroup",percent:40,activeIndex:0,panes:[d.config.paneId]},{type:"split",percent:60,stacked:!0,children:[{id:(0,tm.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[d.codeEditor.paneId]},{id:(0,tm.A)(),type:"paneGroup",percent:50,activeIndex:0,panes:[d.output.paneId,d.shell.paneId]}]}]}}});var P=S||A||(null==E?void 0:E.agentMode)==null&&U,O=(r=(n={repl:w,currentUser:b,isAgentChatEnabled:F,enteredWithAgentPrompt:Y,isAgentOnboarding:A}).repl,i=n.currentUser,a=void 0!==(o=n.isAgentChatEnabled)&&o,l=n.enteredWithAgentPrompt,u=void 0!==(c=n.isAgentOnboarding)&&c,r&&i&&null==r.lesson&&!r.config.isInPlanningPhase?void 0!==l&&l||u||i.hasSeenWorkspaceTour2024?a||u?null:!i.hasSeenProjectsTour2024&&(null==(t=r.project)?void 0:t.id)?pO.X:null:{id:h2,steps:[a?hK:hJ,hQ,hX,h0,h1].filter(Boolean)}:null),T=(v=(0,X.pE)("deploymentPane","boolean"),y=(0,X.pE)("projectPane","boolean"),(0,J.A)(function(){return v?{type:"deployments"}:y?{type:"project"}:void 0},[v,y])),L=(Y||!!w.config.isInPlanningPhase)&&!w.config.figmaUrl;return(0,f.FD)(ee.Ve,{currentUsername:b.username,replId:w.id,children:[(0,f.Y)(rn.CP,{isAgentOnboarding:A,children:(0,f.Y)(rr,{initialPane:T,savedLayoutState:E,isStacked:D.isLayoutStacked,isExtension:!!w.config.isExtension,isBlankRepl:q(w),popupId:_,agentCenteredLayout:L,agentDefaultSplitLayout:P,children:(0,f.Y)(Ac,{tour:O,userId:b.id,children:(0,f.Y)(_H,{ui:I,repl:w,currentUser:b,isBonsaiWebview:k,doesBonsaiSupportWorkspace2:C,agentChatEnabled:F,activeWorkspaceTour:O},w.id)})})}),(0,f.Y)(en.A,{})]})}function _H(e){var n,t,r,i,o,a,l,c,u,s,d,h,m,v,y,w,b,x,Y,S=e.repl,A=e.currentUser,_=e.isBonsaiWebview,k=e.doesBonsaiSupportWorkspace2,C=e.ui,I=e.agentChatEnabled,D=e.activeWorkspaceTour,E=(n=ov(),t=rl(ih),r=rl(ig),i=(0,SI.iO)(),o=(0,N._P)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1}),a="html"===S.language?"html":"outputs",c=(l=(0,p._)((0,g.useState)(!1),2))[0],u=l[1],d=(s=(0,p._)((0,g.useState)(!1),2))[0],h=s[1],m=(0,mY.q6)(),v=(0,mY.DJ)(),y=(0,N._P)({controlName:"flag-open-telemetry-tracing"}),w=(0,N._P)({controlName:"flag-multi-lsp-connections"}),b=(0,J.A)(function(){return{runnerMode:a,onPresenceCommand:m,getColorForUser:v,onUnrecoverableError:(0,Ad.A)({origin:"replEnvironmentDesktop: services/unrecoverableError",tags:{environment:"desktop"},onNonBsodUnrecoverableError:function(e){e===V.ub.NotAllowed?u(!0):e===V.ub.RequiresRefresh&&h(!0)},throwBsod:i}),openFile:n,openMultipleFiles:t,openMultipleURLs:r,enableUserEvents:o,enableMultipleLSPClientsPerFile:w,openTelemetryTracing:y,enableReplspaceSshTokenPassthrough:!0}},[o,a,n,t,r,i,m,v,y,w]),x=(0,Au.q)(b),(0,J.A)(function(){return{services:x,isPleaseRefresh:d,isNotAllowed:c}},[x,d,c])),R=E.services,U=E.isPleaseRefresh,F=E.isNotAllowed,P=(0,rn.eg)();(0,AB.X$)(!!S.layoutState);var O=(0,J.A)(function(){return(0,sF.Y)(null==A?void 0:A.keybindings.keybindings)},[A]);if(!R)return null;var T=S.authorizations.useAdvancedChat.isAuthorized;return(0,f.Y)(Z.KH,{replId:S.id,currentUser:A,hasAccessToAdvancedModel:T,agentChatEnabled:I,orgId:null==(Y=S.org)?void 0:Y.id,children:(0,f.Y)(cc.SF,{children:(0,f.FD)(sG,{services:R,ui:C,repl:S,userKeybindings:O,children:[(0,f.FD)(vM.A,{origin:"ErrorBoundary: ReplEnvironmentDesktop Top level",bsod:!0,children:[(0,f.Y)(sg,{}),(0,f.Y)(uN,{isAdmin:A.isAdmin,isSubscribed:A.isSubscribed}),(0,f.Y)(AG.A,{repl:S}),_?(0,f.Y)(vu,{doesBonsaiSupportWorkspace2:k,isAgentOnboarding:P}):(0,f.Y)(vn,{isAgentOnboarding:P}),_&&!k?(0,f.Y)(sZ,{}):null,(0,f.Y)(an,{}),(0,f.Y)(sH,{repl:S}),(0,f.Y)(Aa,{repl:S,currentUser:A}),(0,f.Y)(dr,{}),(0,f.Y)(de,{}),(0,f.Y)(_j,{isBonsaiWebview:_&&!k,isWorkspaceTourActive:!!D}),(0,f.Y)(lJ,{}),(0,f.Y)(l$,{}),(0,f.Y)(Av.A,{}),(0,f.Y)(AE,{}),(0,f.Y)(_W,{isMultiplayerSession:S.multiplayers.length>0}),(0,f.Y)(AT.A,{isOpen:F}),(0,f.Y)(AL.A,{isOpen:U}),(0,f.Y)(_M.$,{}),(0,f.Y)(_L.F,{}),(0,f.Y)(lH,{}),(0,f.Y)(sz,{}),(0,f.Y)(Ay.P,{}),(0,f.Y)(AN.y,{repl:S}),(0,f.Y)(oD,{})]}),(0,f.Y)(_z,{replId:S.id})]})})})}function _z(e){var n,t=e.replId,r=(0,p._)((0,SI.eY)(),1)[0],i=(0,p._)((n=(0,m._)({},j,void 0),b.n($,n)),1)[0],o=(0,g.useCallback)(function(){i({variables:{input:{replId:t,state:{}}}})},[i,t]);return(0,g.useEffect)(function(){r&&o()},[r,o]),(0,f.Y)(As.A,{})}function _W(e){var n,t,r,i,o,a=(n=e.isMultiplayerSession,r=(t=(0,p._)((0,g.useState)(!1),2))[0],i=t[1],o=(0,pT.qv)(),(0,g.useEffect)(function(){!o&&n&&"default"===vh()&&i(!0)},[n,o]),{shouldShowModal:r,hideModal:(0,g.useCallback)(function(){vy(!0),i(!1)},[]),confirm:(0,g.useCallback)((0,tw._)(function(){return(0,tb.YH)(this,function(e){switch(e.label){case 0:return[4,function(){return vm.apply(this,arguments)}()];case 1:return e.sent(),i(!1),[2]}})}),[])}),l=a.shouldShowModal,c=a.hideModal,u=a.confirm;return l?(0,f.Y)(AM,{onCancel:c,onConfirm:u}):null}function _j(e){var n,t,r,i,o,a,l,c=e.isBonsaiWebview,u=e.isWorkspaceTourActive,s=(n=rl(te),t=(0,ut.A)(),r=(0,dy.vm)(),i=(0,dy.d0)(),o=(r||i)&&t?mc.uF:0,a=(0,g.useRef)(null),l=(0,vs.A)(function(e){var t=e.width,r=e.height;if(t&&r&&a.current){var i=a.current.getBoundingClientRect(),l=i.top;n({width:t,height:r,x:i.left,y:l-o})}}),(0,g.useCallback)(function(e){a.current=e,l(e)},[l])),d=ro(nC),p=ro(eX),h=ro(e0),m=ro(e1),v=(0,g.useRef)(null),y=(0,Z.jt)(),w=(0,g.useCallback)(function(e){s(e),v.current=e},[s]);return(0,f.FD)(i4.S,{innerRef:w,clsx:_N().contentContainer,style:c?{height:"calc(100% - 4px)",top:6,bottom:0}:{height:"calc(100% - ".concat(mc.uF,"px)"),top:mc.uF},children:[d?(0,f.FD)(f.FK,{children:[(0,f.Y)(c5,{}),(0,f.FD)("main",{id:"main-content",clsx:_N().main,style:y?{animation:"none"}:void 0,children:[h.map(function(e){return(0,f.Y)(Sc,{handleId:e},e)}),m.map(function(e){return(0,f.Y)(yE,{headerId:e},e)}),p.map(function(e){return(0,f.Y)(vz,{paneId:e},e)}),0===p.length?(0,f.Y)(_U,{}):null]}),(0,f.Y)(rP,{}),(0,f.Y)(ou,{}),(0,f.Y)(vj,{}),(0,f.Y)(sC,{}),(0,f.Y)(AZ,{}),(0,f.Y)(cc.tz,{}),(0,f.Y)(_E,{isWorkspaceTourActive:u})]}):null,(0,f.Y)(Am,{})]})}var _$=t(14397),_Z=t(21862),_q=t(57881),_V=t(91165),_K=t(54339),_J=t(49591),_Q=t(22568),_X=t(31155),_0=t(78834),_1=t.n(_0);let _2=function(){var e,n,t,r=null,i=(0,h.useRouter)().query;if(!i.replUrl)throw Error("Expected replUrl to be set");if(!i.replId)throw Error("Expected replId to be set");var o=(0,p._)((0,H.t)(),2),a=(o[0],o[1]),l=i.replUrl.toString(),c=i.replId.toString(),u=(0,B.A)(c).loading,s=(e={variables:{replId:c,environment:(0,_V.v)(),platform:(0,_K.V)()},ssr:!!i.ssr},n=(0,m._)({},L,e),w.I(M,n)),d=s.data,v=s.loading,y=s.error,b=(0,N._P)({controlName:"flag-token-email-verification"}),x=(null==d?void 0:d.currentUser)||void 0,Y=(null==d?void 0:d.getRepl)&&("Repl"===d.getRepl.__typename||"ReplRedirect"===d.getRepl.__typename||"ReplSubscriptionExpired"===d.getRepl.__typename)?d.getRepl:null,S=(null==d?void 0:d.getRepl)&&"Repl"!==d.getRepl.__typename&&"ReplRedirect"!==d.getRepl.__typename&&"ReplSubscriptionExpired"!==d.getRepl.__typename?d.getRepl.message:null,A=(null==Y?void 0:Y.__typename)==="Repl"?Y:null,_="https://replit.com".concat(l),k=null!=(t=null==A?void 0:A.description)?t:void 0,C=null!=S?S:null==y?void 0:y.message,I=(0,p._)((0,g.useState)(!1),2),D=I[0],E=I[1];(0,g.useEffect)(function(){return E(!0)},[]);var R=b&&x&&!x.isVerified;return r=R?(0,f.Y)(i4.S,{clsx:_1().emailVerificationWrapper,grow:!0,shrink:!0,children:(0,f.Y)(G.A,{})}):C?(0,f.Y)(i4.S,{align:"center",justify:"center",grow:!0,shrink:!0,children:(0,f.Y)(ac.EY,{multiline:!1,children:"Something went wrong loading the Repl. Please reload the page and try again."})}):v||!D||a||u?(0,f.Y)(i4.S,{clsx:_1().loadingAnimationWrapper,grow:!0,shrink:!0,children:(0,f.Y)(_J.A,{height:100})}):A&&x?(0,f.Y)(_B,{repl:A,currentUser:x},A.id):(0,f.Y)(i4.S,{clsx:_1().loadingAnimationWrapper,grow:!0,shrink:!0,children:(0,f.Y)(_J.A,{height:100})}),(0,f.Y)(_Q.A,{children:(0,f.FD)(_X.A,{dataCy:"workspace-page",title:"".concat((null==A?void 0:A.title)||"Loading..."),oembedUrl:_,description:k,noHeader:!R,noMain:!R,noSidebar:!R,noFooter:!0,hideEmailVerify:!0,children:[(0,f.Y)(z.d,{}),(0,f.Y)(_q.A,{replResponse:Y,replUrl:l,children:(0,f.FD)(o3.ui,{clsx:_1().surface,children:[(0,f.Y)(_$.z,{}),(0,f.Y)(_Z.u,{}),r]})})]})})}},68188:e=>{e.exports={toolsListPopover:"AllToolsButton_toolsListPopover__HvH5A"}},70308:e=>{e.exports={root:"Layout_root__zbmnW","fade-in":"Layout_fade-in___4xKz",middle:"Layout_middle__CTNFw",enter:"Layout_enter__U3ed7",divider:"Layout_divider__K1Gu3",secondarySection:"Layout_secondarySection__QzsOI",primaryTools:"Layout_primaryTools__ynQG1",secondaryTools:"Layout_secondaryTools__xDqvE",secondaryToolsScroll:"Layout_secondaryToolsScroll__ZeWEF",fade:"Layout_fade__5GmrQ",fadeTop:"Layout_fadeTop__y79T3",fadeBottom:"Layout_fadeBottom__spqF7"}},75973:(e,n,t)=>{"use strict";t.d(n,{Q9:()=>f,_:()=>d,wp:()=>p});var r=t(81073),i=t(67313),o=(0,t(86105)._)(["workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website"]).concat(["100-days-of-python","100-days-of-python-promo","add-guest-new-user","agent-banner","agent-disclaimer","apps-announcement","appsOnboardingForkRepl","appsOnboardingRunRepl","appsOnboardingSelectRepl","april_2019_hiring","archive-cta","assignment_markdown","boosts-modal","bounties-home-module","bounties-services-tab","changelog-banner","classroom-repl-talk-ask-on-error","cleanup-popover-dismissed","codemirror-explorers-banner","create-model-solution","createWebsite","curriculum-launch-modal","custom-themes-banner","cycles-release","cycles-survey","dashboard_new_folder","dashboard_search","dashboard_templates","debugger_start","dec172020maintenance","deployment-analytics-dot","deployments-banner","deployments-mobile-download","deployments-synced-secrets","desktop-app-banner","desktop-app-nav-menu","devtools-intro","discount_hacker_18","discount_holiday_19","discount_newyear_19","downtime-073118","draw-new-user-cta","edfest-announcement","enveditorintro","file_tree","flexible-spend-announcement","follow-cursor-avatar-click","ghostwriter-banner","ghostwriter-chat-banner","ghostwriter-repl-resources-cta","ghostwriter-trial-repl-resources-cta","ghostwriter-trial-3-day-left-modal","ghostwriter-trial-banner","ghostwriter-trial-expired-modal","ghostwriter-post-purchase-tour","ghostwriter-existing-user-chat-beta-tour","grid_click","hacker_upgrade","hacker-gift","header-layout-tooltip","home","home-feed","home-onboarding-checklist","home-onboarding-checklist-apps","home-onboarding-checklist-learn","home-onboarding-checklist-repl","home-page-modules-tooltip","home-page-demo-repl-tour-suggestion","hosting_url","introduceYourself","js-4-day-challenge-day-1","js-4-day-challenge-day-2","js-4-day-challenge-day-3","js-4-day-challenge-day-4","js-4-day-challenge-day-end","july_2019_music_jam","july18_irl","landing","languagesInterestedIn","launch-modal","learn-onboarding","legacy-cycles-grant-notice","make_website","march_2019_game_jam","migrate-to-deployments-banner","migrated_unnamed_repls","mobile-app-banner","mobile-app-banner-web-update","mobile-announcement","mobile-new-workspace-banner","mobile-survey-banner-11042021","move_unnamed_repls","repricing-announcement","multiplayer","multiplayer_invite","multiplayer_welcome","new_in_repls","new_share","nft-world-2022","onboarding_connection_toast","onboarding_run","onboarding-simplify-experiment","packager-shell-hint","packman","prettier-formatter","product_hunt","profile-refresh-beta","profile2","projects-overview-cta","projects-overview-tests-disclaimer","publish-guidelines","repl_stars","repl-con-2022","repl-talk-update-2021","repl-talk-update-2022","replit-teams-onboarding-tour","resources-upgrade-modal","revisions_history","run_on_replit","saw_unnamed_folders","search","self-grouping-projects-cta","series-b-announcement","share_classroom","share_repl_to_talk","show_packager_about_tooltip","show_packager_import_tooltip","show_test_update_tooltip","stack-create-cta","stack-migration-cta","summer_hacker","summer-2021-pd-survey","teams_pro_module","teams-grading-survey","teams-pro-2022","template-jam-announcement","threads-2-announcement","upgrade_module","usage-migration-reserved-vms","usage-migration-power-ups-free-user","usage-migration-power-ups-core-user","workspace-always-on-user-reserved-deployments-announcement","workspace-assistant-auto-apply-changes","workspace-assistant-auto-restart-repl","workspace-assistant-intro-video","workspace-deployments-webview-banner","workspace-desktop-tour","workspace-desktop-tour19","workspace-experience-task-completion-survey-06022022","workspace-experience-task-completion-survey-nudge-06022022","workspace-guided-tour-data-app","workspace-guided-tour-portfolio-website","workspace-history-announcement","workspace-ssh-connect-to-vscode-config-tour","workspace-tools-databases-postgres-tour","workspace-repo-projects-tour","youtube-in-the-ws","themes-announcement","extensions-onboarding-checklist","extensions-onboarding-checklist-create","extensions-onboarding-checklist-concepts","extensions-onboarding-checklist-api","extensions-onboarding-checklist-publish","extensions-store-info","external-claim-privacy-warning","gcp-docs-landing-screen","trending-home-module","following-home-module","storage-announcement","pro-onboarding-tour","pro-trial-expired","pro-trial-hcaptcha-fail","pro-trial-enrollment","ai-code-completion","replit-ai-chat-onbording-10-2023","workspace-desktop-new-user-tour","workspace-desktop-tour-2024","workspace-bonsai-tour-2025","workspace-desktop-sidebar-tour","replit-core-banner","hosting-deployments-announcement-7-2023","teams-for-education-deprecation-12-2023","teams-for-education-verification-prompt","usage-based-billing-announcement-1-2024","port-nudges","mobileApp-themes-announcement","mobileApp-server-change-CTA","mobileApp-purchase-subscription-announcement","mobileApp-onboarding-education-announcement","mobileApp-teams-coming-soon-announcement","incident-20240219-action-required-banner","scheduled-deployments-banner","quick-start-guides","teams-projects-onboarding-card","onboarding-purchase-seen","replit-teams-banner","integrations-toast","starter-changes-announcement-aug-2024","private-deployments-banner","editors-have-secret-access-warning","workspace-right-sidebar-cta","assistant-now-defaulting-to-claude-3-5","org-roles-and-permissions-info-banner","onboarding-seen","teams-sponsorships-onboarding-card","agent-billing-notification-usage-page","agent-billing-notification-creation-entrypoint","agent-billing-creation-disclaimer","agent-billing-workspace-disclaimer","agent-billing-threshold-reached-warning","agent-billing-workspace-flex-credits-almost-reached","agent-billing-announcement","agent-billing-announcement-banner","drizzle-studio-announcement","freemium-agent-access-announcement","referral-program-banner","referral-pending-banner","post-verification-educational-upsell","invoice-threshold-change-announcement","agent-v2-welcome-modal","agent-v2-homepage-modal","agent-mobile-notification-nudge","visual-editor-callout","deterministic-edits-callout","bonsai-ws-agent-onboarding","viewer-seats-announcement","apps-private-by-default-announcement","agent-billing-v2-announcement","agent-billing-v2-home-banner","effort-based-pricing-announcement","dynamic-intelligence-modal"]),a=t(30908),l=t(17089),c=t(82839),u=t(11769),s=t(24140),d=function(e,n){return"".concat(e,"-tutorialChallenge-").concat(n)},p=function(e,n){var t,r=JSON.parse(a.A.get(d(e,n),"string")||"{}");if("string"==typeof r.tourName&&"string"==typeof r.url&&(t=r.tourName,o.includes(t)))return r},f=function(e){var n=e.challenge,t=o.find(function(e){return e.toString()===n.tourName})||"js-4-day-challenge-day-1",a=(0,c.g)(t),d=a.isDone,p=a.isLoading,f=a.setAsDone,h=(0,i.useRouter)();return p?null:(0,r.Y)(u.$n,{colorway:d?"primary":"positive",onClick:function(){f(),(0,l.u4)(l.AZ.TUTORIAL_DONE_BUTTON_COMPLETED),h.push("/~")},disabled:d,iconLeft:(0,r.Y)(s.A,{}),size:"big",text:d?"Challenge completed!":"Complete Challenge"})}},78834:e=>{e.exports={surface:"replEnvironmentDesktop_surface__18l0g",loadingAnimationWrapper:"replEnvironmentDesktop_loadingAnimationWrapper__upKsd",emailVerificationWrapper:"replEnvironmentDesktop_emailVerificationWrapper__KPi4v"}},80720:e=>{e.exports={root:"PlanningBadge_root__xmkd4"}},82825:(e,n,t)=>{"use strict";t.d(n,{P4:()=>h,Qs:()=>f,_L:()=>d});var r=t(17844),i=t(12584),o=t(41114),a=t(86997);function l(){var e=(0,i._)(["\n  fragment OrgReplCreator on User {\n    id\n    displayName\n    username\n    image\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  query UserSelectorSearch($orgId: String!, $searchInput: OrgMembersInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          members(input: $searchInput) {\n            __typename\n            ... on Error {\n              message\n            }\n            ... on OrgMemberConnection {\n              __typename\n              items {\n                member {\n                  id\n                  user {\n                    id\n                    ...OrgReplCreator\n                  }\n                }\n                type\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i._)(["\n  query UserSelectorGetUser($id: Int!) {\n    user(id: $id) {\n      id\n      ...OrgReplCreator\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,o.J1)(l()),p=(0,o.J1)(c(),d);function f(e){var n=(0,r._)({},s,e);return a.I(p,n)}var h=(0,o.J1)(u(),d)},83239:(e,n,t)=>{"use strict";t.d(n,{An:()=>_,PQ:()=>I,ce:()=>C,mC:()=>E});var r=t(17844),i=t(12584),o=t(41114),a=t(86997),l=t(16358),c=t(70883),u=t(97206),s=t(82825);function d(){var e=(0,i._)(["\n  fragment OrgReplMultiplayers on Repl {\n    multiplayers {\n      id\n      displayName\n      username\n      url\n      image\n      presenceStatus {\n        isOnline\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i._)(["\n  fragment OrgReplTemplateInfo on Repl {\n    templateInfo {\n      label\n      replId\n      iconUrl\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment OrgReplHostingDeployment on Repl {\n    hostingDeployment {\n      __typename\n      ... on HostingDeployment {\n        id\n        latestBuildStatus\n        currentBuild {\n          id\n          status\n          timeCreated\n          isPrivate\n          user {\n            id\n            displayName\n          }\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  fragment OrgReplOwner on Repl {\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n"]);return h=function(){return e},e}function g(){var e=(0,i._)(["\n  fragment OrgReplAuthorizations on Repl {\n    authorizations {\n      editFileContents {\n        isAuthorized\n        code\n        message\n      }\n      viewFileContents {\n        isAuthorized\n        code\n        message\n      }\n      connectToWorkspace {\n        isAuthorized\n        code\n        message\n      }\n      deleteRepl {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n        code\n        message\n      }\n    }\n  }\n"]);return g=function(){return e},e}function m(){var e=(0,i._)(["\n  fragment OrgReplListRepl on Repl {\n    __typename\n    id\n    title\n    timeCreated\n    timeUpdated\n    imageUrl\n    iconUrl\n    wasPublished\n    isOwner\n    org {\n      id\n    }\n    project {\n      id\n      title\n    }\n    user {\n      id\n      ...OrgReplCreator\n    }\n    ...ReplLinkRepl\n    ...OrgReplMultiplayers\n    ...OrgReplTemplateInfo\n    ...OrgReplHostingDeployment\n    ...OrgReplOwner\n    ...OrgReplAuthorizations\n    ...ComponentsReplActions\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  fragment OrgReplsResult on ReplConnection {\n    items {\n      ...OrgReplListRepl\n    }\n    pageInfo {\n      hasPreviousPage\n      previousCursor\n      hasNextPage\n      nextCursor\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function y(){var e=(0,i._)(["\n  fragment OrgReplManagement on Org {\n    ...OrgMetadata\n    authorizations {\n      createPublicRepl: createRepl(private: false) {\n        isAuthorized\n        message\n      }\n      createPrivateRepl: createRepl(private: true) {\n        isAuthorized\n        message\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function w(){var e=(0,i._)(["\n  query OrgRepls($orgId: String!, $replsInput: OrgReplsInput!) {\n    currentUser {\n      __typename\n      id\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgReplManagement\n          repls(input: $replsInput) {\n            __typename\n            ... on ReplConnection {\n              ...OrgReplsResult\n            }\n            ... on UserError {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return w=function(){return e},e}var b={},x=(0,o.J1)(d()),Y=(0,o.J1)(p()),S=(0,o.J1)(f()),A=(0,o.J1)(h()),_=(0,o.J1)(g()),k=(0,o.J1)(m(),s._L,c.r,x,Y,S,A,_,l.X),C=(0,o.J1)(v(),k),I=(0,o.J1)(y(),u.wW),D=(0,o.J1)(w(),I,C);function E(e){var n=(0,r._)({},b,e);return a.I(D,n)}},84282:e=>{var n=1/0,t=0/0,r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=/^(?:0|[1-9]\d*)$/,c=parseFloat,u=parseInt,s=Object.prototype.toString,d=Math.floor,p=Math.min,f=Math.random;function h(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function g(e){return e?(e=function(e){if("number"==typeof e)return e;if("symbol"==typeof(n=e)||n&&"object"==typeof n&&"[object Symbol]"==s.call(n))return t;if(h(e)){var n,l="function"==typeof e.valueOf?e.valueOf():e;e=h(l)?l+"":l}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var c=o.test(e);return c||a.test(e)?u(e.slice(2),c?2:8):i.test(e)?t:+e}(e))===n||e===-n?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}e.exports=function(e,n,t){if(t&&"boolean"!=typeof t&&function(e,n,t){if(!h(t))return!1;var r,i,o,a,c,u,d,p=typeof n;return("number"==p?!!(null!=(r=t)&&"number"==typeof(i=r.length)&&i>-1&&i%1==0&&i<=0x1fffffffffffff&&"[object Function]"!=(a=h(o=r)?s.call(o):"")&&"[object GeneratorFunction]"!=a&&(d=null==(d=t.length)?0x1fffffffffffff:d)&&("number"==typeof n||l.test(n))&&n>-1&&n%1==0&&n<d):"string"==p&&n in t)&&(c=t[n],c===(u=e)||c!=c&&u!=u)}(e,n,t)&&(n=t=void 0),void 0===t&&("boolean"==typeof n?(t=n,n=void 0):"boolean"==typeof e&&(t=e,e=void 0)),void 0===e&&void 0===n?(e=0,n=1):(e=g(e),void 0===n?(n=e,e=0):n=g(n)),e>n){var r,i,o=e;e=n,n=o}if(t||e%1||n%1){var a=f();return p(e+a*(n-e+c("1e-"+((a+"").length-1))),n)}return r=e,i=n,r+d(f()*(i-r+1))}},89469:e=>{e.exports={importButtonContainer:"FigmaImportForm_importButtonContainer__wEqpP",limitMeter:"FigmaImportForm_limitMeter__U_gFJ",input:"FigmaImportForm_input__hx_c9",container:"FigmaImportForm_container__ZGfRZ",divider:"FigmaImportForm_divider__POsUX"}},95418:(e,n,t)=>{"use strict";t.d(n,{A:()=>u});var r=t(81073),i=t(18509),o=t(27023),a=t(85389),l=t(63456),c=(0,i.x)({container:[o.wp.width("100%"),o.wp.height(200),o.wp.center]});let u=function(){return(0,r.Y)(a.S,{css:c.container,children:(0,r.Y)(l.A,{size:24})})}},96207:e=>{e.exports={contentContainer:"Workspace_contentContainer__DubhE",main:"Workspace_main__kdQYh","fade-in":"Workspace_fade-in__b0i2b"}},96768:(e,n,t)=>{"use strict";t.d(n,{A:()=>g});var r=t(12694),i=t(81073),o=t(21462),a=t(99528),l=t(49003),c=t(34140),u=t(58770),s=t(42793),d=t(36937),p=t(27023),f=t(85389),h=(0,s.AH)(p.wp.dragRegion);function g(){var e,n,t,s,p,g,m,v,y=(0,u.vm)(),w=(0,c.A)(),b=(e=(0,c.A)(),t=(n=(0,r._)((0,o.useState)(!1),2))[0],s=n[1],(0,o.useEffect)(function(){if(e)return s(document.hasFocus()),a.M.onFocusChanged(s)},[e]),t),x=(p=(0,c.A)(),m=(g=(0,r._)((0,o.useState)(!1),2))[0],v=g[1],(0,o.useEffect)(function(){if(p)return a.M.onFullScreenChanged(v)},[p]),m);return y&&w&&!x?(0,i.Y)(f.S,{css:h,children:(0,i.Y)("svg",{width:l.Cp,height:l.GB-16,children:b?null:(0,i.FD)(i.FK,{children:[(0,i.Y)("circle",{cx:19,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,i.Y)("circle",{cx:39,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1}),(0,i.Y)("circle",{cx:59,cy:16,r:5,fill:"none",stroke:d.LU.outlineDefault,strokeWidth:1})]})})}):null}},97206:(e,n,t)=>{"use strict";t.d(n,{rh:()=>c,wW:()=>u});var r=t(12584),i=t(41114);function o(){var e=(0,r._)(["\n  fragment OrgCurrentUser on CurrentUser {\n    id\n    displayName\n    username\n  }\n"]);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment OrgMetadata on Org {\n    id\n    slug\n    type\n    name\n    image\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  query OrgMetadata($orgId: String!) {\n    currentUser {\n      __typename\n      ...OrgCurrentUser\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          ...OrgMetadata\n        }\n        ... on NotFoundError {\n          message\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return l=function(){return e},e}var c=(0,i.J1)(o()),u=(0,i.J1)(a());l()}},e=>{var n=n=>e(e.s=n);e.O(0,[4017,7433,3451,467,3214,8185,7573,2252,4894,2032,2647,7742,7626,7368,6677,8264,8508,1963,3341,4611,4357,4550,3030,6549,4739,4254,7606,1650,2656,9119,113,3920,6822,3025,1701,2936,4428,9288,259,1404,8313,3630,3049,3171,1155,4374,645,4639,4068,9968,5578,8830,9303,692,5701,6955,3800,3651,2485,4676,5945,2911,6362,7627,1644,3e3,3837,867,6593,636,8792],()=>n(51045)),_N_E=e.O()}]);
//# sourceMappingURL=replEnvironmentDesktop-51566a9e388406da.js.map